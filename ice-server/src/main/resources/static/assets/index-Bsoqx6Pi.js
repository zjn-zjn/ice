import{a4 as Ve,a5 as U,f as Se,a6 as me,a0 as Ht,K as Ki,_ as we,X as fe,an as ql,$ as ar,k as St,Y as ja,W as Pn,Z as ht,r as v,C as zn,g as Ns,m as qi,x as de,at as Zl,c as is,v as Ql,aC as Jl,V as Ts,J as eh,n as rs,av as th,G as On,aD as Fn,aE as gn,aF as nh,B as et,w as Bt,aG as ih,a as gt,al as rh,ag as Ds,as as sh,aq as ah,aH as oh,az as Zi,d as lh,t as ra,o as hh,s as ch,q as dh,p as uh,aw as fh,aI as ph,I as $n,a2 as Ua,z as Ga,S as Xa,Q as Ka,aJ as qa,E as Za,aK as Qa,aL as mh,ax as Ja,N as eo,T as Rt,j as B,aB as gh}from "./index-C8mY7XMw.js";import{p as or,c as vh,n as xh,o as yh,q as wh,i as Ch,r as Eh,t as Mh,B as Xt,v as to,j as Rs,w as no,x as io,g as ro,y as so,l as bh,F as $e,u as ao,a as Kt,M as Qi,I as ti,s as _t}from "./useRequest-C2U2gPJa.js";import{d as dt,f as _h,h as Sh,i as sa,j as Nh,k as Th,l as Dh,b as aa,a as Tn,c as ss,S as oo,I as Rh,e as Ih}from "./import-modal-BkipsIZ8.js";var lo=Ve.forwardRef(function(n, e){var t=n.prefixCls,i=n.forceRender,r=n.className,s=n.style,a=n.children,o=n.isActive,l=n.role,h=n.classNames,c=n.styles,d=Ve.useState(o||i),f=U(d,2),m=f[0],u=f[1];return Ve.useEffect(function(){(i||o)&&u(!0)},[i,o]),m?Ve.createElement("div",{ref:e,className:Se("".concat(t,"-content"),me(me({},"".concat(t,"-content-active"),o),"".concat(t,"-content-inactive"),!o),r),style:s,role:l},Ve.createElement("div",{className:Se("".concat(t,"-content-box"),h==null?void 0:h.body),style:c==null?void 0:c.body},a)):null});lo.displayName="PanelContent";var Lh=["showArrow","headerClass","isActive","onItemClick","forceRender","className","classNames","styles","prefixCls","collapsible","accordion","panelKey","extra","header","expandIcon","openMotion","destroyInactivePanel","children"],ho=Ve.forwardRef(function(n, e){var t=n.showArrow,i=t===void 0?!0:t,r=n.headerClass,s=n.isActive,a=n.onItemClick,o=n.forceRender,l=n.className,h=n.classNames,c=h===void 0?{}:h,d=n.styles,f=d===void 0?{}:d,m=n.prefixCls,u=n.collapsible,g=n.accordion,p=n.panelKey,x=n.extra,w=n.header,y=n.expandIcon,C=n.openMotion,E=n.destroyInactivePanel,M=n.children,b=Ht(n,Lh),N=u==="disabled",S=x!=null&&typeof x!="boolean",_=me(me(me({onClick:function(){a==null||a(p)},onKeyDown:function(P){(P.key==="Enter"||P.keyCode===Ki.ENTER||P.which===Ki.ENTER)&&(a==null||a(p))},role:g?"tab":"button"},"aria-expanded",s),"aria-disabled",N),"tabIndex",N?-1:0),R=typeof y=="function"?y(n):Ve.createElement("i",{className:"arrow"}),O=R&&Ve.createElement("div",we({className:"".concat(m,"-expand-icon")},["header","icon"].includes(u)?_:{}),R),I=Se("".concat(m,"-item"),me(me({},"".concat(m,"-item-active"),s),"".concat(m,"-item-disabled"),N),l),A=Se(r,"".concat(m,"-header"),me({},"".concat(m,"-collapsible-").concat(u),!!u),c.header),D=fe({className:A,style:f.header},["header","icon"].includes(u)?{}:_);return Ve.createElement("div",we({},b,{ref:e,className:I}),Ve.createElement("div",D,i&&O,Ve.createElement("span",we({className:"".concat(m,"-header-text")},u==="header"?_:{}),w),S&&Ve.createElement("div",{className:"".concat(m,"-extra")},x)),Ve.createElement(ql,we({visible:s,leavedClassName:"".concat(m,"-content-hidden")},C,{forceRender:o,removeOnLeave:E}),function(L, P){var z=L.className,H=L.style;return Ve.createElement(lo,{ref:P,prefixCls:m,className:z,classNames:c,style:H,styles:f,isActive:s,forceRender:o,role:g?"tabpanel":void 0},M)}))}),Oh=["children","label","key","collapsible","onItemClick","destroyInactivePanel"],Ah=function(e, t){var i=t.prefixCls,r=t.accordion,s=t.collapsible,a=t.destroyInactivePanel,o=t.onItemClick,l=t.activeKey,h=t.openMotion,c=t.expandIcon;return e.map(function(d, f){var m=d.children,u=d.label,g=d.key,p=d.collapsible,x=d.onItemClick,w=d.destroyInactivePanel,y=Ht(d,Oh),C=String(g??f),E=p??s,M=w??a,b=function(_){E!=="disabled"&&(o(_),x==null||x(_))},N=!1;return r?N=l[0]===C:N=l.indexOf(C)>-1,Ve.createElement(ho,we({},y,{prefixCls:i,key:C,panelKey:C,isActive:N,accordion:r,openMotion:h,expandIcon:c,header:u,collapsible:E,onItemClick:b,destroyInactivePanel:M}),m)})},kh=function(e, t, i){if(!e)return null;var r=i.prefixCls,s=i.accordion,a=i.collapsible,o=i.destroyInactivePanel,l=i.onItemClick,h=i.activeKey,c=i.openMotion,d=i.expandIcon,f=e.key||String(t),m=e.props,u=m.header,g=m.headerClass,p=m.destroyInactivePanel,x=m.collapsible,w=m.onItemClick,y=!1;s?y=h[0]===f:y=h.indexOf(f)>-1;var C=x??a,E=function(N){C!=="disabled"&&(l(N),w==null||w(N))},M={key:f,panelKey:f,header:u,headerClass:g,isActive:y,prefixCls:r,destroyInactivePanel:p??o,openMotion:c,accordion:s,children:e.props.children,onItemClick:E,expandIcon:d,collapsible:C};return typeof e.type=="string"?e:(Object.keys(M).forEach(function(b){typeof M[b]>"u"&&delete M[b]}),Ve.cloneElement(e,M))};function Ph(n, e, t){return Array.isArray(n)?Ah(n,t):ar(e).map(function(i, r){return kh(i,r,t)})}function zh(n){var e=n;if(!Array.isArray(e)){var t=Pn(e);e=t==="number"||t==="string"?[e]:[]}return e.map(function(i){return String(i)})}var Fh=Ve.forwardRef(function(n, e){var t=n.prefixCls,i=t===void 0?"rc-collapse":t,r=n.destroyInactivePanel,s=r===void 0?!1:r,a=n.style,o=n.accordion,l=n.className,h=n.children,c=n.collapsible,d=n.openMotion,f=n.expandIcon,m=n.activeKey,u=n.defaultActiveKey,g=n.onChange,p=n.items,x=Se(i,l),w=St([],{value:m,onChange:function(S){return g==null?void 0:g(S)},defaultValue:u,postState:zh}),y=U(w,2),C=y[0],E=y[1],M=function(S){return E(function(){if(o)return C[0]===S?[]:[S];var _=C.indexOf(S),R=_>-1;return R?C.filter(function(O){return O!==S}):[].concat(ht(C),[S])})};ja(!h,"[rc-collapse] `children` will be removed in next major version. Please use `items` instead.");var b=Ph(p,h,{prefixCls:i,accordion:o,openMotion:d,expandIcon:f,collapsible:c,destroyInactivePanel:s,onItemClick:M,activeKey:C});return Ve.createElement("div",we({ref:e,className:x,style:a,role:o?"tablist":void 0},or(n,{aria:!0,data:!0})),b)});const Is=Object.assign(Fh,{Panel:ho});Is.Panel;const $h=v.forwardRef((n, e)=>{const{getPrefixCls:t}=v.useContext(zn),{prefixCls:i,className:r,showArrow:s=!0}=n,a=t("collapse",i),o=Se({[`${a}-no-arrow`]:!s},r);return v.createElement(Is.Panel,Object.assign({ref:e},n,{prefixCls:a,className:o}))}),Hh= n=>{const{componentCls:e,contentBg:t,padding:i,headerBg:r,headerPadding:s,collapseHeaderPaddingSM:a,collapseHeaderPaddingLG:o,collapsePanelBorderRadius:l,lineWidth:h,lineType:c,colorBorder:d,colorText:f,colorTextHeading:m,colorTextDisabled:u,fontSizeLG:g,lineHeight:p,lineHeightLG:x,marginSM:w,paddingSM:y,paddingLG:C,paddingXS:E,motionDurationSlow:M,fontSizeIcon:b,contentPadding:N,fontHeight:S,fontHeightLG:_}=n,R=`${de(h)} ${c} ${d}`;return{[e]:Object.assign(Object.assign({},is(n)),{backgroundColor:r,border:R,borderRadius:l,"&-rtl":{direction:"rtl"},[`& > ${e}-item`]:{borderBottom:R,"&:first-child":{[`
            &,
            & > ${e}-header`]:{borderRadius:`${de(l)} ${de(l)} 0 0`}},"&:last-child":{[`
            &,
            & > ${e}-header`]:{borderRadius:`0 0 ${de(l)} ${de(l)}`}},[`> ${e}-header`]:Object.assign(Object.assign({position:"relative",display:"flex",flexWrap:"nowrap",alignItems:"flex-start",padding:s,color:m,lineHeight:p,cursor:"pointer",transition:`all ${M}, visibility 0s`},Ql(n)),{[`> ${e}-header-text`]:{flex:"auto"},[`${e}-expand-icon`]:{height:S,display:"flex",alignItems:"center",paddingInlineEnd:w},[`${e}-arrow`]:Object.assign(Object.assign({},Jl()),{fontSize:b,transition:`transform ${M}`,svg:{transition:`transform ${M}`}}),[`${e}-header-text`]:{marginInlineEnd:"auto"}}),[`${e}-collapsible-header`]:{cursor:"default",[`${e}-header-text`]:{flex:"none",cursor:"pointer"}},[`${e}-collapsible-icon`]:{cursor:"unset",[`${e}-expand-icon`]:{cursor:"pointer"}}},[`${e}-content`]:{color:f,backgroundColor:t,borderTop:R,[`& > ${e}-content-box`]:{padding:N},"&-hidden":{display:"none"}},"&-small":{[`> ${e}-item`]:{[`> ${e}-header`]:{padding:a,paddingInlineStart:E,[`> ${e}-expand-icon`]:{marginInlineStart:n.calc(y).sub(E).equal()}},[`> ${e}-content > ${e}-content-box`]:{padding:y}}},"&-large":{[`> ${e}-item`]:{fontSize:g,lineHeight:x,[`> ${e}-header`]:{padding:o,paddingInlineStart:i,[`> ${e}-expand-icon`]:{height:_,marginInlineStart:n.calc(C).sub(i).equal()}},[`> ${e}-content > ${e}-content-box`]:{padding:C}}},[`${e}-item:last-child`]:{borderBottom:0,[`> ${e}-content`]:{borderRadius:`0 0 ${de(l)} ${de(l)}`}},[`& ${e}-item-disabled > ${e}-header`]:{"\n          &,\n          & > .arrow\n        ":{color:u,cursor:"not-allowed"}},[`&${e}-icon-position-end`]:{[`& > ${e}-item`]:{[`> ${e}-header`]:{[`${e}-expand-icon`]:{order:1,paddingInlineEnd:0,paddingInlineStart:w}}}}})}},Bh=n=>{const{componentCls:e}=n,t=`> ${e}-item > ${e}-header ${e}-arrow`;return{[`${e}-rtl`]:{[t]:{transform:"rotate(180deg)"}}}},Yh=n=>{const{componentCls:e,headerBg:t,paddingXXS:i,colorBorder:r}=n;return{[`${e}-borderless`]:{backgroundColor:t,border:0,[`> ${e}-item`]:{borderBottom:`1px solid ${r}`},[`
        > ${e}-item:last-child,
        > ${e}-item:last-child ${e}-header
      `]:{borderRadius:0},[`> ${e}-item:last-child`]:{borderBottom:0},[`> ${e}-item > ${e}-content`]:{backgroundColor:"transparent",borderTop:0},[`> ${e}-item > ${e}-content > ${e}-content-box`]:{paddingTop:i}}}},Wh=n=>{const{componentCls:e,paddingSM:t}=n;return{[`${e}-ghost`]:{backgroundColor:"transparent",border:0,[`> ${e}-item`]:{borderBottom:0,[`> ${e}-content`]:{backgroundColor:"transparent",border:0,[`> ${e}-content-box`]:{paddingBlock:t}}}}}},Vh=n=>({headerPadding:`${n.paddingSM}px ${n.padding}px`,headerBg:n.colorFillAlter,contentPadding:`${n.padding}px 16px`,contentBg:n.colorBgContainer}),jh=Ns("Collapse",n=>{const e=qi(n,{collapseHeaderPaddingSM:`${de(n.paddingXS)} ${de(n.paddingSM)}`,collapseHeaderPaddingLG:`${de(n.padding)} ${de(n.paddingLG)}`,collapsePanelBorderRadius:n.borderRadiusLG});return[Hh(e),Yh(e),Wh(e),Bh(e),Zl(e)]},Vh),Uh=v.forwardRef((n,e)=>{const{getPrefixCls:t,direction:i,collapse:r}=v.useContext(zn),{prefixCls:s,className:a,rootClassName:o,style:l,bordered:h=!0,ghost:c,size:d,expandIconPosition:f="start",children:m,expandIcon:u}=n,g=Ts(R=>{var O;return(O=d??R)!==null&&O!==void 0?O:"middle"}),p=t("collapse",s),x=t(),[w,y,C]=jh(p),E=v.useMemo(()=>f==="left"?"start":f==="right"?"end":f,[f]),M=u??(r==null?void 0:r.expandIcon),b=v.useCallback(function(){let R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const O=typeof M=="function"?M(R):v.createElement(eh,{rotate:R.isActive?i==="rtl"?-90:90:void 0,"aria-label":R.isActive?"expanded":"collapsed"});return rs(O,()=>{var I;return{className:Se((I=O==null?void 0:O.props)===null||I===void 0?void 0:I.className,`${p}-arrow`)}})},[M,p]),N=Se(`${p}-icon-position-${E}`,{[`${p}-borderless`]:!h,[`${p}-rtl`]:i==="rtl",[`${p}-ghost`]:!!c,[`${p}-${g}`]:g!=="middle"},r==null?void 0:r.className,a,o,y,C),S=Object.assign(Object.assign({},th(x)),{motionAppear:!1,leavedClassName:`${p}-content-hidden`}),_=v.useMemo(()=>m?ar(m).map((R,O)=>{var I,A;const D=R.props;if(D!=null&&D.disabled){const L=(I=R.key)!==null&&I!==void 0?I:String(O),P=Object.assign(Object.assign({},On(R.props,["disabled"])),{key:L,collapsible:(A=D.collapsible)!==null&&A!==void 0?A:"disabled"});return rs(R,P)}return R}):null,[m]);return w(v.createElement(Is,Object.assign({ref:e,openMotion:S},On(n,["rootClassName"]),{expandIcon:b,prefixCls:p,className:N,style:Object.assign(Object.assign({},r==null?void 0:r.style),l)}),_))}),co=Object.assign(Uh,{Panel:$h});var uo={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(Fn,function(){return function(t,i){i.prototype.weekday=function(r){var s=this.$locale().weekStart||0,a=this.$W,o=(a<s?a+7:a)-s;return this.$utils().u(r)?o:this.subtract(o,"day").add(r,"day")}}})})(uo);var Gh=uo.exports;const Xh=gn(Gh);var fo={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(Fn,function(){return function(t,i,r){var s=i.prototype,a=function(d){return d&&(d.indexOf?d:d.s)},o=function(d,f,m,u,g){var p=d.name?d:d.$locale(),x=a(p[f]),w=a(p[m]),y=x||w.map(function(E){return E.slice(0,u)});if(!g)return y;var C=p.weekStart;return y.map(function(E,M){return y[(M+(C||0))%7]})},l=function(){return r.Ls[r.locale()]},h=function(d,f){return d.formats[f]||function(m){return m.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(u,g,p){return g||p.slice(1)})}(d.formats[f.toUpperCase()])},c=function(){var d=this;return{months:function(f){return f?f.format("MMMM"):o(d,"months")},monthsShort:function(f){return f?f.format("MMM"):o(d,"monthsShort","months",3)},firstDayOfWeek:function(){return d.$locale().weekStart||0},weekdays:function(f){return f?f.format("dddd"):o(d,"weekdays")},weekdaysMin:function(f){return f?f.format("dd"):o(d,"weekdaysMin","weekdays",2)},weekdaysShort:function(f){return f?f.format("ddd"):o(d,"weekdaysShort","weekdays",3)},longDateFormat:function(f){return h(d.$locale(),f)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};s.localeData=function(){return c.bind(this)()},r.localeData=function(){var d=l();return{firstDayOfWeek:function(){return d.weekStart||0},weekdays:function(){return r.weekdays()},weekdaysShort:function(){return r.weekdaysShort()},weekdaysMin:function(){return r.weekdaysMin()},months:function(){return r.months()},monthsShort:function(){return r.monthsShort()},longDateFormat:function(f){return h(d,f)},meridiem:d.meridiem,ordinal:d.ordinal}},r.months=function(){return o(l(),"months")},r.monthsShort=function(){return o(l(),"monthsShort","months",3)},r.weekdays=function(d){return o(l(),"weekdays",null,null,d)},r.weekdaysShort=function(d){return o(l(),"weekdaysShort","weekdays",3,d)},r.weekdaysMin=function(d){return o(l(),"weekdaysMin","weekdays",2,d)}}})})(fo);var Kh=fo.exports;const qh=gn(Kh);var po={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(Fn,function(){var t="week",i="year";return function(r,s,a){var o=s.prototype;o.week=function(l){if(l===void 0&&(l=null),l!==null)return this.add(7*(l-this.week()),"day");var h=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var c=a(this).startOf(i).add(1,i).date(h),d=a(this).endOf(t);if(c.isBefore(d))return 1}var f=a(this).startOf(i).date(h).startOf(t).subtract(1,"millisecond"),m=this.diff(f,t,!0);return m<0?a(this).startOf("week").week():Math.ceil(m)},o.weeks=function(l){return l===void 0&&(l=null),this.week(l)}}})})(po);var Zh=po.exports;const Qh=gn(Zh);var mo={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(Fn,function(){return function(t,i){i.prototype.weekYear=function(){var r=this.month(),s=this.week(),a=this.year();return s===1&&r===11?a+1:r===0&&s>=52?a-1:a}}})})(mo);var Jh=mo.exports;const ec=gn(Jh);var go={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(Fn,function(){return function(t,i){var r=i.prototype,s=r.format;r.format=function(a){var o=this,l=this.$locale();if(!this.isValid())return s.bind(this)(a);var h=this.$utils(),c=(a||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(d){switch(d){case"Q":return Math.ceil((o.$M+1)/3);case"Do":return l.ordinal(o.$D);case"gggg":return o.weekYear();case"GGGG":return o.isoWeekYear();case"wo":return l.ordinal(o.week(),"W");case"w":case"ww":return h.s(o.week(),d==="w"?1:2,"0");case"W":case"WW":return h.s(o.isoWeek(),d==="W"?1:2,"0");case"k":case"kk":return h.s(String(o.$H===0?24:o.$H),d==="k"?1:2,"0");case"X":return Math.floor(o.$d.getTime()/1e3);case"x":return o.$d.getTime();case"z":return"["+o.offsetName()+"]";case"zzz":return"["+o.offsetName("long")+"]";default:return d}});return s.bind(this)(c)}}})})(go);var tc=go.exports;const nc=gn(tc);var vo={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(Fn,function(){var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},i=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d/,s=/\d\d/,a=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,l={},h=function(p){return(p=+p)+(p>68?1900:2e3)},c=function(p){return function(x){this[p]=+x}},d=[/[+-]\d\d:?(\d\d)?|Z/,function(p){(this.zone||(this.zone={})).offset=function(x){if(!x||x==="Z")return 0;var w=x.match(/([+-]|\d\d)/g),y=60*w[1]+(+w[2]||0);return y===0?0:w[0]==="+"?-y:y}(p)}],f=function(p){var x=l[p];return x&&(x.indexOf?x:x.s.concat(x.f))},m=function(p,x){var w,y=l.meridiem;if(y){for(var C=1;C<=24;C+=1)if(p.indexOf(y(C,0,x))>-1){w=C>12;break}}else w=p===(x?"pm":"PM");return w},u={A:[o,function(p){this.afternoon=m(p,!1)}],a:[o,function(p){this.afternoon=m(p,!0)}],Q:[r,function(p){this.month=3*(p-1)+1}],S:[r,function(p){this.milliseconds=100*+p}],SS:[s,function(p){this.milliseconds=10*+p}],SSS:[/\d{3}/,function(p){this.milliseconds=+p}],s:[a,c("seconds")],ss:[a,c("seconds")],m:[a,c("minutes")],mm:[a,c("minutes")],H:[a,c("hours")],h:[a,c("hours")],HH:[a,c("hours")],hh:[a,c("hours")],D:[a,c("day")],DD:[s,c("day")],Do:[o,function(p){var x=l.ordinal,w=p.match(/\d+/);if(this.day=w[0],x)for(var y=1;y<=31;y+=1)x(y).replace(/\[|\]/g,"")===p&&(this.day=y)}],w:[a,c("week")],ww:[s,c("week")],M:[a,c("month")],MM:[s,c("month")],MMM:[o,function(p){var x=f("months"),w=(f("monthsShort")||x.map(function(y){return y.slice(0,3)})).indexOf(p)+1;if(w<1)throw new Error;this.month=w%12||w}],MMMM:[o,function(p){var x=f("months").indexOf(p)+1;if(x<1)throw new Error;this.month=x%12||x}],Y:[/[+-]?\d+/,c("year")],YY:[s,function(p){this.year=h(p)}],YYYY:[/\d{4}/,c("year")],Z:d,ZZ:d};function g(p){var x,w;x=p,w=l&&l.formats;for(var y=(p=x.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(_,R,O){var I=O&&O.toUpperCase();return R||w[O]||t[O]||w[I].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(A,D,L){return D||L.slice(1)})})).match(i),C=y.length,E=0;E<C;E+=1){var M=y[E],b=u[M],N=b&&b[0],S=b&&b[1];y[E]=S?{regex:N,parser:S}:M.replace(/^\[|\]$/g,"")}return function(_){for(var R={},O=0,I=0;O<C;O+=1){var A=y[O];if(typeof A=="string")I+=A.length;else{var D=A.regex,L=A.parser,P=_.slice(I),z=D.exec(P)[0];L.call(R,z),_=_.replace(z,"")}}return function(H){var Y=H.afternoon;if(Y!==void 0){var $=H.hours;Y?$<12&&(H.hours+=12):$===12&&(H.hours=0),delete H.afternoon}}(R),R}}return function(p,x,w){w.p.customParseFormat=!0,p&&p.parseTwoDigitYear&&(h=p.parseTwoDigitYear);var y=x.prototype,C=y.parse;y.parse=function(E){var M=E.date,b=E.utc,N=E.args;this.$u=b;var S=N[1];if(typeof S=="string"){var _=N[2]===!0,R=N[3]===!0,O=_||R,I=N[2];R&&(I=N[2]),l=this.$locale(),!_&&I&&(l=w.Ls[I]),this.$d=function(P,z,H,Y){try{if(["x","X"].indexOf(z)>-1)return new Date((z==="X"?1e3:1)*P);var $=g(z)(P),k=$.year,W=$.month,j=$.day,re=$.hours,J=$.minutes,G=$.seconds,ee=$.milliseconds,oe=$.zone,se=$.week,K=new Date,ie=j||(k||W?1:K.getDate()),Q=k||K.getFullYear(),X=0;k&&!W||(X=W>0?W-1:K.getMonth());var te,ae=re||0,q=J||0,le=G||0,Ce=ee||0;return oe?new Date(Date.UTC(Q,X,ie,ae,q,le,Ce+60*oe.offset*1e3)):H?new Date(Date.UTC(Q,X,ie,ae,q,le,Ce)):(te=new Date(Q,X,ie,ae,q,le,Ce),se&&(te=Y(te).week(se).toDate()),te)}catch{return new Date("")}}(M,S,b,w),this.init(),I&&I!==!0&&(this.$L=this.locale(I).$L),O&&M!=this.format(S)&&(this.$d=new Date("")),l={}}else if(S instanceof Array)for(var A=S.length,D=1;D<=A;D+=1){N[1]=S[D-1];var L=w.apply(this,N);if(L.isValid()){this.$d=L.$d,this.$L=L.$L,this.init();break}D===A&&(this.$d=new Date(""))}else C.call(this,E)}}})})(vo);var ic=vo.exports;const rc=gn(ic);dt.extend(rc);dt.extend(nc);dt.extend(Xh);dt.extend(qh);dt.extend(Qh);dt.extend(ec);dt.extend(function(n,e){var t=e.prototype,i=t.format;t.format=function(s){var a=(s||"").replace("Wo","wo");return i.bind(this)(a)}});var sc={bn_BD:"bn-bd",by_BY:"be",en_GB:"en-gb",en_US:"en",fr_BE:"fr",fr_CA:"fr-ca",hy_AM:"hy-am",kmr_IQ:"ku",nl_BE:"nl-be",pt_BR:"pt-br",zh_CN:"zh-cn",zh_HK:"zh-hk",zh_TW:"zh-tw"},an=function(e){var t=sc[e];return t||e.split("_")[0]},ac={getNow:function(){var e=dt();return typeof e.tz=="function"?e.tz():e},getFixedDate:function(e){return dt(e,["YYYY-M-DD","YYYY-MM-DD"])},getEndDate:function(e){return e.endOf("month")},getWeekDay:function(e){var t=e.locale("en");return t.weekday()+t.localeData().firstDayOfWeek()},getYear:function(e){return e.year()},getMonth:function(e){return e.month()},getDate:function(e){return e.date()},getHour:function(e){return e.hour()},getMinute:function(e){return e.minute()},getSecond:function(e){return e.second()},getMillisecond:function(e){return e.millisecond()},addYear:function(e,t){return e.add(t,"year")},addMonth:function(e,t){return e.add(t,"month")},addDate:function(e,t){return e.add(t,"day")},setYear:function(e,t){return e.year(t)},setMonth:function(e,t){return e.month(t)},setDate:function(e,t){return e.date(t)},setHour:function(e,t){return e.hour(t)},setMinute:function(e,t){return e.minute(t)},setSecond:function(e,t){return e.second(t)},setMillisecond:function(e,t){return e.millisecond(t)},isAfter:function(e,t){return e.isAfter(t)},isValidate:function(e){return e.isValid()},locale:{getWeekFirstDay:function(e){return dt().locale(an(e)).localeData().firstDayOfWeek()},getWeekFirstDate:function(e,t){return t.locale(an(e)).weekday(0)},getWeek:function(e,t){return t.locale(an(e)).week()},getShortWeekDays:function(e){return dt().locale(an(e)).localeData().weekdaysMin()},getShortMonths:function(e){return dt().locale(an(e)).localeData().monthsShort()},format:function(e,t,i){return t.locale(an(e)).format(i)},parse:function(e,t,i){for(var r=an(e),s=0;s<i.length;s+=1){var a=i[s],o=t;if(a.includes("wo")||a.includes("Wo")){for(var l=o.split("-")[0],h=o.split("-")[1],c=dt(l,"YYYY").startOf("year").locale(r),d=0;d<=52;d+=1){var f=c.add(d,"week");if(f.format("Wo")===h)return f}return null}var m=dt(o,a,!0).locale(r);if(m.isValid())return m}return null}}};function lr(n,e){return n!==void 0?n:e?"bottomRight":"bottomLeft"}function xo(n,e){var t=lr(n,e),i=t==null?void 0:t.toLowerCase().endsWith("right"),r=i?"insetInlineEnd":"insetInlineStart";return e&&(r=["insetInlineStart","insetInlineEnd"].find(function(s){return s!==r})),r}var It=v.createContext(null),oc={bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}}};function yo(n){var e=n.popupElement,t=n.popupStyle,i=n.popupClassName,r=n.popupAlign,s=n.transitionName,a=n.getPopupContainer,o=n.children,l=n.range,h=n.placement,c=n.builtinPlacements,d=c===void 0?oc:c,f=n.direction,m=n.visible,u=n.onClose,g=v.useContext(It),p=g.prefixCls,x="".concat(p,"-dropdown"),w=lr(h,f==="rtl");return v.createElement(nh,{showAction:[],hideAction:["click"],popupPlacement:w,builtinPlacements:d,prefixCls:x,popupTransitionName:s,popup:e,popupAlign:r,popupVisible:m,popupClassName:Se(i,me(me({},"".concat(x,"-range"),l),"".concat(x,"-rtl"),f==="rtl")),popupStyle:t,stretch:"minWidth",getPopupContainer:a,onPopupVisibleChange:function(C){C||u()}},o)}function Ls(n,e){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0",i=String(n);i.length<e;)i="".concat(t).concat(i);return i}function vn(n){return n==null?[]:Array.isArray(n)?n:[n]}function ni(n,e,t){var i=ht(n);return i[e]=t,i}function hr(n,e){var t={},i=e||Object.keys(n);return i.forEach(function(r){n[r]!==void 0&&(t[r]=n[r])}),t}function wo(n,e,t){if(t)return t;switch(n){case"time":return e.fieldTimeFormat;case"datetime":return e.fieldDateTimeFormat;case"month":return e.fieldMonthFormat;case"year":return e.fieldYearFormat;case"quarter":return e.fieldQuarterFormat;case"week":return e.fieldWeekFormat;default:return e.fieldDateFormat}}function Co(n,e,t){var i=t!==void 0?t:e[e.length-1],r=e.find(function(s){return n[s]});return i!==r?n[r]:void 0}function Eo(n){return hr(n,["placement","builtinPlacements","popupAlign","getPopupContainer","transitionName","direction"])}function Os(n,e,t,i){var r=v.useMemo(function(){return n||function(a,o){var l=a;return e&&o.type==="date"?e(l,o.today):t&&o.type==="month"?t(l,o.locale):o.originNode}},[n,t,e]),s=v.useCallback(function(a,o){return r(a,fe(fe({},o),{},{range:i}))},[r,i]);return s}function Mo(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],i=v.useState([!1,!1]),r=U(i,2),s=r[0],a=r[1],o=function(c,d){a(function(f){return ni(f,d,c)})},l=v.useMemo(function(){return s.map(function(h,c){if(h)return!0;var d=n[c];return d?!!(!t[c]&&!d||d&&e(d,{activeIndex:c})):!1})},[n,s,e,t]);return[l,o]}function bo(n,e,t,i,r){var s="",a=[];return n&&a.push(r?"hh":"HH"),e&&a.push("mm"),t&&a.push("ss"),s=a.join(":"),i&&(s+=".SSS"),r&&(s+=" A"),s}function lc(n,e,t,i,r,s){var a=n.fieldDateTimeFormat,o=n.fieldDateFormat,l=n.fieldTimeFormat,h=n.fieldMonthFormat,c=n.fieldYearFormat,d=n.fieldWeekFormat,f=n.fieldQuarterFormat,m=n.yearFormat,u=n.cellYearFormat,g=n.cellQuarterFormat,p=n.dayFormat,x=n.cellDateFormat,w=bo(e,t,i,r,s);return fe(fe({},n),{},{fieldDateTimeFormat:a||"YYYY-MM-DD ".concat(w),fieldDateFormat:o||"YYYY-MM-DD",fieldTimeFormat:l||w,fieldMonthFormat:h||"YYYY-MM",fieldYearFormat:c||"YYYY",fieldWeekFormat:d||"gggg-wo",fieldQuarterFormat:f||"YYYY-[Q]Q",yearFormat:m||"YYYY",cellYearFormat:u||"YYYY",cellQuarterFormat:g||"[Q]Q",cellDateFormat:x||p||"D"})}function _o(n,e){var t=e.showHour,i=e.showMinute,r=e.showSecond,s=e.showMillisecond,a=e.use12Hours;return Ve.useMemo(function(){return lc(n,t,i,r,s,a)},[n,t,i,r,s,a])}function Xn(n,e,t){return t??e.some(function(i){return n.includes(i)})}var hc=["showNow","showHour","showMinute","showSecond","showMillisecond","use12Hours","hourStep","minuteStep","secondStep","millisecondStep","hideDisabledOptions","defaultValue","disabledHours","disabledMinutes","disabledSeconds","disabledMilliseconds","disabledTime","changeOnScroll","defaultOpenValue"];function cc(n){var e=hr(n,hc),t=n.format,i=n.picker,r=null;return t&&(r=t,Array.isArray(r)&&(r=r[0]),r=Pn(r)==="object"?r.format:r),i==="time"&&(e.format=r),[e,r]}function dc(n){return n&&typeof n=="string"}function So(n,e,t,i){return[n,e,t,i].some(function(r){return r!==void 0})}function No(n,e,t,i,r){var s=e,a=t,o=i;if(!n&&!s&&!a&&!o&&!r)s=!0,a=!0,o=!0;else if(n){var l,h,c,d=[s,a,o].some(function(u){return u===!1}),f=[s,a,o].some(function(u){return u===!0}),m=d?!0:!f;s=(l=s)!==null&&l!==void 0?l:m,a=(h=a)!==null&&h!==void 0?h:m,o=(c=o)!==null&&c!==void 0?c:m}return[s,a,o,r]}function To(n){var e=n.showTime,t=cc(n),i=U(t,2),r=i[0],s=i[1],a=e&&Pn(e)==="object"?e:{},o=fe(fe({defaultOpenValue:a.defaultOpenValue||a.defaultValue},r),a),l=o.showMillisecond,h=o.showHour,c=o.showMinute,d=o.showSecond,f=So(h,c,d,l),m=No(f,h,c,d,l),u=U(m,3);return h=u[0],c=u[1],d=u[2],[o,fe(fe({},o),{},{showHour:h,showMinute:c,showSecond:d,showMillisecond:l}),o.format,s]}function Do(n,e,t,i,r){var s=n==="time";if(n==="datetime"||s){for(var a=i,o=wo(n,r,null),l=o,h=[e,t],c=0;c<h.length;c+=1){var d=vn(h[c])[0];if(dc(d)){l=d;break}}var f=a.showHour,m=a.showMinute,u=a.showSecond,g=a.showMillisecond,p=a.use12Hours,x=Xn(l,["a","A","LT","LLL","LTS"],p),w=So(f,m,u,g);w||(f=Xn(l,["H","h","k","LT","LLL"]),m=Xn(l,["m","LT","LLL"]),u=Xn(l,["s","LTS"]),g=Xn(l,["SSS"]));var y=No(w,f,m,u,g),C=U(y,3);f=C[0],m=C[1],u=C[2];var E=e||bo(f,m,u,g,x);return fe(fe({},a),{},{format:E,showHour:f,showMinute:m,showSecond:u,showMillisecond:g,use12Hours:x})}return null}function uc(n,e,t){if(e===!1)return null;var i=e&&Pn(e)==="object"?e:{};return i.clearIcon||t||v.createElement("span",{className:"".concat(n,"-clear-btn")})}var Fr=7;function Jt(n,e,t){return!n&&!e||n===e?!0:!n||!e?!1:t()}function as(n,e,t){return Jt(e,t,function(){var i=Math.floor(n.getYear(e)/10),r=Math.floor(n.getYear(t)/10);return i===r})}function fn(n,e,t){return Jt(e,t,function(){return n.getYear(e)===n.getYear(t)})}function oa(n,e){var t=Math.floor(n.getMonth(e)/3);return t+1}function fc(n,e,t){return Jt(e,t,function(){return fn(n,e,t)&&oa(n,e)===oa(n,t)})}function As(n,e,t){return Jt(e,t,function(){return fn(n,e,t)&&n.getMonth(e)===n.getMonth(t)})}function ks(n,e,t){return Jt(e,t,function(){return fn(n,e,t)&&As(n,e,t)&&n.getDate(e)===n.getDate(t)})}function Ro(n,e,t){return Jt(e,t,function(){return n.getHour(e)===n.getHour(t)&&n.getMinute(e)===n.getMinute(t)&&n.getSecond(e)===n.getSecond(t)})}function Io(n,e,t){return Jt(e,t,function(){return ks(n,e,t)&&Ro(n,e,t)&&n.getMillisecond(e)===n.getMillisecond(t)})}function Zn(n,e,t,i){return Jt(t,i,function(){var r=n.locale.getWeekFirstDate(e,t),s=n.locale.getWeekFirstDate(e,i);return fn(n,r,s)&&n.locale.getWeek(e,t)===n.locale.getWeek(e,i)})}function at(n,e,t,i,r){switch(r){case"date":return ks(n,t,i);case"week":return Zn(n,e.locale,t,i);case"month":return As(n,t,i);case"quarter":return fc(n,t,i);case"year":return fn(n,t,i);case"decade":return as(n,t,i);case"time":return Ro(n,t,i);default:return Io(n,t,i)}}function cr(n,e,t,i){return!e||!t||!i?!1:n.isAfter(i,e)&&n.isAfter(t,i)}function Ai(n,e,t,i,r){return at(n,e,t,i,r)?!0:n.isAfter(t,i)}function pc(n,e,t){var i=e.locale.getWeekFirstDay(n),r=e.setDate(t,1),s=e.getWeekDay(r),a=e.addDate(r,i-s);return e.getMonth(a)===e.getMonth(t)&&e.getDate(a)>1&&(a=e.addDate(a,-7)),a}function qe(n,e){var t=e.generateConfig,i=e.locale,r=e.format;return n?typeof r=="function"?r(n):t.locale.format(i.locale,n,r):""}function Ji(n,e,t){var i=e,r=["getHour","getMinute","getSecond","getMillisecond"],s=["setHour","setMinute","setSecond","setMillisecond"];return s.forEach(function(a,o){t?i=n[a](i,n[r[o]](t)):i=n[a](i,0)}),i}function mc(n,e,t,i,r){var s=et(function(a,o){return!!(t&&t(a,o)||i&&n.isAfter(i,a)&&!at(n,e,i,a,o.type)||r&&n.isAfter(a,r)&&!at(n,e,r,a,o.type))});return s}function gc(n,e,t){return v.useMemo(function(){var i=wo(n,e,t),r=vn(i),s=r[0],a=Pn(s)==="object"&&s.type==="mask"?s.format:null;return[r.map(function(o){return typeof o=="string"||typeof o=="function"?o:o.format}),a]},[n,e,t])}function vc(n,e,t){return typeof n[0]=="function"||t?!0:e}function xc(n,e,t,i){var r=et(function(s,a){var o=fe({type:e},a);if(delete o.activeIndex,!n.isValidate(s)||t&&t(s,o))return!0;if((e==="date"||e==="time")&&i){var l,h=a&&a.activeIndex===1?"end":"start",c=((l=i.disabledTime)===null||l===void 0?void 0:l.call(i,s,h,{from:o.from}))||{},d=c.disabledHours,f=c.disabledMinutes,m=c.disabledSeconds,u=c.disabledMilliseconds,g=i.disabledHours,p=i.disabledMinutes,x=i.disabledSeconds,w=d||g,y=f||p,C=m||x,E=n.getHour(s),M=n.getMinute(s),b=n.getSecond(s),N=n.getMillisecond(s);if(w&&w().includes(E)||y&&y(E).includes(M)||C&&C(E,M).includes(b)||u&&u(E,M,b).includes(N))return!0}return!1});return r}function ki(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=v.useMemo(function(){var i=n&&vn(n);return e&&i&&(i[1]=i[1]||i[0]),i},[n,e]);return t}function Lo(n,e){var t=n.generateConfig,i=n.locale,r=n.picker,s=r===void 0?"date":r,a=n.prefixCls,o=a===void 0?"rc-picker":a,l=n.styles,h=l===void 0?{}:l,c=n.classNames,d=c===void 0?{}:c,f=n.order,m=f===void 0?!0:f,u=n.components,g=u===void 0?{}:u,p=n.inputRender,x=n.allowClear,w=n.clearIcon,y=n.needConfirm,C=n.multiple,E=n.format,M=n.inputReadOnly,b=n.disabledDate,N=n.minDate,S=n.maxDate,_=n.showTime,R=n.value,O=n.defaultValue,I=n.pickerValue,A=n.defaultPickerValue,D=ki(R),L=ki(O),P=ki(I),z=ki(A),H=s==="date"&&_?"datetime":s,Y=H==="time"||H==="datetime",$=Y||C,k=y??Y,W=To(n),j=U(W,4),re=j[0],J=j[1],G=j[2],ee=j[3],oe=_o(i,J),se=v.useMemo(function(){return Do(H,G,ee,re,oe)},[H,G,ee,re,oe]),K=v.useMemo(function(){return fe(fe({},n),{},{prefixCls:o,locale:oe,picker:s,styles:h,classNames:d,order:m,components:fe({input:p},g),clearIcon:uc(o,x,w),showTime:se,value:D,defaultValue:L,pickerValue:P,defaultPickerValue:z},e==null?void 0:e())},[n]),ie=gc(H,oe,E),Q=U(ie,2),X=Q[0],te=Q[1],ae=vc(X,M,C),q=mc(t,i,b,N,S),le=xc(t,s,q,se),Ce=v.useMemo(function(){return fe(fe({},K),{},{needConfirm:k,inputReadOnly:ae,disabledDate:q})},[K,k,ae,q]);return[Ce,H,$,X,te,le]}function yc(n,e,t){var i=St(e,{value:n}),r=U(i,2),s=r[0],a=r[1],o=Ve.useRef(n),l=Ve.useRef(),h=function(){Bt.cancel(l.current)},c=et(function(){a(o.current),t&&s!==o.current&&t(o.current)}),d=et(function(f,m){h(),o.current=f,f||m?c():l.current=Bt(c)});return Ve.useEffect(function(){return h},[]),[s,d]}function Oo(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0,r=t.every(function(c){return c})?!1:n,s=yc(r,e||!1,i),a=U(s,2),o=a[0],l=a[1];function h(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!d.inherit||o)&&l(c,d.force)}return[o,h]}function Ao(n){var e=v.useRef();return v.useImperativeHandle(n,function(){var t;return{nativeElement:(t=e.current)===null||t===void 0?void 0:t.nativeElement,focus:function(r){var s;(s=e.current)===null||s===void 0||s.focus(r)},blur:function(){var r;(r=e.current)===null||r===void 0||r.blur()}}}),e}function ko(n,e){return v.useMemo(function(){return n||(e?(ja(!1,"`ranges` is deprecated. Please use `presets` instead."),Object.entries(e).map(function(t){var i=U(t,2),r=i[0],s=i[1];return{label:r,value:s}})):[])},[n,e])}function Ps(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=v.useRef(e);i.current=e,ih(function(){if(n)i.current(n);else{var r=Bt(function(){i.current(n)},t);return function(){Bt.cancel(r)}}},[n])}function Po(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=v.useState(0),r=U(i,2),s=r[0],a=r[1],o=v.useState(!1),l=U(o,2),h=l[0],c=l[1],d=v.useRef([]),f=v.useRef(null),m=v.useRef(null),u=function(C){f.current=C},g=function(C){return f.current===C},p=function(C){c(C)},x=function(C){return C&&(m.current=C),m.current},w=function(C){var E=d.current,M=new Set(E.filter(function(N){return C[N]||e[N]})),b=E[E.length-1]===0?1:0;return M.size>=2||n[b]?null:b};return Ps(h||t,function(){h||(d.current=[],u(null))}),v.useEffect(function(){h&&d.current.push(s)},[h,s]),[h,p,x,s,a,w,d.current,u,g]}function wc(n,e,t,i,r,s){var a=t[t.length-1],o=function(h,c){var d=U(n,2),f=d[0],m=d[1],u=fe(fe({},c),{},{from:Co(n,t)});return a===1&&e[0]&&f&&!at(i,r,f,h,u.type)&&i.isAfter(f,h)||a===0&&e[1]&&m&&!at(i,r,m,h,u.type)&&i.isAfter(h,m)?!0:s==null?void 0:s(h,u)};return o}function Qn(n,e,t,i){switch(e){case"date":case"week":return n.addMonth(t,i);case"month":case"quarter":return n.addYear(t,i);case"year":return n.addYear(t,i*10);case"decade":return n.addYear(t,i*100);default:return t}}var $r=[];function zo(n,e,t,i,r,s,a,o){var l=arguments.length>8&&arguments[8]!==void 0?arguments[8]:$r,h=arguments.length>9&&arguments[9]!==void 0?arguments[9]:$r,c=arguments.length>10&&arguments[10]!==void 0?arguments[10]:$r,d=arguments.length>11?arguments[11]:void 0,f=arguments.length>12?arguments[12]:void 0,m=arguments.length>13?arguments[13]:void 0,u=a==="time",g=s||0,p=function(P){var z=n.getNow();return u&&(z=Ji(n,z)),l[P]||t[P]||z},x=U(h,2),w=x[0],y=x[1],C=St(function(){return p(0)},{value:w}),E=U(C,2),M=E[0],b=E[1],N=St(function(){return p(1)},{value:y}),S=U(N,2),_=S[0],R=S[1],O=v.useMemo(function(){var L=[M,_][g];return u?L:Ji(n,L,c[g])},[u,M,_,g,n,c]),I=function(P){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"panel",H=[b,R][g];H(P);var Y=[M,_];Y[g]=P,d&&(!at(n,e,M,Y[0],a)||!at(n,e,_,Y[1],a))&&d(Y,{source:z,range:g===1?"end":"start",mode:i})},A=function(P,z){if(o){var H={date:"month",week:"month",month:"year",quarter:"year"},Y=H[a];if(Y&&!at(n,e,P,z,Y))return Qn(n,a,z,-1);if(a==="year"&&P){var $=Math.floor(n.getYear(P)/10),k=Math.floor(n.getYear(z)/10);if($!==k)return Qn(n,a,z,-1)}}return z},D=v.useRef(null);return gt(function(){if(r&&!l[g]){var L=u?null:n.getNow();if(D.current!==null&&D.current!==g?L=[M,_][g^1]:t[g]?L=g===0?t[0]:A(t[0],t[1]):t[g^1]&&(L=t[g^1]),L){f&&n.isAfter(f,L)&&(L=f);var P=o?Qn(n,a,L,1):L;m&&n.isAfter(P,m)&&(L=o?Qn(n,a,m,-1):m),I(L,"reset")}}},[r,g,t[g]]),v.useEffect(function(){r?D.current=g:D.current=null},[r,g]),gt(function(){r&&l&&l[g]&&I(l[g],"reset")},[r,g]),[O,I]}function Fo(n,e){var t=v.useRef(n),i=v.useState({}),r=U(i,2),s=r[1],a=function(h){return h&&e!==void 0?e:t.current},o=function(h){t.current=h,s({})};return[a,o,a(!0)]}var Cc=[];function $o(n,e,t){var i=function(a){return a.map(function(o){return qe(o,{generateConfig:n,locale:e,format:t[0]})})},r=function(a,o){for(var l=Math.max(a.length,o.length),h=-1,c=0;c<l;c+=1){var d=a[c]||null,f=o[c]||null;if(d!==f&&!Io(n,d,f)){h=c;break}}return[h<0,h!==0]};return[i,r]}function Ho(n,e){return ht(n).sort(function(t,i){return e.isAfter(t,i)?1:-1})}function Ec(n){var e=Fo(n),t=U(e,2),i=t[0],r=t[1],s=et(function(){r(n)});return v.useEffect(function(){s()},[n]),[i,r]}function Bo(n,e,t,i,r,s,a,o,l){var h=St(s,{value:a}),c=U(h,2),d=c[0],f=c[1],m=d||Cc,u=Ec(m),g=U(u,2),p=g[0],x=g[1],w=$o(n,e,t),y=U(w,2),C=y[0],E=y[1],M=et(function(N){var S=ht(N);if(i)for(var _=0;_<2;_+=1)S[_]=S[_]||null;else r&&(S=Ho(S.filter(function(L){return L}),n));var R=E(p(),S),O=U(R,2),I=O[0],A=O[1];if(!I&&(x(S),o)){var D=C(S);o(S,D,{range:A?"end":"start"})}}),b=function(){l&&l(p())};return[m,f,p,M,b]}function Yo(n,e,t,i,r,s,a,o,l,h){var c=n.generateConfig,d=n.locale,f=n.picker,m=n.onChange,u=n.allowEmpty,g=n.order,p=s.some(function(I){return I})?!1:g,x=$o(c,d,a),w=U(x,2),y=w[0],C=w[1],E=Fo(e),M=U(E,2),b=M[0],N=M[1],S=et(function(){N(e)});v.useEffect(function(){S()},[e]);var _=et(function(I){var A=I===null,D=ht(I||b());if(A)for(var L=Math.max(s.length,D.length),P=0;P<L;P+=1)s[P]||(D[P]=null);p&&D[0]&&D[1]&&(D=Ho(D,c)),r(D);var z=D,H=U(z,2),Y=H[0],$=H[1],k=!Y,W=!$,j=u?(!k||u[0])&&(!W||u[1]):!0,re=!g||k||W||at(c,d,Y,$,f)||c.isAfter($,Y),J=(s[0]||!Y||!h(Y,{activeIndex:0}))&&(s[1]||!$||!h($,{from:Y,activeIndex:1})),G=A||j&&re&&J;if(G){t(D);var ee=C(D,e),oe=U(ee,1),se=oe[0];m&&!se&&m(A&&D.every(function(K){return!K})?null:D,y(D))}return G}),R=et(function(I,A){var D=ni(b(),I,i()[I]);N(D),A&&_()}),O=!o&&!l;return Ps(!O,function(){O&&(_(),r(e),S())},2),[R,_]}function Wo(n,e,t,i,r){return e!=="date"&&e!=="time"?!1:t!==void 0?t:i!==void 0?i:!r&&(n==="date"||n==="time")}function Mc(n,e,t,i,r,s){var a=n;function o(d,f,m){var u=s[d](a),g=m.find(function(y){return y.value===u});if(!g||g.disabled){var p=m.filter(function(y){return!y.disabled}),x=ht(p).reverse(),w=x.find(function(y){return y.value<=u})||p[0];w&&(u=w.value,a=s[f](a,u))}return u}var l=o("getHour","setHour",e()),h=o("getMinute","setMinute",t(l)),c=o("getSecond","setSecond",i(l,h));return o("getMillisecond","setMillisecond",r(l,h,c)),a}function Pi(){return[]}function zi(n,e){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:2,a=[],o=t>=1?t|0:1,l=n;l<=e;l+=o){var h=r.includes(l);(!h||!i)&&a.push({label:Ls(l,s),value:l,disabled:h})}return a}function zs(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0,i=e||{},r=i.use12Hours,s=i.hourStep,a=s===void 0?1:s,o=i.minuteStep,l=o===void 0?1:o,h=i.secondStep,c=h===void 0?1:h,d=i.millisecondStep,f=d===void 0?100:d,m=i.hideDisabledOptions,u=i.disabledTime,g=i.disabledHours,p=i.disabledMinutes,x=i.disabledSeconds,w=v.useMemo(function(){return t||n.getNow()},[t,n]),y=v.useCallback(function(z){var H=(u==null?void 0:u(z))||{};return[H.disabledHours||g||Pi,H.disabledMinutes||p||Pi,H.disabledSeconds||x||Pi,H.disabledMilliseconds||Pi]},[u,g,p,x]),C=v.useMemo(function(){return y(w)},[w,y]),E=U(C,4),M=E[0],b=E[1],N=E[2],S=E[3],_=v.useCallback(function(z,H,Y,$){var k=zi(0,23,a,m,z()),W=r?k.map(function(G){return fe(fe({},G),{},{label:Ls(G.value%12||12,2)})}):k,j=function(ee){return zi(0,59,l,m,H(ee))},re=function(ee,oe){return zi(0,59,c,m,Y(ee,oe))},J=function(ee,oe,se){return zi(0,999,f,m,$(ee,oe,se),3)};return[W,j,re,J]},[m,a,r,f,l,c]),R=v.useMemo(function(){return _(M,b,N,S)},[_,M,b,N,S]),O=U(R,4),I=O[0],A=O[1],D=O[2],L=O[3],P=function(H,Y){var $=function(){return I},k=A,W=D,j=L;if(Y){var re=y(Y),J=U(re,4),G=J[0],ee=J[1],oe=J[2],se=J[3],K=_(G,ee,oe,se),ie=U(K,4),Q=ie[0],X=ie[1],te=ie[2],ae=ie[3];$=function(){return Q},k=X,W=te,j=ae}var q=Mc(H,$,k,W,j,n);return q};return[P,I,A,D,L]}function bc(n){var e=n.mode,t=n.internalMode,i=n.renderExtraFooter,r=n.showNow,s=n.showTime,a=n.onSubmit,o=n.onNow,l=n.invalid,h=n.needConfirm,c=n.generateConfig,d=n.disabledDate,f=v.useContext(It),m=f.prefixCls,u=f.locale,g=f.button,p=g===void 0?"button":g,x=c.getNow(),w=zs(c,s,x),y=U(w,1),C=y[0],E=i==null?void 0:i(e),M=d(x,{type:e}),b=function(){if(!M){var A=C(x);o(A)}},N="".concat(m,"-now"),S="".concat(N,"-btn"),_=r&&v.createElement("li",{className:N},v.createElement("a",{className:Se(S,M&&"".concat(S,"-disabled")),"aria-disabled":M,onClick:b},t==="date"?u.today:u.now)),R=h&&v.createElement("li",{className:"".concat(m,"-ok")},v.createElement(p,{disabled:l,onClick:a},u.ok)),O=(_||R)&&v.createElement("ul",{className:"".concat(m,"-ranges")},_,R);return!E&&!O?null:v.createElement("div",{className:"".concat(m,"-footer")},E&&v.createElement("div",{className:"".concat(m,"-footer-extra")},E),O)}function Vo(n,e,t){function i(r,s){var a=r.findIndex(function(l){return at(n,e,l,s,t)});if(a===-1)return[].concat(ht(r),[s]);var o=ht(r);return o.splice(a,1),o}return i}var xn=v.createContext(null);function dr(){return v.useContext(xn)}function Hn(n,e){var t=n.prefixCls,i=n.generateConfig,r=n.locale,s=n.disabledDate,a=n.minDate,o=n.maxDate,l=n.cellRender,h=n.hoverValue,c=n.hoverRangeValue,d=n.onHover,f=n.values,m=n.pickerValue,u=n.onSelect,g=n.prevIcon,p=n.nextIcon,x=n.superPrevIcon,w=n.superNextIcon,y=i.getNow(),C={now:y,values:f,pickerValue:m,prefixCls:t,disabledDate:s,minDate:a,maxDate:o,cellRender:l,hoverValue:h,hoverRangeValue:c,onHover:d,locale:r,generateConfig:i,onSelect:u,panelType:e,prevIcon:g,nextIcon:p,superPrevIcon:x,superNextIcon:w};return[C,y]}var qt=v.createContext({});function ui(n){for(var e=n.rowNum,t=n.colNum,i=n.baseDate,r=n.getCellDate,s=n.prefixColumn,a=n.rowClassName,o=n.titleFormat,l=n.getCellText,h=n.getCellClassName,c=n.headerCells,d=n.cellSelection,f=d===void 0?!0:d,m=n.disabledDate,u=dr(),g=u.prefixCls,p=u.panelType,x=u.now,w=u.disabledDate,y=u.cellRender,C=u.onHover,E=u.hoverValue,M=u.hoverRangeValue,b=u.generateConfig,N=u.values,S=u.locale,_=u.onSelect,R=m||w,O="".concat(g,"-cell"),I=v.useContext(qt),A=I.onCellDblClick,D=function(W){return N.some(function(j){return j&&at(b,S,W,j,p)})},L=[],P=0;P<e;P+=1){for(var z=[],H=void 0,Y=function(){var W=P*t+$,j=r(i,W),re=R==null?void 0:R(j,{type:p});$===0&&(H=j,s&&z.push(s(H)));var J=!1,G=!1,ee=!1;if(f&&M){var oe=U(M,2),se=oe[0],K=oe[1];J=cr(b,se,K,j),G=at(b,S,j,se,p),ee=at(b,S,j,K,p)}var ie=o?qe(j,{locale:S,format:o,generateConfig:b}):void 0,Q=v.createElement("div",{className:"".concat(O,"-inner")},l(j));z.push(v.createElement("td",{key:$,title:ie,className:Se(O,fe(me(me(me(me(me(me({},"".concat(O,"-disabled"),re),"".concat(O,"-hover"),(E||[]).some(function(X){return at(b,S,j,X,p)})),"".concat(O,"-in-range"),J&&!G&&!ee),"".concat(O,"-range-start"),G),"".concat(O,"-range-end"),ee),"".concat(g,"-cell-selected"),!M&&p!=="week"&&D(j)),h(j))),onClick:function(){re||_(j)},onDoubleClick:function(){!re&&A&&A()},onMouseEnter:function(){re||C==null||C(j)},onMouseLeave:function(){re||C==null||C(null)}},y?y(j,{prefixCls:g,originNode:Q,today:x,type:p,locale:S}):Q))},$=0;$<t;$+=1)Y();L.push(v.createElement("tr",{key:P,className:a==null?void 0:a(H)},z))}return v.createElement("div",{className:"".concat(g,"-body")},v.createElement("table",{className:"".concat(g,"-content")},c&&v.createElement("thead",null,v.createElement("tr",null,c)),v.createElement("tbody",null,L)))}var Fi={visibility:"hidden"};function Bn(n){var e=n.offset,t=n.superOffset,i=n.onChange,r=n.getStart,s=n.getEnd,a=n.children,o=dr(),l=o.prefixCls,h=o.prevIcon,c=h===void 0?"‹":h,d=o.nextIcon,f=d===void 0?"›":d,m=o.superPrevIcon,u=m===void 0?"«":m,g=o.superNextIcon,p=g===void 0?"»":g,x=o.minDate,w=o.maxDate,y=o.generateConfig,C=o.locale,E=o.pickerValue,M=o.panelType,b="".concat(l,"-header"),N=v.useContext(qt),S=N.hidePrev,_=N.hideNext,R=N.hideHeader,O=v.useMemo(function(){if(!x||!e||!s)return!1;var k=s(e(-1,E));return!Ai(y,C,k,x,M)},[x,e,E,s,y,C,M]),I=v.useMemo(function(){if(!x||!t||!s)return!1;var k=s(t(-1,E));return!Ai(y,C,k,x,M)},[x,t,E,s,y,C,M]),A=v.useMemo(function(){if(!w||!e||!r)return!1;var k=r(e(1,E));return!Ai(y,C,w,k,M)},[w,e,E,r,y,C,M]),D=v.useMemo(function(){if(!w||!t||!r)return!1;var k=r(t(1,E));return!Ai(y,C,w,k,M)},[w,t,E,r,y,C,M]),L=function(W){e&&i(e(W,E))},P=function(W){t&&i(t(W,E))};if(R)return null;var z="".concat(b,"-prev-btn"),H="".concat(b,"-next-btn"),Y="".concat(b,"-super-prev-btn"),$="".concat(b,"-super-next-btn");return v.createElement("div",{className:b},t&&v.createElement("button",{type:"button","aria-label":"super-prev-year",onClick:function(){return P(-1)},tabIndex:-1,className:Se(Y,I&&"".concat(Y,"-disabled")),disabled:I,style:S?Fi:{}},u),e&&v.createElement("button",{type:"button","aria-label":"prev-year",onClick:function(){return L(-1)},tabIndex:-1,className:Se(z,O&&"".concat(z,"-disabled")),disabled:O,style:S?Fi:{}},c),v.createElement("div",{className:"".concat(b,"-view")},a),e&&v.createElement("button",{type:"button","aria-label":"next-year",onClick:function(){return L(1)},tabIndex:-1,className:Se(H,A&&"".concat(H,"-disabled")),disabled:A,style:_?Fi:{}},f),t&&v.createElement("button",{type:"button","aria-label":"super-next-year",onClick:function(){return P(1)},tabIndex:-1,className:Se($,D&&"".concat($,"-disabled")),disabled:D,style:_?Fi:{}},p))}function ur(n){var e=n.prefixCls,t=n.panelName,i=t===void 0?"date":t,r=n.locale,s=n.generateConfig,a=n.pickerValue,o=n.onPickerValueChange,l=n.onModeChange,h=n.mode,c=h===void 0?"date":h,d=n.disabledDate,f=n.onSelect,m=n.onHover,u=n.showWeek,g="".concat(e,"-").concat(i,"-panel"),p="".concat(e,"-cell"),x=c==="week",w=Hn(n,c),y=U(w,2),C=y[0],E=y[1],M=s.locale.getWeekFirstDay(r.locale),b=s.setDate(a,1),N=pc(r.locale,s,b),S=s.getMonth(a),_=u===void 0?x:u,R=_?function(k){var W=d==null?void 0:d(k,{type:"week"});return v.createElement("td",{key:"week",className:Se(p,"".concat(p,"-week"),me({},"".concat(p,"-disabled"),W)),onClick:function(){W||f(k)},onMouseEnter:function(){W||m==null||m(k)},onMouseLeave:function(){W||m==null||m(null)}},v.createElement("div",{className:"".concat(p,"-inner")},s.locale.getWeek(r.locale,k)))}:null,O=[],I=r.shortWeekDays||(s.locale.getShortWeekDays?s.locale.getShortWeekDays(r.locale):[]);R&&O.push(v.createElement("th",{key:"empty","aria-label":"empty cell"}));for(var A=0;A<Fr;A+=1)O.push(v.createElement("th",{key:A},I[(A+M)%Fr]));var D=function(W,j){return s.addDate(W,j)},L=function(W){return qe(W,{locale:r,format:r.cellDateFormat,generateConfig:s})},P=function(W){var j=me(me({},"".concat(e,"-cell-in-view"),As(s,W,a)),"".concat(e,"-cell-today"),ks(s,W,E));return j},z=r.shortMonths||(s.locale.getShortMonths?s.locale.getShortMonths(r.locale):[]),H=v.createElement("button",{type:"button","aria-label":"year panel",key:"year",onClick:function(){l("year",a)},tabIndex:-1,className:"".concat(e,"-year-btn")},qe(a,{locale:r,format:r.yearFormat,generateConfig:s})),Y=v.createElement("button",{type:"button","aria-label":"month panel",key:"month",onClick:function(){l("month",a)},tabIndex:-1,className:"".concat(e,"-month-btn")},r.monthFormat?qe(a,{locale:r,format:r.monthFormat,generateConfig:s}):z[S]),$=r.monthBeforeYear?[Y,H]:[H,Y];return v.createElement(xn.Provider,{value:C},v.createElement("div",{className:Se(g,u&&"".concat(g,"-show-week"))},v.createElement(Bn,{offset:function(W){return s.addMonth(a,W)},superOffset:function(W){return s.addYear(a,W)},onChange:o,getStart:function(W){return s.setDate(W,1)},getEnd:function(W){var j=s.setDate(W,1);return j=s.addMonth(j,1),s.addDate(j,-1)}},$),v.createElement(ui,we({titleFormat:r.fieldDateFormat},n,{colNum:Fr,rowNum:6,baseDate:N,headerCells:O,getCellDate:D,getCellText:L,getCellClassName:P,prefixColumn:R,cellSelection:!x}))))}var _c=1/3;function Sc(n,e){var t=v.useRef(!1),i=v.useRef(null),r=v.useRef(null),s=function(){return t.current},a=function(){Bt.cancel(i.current),t.current=!1},o=v.useRef(),l=function(){var d=n.current;if(r.current=null,o.current=0,d){var f=d.querySelector('[data-value="'.concat(e,'"]')),m=d.querySelector("li"),u=function g(){a(),t.current=!0,o.current+=1;var p=d.scrollTop,x=m.offsetTop,w=f.offsetTop,y=w-x;if(w===0&&f!==m||!rh(d)){o.current<=5&&(i.current=Bt(g));return}var C=p+(y-p)*_c,E=Math.abs(y-C);if(r.current!==null&&r.current<E){a();return}if(r.current=E,E<=1){d.scrollTop=y,a();return}d.scrollTop=C,i.current=Bt(g)};f&&m&&u()}},h=et(l);return[h,a,s]}var Nc=300;function Tc(n){return n.map(function(e){var t=e.value,i=e.label,r=e.disabled;return[t,i,r].join(",")}).join(";")}function Kn(n){var e=n.units,t=n.value,i=n.optionalValue,r=n.type,s=n.onChange,a=n.onHover,o=n.onDblClick,l=n.changeOnScroll,h=dr(),c=h.prefixCls,d=h.cellRender,f=h.now,m=h.locale,u="".concat(c,"-time-panel"),g="".concat(c,"-time-panel-cell"),p=v.useRef(null),x=v.useRef(),w=function(){clearTimeout(x.current)},y=Sc(p,t??i),C=U(y,3),E=C[0],M=C[1],b=C[2];gt(function(){return E(),w(),function(){M(),w()}},[t,i,Tc(e)]);var N=function(R){w();var O=R.target;!b()&&l&&(x.current=setTimeout(function(){var I=p.current,A=I.querySelector("li").offsetTop,D=Array.from(I.querySelectorAll("li")),L=D.map(function($){return $.offsetTop-A}),P=L.map(function($,k){return e[k].disabled?Number.MAX_SAFE_INTEGER:Math.abs($-O.scrollTop)}),z=Math.min.apply(Math,ht(P)),H=P.findIndex(function($){return $===z}),Y=e[H];Y&&!Y.disabled&&s(Y.value)},Nc))},S="".concat(u,"-column");return v.createElement("ul",{className:S,ref:p,"data-type":r,onScroll:N},e.map(function(_){var R=_.label,O=_.value,I=_.disabled,A=v.createElement("div",{className:"".concat(g,"-inner")},R);return v.createElement("li",{key:O,className:Se(g,me(me({},"".concat(g,"-selected"),t===O),"".concat(g,"-disabled"),I)),onClick:function(){I||s(O)},onDoubleClick:function(){!I&&o&&o()},onMouseEnter:function(){a(O)},onMouseLeave:function(){a(null)},"data-value":O},d?d(O,{prefixCls:c,originNode:A,today:f,type:"time",subType:r,locale:m}):A)}))}function jt(n){return n<12}function Dc(n){var e=n.showHour,t=n.showMinute,i=n.showSecond,r=n.showMillisecond,s=n.use12Hours,a=n.changeOnScroll,o=dr(),l=o.prefixCls,h=o.values,c=o.generateConfig,d=o.locale,f=o.onSelect,m=o.onHover,u=m===void 0?function(){}:m,g=o.pickerValue,p=(h==null?void 0:h[0])||null,x=v.useContext(qt),w=x.onCellDblClick,y=zs(c,n,p),C=U(y,5),E=C[0],M=C[1],b=C[2],N=C[3],S=C[4],_=function(Z){var ke=p&&c[Z](p),Fe=g&&c[Z](g);return[ke,Fe]},R=_("getHour"),O=U(R,2),I=O[0],A=O[1],D=_("getMinute"),L=U(D,2),P=L[0],z=L[1],H=_("getSecond"),Y=U(H,2),$=Y[0],k=Y[1],W=_("getMillisecond"),j=U(W,2),re=j[0],J=j[1],G=I===null?null:jt(I)?"am":"pm",ee=v.useMemo(function(){return s?jt(I)?M.filter(function(F){return jt(F.value)}):M.filter(function(F){return!jt(F.value)}):M},[I,M,s]),oe=function(Z,ke){var Fe,Ye=Z.filter(function(Lt){return!Lt.disabled});return ke??(Ye==null||(Fe=Ye[0])===null||Fe===void 0?void 0:Fe.value)},se=oe(M,I),K=v.useMemo(function(){return b(se)},[b,se]),ie=oe(K,P),Q=v.useMemo(function(){return N(se,ie)},[N,se,ie]),X=oe(Q,$),te=v.useMemo(function(){return S(se,ie,X)},[S,se,ie,X]),ae=oe(te,re),q=v.useMemo(function(){if(!s)return[];var F=c.getNow(),Z=c.setHour(F,6),ke=c.setHour(F,18),Fe=function(Lt,Et){var ct=d.cellMeridiemFormat;return ct?qe(Lt,{generateConfig:c,locale:d,format:ct}):Et};return[{label:Fe(Z,"AM"),value:"am",disabled:M.every(function(Ye){return Ye.disabled||!jt(Ye.value)})},{label:Fe(ke,"PM"),value:"pm",disabled:M.every(function(Ye){return Ye.disabled||jt(Ye.value)})}]},[M,s,c,d]),le=function(Z){var ke=E(Z);f(ke)},Ce=v.useMemo(function(){var F=p||g||c.getNow(),Z=function(Fe){return Fe!=null};return Z(I)?(F=c.setHour(F,I),F=c.setMinute(F,P),F=c.setSecond(F,$),F=c.setMillisecond(F,re)):Z(A)?(F=c.setHour(F,A),F=c.setMinute(F,z),F=c.setSecond(F,k),F=c.setMillisecond(F,J)):Z(se)&&(F=c.setHour(F,se),F=c.setMinute(F,ie),F=c.setSecond(F,X),F=c.setMillisecond(F,ae)),F},[p,g,I,P,$,re,se,ie,X,ae,A,z,k,J,c]),_e=function(Z,ke){return Z===null?null:c[ke](Ce,Z)},ge=function(Z){return _e(Z,"setHour")},ze=function(Z){return _e(Z,"setMinute")},Xe=function(Z){return _e(Z,"setSecond")},Ze=function(Z){return _e(Z,"setMillisecond")},Ke=function(Z){return Z===null?null:Z==="am"&&!jt(I)?c.setHour(Ce,I-12):Z==="pm"&&jt(I)?c.setHour(Ce,I+12):Ce},nt=function(Z){le(ge(Z))},Pe=function(Z){le(ze(Z))},yt=function(Z){le(Xe(Z))},Oe=function(Z){le(Ze(Z))},Ue=function(Z){le(Ke(Z))},Qe=function(Z){u(ge(Z))},Re=function(Z){u(ze(Z))},ue=function(Z){u(Xe(Z))},ne=function(Z){u(Ze(Z))},he=function(Z){u(Ke(Z))},V={onDblClick:w,changeOnScroll:a};return v.createElement("div",{className:"".concat(l,"-content")},e&&v.createElement(Kn,we({units:ee,value:I,optionalValue:A,type:"hour",onChange:nt,onHover:Qe},V)),t&&v.createElement(Kn,we({units:K,value:P,optionalValue:z,type:"minute",onChange:Pe,onHover:Re},V)),i&&v.createElement(Kn,we({units:Q,value:$,optionalValue:k,type:"second",onChange:yt,onHover:ue},V)),r&&v.createElement(Kn,we({units:te,value:re,optionalValue:J,type:"millisecond",onChange:Oe,onHover:ne},V)),s&&v.createElement(Kn,we({units:q,value:G,type:"meridiem",onChange:Ue,onHover:he},V)))}function jo(n){var e=n.prefixCls,t=n.value,i=n.locale,r=n.generateConfig,s=n.showTime,a=s||{},o=a.format,l="".concat(e,"-time-panel"),h=Hn(n,"time"),c=U(h,1),d=c[0];return v.createElement(xn.Provider,{value:d},v.createElement("div",{className:Se(l)},v.createElement(Bn,null,t?qe(t,{locale:i,format:o,generateConfig:r}):" "),v.createElement(Dc,s)))}function Rc(n){var e=n.prefixCls,t=n.generateConfig,i=n.showTime,r=n.onSelect,s=n.value,a=n.pickerValue,o=n.onHover,l="".concat(e,"-datetime-panel"),h=zs(t,i),c=U(h,1),d=c[0],f=function(p){return s?Ji(t,p,s):Ji(t,p,a)},m=function(p){o==null||o(p&&f(p))},u=function(p){var x=f(p);r(d(x,x))};return v.createElement("div",{className:l},v.createElement(ur,we({},n,{onSelect:u,onHover:m})),v.createElement(jo,n))}function Ic(n){var e=n.prefixCls,t=n.locale,i=n.generateConfig,r=n.pickerValue,s=n.disabledDate,a=n.onPickerValueChange,o="".concat(e,"-decade-panel"),l=Hn(n,"decade"),h=U(l,1),c=h[0],d=function(M){var b=Math.floor(i.getYear(M)/100)*100;return i.setYear(M,b)},f=function(M){var b=d(M);return i.addYear(b,99)},m=d(r),u=f(r),g=i.addYear(m,-10),p=function(M,b){return i.addYear(M,b*10)},x=function(M){var b=t.cellYearFormat,N=qe(M,{locale:t,format:b,generateConfig:i}),S=qe(i.addYear(M,9),{locale:t,format:b,generateConfig:i});return"".concat(N,"-").concat(S)},w=function(M){return me({},"".concat(e,"-cell-in-view"),as(i,M,m)||as(i,M,u)||cr(i,m,u,M))},y=s?function(E,M){var b=i.setDate(E,1),N=i.setMonth(b,0),S=i.setYear(N,Math.floor(i.getYear(N)/10)*10),_=i.addYear(S,10),R=i.addDate(_,-1);return s(S,M)&&s(R,M)}:null,C="".concat(qe(m,{locale:t,format:t.yearFormat,generateConfig:i}),"-").concat(qe(u,{locale:t,format:t.yearFormat,generateConfig:i}));return v.createElement(xn.Provider,{value:c},v.createElement("div",{className:o},v.createElement(Bn,{superOffset:function(M){return i.addYear(r,M*100)},onChange:a,getStart:d,getEnd:f},C),v.createElement(ui,we({},n,{disabledDate:y,colNum:3,rowNum:4,baseDate:g,getCellDate:p,getCellText:x,getCellClassName:w}))))}function Lc(n){var e=n.prefixCls,t=n.locale,i=n.generateConfig,r=n.pickerValue,s=n.disabledDate,a=n.onPickerValueChange,o=n.onModeChange,l="".concat(e,"-month-panel"),h=Hn(n,"month"),c=U(h,1),d=c[0],f=i.setMonth(r,0),m=t.shortMonths||(i.locale.getShortMonths?i.locale.getShortMonths(t.locale):[]),u=function(C,E){return i.addMonth(C,E)},g=function(C){var E=i.getMonth(C);return t.monthFormat?qe(C,{locale:t,format:t.monthFormat,generateConfig:i}):m[E]},p=function(){return me({},"".concat(e,"-cell-in-view"),!0)},x=s?function(y,C){var E=i.setDate(y,1),M=i.setMonth(E,i.getMonth(E)+1),b=i.addDate(M,-1);return s(E,C)&&s(b,C)}:null,w=v.createElement("button",{type:"button",key:"year","aria-label":"year panel",onClick:function(){o("year")},tabIndex:-1,className:"".concat(e,"-year-btn")},qe(r,{locale:t,format:t.yearFormat,generateConfig:i}));return v.createElement(xn.Provider,{value:d},v.createElement("div",{className:l},v.createElement(Bn,{superOffset:function(C){return i.addYear(r,C)},onChange:a,getStart:function(C){return i.setMonth(C,0)},getEnd:function(C){return i.setMonth(C,11)}},w),v.createElement(ui,we({},n,{disabledDate:x,titleFormat:t.fieldMonthFormat,colNum:3,rowNum:4,baseDate:f,getCellDate:u,getCellText:g,getCellClassName:p}))))}function Oc(n){var e=n.prefixCls,t=n.locale,i=n.generateConfig,r=n.pickerValue,s=n.onPickerValueChange,a=n.onModeChange,o="".concat(e,"-quarter-panel"),l=Hn(n,"quarter"),h=U(l,1),c=h[0],d=i.setMonth(r,0),f=function(x,w){return i.addMonth(x,w*3)},m=function(x){return qe(x,{locale:t,format:t.cellQuarterFormat,generateConfig:i})},u=function(){return me({},"".concat(e,"-cell-in-view"),!0)},g=v.createElement("button",{type:"button",key:"year","aria-label":"year panel",onClick:function(){a("year")},tabIndex:-1,className:"".concat(e,"-year-btn")},qe(r,{locale:t,format:t.yearFormat,generateConfig:i}));return v.createElement(xn.Provider,{value:c},v.createElement("div",{className:o},v.createElement(Bn,{superOffset:function(x){return i.addYear(r,x)},onChange:s,getStart:function(x){return i.setMonth(x,0)},getEnd:function(x){return i.setMonth(x,11)}},g),v.createElement(ui,we({},n,{titleFormat:t.fieldQuarterFormat,colNum:4,rowNum:1,baseDate:d,getCellDate:f,getCellText:m,getCellClassName:u}))))}function Ac(n){var e=n.prefixCls,t=n.generateConfig,i=n.locale,r=n.value,s=n.hoverValue,a=n.hoverRangeValue,o=i.locale,l="".concat(e,"-week-panel-row"),h=function(d){var f={};if(a){var m=U(a,2),u=m[0],g=m[1],p=Zn(t,o,u,d),x=Zn(t,o,g,d);f["".concat(l,"-range-start")]=p,f["".concat(l,"-range-end")]=x,f["".concat(l,"-range-hover")]=!p&&!x&&cr(t,u,g,d)}return s&&(f["".concat(l,"-hover")]=s.some(function(w){return Zn(t,o,d,w)})),Se(l,me({},"".concat(l,"-selected"),!a&&Zn(t,o,r,d)),f)};return v.createElement(ur,we({},n,{mode:"week",panelName:"week",rowClassName:h}))}function kc(n){var e=n.prefixCls,t=n.locale,i=n.generateConfig,r=n.pickerValue,s=n.disabledDate,a=n.onPickerValueChange,o=n.onModeChange,l="".concat(e,"-year-panel"),h=Hn(n,"year"),c=U(h,1),d=c[0],f=function(b){var N=Math.floor(i.getYear(b)/10)*10;return i.setYear(b,N)},m=function(b){var N=f(b);return i.addYear(N,9)},u=f(r),g=m(r),p=i.addYear(u,-1),x=function(b,N){return i.addYear(b,N)},w=function(b){return qe(b,{locale:t,format:t.cellYearFormat,generateConfig:i})},y=function(b){return me({},"".concat(e,"-cell-in-view"),fn(i,b,u)||fn(i,b,g)||cr(i,u,g,b))},C=s?function(M,b){var N=i.setMonth(M,0),S=i.setDate(N,1),_=i.addYear(S,1),R=i.addDate(_,-1);return s(S,b)&&s(R,b)}:null,E=v.createElement("button",{type:"button",key:"decade","aria-label":"decade panel",onClick:function(){o("decade")},tabIndex:-1,className:"".concat(e,"-decade-btn")},qe(u,{locale:t,format:t.yearFormat,generateConfig:i}),"-",qe(g,{locale:t,format:t.yearFormat,generateConfig:i}));return v.createElement(xn.Provider,{value:d},v.createElement("div",{className:l},v.createElement(Bn,{superOffset:function(b){return i.addYear(r,b*10)},onChange:a,getStart:f,getEnd:m},E),v.createElement(ui,we({},n,{disabledDate:C,titleFormat:t.fieldYearFormat,colNum:3,rowNum:4,baseDate:p,getCellDate:x,getCellText:w,getCellClassName:y}))))}var Pc={date:ur,datetime:Rc,week:Ac,month:Lc,quarter:Oc,year:kc,decade:Ic,time:jo};function zc(n,e){var t,i=n.locale,r=n.generateConfig,s=n.direction,a=n.prefixCls,o=n.tabIndex,l=o===void 0?0:o,h=n.multiple,c=n.defaultValue,d=n.value,f=n.onChange,m=n.onSelect,u=n.defaultPickerValue,g=n.pickerValue,p=n.onPickerValueChange,x=n.mode,w=n.onPanelChange,y=n.picker,C=y===void 0?"date":y,E=n.showTime,M=n.hoverValue,b=n.hoverRangeValue,N=n.cellRender,S=n.dateRender,_=n.monthCellRender,R=n.components,O=R===void 0?{}:R,I=n.hideHeader,A=((t=v.useContext(It))===null||t===void 0?void 0:t.prefixCls)||a||"rc-picker",D=v.useRef();v.useImperativeHandle(e,function(){return{nativeElement:D.current}});var L=To(n),P=U(L,4),z=P[0],H=P[1],Y=P[2],$=P[3],k=_o(i,H),W=C==="date"&&E?"datetime":C,j=v.useMemo(function(){return Do(W,Y,$,z,k)},[W,Y,$,z,k]),re=r.getNow(),J=St(C,{value:x,postState:function(he){return he||"date"}}),G=U(J,2),ee=G[0],oe=G[1],se=ee==="date"&&j?"datetime":ee,K=Vo(r,i,W),ie=St(c,{value:d}),Q=U(ie,2),X=Q[0],te=Q[1],ae=v.useMemo(function(){var ne=vn(X).filter(function(he){return he});return h?ne:ne.slice(0,1)},[X,h]),q=et(function(ne){te(ne),f&&(ne===null||ae.length!==ne.length||ae.some(function(he,V){return!at(r,i,he,ne[V],W)}))&&(f==null||f(h?ne:ne[0]))}),le=et(function(ne){if(m==null||m(ne),ee===C){var he=h?K(ae,ne):[ne];q(he)}}),Ce=St(u||ae[0]||re,{value:g}),_e=U(Ce,2),ge=_e[0],ze=_e[1];v.useEffect(function(){ae[0]&&!g&&ze(ae[0])},[ae[0]]);var Xe=function(he,V){w==null||w(he||g,V||ee)},Ze=function(he){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;ze(he),p==null||p(he),V&&Xe(he)},Ke=function(he,V){oe(he),V&&Ze(V),Xe(V,he)},nt=function(he){if(le(he),Ze(he),ee!==C){var V=["decade","year"],F=[].concat(V,["month"]),Z={quarter:[].concat(V,["quarter"]),week:[].concat(ht(F),["week"]),date:[].concat(ht(F),["date"])},ke=Z[C]||F,Fe=ke.indexOf(ee),Ye=ke[Fe+1];Ye&&Ke(Ye,he)}},Pe=v.useMemo(function(){var ne,he;if(Array.isArray(b)){var V=U(b,2);ne=V[0],he=V[1]}else ne=b;return!ne&&!he?null:(ne=ne||he,he=he||ne,r.isAfter(ne,he)?[he,ne]:[ne,he])},[b,r]),yt=Os(N,S,_),Oe=O[se]||Pc[se]||ur,Ue=v.useContext(qt),Qe=v.useMemo(function(){return fe(fe({},Ue),{},{hideHeader:I})},[Ue,I]),Re="".concat(A,"-panel"),ue=hr(n,["showWeek","prevIcon","nextIcon","superPrevIcon","superNextIcon","disabledDate","minDate","maxDate","onHover"]);return v.createElement(qt.Provider,{value:Qe},v.createElement("div",{ref:D,tabIndex:l,className:Se(Re,me({},"".concat(Re,"-rtl"),s==="rtl"))},v.createElement(Oe,we({},ue,{showTime:j,prefixCls:A,locale:k,generateConfig:r,onModeChange:Ke,pickerValue:ge,onPickerValueChange:function(he){Ze(he,!0)},value:ae[0],onSelect:nt,values:ae,cellRender:yt,hoverRangeValue:Pe,hoverValue:M}))))}var Hr=v.memo(v.forwardRef(zc));function Fc(n){var e=n.picker,t=n.multiplePanel,i=n.pickerValue,r=n.onPickerValueChange,s=n.needConfirm,a=n.onSubmit,o=n.range,l=n.hoverValue,h=v.useContext(It),c=h.prefixCls,d=h.generateConfig,f=v.useCallback(function(w,y){return Qn(d,e,w,y)},[d,e]),m=v.useMemo(function(){return f(i,1)},[i,f]),u=function(y){r(f(y,-1))},g={onCellDblClick:function(){s&&a()}},p=e==="time",x=fe(fe({},n),{},{hoverValue:null,hoverRangeValue:null,hideHeader:p});return o?x.hoverRangeValue=l:x.hoverValue=l,t?v.createElement("div",{className:"".concat(c,"-panels")},v.createElement(qt.Provider,{value:fe(fe({},g),{},{hideNext:!0})},v.createElement(Hr,x)),v.createElement(qt.Provider,{value:fe(fe({},g),{},{hidePrev:!0})},v.createElement(Hr,we({},x,{pickerValue:m,onPickerValueChange:u})))):v.createElement(qt.Provider,{value:fe({},g)},v.createElement(Hr,x))}function la(n){return typeof n=="function"?n():n}function $c(n){var e=n.prefixCls,t=n.presets,i=n.onClick,r=n.onHover;return t.length?v.createElement("div",{className:"".concat(e,"-presets")},v.createElement("ul",null,t.map(function(s,a){var o=s.label,l=s.value;return v.createElement("li",{key:a,onClick:function(){i(la(l))},onMouseEnter:function(){r(la(l))},onMouseLeave:function(){r(null)}},o)}))):null}function Uo(n){var e=n.panelRender,t=n.internalMode,i=n.picker,r=n.showNow,s=n.range,a=n.multiple,o=n.activeOffset,l=o===void 0?0:o,h=n.placement,c=n.presets,d=n.onPresetHover,f=n.onPresetSubmit,m=n.onFocus,u=n.onBlur,g=n.onPanelMouseDown,p=n.direction,x=n.value,w=n.onSelect,y=n.isInvalid,C=n.defaultOpenValue,E=n.onOk,M=n.onSubmit,b=v.useContext(It),N=b.prefixCls,S="".concat(N,"-panel"),_=p==="rtl",R=v.useRef(null),O=v.useRef(null),I=v.useState(0),A=U(I,2),D=A[0],L=A[1],P=v.useState(0),z=U(P,2),H=z[0],Y=z[1],$=function(q){q.offsetWidth&&L(q.offsetWidth)};v.useEffect(function(){if(s){var ae,q=((ae=R.current)===null||ae===void 0?void 0:ae.offsetWidth)||0,le=D-q;l<=le?Y(0):Y(l+q-D)}},[D,l,s]);function k(ae){return ae.filter(function(q){return q})}var W=v.useMemo(function(){return k(vn(x))},[x]),j=i==="time"&&!W.length,re=v.useMemo(function(){return j?k([C]):W},[j,W,C]),J=j?C:W,G=v.useMemo(function(){return re.length?re.some(function(ae){return y(ae)}):!0},[re,y]),ee=function(){j&&w(C),E(),M()},oe=v.createElement("div",{className:"".concat(N,"-panel-layout")},v.createElement($c,{prefixCls:N,presets:c,onClick:f,onHover:d}),v.createElement("div",null,v.createElement(Fc,we({},n,{value:J})),v.createElement(bc,we({},n,{showNow:a?!1:r,invalid:G,onSubmit:ee}))));e&&(oe=e(oe));var se="".concat(S,"-container"),K="marginLeft",ie="marginRight",Q=v.createElement("div",{onMouseDown:g,tabIndex:-1,className:Se(se,"".concat(N,"-").concat(t,"-panel-container")),style:me(me({},_?ie:K,H),_?K:ie,"auto"),onFocus:m,onBlur:u},oe);if(s){var X=lr(h,_),te=xo(X,_);Q=v.createElement("div",{onMouseDown:g,ref:O,className:Se("".concat(N,"-range-wrapper"),"".concat(N,"-").concat(i,"-range-wrapper"))},v.createElement("div",{ref:R,className:"".concat(N,"-range-arrow"),style:me({},te,l)}),v.createElement(Ds,{onResize:$},Q))}return Q}function Go(n,e){var t=n.format,i=n.maskFormat,r=n.generateConfig,s=n.locale,a=n.preserveInvalidOnBlur,o=n.inputReadOnly,l=n.required,h=n["aria-required"],c=n.onSubmit,d=n.onFocus,f=n.onBlur,m=n.onInputChange,u=n.onInvalid,g=n.open,p=n.onOpenChange,x=n.onKeyDown,w=n.onChange,y=n.activeHelp,C=n.name,E=n.autoComplete,M=n.id,b=n.value,N=n.invalid,S=n.placeholder,_=n.disabled,R=n.activeIndex,O=n.allHelp,I=n.picker,A=function(k,W){var j=r.locale.parse(s.locale,k,[W]);return j&&r.isValidate(j)?j:null},D=t[0],L=v.useCallback(function($){return qe($,{locale:s,format:D,generateConfig:r})},[s,r,D]),P=v.useMemo(function(){return b.map(L)},[b,L]),z=v.useMemo(function(){var $=I==="time"?8:10,k=typeof D=="function"?D(r.getNow()).length:D.length;return Math.max($,k)+2},[D,I,r]),H=function(k){for(var W=0;W<t.length;W+=1){var j=t[W];if(typeof j=="string"){var re=A(k,j);if(re)return re}}return!1},Y=function(k){function W(J){return k!==void 0?J[k]:J}var j=or(n,{aria:!0,data:!0}),re=fe(fe({},j),{},{format:i,validateFormat:function(G){return!!H(G)},preserveInvalidOnBlur:a,readOnly:o,required:l,"aria-required":h,name:C,autoComplete:E,size:z,id:W(M),value:W(P)||"",invalid:W(N),placeholder:W(S),active:R===k,helped:O||y&&R===k,disabled:W(_),onFocus:function(G){d(G,k)},onBlur:function(G){f(G,k)},onSubmit:c,onChange:function(G){m();var ee=H(G);if(ee){u(!1,k),w(ee,k);return}u(!!G,k)},onHelp:function(){p(!0,{index:k})},onKeyDown:function(G){var ee=!1;if(x==null||x(G,function(){ee=!0}),!G.defaultPrevented&&!ee)switch(G.key){case"Escape":p(!1,{index:k});break;case"Enter":g||p(!0);break}}},e==null?void 0:e({valueTexts:P}));return Object.keys(re).forEach(function(J){re[J]===void 0&&delete re[J]}),re};return[Y,L]}var Hc=["onMouseEnter","onMouseLeave"];function Xo(n){return v.useMemo(function(){return hr(n,Hc)},[n])}var Bc=["icon","type"],Yc=["onClear"];function fr(n){var e=n.icon,t=n.type,i=Ht(n,Bc),r=v.useContext(It),s=r.prefixCls;return e?v.createElement("span",we({className:"".concat(s,"-").concat(t)},i),e):null}function os(n){var e=n.onClear,t=Ht(n,Yc);return v.createElement(fr,we({},t,{type:"clear",role:"button",onMouseDown:function(r){r.preventDefault()},onClick:function(r){r.stopPropagation(),e()}}))}var Br=["YYYY","MM","DD","HH","mm","ss","SSS"],ha="顧",Wc=function(){function n(e){ah(this,n),me(this,"format",void 0),me(this,"maskFormat",void 0),me(this,"cells",void 0),me(this,"maskCells",void 0),this.format=e;var t=Br.map(function(o){return"(".concat(o,")")}).join("|"),i=new RegExp(t,"g");this.maskFormat=e.replace(i,function(o){return ha.repeat(o.length)});var r=new RegExp("(".concat(Br.join("|"),")")),s=(e.split(r)||[]).filter(function(o){return o}),a=0;this.cells=s.map(function(o){var l=Br.includes(o),h=a,c=a+o.length;return a=c,{text:o,mask:l,start:h,end:c}}),this.maskCells=this.cells.filter(function(o){return o.mask})}return sh(n,[{key:"getSelection",value:function(t){var i=this.maskCells[t]||{},r=i.start,s=i.end;return[r||0,s||0]}},{key:"match",value:function(t){for(var i=0;i<this.maskFormat.length;i+=1){var r=this.maskFormat[i],s=t[i];if(!s||r!==ha&&r!==s)return!1}return!0}},{key:"size",value:function(){return this.maskCells.length}},{key:"getMaskCellIndex",value:function(t){for(var i=Number.MAX_SAFE_INTEGER,r=0,s=0;s<this.maskCells.length;s+=1){var a=this.maskCells[s],o=a.start,l=a.end;if(t>=o&&t<=l)return s;var h=Math.min(Math.abs(t-o),Math.abs(t-l));h<i&&(i=h,r=s)}return r}}]),n}();function Vc(n){var e={YYYY:[0,9999,new Date().getFullYear()],MM:[1,12],DD:[1,31],HH:[0,23],mm:[0,59],ss:[0,59],SSS:[0,999]};return e[n]}var jc=["active","showActiveCls","suffixIcon","format","validateFormat","onChange","onInput","helped","onHelp","onSubmit","onKeyDown","preserveInvalidOnBlur","invalid","clearIcon"],ls=v.forwardRef(function(n,e){var t=n.active,i=n.showActiveCls,r=i===void 0?!0:i,s=n.suffixIcon,a=n.format,o=n.validateFormat,l=n.onChange;n.onInput;var h=n.helped,c=n.onHelp,d=n.onSubmit,f=n.onKeyDown,m=n.preserveInvalidOnBlur,u=m===void 0?!1:m,g=n.invalid,p=n.clearIcon,x=Ht(n,jc),w=n.value,y=n.onFocus,C=n.onBlur,E=n.onMouseUp,M=v.useContext(It),b=M.prefixCls,N=M.input,S=N===void 0?"input":N,_="".concat(b,"-input"),R=v.useState(!1),O=U(R,2),I=O[0],A=O[1],D=v.useState(w),L=U(D,2),P=L[0],z=L[1],H=v.useState(""),Y=U(H,2),$=Y[0],k=Y[1],W=v.useState(null),j=U(W,2),re=j[0],J=j[1],G=v.useState(null),ee=U(G,2),oe=ee[0],se=ee[1],K=P||"";v.useEffect(function(){z(w)},[w]);var ie=v.useRef(),Q=v.useRef();v.useImperativeHandle(e,function(){return{nativeElement:ie.current,inputElement:Q.current,focus:function(ne){Q.current.focus(ne)},blur:function(){Q.current.blur()}}});var X=v.useMemo(function(){return new Wc(a||"")},[a]),te=v.useMemo(function(){return h?[0,0]:X.getSelection(re)},[X,re,h]),ae=U(te,2),q=ae[0],le=ae[1],Ce=function(ne){ne&&ne!==a&&ne!==w&&c()},_e=et(function(ue){o(ue)&&l(ue),z(ue),Ce(ue)}),ge=function(ne){if(!a){var he=ne.target.value;Ce(he),z(he),l(he)}},ze=function(ne){var he=ne.clipboardData.getData("text");o(he)&&_e(he)},Xe=v.useRef(!1),Ze=function(){Xe.current=!0},Ke=function(ne){var he=ne.target,V=he.selectionStart,F=X.getMaskCellIndex(V);J(F),se({}),E==null||E(ne),Xe.current=!1},nt=function(ne){A(!0),J(0),k(""),y(ne)},Pe=function(ne){C(ne)},yt=function(ne){A(!1),Pe(ne)};Ps(t,function(){!t&&!u&&z(w)});var Oe=function(ne){ne.key==="Enter"&&o(K)&&d(),f==null||f(ne)},Ue=function(ne){Oe(ne);var he=ne.key,V=null,F=null,Z=le-q,ke=a.slice(q,le),Fe=function(ct){J(function(Ft){var st=Ft+ct;return st=Math.max(st,0),st=Math.min(st,X.size()-1),st})},Ye=function(ct){var Ft=Vc(ke),st=U(Ft,3),Tt=st[0],tn=st[1],bn=st[2],nn=K.slice(q,le),rn=Number(nn);if(isNaN(rn))return String(bn||(ct>0?Tt:tn));var sn=rn+ct,Wt=tn-Tt+1;return String(Tt+(Wt+sn-Tt)%Wt)};switch(he){case"Backspace":case"Delete":V="",F=ke;break;case"ArrowLeft":V="",Fe(-1);break;case"ArrowRight":V="",Fe(1);break;case"ArrowUp":V="",F=Ye(1);break;case"ArrowDown":V="",F=Ye(-1);break;default:isNaN(Number(he))||(V=$+he,F=V);break}if(V!==null&&(k(V),V.length>=Z&&(Fe(1),k(""))),F!==null){var Lt=K.slice(0,q)+Ls(F,Z)+K.slice(le);_e(Lt.slice(0,a.length))}se({})},Qe=v.useRef();gt(function(){if(!(!I||!a||Xe.current)){if(!X.match(K)){_e(a);return}return Q.current.setSelectionRange(q,le),Qe.current=Bt(function(){Q.current.setSelectionRange(q,le)}),function(){Bt.cancel(Qe.current)}}},[X,a,I,K,re,q,le,oe,_e]);var Re=a?{onFocus:nt,onBlur:yt,onKeyDown:Ue,onMouseDown:Ze,onMouseUp:Ke,onPaste:ze}:{};return v.createElement("div",{ref:ie,className:Se(_,me(me({},"".concat(_,"-active"),t&&r),"".concat(_,"-placeholder"),h))},v.createElement(S,we({ref:Q,"aria-invalid":g,autoComplete:"off"},x,{onKeyDown:Oe,onBlur:Pe},Re,{value:K,onChange:ge})),v.createElement(fr,{type:"suffix",icon:s}),p)}),Uc=["id","prefix","clearIcon","suffixIcon","separator","activeIndex","activeHelp","allHelp","focused","onFocus","onBlur","onKeyDown","locale","generateConfig","placeholder","className","style","onClick","onClear","value","onChange","onSubmit","onInputChange","format","maskFormat","preserveInvalidOnBlur","onInvalid","disabled","invalid","inputReadOnly","direction","onOpenChange","onActiveOffset","placement","onMouseDown","required","aria-required","autoFocus","tabIndex"],Gc=["index"],Xc=["insetInlineStart","insetInlineEnd"];function Kc(n,e){var t=n.id,i=n.prefix,r=n.clearIcon,s=n.suffixIcon,a=n.separator,o=a===void 0?"~":a,l=n.activeIndex;n.activeHelp,n.allHelp;var h=n.focused;n.onFocus,n.onBlur,n.onKeyDown,n.locale,n.generateConfig;var c=n.placeholder,d=n.className,f=n.style,m=n.onClick,u=n.onClear,g=n.value;n.onChange,n.onSubmit,n.onInputChange,n.format,n.maskFormat,n.preserveInvalidOnBlur,n.onInvalid;var p=n.disabled,x=n.invalid;n.inputReadOnly;var w=n.direction;n.onOpenChange;var y=n.onActiveOffset,C=n.placement,E=n.onMouseDown;n.required,n["aria-required"];var M=n.autoFocus,b=n.tabIndex,N=Ht(n,Uc),S=w==="rtl",_=v.useContext(It),R=_.prefixCls,O=v.useMemo(function(){if(typeof t=="string")return[t];var Q=t||{};return[Q.start,Q.end]},[t]),I=v.useRef(),A=v.useRef(),D=v.useRef(),L=function(X){var te;return(te=[A,D][X])===null||te===void 0?void 0:te.current};v.useImperativeHandle(e,function(){return{nativeElement:I.current,focus:function(X){if(Pn(X)==="object"){var te,ae=X||{},q=ae.index,le=q===void 0?0:q,Ce=Ht(ae,Gc);(te=L(le))===null||te===void 0||te.focus(Ce)}else{var _e;(_e=L(X??0))===null||_e===void 0||_e.focus()}},blur:function(){var X,te;(X=L(0))===null||X===void 0||X.blur(),(te=L(1))===null||te===void 0||te.blur()}}});var P=Xo(N),z=v.useMemo(function(){return Array.isArray(c)?c:[c,c]},[c]),H=Go(fe(fe({},n),{},{id:O,placeholder:z})),Y=U(H,1),$=Y[0],k=lr(C,S),W=xo(k,S),j=k==null?void 0:k.toLowerCase().endsWith("right"),re=v.useState({position:"absolute",width:0}),J=U(re,2),G=J[0],ee=J[1],oe=et(function(){var Q=L(l);if(Q){var X=Q.nativeElement,te=X.offsetWidth,ae=X.offsetLeft,q=X.offsetParent,le=(q==null?void 0:q.offsetWidth)||0,Ce=j?le-te-ae:ae;ee(function(_e){_e.insetInlineStart,_e.insetInlineEnd;var ge=Ht(_e,Xc);return fe(fe({},ge),{},me({width:te},W,Ce))}),y(Ce)}});v.useEffect(function(){oe()},[l]);var se=r&&(g[0]&&!p[0]||g[1]&&!p[1]),K=M&&!p[0],ie=M&&!K&&!p[1];return v.createElement(Ds,{onResize:oe},v.createElement("div",we({},P,{className:Se(R,"".concat(R,"-range"),me(me(me(me({},"".concat(R,"-focused"),h),"".concat(R,"-disabled"),p.every(function(Q){return Q})),"".concat(R,"-invalid"),x.some(function(Q){return Q})),"".concat(R,"-rtl"),S),d),style:f,ref:I,onClick:m,onMouseDown:function(X){var te=X.target;te!==A.current.inputElement&&te!==D.current.inputElement&&X.preventDefault(),E==null||E(X)}}),i&&v.createElement("div",{className:"".concat(R,"-prefix")},i),v.createElement(ls,we({ref:A},$(0),{autoFocus:K,tabIndex:b,"date-range":"start"})),v.createElement("div",{className:"".concat(R,"-range-separator")},o),v.createElement(ls,we({ref:D},$(1),{autoFocus:ie,tabIndex:b,"date-range":"end"})),v.createElement("div",{className:"".concat(R,"-active-bar"),style:G}),v.createElement(fr,{type:"suffix",icon:s}),se&&v.createElement(os,{icon:r,onClear:u})))}var qc=v.forwardRef(Kc);function ca(n,e){var t=n??e;return Array.isArray(t)?t:[t,t]}function $i(n){return n===1?"end":"start"}function Zc(n,e){var t=Lo(n,function(){var Ne=n.disabled,ve=n.allowEmpty,Me=ca(Ne,!1),We=ca(ve,!1);return{disabled:Me,allowEmpty:We}}),i=U(t,6),r=i[0],s=i[1],a=i[2],o=i[3],l=i[4],h=i[5],c=r.prefixCls,d=r.styles,f=r.classNames,m=r.placement,u=r.defaultValue,g=r.value,p=r.needConfirm,x=r.onKeyDown,w=r.disabled,y=r.allowEmpty,C=r.disabledDate,E=r.minDate,M=r.maxDate,b=r.defaultOpen,N=r.open,S=r.onOpenChange,_=r.locale,R=r.generateConfig,O=r.picker,I=r.showNow,A=r.showToday,D=r.showTime,L=r.mode,P=r.onPanelChange,z=r.onCalendarChange,H=r.onOk,Y=r.defaultPickerValue,$=r.pickerValue,k=r.onPickerValueChange,W=r.inputReadOnly,j=r.suffixIcon,re=r.onFocus,J=r.onBlur,G=r.presets,ee=r.ranges,oe=r.components,se=r.cellRender,K=r.dateRender,ie=r.monthCellRender,Q=r.onClick,X=Ao(e),te=Oo(N,b,w,S),ae=U(te,2),q=ae[0],le=ae[1],Ce=function(ve,Me){(w.some(function(We){return!We})||!ve)&&le(ve,Me)},_e=Bo(R,_,o,!0,!1,u,g,z,H),ge=U(_e,5),ze=ge[0],Xe=ge[1],Ze=ge[2],Ke=ge[3],nt=ge[4],Pe=Ze(),yt=Po(w,y,q),Oe=U(yt,9),Ue=Oe[0],Qe=Oe[1],Re=Oe[2],ue=Oe[3],ne=Oe[4],he=Oe[5],V=Oe[6],F=Oe[7],Z=Oe[8],ke=function(ve,Me){Qe(!0),re==null||re(ve,{range:$i(Me??ue)})},Fe=function(ve,Me){Qe(!1),J==null||J(ve,{range:$i(Me??ue)})},Ye=v.useMemo(function(){if(!D)return null;var Ne=D.disabledTime,ve=Ne?function(Me){var We=$i(ue),it=Co(Pe,V,ue);return Ne(Me,We,{from:it})}:void 0;return fe(fe({},D),{},{disabledTime:ve})},[D,ue,Pe,V]),Lt=St([O,O],{value:L}),Et=U(Lt,2),ct=Et[0],Ft=Et[1],st=ct[ue]||O,Tt=st==="date"&&Ye?"datetime":st,tn=Tt===O&&Tt!=="time",bn=Wo(O,st,I,A,!0),nn=Yo(r,ze,Xe,Ze,Ke,w,o,Ue,q,h),rn=U(nn,2),sn=rn[0],Wt=rn[1],wr=wc(Pe,w,V,R,_,C),Cr=Mo(Pe,h,y),wi=U(Cr,2),Er=wi[0],Ci=wi[1],Mr=zo(R,_,Pe,ct,q,ue,s,tn,Y,$,Ye==null?void 0:Ye.defaultOpenValue,k,E,M),Ei=U(Mr,2),Mi=Ei[0],Vt=Ei[1],bi=et(function(Ne,ve,Me){var We=ni(ct,ue,ve);if((We[0]!==ct[0]||We[1]!==ct[1])&&Ft(We),P&&Me!==!1){var it=ht(Pe);Ne&&(it[ue]=Ne),P(it,We)}}),jn=function(ve,Me){return ni(Pe,Me,ve)},Ot=function(ve,Me){var We=Pe;ve&&(We=jn(ve,ue)),F(ue);var it=he(We);Ke(We),sn(ue,it===null),it===null?Ce(!1,{force:!0}):Me||X.current.focus({index:it})},_i=function(ve){var Me,We=ve.target.getRootNode();if(!X.current.nativeElement.contains((Me=We.activeElement)!==null&&Me!==void 0?Me:document.activeElement)){var it=w.findIndex(function(Kl){return!Kl});it>=0&&X.current.focus({index:it})}Ce(!0),Q==null||Q(ve)},br=function(){Wt(null),Ce(!1,{force:!0})},Si=v.useState(null),Ni=U(Si,2),Ti=Ni[0],At=Ni[1],Un=v.useState(null),Di=U(Un,2),_n=Di[0],Gn=Di[1],Ri=v.useMemo(function(){return _n||Pe},[Pe,_n]);v.useEffect(function(){q||Gn(null)},[q]);var Ii=v.useState(0),Li=U(Ii,2),_r=Li[0],Sr=Li[1],Nr=ko(G,ee),Tr=function(ve){Gn(ve),At("preset")},Dr=function(ve){var Me=Wt(ve);Me&&Ce(!1,{force:!0})},Rr=function(ve){Ot(ve)},Ir=function(ve){Gn(ve?jn(ve,ue):null),At("cell")},Lr=function(ve){Ce(!0),ke(ve)},Or=function(){Re("panel")},Ar=function(ve){var Me=ni(Pe,ue,ve);Ke(Me),!p&&!a&&s===Tt&&Ot(ve)},kr=function(){Ce(!1)},Pr=Os(se,K,ie,$i(ue)),zr=Pe[ue]||null,ye=et(function(Ne){return h(Ne,{activeIndex:ue})}),pe=v.useMemo(function(){var Ne=or(r,!1),ve=On(r,[].concat(ht(Object.keys(Ne)),["onChange","onCalendarChange","style","className","onPanelChange","disabledTime"]));return ve},[r]),pt=v.createElement(Uo,we({},pe,{showNow:bn,showTime:Ye,range:!0,multiplePanel:tn,activeOffset:_r,placement:m,disabledDate:wr,onFocus:Lr,onBlur:Fe,onPanelMouseDown:Or,picker:O,mode:st,internalMode:Tt,onPanelChange:bi,format:l,value:zr,isInvalid:ye,onChange:null,onSelect:Ar,pickerValue:Mi,defaultOpenValue:vn(D==null?void 0:D.defaultOpenValue)[ue],onPickerValueChange:Vt,hoverValue:Ri,onHover:Ir,needConfirm:p,onSubmit:Ot,onOk:nt,presets:Nr,onPresetHover:Tr,onPresetSubmit:Dr,onNow:Rr,cellRender:Pr})),kt=function(ve,Me){var We=jn(ve,Me);Ke(We)},Oi=function(){Re("input")},jl=function(ve,Me){var We=V.length,it=V[We-1];if(We&&it!==Me&&p&&!y[it]&&!Z(it)&&Pe[it]){X.current.focus({index:it});return}Re("input"),Ce(!0,{inherit:!0}),ue!==Me&&q&&!p&&a&&Ot(null,!0),ne(Me),ke(ve,Me)},Ul=function(ve,Me){if(Ce(!1),!p&&Re()==="input"){var We=he(Pe);sn(ue,We===null)}Fe(ve,Me)},Gl=function(ve,Me){ve.key==="Tab"&&Ot(null,!0),x==null||x(ve,Me)},Xl=v.useMemo(function(){return{prefixCls:c,locale:_,generateConfig:R,button:oe.button,input:oe.input}},[c,_,R,oe.button,oe.input]);return gt(function(){q&&ue!==void 0&&bi(null,O,!1)},[q,ue,O]),gt(function(){var Ne=Re();!q&&Ne==="input"&&(Ce(!1),Ot(null,!0)),!q&&a&&!p&&Ne==="panel"&&(Ce(!0),Ot())},[q]),v.createElement(It.Provider,{value:Xl},v.createElement(yo,we({},Eo(r),{popupElement:pt,popupStyle:d.popup,popupClassName:f.popup,visible:q,onClose:kr,range:!0}),v.createElement(qc,we({},r,{ref:X,suffixIcon:j,activeIndex:Ue||q?ue:null,activeHelp:!!_n,allHelp:!!_n&&Ti==="preset",focused:Ue,onFocus:jl,onBlur:Ul,onKeyDown:Gl,onSubmit:Ot,value:Ri,maskFormat:l,onChange:kt,onInputChange:Oi,format:o,inputReadOnly:W,disabled:w,open:q,onOpenChange:Ce,onClick:_i,onClear:br,invalid:Er,onInvalid:Ci,onActiveOffset:Sr}))))}var Qc=v.forwardRef(Zc);function Jc(n){var e=n.prefixCls,t=n.value,i=n.onRemove,r=n.removeIcon,s=r===void 0?"×":r,a=n.formatDate,o=n.disabled,l=n.maxTagCount,h=n.placeholder,c="".concat(e,"-selector"),d="".concat(e,"-selection"),f="".concat(d,"-overflow");function m(p,x){return v.createElement("span",{className:Se("".concat(d,"-item")),title:typeof p=="string"?p:null},v.createElement("span",{className:"".concat(d,"-item-content")},p),!o&&x&&v.createElement("span",{onMouseDown:function(y){y.preventDefault()},onClick:x,className:"".concat(d,"-item-remove")},s))}function u(p){var x=a(p),w=function(C){C&&C.stopPropagation(),i(p)};return m(x,w)}function g(p){var x="+ ".concat(p.length," ...");return m(x)}return v.createElement("div",{className:c},v.createElement(oh,{prefixCls:f,data:t,renderItem:u,renderRest:g,itemKey:function(x){return a(x)},maxCount:l}),!t.length&&v.createElement("span",{className:"".concat(e,"-selection-placeholder")},h))}var ed=["id","open","prefix","clearIcon","suffixIcon","activeHelp","allHelp","focused","onFocus","onBlur","onKeyDown","locale","generateConfig","placeholder","className","style","onClick","onClear","internalPicker","value","onChange","onSubmit","onInputChange","multiple","maxTagCount","format","maskFormat","preserveInvalidOnBlur","onInvalid","disabled","invalid","inputReadOnly","direction","onOpenChange","onMouseDown","required","aria-required","autoFocus","tabIndex","removeIcon"];function td(n,e){n.id;var t=n.open,i=n.prefix,r=n.clearIcon,s=n.suffixIcon;n.activeHelp,n.allHelp;var a=n.focused;n.onFocus,n.onBlur,n.onKeyDown;var o=n.locale,l=n.generateConfig,h=n.placeholder,c=n.className,d=n.style,f=n.onClick,m=n.onClear,u=n.internalPicker,g=n.value,p=n.onChange,x=n.onSubmit;n.onInputChange;var w=n.multiple,y=n.maxTagCount;n.format,n.maskFormat,n.preserveInvalidOnBlur,n.onInvalid;var C=n.disabled,E=n.invalid;n.inputReadOnly;var M=n.direction;n.onOpenChange;var b=n.onMouseDown;n.required,n["aria-required"];var N=n.autoFocus,S=n.tabIndex,_=n.removeIcon,R=Ht(n,ed),O=M==="rtl",I=v.useContext(It),A=I.prefixCls,D=v.useRef(),L=v.useRef();v.useImperativeHandle(e,function(){return{nativeElement:D.current,focus:function(G){var ee;(ee=L.current)===null||ee===void 0||ee.focus(G)},blur:function(){var G;(G=L.current)===null||G===void 0||G.blur()}}});var P=Xo(R),z=function(G){p([G])},H=function(G){var ee=g.filter(function(oe){return oe&&!at(l,o,oe,G,u)});p(ee),t||x()},Y=Go(fe(fe({},n),{},{onChange:z}),function(J){var G=J.valueTexts;return{value:G[0]||"",active:a}}),$=U(Y,2),k=$[0],W=$[1],j=!!(r&&g.length&&!C),re=w?v.createElement(v.Fragment,null,v.createElement(Jc,{prefixCls:A,value:g,onRemove:H,formatDate:W,maxTagCount:y,disabled:C,removeIcon:_,placeholder:h}),v.createElement("input",{className:"".concat(A,"-multiple-input"),value:g.map(W).join(","),ref:L,readOnly:!0,autoFocus:N,tabIndex:S}),v.createElement(fr,{type:"suffix",icon:s}),j&&v.createElement(os,{icon:r,onClear:m})):v.createElement(ls,we({ref:L},k(),{autoFocus:N,tabIndex:S,suffixIcon:s,clearIcon:j&&v.createElement(os,{icon:r,onClear:m}),showActiveCls:!1}));return v.createElement("div",we({},P,{className:Se(A,me(me(me(me(me({},"".concat(A,"-multiple"),w),"".concat(A,"-focused"),a),"".concat(A,"-disabled"),C),"".concat(A,"-invalid"),E),"".concat(A,"-rtl"),O),c),style:d,ref:D,onClick:f,onMouseDown:function(G){var ee,oe=G.target;oe!==((ee=L.current)===null||ee===void 0?void 0:ee.inputElement)&&G.preventDefault(),b==null||b(G)}}),i&&v.createElement("div",{className:"".concat(A,"-prefix")},i),re)}var nd=v.forwardRef(td);function id(n,e){var t=Lo(n),i=U(t,6),r=i[0],s=i[1],a=i[2],o=i[3],l=i[4],h=i[5],c=r,d=c.prefixCls,f=c.styles,m=c.classNames,u=c.order,g=c.defaultValue,p=c.value,x=c.needConfirm,w=c.onChange,y=c.onKeyDown,C=c.disabled,E=c.disabledDate,M=c.minDate,b=c.maxDate,N=c.defaultOpen,S=c.open,_=c.onOpenChange,R=c.locale,O=c.generateConfig,I=c.picker,A=c.showNow,D=c.showToday,L=c.showTime,P=c.mode,z=c.onPanelChange,H=c.onCalendarChange,Y=c.onOk,$=c.multiple,k=c.defaultPickerValue,W=c.pickerValue,j=c.onPickerValueChange,re=c.inputReadOnly,J=c.suffixIcon,G=c.removeIcon,ee=c.onFocus,oe=c.onBlur,se=c.presets,K=c.components,ie=c.cellRender,Q=c.dateRender,X=c.monthCellRender,te=c.onClick,ae=Ao(e);function q(ye){return ye===null?null:$?ye:ye[0]}var le=Vo(O,R,s),Ce=Oo(S,N,[C],_),_e=U(Ce,2),ge=_e[0],ze=_e[1],Xe=function(pe,pt,kt){if(H){var Oi=fe({},kt);delete Oi.range,H(q(pe),q(pt),Oi)}},Ze=function(pe){Y==null||Y(q(pe))},Ke=Bo(O,R,o,!1,u,g,p,Xe,Ze),nt=U(Ke,5),Pe=nt[0],yt=nt[1],Oe=nt[2],Ue=nt[3],Qe=nt[4],Re=Oe(),ue=Po([C]),ne=U(ue,4),he=ne[0],V=ne[1],F=ne[2],Z=ne[3],ke=function(pe){V(!0),ee==null||ee(pe,{})},Fe=function(pe){V(!1),oe==null||oe(pe,{})},Ye=St(I,{value:P}),Lt=U(Ye,2),Et=Lt[0],ct=Lt[1],Ft=Et==="date"&&L?"datetime":Et,st=Wo(I,Et,A,D),Tt=w&&function(ye,pe){w(q(ye),q(pe))},tn=Yo(fe(fe({},r),{},{onChange:Tt}),Pe,yt,Oe,Ue,[],o,he,ge,h),bn=U(tn,2),nn=bn[1],rn=Mo(Re,h),sn=U(rn,2),Wt=sn[0],wr=sn[1],Cr=v.useMemo(function(){return Wt.some(function(ye){return ye})},[Wt]),wi=function(pe,pt){if(j){var kt=fe(fe({},pt),{},{mode:pt.mode[0]});delete kt.range,j(pe[0],kt)}},Er=zo(O,R,Re,[Et],ge,Z,s,!1,k,W,vn(L==null?void 0:L.defaultOpenValue),wi,M,b),Ci=U(Er,2),Mr=Ci[0],Ei=Ci[1],Mi=et(function(ye,pe,pt){if(ct(pe),z&&pt!==!1){var kt=ye||Re[Re.length-1];z(kt,pe)}}),Vt=function(){nn(Oe()),ze(!1,{force:!0})},bi=function(pe){!C&&!ae.current.nativeElement.contains(document.activeElement)&&ae.current.focus(),ze(!0),te==null||te(pe)},jn=function(){nn(null),ze(!1,{force:!0})},Ot=v.useState(null),_i=U(Ot,2),br=_i[0],Si=_i[1],Ni=v.useState(null),Ti=U(Ni,2),At=Ti[0],Un=Ti[1],Di=v.useMemo(function(){var ye=[At].concat(ht(Re)).filter(function(pe){return pe});return $?ye:ye.slice(0,1)},[Re,At,$]),_n=v.useMemo(function(){return!$&&At?[At]:Re.filter(function(ye){return ye})},[Re,At,$]);v.useEffect(function(){ge||Un(null)},[ge]);var Gn=ko(se),Ri=function(pe){Un(pe),Si("preset")},Ii=function(pe){var pt=$?le(Oe(),pe):[pe],kt=nn(pt);kt&&!$&&ze(!1,{force:!0})},Li=function(pe){Ii(pe)},_r=function(pe){Un(pe),Si("cell")},Sr=function(pe){ze(!0),ke(pe)},Nr=function(pe){if(F("panel"),!($&&Ft!==I)){var pt=$?le(Oe(),pe):[pe];Ue(pt),!x&&!a&&s===Ft&&Vt()}},Tr=function(){ze(!1)},Dr=Os(ie,Q,X),Rr=v.useMemo(function(){var ye=or(r,!1),pe=On(r,[].concat(ht(Object.keys(ye)),["onChange","onCalendarChange","style","className","onPanelChange"]));return fe(fe({},pe),{},{multiple:r.multiple})},[r]),Ir=v.createElement(Uo,we({},Rr,{showNow:st,showTime:L,disabledDate:E,onFocus:Sr,onBlur:Fe,picker:I,mode:Et,internalMode:Ft,onPanelChange:Mi,format:l,value:Re,isInvalid:h,onChange:null,onSelect:Nr,pickerValue:Mr,defaultOpenValue:L==null?void 0:L.defaultOpenValue,onPickerValueChange:Ei,hoverValue:Di,onHover:_r,needConfirm:x,onSubmit:Vt,onOk:Qe,presets:Gn,onPresetHover:Ri,onPresetSubmit:Ii,onNow:Li,cellRender:Dr})),Lr=function(pe){Ue(pe)},Or=function(){F("input")},Ar=function(pe){F("input"),ze(!0,{inherit:!0}),ke(pe)},kr=function(pe){ze(!1),Fe(pe)},Pr=function(pe,pt){pe.key==="Tab"&&Vt(),y==null||y(pe,pt)},zr=v.useMemo(function(){return{prefixCls:d,locale:R,generateConfig:O,button:K.button,input:K.input}},[d,R,O,K.button,K.input]);return gt(function(){ge&&Z!==void 0&&Mi(null,I,!1)},[ge,Z,I]),gt(function(){var ye=F();!ge&&ye==="input"&&(ze(!1),Vt()),!ge&&a&&!x&&ye==="panel"&&(ze(!0),Vt())},[ge]),v.createElement(It.Provider,{value:zr},v.createElement(yo,we({},Eo(r),{popupElement:Ir,popupStyle:f.popup,popupClassName:m.popup,visible:ge,onClose:Tr}),v.createElement(nd,we({},r,{ref:ae,suffixIcon:J,removeIcon:G,activeHelp:!!At,allHelp:!!At&&br==="preset",focused:he,onFocus:Ar,onBlur:kr,onKeyDown:Pr,onSubmit:Vt,value:_n,maskFormat:l,onChange:Lr,onInputChange:Or,internalPicker:s,format:o,inputReadOnly:re,disabled:C,open:ge,onOpenChange:ze,onClick:bi,onClear:jn,invalid:Cr,onInvalid:function(pe){wr(pe,0)}}))))}var rd=v.forwardRef(id);const Yr=(n,e)=>{const{componentCls:t,controlHeight:i}=n,r=e?`${t}-${e}`:"",s=Sh(n);return[{[`${t}-multiple${r}`]:{paddingBlock:s.containerPadding,paddingInlineStart:s.basePadding,minHeight:i,[`${t}-selection-item`]:{height:s.itemHeight,lineHeight:de(s.itemLineHeight)}}}]},sd=n=>{const{componentCls:e,calc:t,lineWidth:i}=n,r=qi(n,{fontHeight:n.fontSize,selectHeight:n.controlHeightSM,multipleSelectItemHeight:n.multipleItemHeightSM,borderRadius:n.borderRadiusSM,borderRadiusSM:n.borderRadiusXS,controlHeight:n.controlHeightSM}),s=qi(n,{fontHeight:t(n.multipleItemHeightLG).sub(t(i).mul(2).equal()).equal(),fontSize:n.fontSizeLG,selectHeight:n.controlHeightLG,multipleSelectItemHeight:n.multipleItemHeightLG,borderRadius:n.borderRadiusLG,borderRadiusSM:n.borderRadius,controlHeight:n.controlHeightLG});return[Yr(r,"small"),Yr(n),Yr(s,"large"),{[`${e}${e}-multiple`]:Object.assign(Object.assign({width:"100%",cursor:"text",[`${e}-selector`]:{flex:"auto",padding:0,position:"relative","&:after":{margin:0},[`${e}-selection-placeholder`]:{position:"absolute",top:"50%",insetInlineStart:n.inputPaddingHorizontalBase,insetInlineEnd:0,transform:"translateY(-50%)",transition:`all ${n.motionDurationSlow}`,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",flex:1,color:n.colorTextPlaceholder,pointerEvents:"none"}}},_h(n)),{[`${e}-multiple-input`]:{width:0,height:0,border:0,visibility:"hidden",position:"absolute",zIndex:-1}})}]},ad=n=>{const{pickerCellCls:e,pickerCellInnerCls:t,cellHeight:i,borderRadiusSM:r,motionDurationMid:s,cellHoverBg:a,lineWidth:o,lineType:l,colorPrimary:h,cellActiveWithRangeBg:c,colorTextLightSolid:d,colorTextDisabled:f,cellBgDisabled:m,colorFillSecondary:u}=n;return{"&::before":{position:"absolute",top:"50%",insetInlineStart:0,insetInlineEnd:0,zIndex:1,height:i,transform:"translateY(-50%)",content:'""',pointerEvents:"none"},[t]:{position:"relative",zIndex:2,display:"inline-block",minWidth:i,height:i,lineHeight:de(i),borderRadius:r,transition:`background ${s}`},[`&:hover:not(${e}-in-view):not(${e}-disabled),
    &:hover:not(${e}-selected):not(${e}-range-start):not(${e}-range-end):not(${e}-disabled)`]:{[t]:{background:a}},[`&-in-view${e}-today ${t}`]:{"&::before":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:1,border:`${de(o)} ${l} ${h}`,borderRadius:r,content:'""'}},[`&-in-view${e}-in-range,
      &-in-view${e}-range-start,
      &-in-view${e}-range-end`]:{position:"relative",[`&:not(${e}-disabled):before`]:{background:c}},[`&-in-view${e}-selected,
      &-in-view${e}-range-start,
      &-in-view${e}-range-end`]:{[`&:not(${e}-disabled) ${t}`]:{color:d,background:h},[`&${e}-disabled ${t}`]:{background:u}},[`&-in-view${e}-range-start:not(${e}-disabled):before`]:{insetInlineStart:"50%"},[`&-in-view${e}-range-end:not(${e}-disabled):before`]:{insetInlineEnd:"50%"},[`&-in-view${e}-range-start:not(${e}-range-end) ${t}`]:{borderStartStartRadius:r,borderEndStartRadius:r,borderStartEndRadius:0,borderEndEndRadius:0},[`&-in-view${e}-range-end:not(${e}-range-start) ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0,borderStartEndRadius:r,borderEndEndRadius:r},"&-disabled":{color:f,cursor:"not-allowed",[t]:{background:"transparent"},"&::before":{background:m}},[`&-disabled${e}-today ${t}::before`]:{borderColor:f}}},od=n=>{const{componentCls:e,pickerCellCls:t,pickerCellInnerCls:i,pickerYearMonthCellWidth:r,pickerControlIconSize:s,cellWidth:a,paddingSM:o,paddingXS:l,paddingXXS:h,colorBgContainer:c,lineWidth:d,lineType:f,borderRadiusLG:m,colorPrimary:u,colorTextHeading:g,colorSplit:p,pickerControlIconBorderWidth:x,colorIcon:w,textHeight:y,motionDurationMid:C,colorIconHover:E,fontWeightStrong:M,cellHeight:b,pickerCellPaddingVertical:N,colorTextDisabled:S,colorText:_,fontSize:R,motionDurationSlow:O,withoutTimeCellHeight:I,pickerQuarterPanelContentHeight:A,borderRadiusSM:D,colorTextLightSolid:L,cellHoverBg:P,timeColumnHeight:z,timeColumnWidth:H,timeCellHeight:Y,controlItemBgActive:$,marginXXS:k,pickerDatePanelPaddingHorizontal:W,pickerControlIconMargin:j}=n,re=n.calc(a).mul(7).add(n.calc(W).mul(2)).equal();return{[e]:{"&-panel":{display:"inline-flex",flexDirection:"column",textAlign:"center",background:c,borderRadius:m,outline:"none","&-focused":{borderColor:u},"&-rtl":{[`${e}-prev-icon,
              ${e}-super-prev-icon`]:{transform:"rotate(45deg)"},[`${e}-next-icon,
              ${e}-super-next-icon`]:{transform:"rotate(-135deg)"},[`${e}-time-panel`]:{[`${e}-content`]:{direction:"ltr","> *":{direction:"rtl"}}}}},"&-decade-panel,\n        &-year-panel,\n        &-quarter-panel,\n        &-month-panel,\n        &-week-panel,\n        &-date-panel,\n        &-time-panel":{display:"flex",flexDirection:"column",width:re},"&-header":{display:"flex",padding:`0 ${de(l)}`,color:g,borderBottom:`${de(d)} ${f} ${p}`,"> *":{flex:"none"},button:{padding:0,color:w,lineHeight:de(y),background:"transparent",border:0,cursor:"pointer",transition:`color ${C}`,fontSize:"inherit",display:"inline-flex",alignItems:"center",justifyContent:"center","&:empty":{display:"none"}},"> button":{minWidth:"1.6em",fontSize:R,"&:hover":{color:E},"&:disabled":{opacity:.25,pointerEvents:"none"}},"&-view":{flex:"auto",fontWeight:M,lineHeight:de(y),"> button":{color:"inherit",fontWeight:"inherit","&:not(:first-child)":{marginInlineStart:l},"&:hover":{color:u}}}},"&-prev-icon,\n        &-next-icon,\n        &-super-prev-icon,\n        &-super-next-icon":{position:"relative",width:s,height:s,"&::before":{position:"absolute",top:0,insetInlineStart:0,width:s,height:s,border:"0 solid currentcolor",borderBlockWidth:`${de(x)} 0`,borderInlineWidth:`${de(x)} 0`,content:'""'}},"&-super-prev-icon,\n        &-super-next-icon":{"&::after":{position:"absolute",top:j,insetInlineStart:j,display:"inline-block",width:s,height:s,border:"0 solid currentcolor",borderBlockWidth:`${de(x)} 0`,borderInlineWidth:`${de(x)} 0`,content:'""'}},"&-prev-icon, &-super-prev-icon":{transform:"rotate(-45deg)"},"&-next-icon, &-super-next-icon":{transform:"rotate(135deg)"},"&-content":{width:"100%",tableLayout:"fixed",borderCollapse:"collapse","th, td":{position:"relative",minWidth:b,fontWeight:"normal"},th:{height:n.calc(b).add(n.calc(N).mul(2)).equal(),color:_,verticalAlign:"middle"}},"&-cell":Object.assign({padding:`${de(N)} 0`,color:S,cursor:"pointer","&-in-view":{color:_}},ad(n)),"&-decade-panel,\n        &-year-panel,\n        &-quarter-panel,\n        &-month-panel":{[`${e}-content`]:{height:n.calc(I).mul(4).equal()},[i]:{padding:`0 ${de(l)}`}},"&-quarter-panel":{[`${e}-content`]:{height:A}},"&-decade-panel":{[i]:{padding:`0 ${de(n.calc(l).div(2).equal())}`},[`${e}-cell::before`]:{display:"none"}},"&-year-panel,\n        &-quarter-panel,\n        &-month-panel":{[`${e}-body`]:{padding:`0 ${de(l)}`},[i]:{width:r}},"&-date-panel":{[`${e}-body`]:{padding:`${de(l)} ${de(W)}`},[`${e}-content th`]:{boxSizing:"border-box",padding:0}},"&-week-panel":{[`${e}-cell`]:{[`&:hover ${i},
            &-selected ${i},
            ${i}`]:{background:"transparent !important"}},"&-row":{td:{"&:before":{transition:`background ${C}`},"&:first-child:before":{borderStartStartRadius:D,borderEndStartRadius:D},"&:last-child:before":{borderStartEndRadius:D,borderEndEndRadius:D}},"&:hover td:before":{background:P},"&-range-start td, &-range-end td, &-selected td, &-hover td":{[`&${t}`]:{"&:before":{background:u},[`&${e}-cell-week`]:{color:new Zi(L).setA(.5).toHexString()},[i]:{color:L}}},"&-range-hover td:before":{background:$}}},"&-week-panel, &-date-panel-show-week":{[`${e}-body`]:{padding:`${de(l)} ${de(o)}`},[`${e}-content th`]:{width:"auto"}},"&-datetime-panel":{display:"flex",[`${e}-time-panel`]:{borderInlineStart:`${de(d)} ${f} ${p}`},[`${e}-date-panel,
          ${e}-time-panel`]:{transition:`opacity ${O}`},"&-active":{[`${e}-date-panel,
            ${e}-time-panel`]:{opacity:.3,"&-active":{opacity:1}}}},"&-time-panel":{width:"auto",minWidth:"auto",[`${e}-content`]:{display:"flex",flex:"auto",height:z},"&-column":{flex:"1 0 auto",width:H,margin:`${de(h)} 0`,padding:0,overflowY:"hidden",textAlign:"start",listStyle:"none",transition:`background ${C}`,overflowX:"hidden","&::-webkit-scrollbar":{width:8,backgroundColor:"transparent"},"&::-webkit-scrollbar-thumb":{backgroundColor:n.colorTextTertiary,borderRadius:n.borderRadiusSM},"&":{scrollbarWidth:"thin",scrollbarColor:`${n.colorTextTertiary} transparent`},"&::after":{display:"block",height:`calc(100% - ${de(Y)})`,content:'""'},"&:not(:first-child)":{borderInlineStart:`${de(d)} ${f} ${p}`},"&-active":{background:new Zi($).setA(.2).toHexString()},"&:hover":{overflowY:"auto"},"> li":{margin:0,padding:0,[`&${e}-time-panel-cell`]:{marginInline:k,[`${e}-time-panel-cell-inner`]:{display:"block",width:n.calc(H).sub(n.calc(k).mul(2)).equal(),height:Y,margin:0,paddingBlock:0,paddingInlineEnd:0,paddingInlineStart:n.calc(H).sub(Y).div(2).equal(),color:_,lineHeight:de(Y),borderRadius:D,cursor:"pointer",transition:`background ${C}`,"&:hover":{background:P}},"&-selected":{[`${e}-time-panel-cell-inner`]:{background:$}},"&-disabled":{[`${e}-time-panel-cell-inner`]:{color:S,background:"transparent",cursor:"not-allowed"}}}}}}}}},ld=n=>{const{componentCls:e,textHeight:t,lineWidth:i,paddingSM:r,antCls:s,colorPrimary:a,cellActiveWithRangeBg:o,colorPrimaryBorder:l,lineType:h,colorSplit:c}=n;return{[`${e}-dropdown`]:{[`${e}-footer`]:{borderTop:`${de(i)} ${h} ${c}`,"&-extra":{padding:`0 ${de(r)}`,lineHeight:de(n.calc(t).sub(n.calc(i).mul(2)).equal()),textAlign:"start","&:not(:last-child)":{borderBottom:`${de(i)} ${h} ${c}`}}},[`${e}-panels + ${e}-footer ${e}-ranges`]:{justifyContent:"space-between"},[`${e}-ranges`]:{marginBlock:0,paddingInline:de(r),overflow:"hidden",textAlign:"start",listStyle:"none",display:"flex",justifyContent:"center",alignItems:"center","> li":{lineHeight:de(n.calc(t).sub(n.calc(i).mul(2)).equal()),display:"inline-block"},[`${e}-now-btn-disabled`]:{pointerEvents:"none",color:n.colorTextDisabled},[`${e}-preset > ${s}-tag-blue`]:{color:a,background:o,borderColor:l,cursor:"pointer"},[`${e}-ok`]:{paddingBlock:n.calc(i).mul(2).equal(),marginInlineStart:"auto"}}}}},hd=n=>{const{componentCls:e,controlHeightLG:t,paddingXXS:i,padding:r}=n;return{pickerCellCls:`${e}-cell`,pickerCellInnerCls:`${e}-cell-inner`,pickerYearMonthCellWidth:n.calc(t).mul(1.5).equal(),pickerQuarterPanelContentHeight:n.calc(t).mul(1.4).equal(),pickerCellPaddingVertical:n.calc(i).add(n.calc(i).div(2)).equal(),pickerCellBorderGap:2,pickerControlIconSize:7,pickerControlIconMargin:4,pickerControlIconBorderWidth:1.5,pickerDatePanelPaddingHorizontal:n.calc(r).add(n.calc(i).div(2)).equal()}},cd=n=>{const{colorBgContainerDisabled:e,controlHeight:t,controlHeightSM:i,controlHeightLG:r,paddingXXS:s,lineWidth:a}=n,o=s*2,l=a*2,h=Math.min(t-o,t-l),c=Math.min(i-o,i-l),d=Math.min(r-o,r-l);return{INTERNAL_FIXED_ITEM_MARGIN:Math.floor(s/2),cellHoverBg:n.controlItemBgHover,cellActiveWithRangeBg:n.controlItemBgActive,cellHoverWithRangeBg:new Zi(n.colorPrimary).lighten(35).toHexString(),cellRangeBorderColor:new Zi(n.colorPrimary).lighten(20).toHexString(),cellBgDisabled:e,timeColumnWidth:r*1.4,timeColumnHeight:28*8,timeCellHeight:28,cellWidth:i*1.5,cellHeight:i,textHeight:r,withoutTimeCellHeight:r*1.65,multipleItemBg:n.colorFillSecondary,multipleItemBorderColor:"transparent",multipleItemHeight:h,multipleItemHeightSM:c,multipleItemHeightLG:d,multipleSelectorBgDisabled:e,multipleItemColorDisabled:n.colorTextDisabled,multipleItemBorderColorDisabled:"transparent"}},dd=n=>Object.assign(Object.assign(Object.assign(Object.assign({},vh(n)),cd(n)),lh(n)),{presetsWidth:120,presetsMaxWidth:200,zIndexPopup:n.zIndexPopupBase+50}),ud=n=>{const{componentCls:e}=n;return{[e]:[Object.assign(Object.assign(Object.assign({},xh(n)),yh(n)),wh(n)),{"&-outlined":{[`&${e}-multiple ${e}-selection-item`]:{background:n.multipleItemBg,border:`${de(n.lineWidth)} ${n.lineType} ${n.multipleItemBorderColor}`}},"&-filled":{[`&${e}-multiple ${e}-selection-item`]:{background:n.colorBgContainer,border:`${de(n.lineWidth)} ${n.lineType} ${n.colorSplit}`}},"&-borderless":{[`&${e}-multiple ${e}-selection-item`]:{background:n.multipleItemBg,border:`${de(n.lineWidth)} ${n.lineType} ${n.multipleItemBorderColor}`}}}]}},Wr=(n,e,t,i)=>{const r=n.calc(t).add(2).equal(),s=n.max(n.calc(e).sub(r).div(2).equal(),0),a=n.max(n.calc(e).sub(r).sub(s).equal(),0);return{padding:`${de(s)} ${de(i)} ${de(a)}`}},fd=n=>{const{componentCls:e,colorError:t,colorWarning:i}=n;return{[`${e}:not(${e}-disabled):not([disabled])`]:{[`&${e}-status-error`]:{[`${e}-active-bar`]:{background:t}},[`&${e}-status-warning`]:{[`${e}-active-bar`]:{background:i}}}}},pd=n=>{const{componentCls:e,antCls:t,controlHeight:i,paddingInline:r,lineWidth:s,lineType:a,colorBorder:o,borderRadius:l,motionDurationMid:h,colorTextDisabled:c,colorTextPlaceholder:d,controlHeightLG:f,fontSizeLG:m,controlHeightSM:u,paddingInlineSM:g,paddingXS:p,marginXS:x,colorTextDescription:w,lineWidthBold:y,colorPrimary:C,motionDurationSlow:E,zIndexPopup:M,paddingXXS:b,sizePopupArrow:N,colorBgElevated:S,borderRadiusLG:_,boxShadowSecondary:R,borderRadiusSM:O,colorSplit:I,cellHoverBg:A,presetsWidth:D,presetsMaxWidth:L,boxShadowPopoverArrow:P,fontHeight:z,fontHeightLG:H,lineHeightLG:Y}=n;return[{[e]:Object.assign(Object.assign(Object.assign({},is(n)),Wr(n,i,z,r)),{position:"relative",display:"inline-flex",alignItems:"center",lineHeight:1,borderRadius:l,transition:`border ${h}, box-shadow ${h}, background ${h}`,[`${e}-prefix`]:{marginInlineEnd:n.inputAffixPadding},[`${e}-input`]:{position:"relative",display:"inline-flex",alignItems:"center",width:"100%","> input":Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",color:"inherit",fontSize:n.fontSize,lineHeight:n.lineHeight,transition:`all ${h}`},Mh(d)),{flex:"auto",minWidth:1,height:"auto",padding:0,background:"transparent",border:0,fontFamily:"inherit","&:focus":{boxShadow:"none",outline:0},"&[disabled]":{background:"transparent",color:c,cursor:"not-allowed"}}),"&-placeholder":{"> input":{color:d}}},"&-large":Object.assign(Object.assign({},Wr(n,f,H,r)),{[`${e}-input > input`]:{fontSize:m,lineHeight:Y}}),"&-small":Object.assign({},Wr(n,u,z,g)),[`${e}-suffix`]:{display:"flex",flex:"none",alignSelf:"center",marginInlineStart:n.calc(p).div(2).equal(),color:c,lineHeight:1,pointerEvents:"none",transition:`opacity ${h}, color ${h}`,"> *":{verticalAlign:"top","&:not(:last-child)":{marginInlineEnd:x}}},[`${e}-clear`]:{position:"absolute",top:"50%",insetInlineEnd:0,color:c,lineHeight:1,transform:"translateY(-50%)",cursor:"pointer",opacity:0,transition:`opacity ${h}, color ${h}`,"> *":{verticalAlign:"top"},"&:hover":{color:w}},"&:hover":{[`${e}-clear`]:{opacity:1},[`${e}-suffix:not(:last-child)`]:{opacity:0}},[`${e}-separator`]:{position:"relative",display:"inline-block",width:"1em",height:m,color:c,fontSize:m,verticalAlign:"top",cursor:"default",[`${e}-focused &`]:{color:w},[`${e}-range-separator &`]:{[`${e}-disabled &`]:{cursor:"not-allowed"}}},"&-range":{position:"relative",display:"inline-flex",[`${e}-active-bar`]:{bottom:n.calc(s).mul(-1).equal(),height:y,background:C,opacity:0,transition:`all ${E} ease-out`,pointerEvents:"none"},[`&${e}-focused`]:{[`${e}-active-bar`]:{opacity:1}},[`${e}-range-separator`]:{alignItems:"center",padding:`0 ${de(p)}`,lineHeight:1}},"&-range, &-multiple":{[`${e}-clear`]:{insetInlineEnd:r},[`&${e}-small`]:{[`${e}-clear`]:{insetInlineEnd:g}}},"&-dropdown":Object.assign(Object.assign(Object.assign({},is(n)),od(n)),{pointerEvents:"none",position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:M,[`&${e}-dropdown-hidden`]:{display:"none"},"&-rtl":{direction:"rtl"},[`&${e}-dropdown-placement-bottomLeft,
            &${e}-dropdown-placement-bottomRight`]:{[`${e}-range-arrow`]:{top:0,display:"block",transform:"translateY(-100%)"}},[`&${e}-dropdown-placement-topLeft,
            &${e}-dropdown-placement-topRight`]:{[`${e}-range-arrow`]:{bottom:0,display:"block",transform:"translateY(100%) rotate(180deg)"}},[`&${t}-slide-up-enter${t}-slide-up-enter-active${e}-dropdown-placement-topLeft,
          &${t}-slide-up-enter${t}-slide-up-enter-active${e}-dropdown-placement-topRight,
          &${t}-slide-up-appear${t}-slide-up-appear-active${e}-dropdown-placement-topLeft,
          &${t}-slide-up-appear${t}-slide-up-appear-active${e}-dropdown-placement-topRight`]:{animationName:uh},[`&${t}-slide-up-enter${t}-slide-up-enter-active${e}-dropdown-placement-bottomLeft,
          &${t}-slide-up-enter${t}-slide-up-enter-active${e}-dropdown-placement-bottomRight,
          &${t}-slide-up-appear${t}-slide-up-appear-active${e}-dropdown-placement-bottomLeft,
          &${t}-slide-up-appear${t}-slide-up-appear-active${e}-dropdown-placement-bottomRight`]:{animationName:dh},[`&${t}-slide-up-leave ${e}-panel-container`]:{pointerEvents:"none"},[`&${t}-slide-up-leave${t}-slide-up-leave-active${e}-dropdown-placement-topLeft,
          &${t}-slide-up-leave${t}-slide-up-leave-active${e}-dropdown-placement-topRight`]:{animationName:ch},[`&${t}-slide-up-leave${t}-slide-up-leave-active${e}-dropdown-placement-bottomLeft,
          &${t}-slide-up-leave${t}-slide-up-leave-active${e}-dropdown-placement-bottomRight`]:{animationName:hh},[`${e}-panel > ${e}-time-panel`]:{paddingTop:b},[`${e}-range-wrapper`]:{display:"flex",position:"relative"},[`${e}-range-arrow`]:Object.assign(Object.assign({position:"absolute",zIndex:1,display:"none",paddingInline:n.calc(r).mul(1.5).equal(),boxSizing:"content-box",transition:`all ${E} ease-out`},ph(n,S,P)),{"&:before":{insetInlineStart:n.calc(r).mul(1.5).equal()}}),[`${e}-panel-container`]:{overflow:"hidden",verticalAlign:"top",background:S,borderRadius:_,boxShadow:R,transition:`margin ${E}`,display:"inline-block",pointerEvents:"auto",[`${e}-panel-layout`]:{display:"flex",flexWrap:"nowrap",alignItems:"stretch"},[`${e}-presets`]:{display:"flex",flexDirection:"column",minWidth:D,maxWidth:L,ul:{height:0,flex:"auto",listStyle:"none",overflow:"auto",margin:0,padding:p,borderInlineEnd:`${de(s)} ${a} ${I}`,li:Object.assign(Object.assign({},fh),{borderRadius:O,paddingInline:p,paddingBlock:n.calc(u).sub(z).div(2).equal(),cursor:"pointer",transition:`all ${E}`,"+ li":{marginTop:x},"&:hover":{background:A}})}},[`${e}-panels`]:{display:"inline-flex",flexWrap:"nowrap","&:last-child":{[`${e}-panel`]:{borderWidth:0}}},[`${e}-panel`]:{verticalAlign:"top",background:"transparent",borderRadius:0,borderWidth:0,[`${e}-content, table`]:{textAlign:"center"},"&-focused":{borderColor:o}}}}),"&-dropdown-range":{padding:`${de(n.calc(N).mul(2).div(3).equal())} 0`,"&-hidden":{display:"none"}},"&-rtl":{direction:"rtl",[`${e}-separator`]:{transform:"rotate(180deg)"},[`${e}-footer`]:{"&-extra":{direction:"rtl"}}}})},ra(n,"slide-up"),ra(n,"slide-down"),sa(n,"move-up"),sa(n,"move-down")]},Ko=Ns("DatePicker",n=>{const e=qi(Ch(n),hd(n),{inputPaddingHorizontalBase:n.calc(n.paddingSM).sub(1).equal(),multipleSelectItemHeight:n.multipleItemHeight,selectHeight:n.controlHeight});return[ld(e),pd(e),ud(e),fd(e),sd(e),Eh(n,{focusElCls:`${n.componentCls}-focused`})]},dd);var md={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z"}}]},name:"calendar",theme:"outlined"},gd=function(e,t){return v.createElement($n,we({},e,{ref:t,icon:md}))},qo=v.forwardRef(gd),vd={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"},xd=function(e,t){return v.createElement($n,we({},e,{ref:t,icon:vd}))},Zo=v.forwardRef(xd),yd={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M873.1 596.2l-164-208A32 32 0 00684 376h-64.8c-6.7 0-10.4 7.7-6.3 13l144.3 183H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h695.9c26.8 0 41.7-30.8 25.2-51.8z"}}]},name:"swap-right",theme:"outlined"},wd=function(e,t){return v.createElement($n,we({},e,{ref:t,icon:yd}))},Cd=v.forwardRef(wd);function Ed(n,e,t){return t!==void 0?t:e==="year"&&n.lang.yearPlaceholder?n.lang.yearPlaceholder:e==="quarter"&&n.lang.quarterPlaceholder?n.lang.quarterPlaceholder:e==="month"&&n.lang.monthPlaceholder?n.lang.monthPlaceholder:e==="week"&&n.lang.weekPlaceholder?n.lang.weekPlaceholder:e==="time"&&n.timePickerLocale.placeholder?n.timePickerLocale.placeholder:n.lang.placeholder}function Md(n,e,t){return t!==void 0?t:e==="year"&&n.lang.yearPlaceholder?n.lang.rangeYearPlaceholder:e==="quarter"&&n.lang.quarterPlaceholder?n.lang.rangeQuarterPlaceholder:e==="month"&&n.lang.monthPlaceholder?n.lang.rangeMonthPlaceholder:e==="week"&&n.lang.weekPlaceholder?n.lang.rangeWeekPlaceholder:e==="time"&&n.timePickerLocale.placeholder?n.timePickerLocale.rangePlaceholder:n.lang.rangePlaceholder}function Qo(n,e){const{allowClear:t=!0}=n,{clearIcon:i,removeIcon:r}=Nh(Object.assign(Object.assign({},n),{prefixCls:e,componentName:"DatePicker"}));return[v.useMemo(()=>t===!1?!1:Object.assign({clearIcon:i},t===!0?{}:t),[t,i]),r]}const[bd,_d]=["week","WeekPicker"],[Sd,Nd]=["month","MonthPicker"],[Td,Dd]=["year","YearPicker"],[Rd,Id]=["quarter","QuarterPicker"],[Jo,da]=["time","TimePicker"],Ld=n=>v.createElement(Xt,Object.assign({size:"small",type:"primary"},n));function el(n){return v.useMemo(()=>Object.assign({button:Ld},n),[n])}var Od=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};const Ad=n=>v.forwardRef((t,i)=>{var r;const{prefixCls:s,getPopupContainer:a,components:o,className:l,style:h,placement:c,size:d,disabled:f,bordered:m=!0,placeholder:u,popupClassName:g,dropdownClassName:p,status:x,rootClassName:w,variant:y,picker:C}=t,E=Od(t,["prefixCls","getPopupContainer","components","className","style","placement","size","disabled","bordered","placeholder","popupClassName","dropdownClassName","status","rootClassName","variant","picker"]),M=v.useRef(null),{getPrefixCls:b,direction:N,getPopupContainer:S,rangePicker:_}=v.useContext(zn),R=b("picker",s),{compactSize:O,compactItemClassnames:I}=Ua(R,N),A=b(),[D,L]=to("rangePicker",y,m),P=Ga(R),[z,H,Y]=Ko(R,P),[$]=Qo(t,R),k=el(o),W=Ts(X=>{var te;return(te=d??O)!==null&&te!==void 0?te:X}),j=v.useContext(Xa),re=f??j,J=v.useContext(Ka),{hasFeedback:G,status:ee,feedbackIcon:oe}=J,se=v.createElement(v.Fragment,null,C===Jo?v.createElement(Zo,null):v.createElement(qo,null),G&&oe);v.useImperativeHandle(i,()=>M.current);const[K]=Rs("Calendar",qa),ie=Object.assign(Object.assign({},K),t.locale),[Q]=Za("DatePicker",(r=t.popupStyle)===null||r===void 0?void 0:r.zIndex);return z(v.createElement(Qa,{space:!0},v.createElement(Qc,Object.assign({separator:v.createElement("span",{"aria-label":"to",className:`${R}-separator`},v.createElement(Cd,null)),disabled:re,ref:M,placement:c,placeholder:Md(ie,C,u),suffixIcon:se,prevIcon:v.createElement("span",{className:`${R}-prev-icon`}),nextIcon:v.createElement("span",{className:`${R}-next-icon`}),superPrevIcon:v.createElement("span",{className:`${R}-super-prev-icon`}),superNextIcon:v.createElement("span",{className:`${R}-super-next-icon`}),transitionName:`${A}-slide-up`,picker:C},E,{className:Se({[`${R}-${W}`]:W,[`${R}-${D}`]:L},no(R,io(ee,x),G),H,I,l,_==null?void 0:_.className,Y,P,w),style:Object.assign(Object.assign({},_==null?void 0:_.style),h),locale:ie.lang,prefixCls:R,getPopupContainer:a||S,generateConfig:n,components:k,direction:N,classNames:{popup:Se(H,g||p,Y,P,w)},styles:{popup:Object.assign(Object.assign({},t.popupStyle),{zIndex:Q})},allowClear:$}))))});var kd=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};const Pd=n=>{const e=(l,h)=>{const c=h===da?"timePicker":"datePicker";return v.forwardRef((f,m)=>{var u;const{prefixCls:g,getPopupContainer:p,components:x,style:w,className:y,rootClassName:C,size:E,bordered:M,placement:b,placeholder:N,popupClassName:S,dropdownClassName:_,disabled:R,status:O,variant:I,onCalendarChange:A}=f,D=kd(f,["prefixCls","getPopupContainer","components","style","className","rootClassName","size","bordered","placement","placeholder","popupClassName","dropdownClassName","disabled","status","variant","onCalendarChange"]),{getPrefixCls:L,direction:P,getPopupContainer:z,[c]:H}=v.useContext(zn),Y=L("picker",g),{compactSize:$,compactItemClassnames:k}=Ua(Y,P),W=v.useRef(null),[j,re]=to("datePicker",I,M),J=Ga(Y),[G,ee,oe]=Ko(Y,J);v.useImperativeHandle(m,()=>W.current);const se={showToday:!0},K=l||f.picker,ie=L(),{onSelect:Q,multiple:X}=D,te=Q&&l==="time"&&!X,ae=(Qe,Re,ue)=>{A==null||A(Qe,Re,ue),te&&Q(Qe)},[q,le]=Qo(f,Y),Ce=el(x),_e=Ts(Qe=>{var Re;return(Re=E??$)!==null&&Re!==void 0?Re:Qe}),ge=v.useContext(Xa),ze=R??ge,Xe=v.useContext(Ka),{hasFeedback:Ze,status:Ke,feedbackIcon:nt}=Xe,Pe=v.createElement(v.Fragment,null,K==="time"?v.createElement(Zo,null):v.createElement(qo,null),Ze&&nt),[yt]=Rs("DatePicker",qa),Oe=Object.assign(Object.assign({},yt),f.locale),[Ue]=Za("DatePicker",(u=f.popupStyle)===null||u===void 0?void 0:u.zIndex);return G(v.createElement(Qa,{space:!0},v.createElement(rd,Object.assign({ref:W,placeholder:Ed(Oe,K,N),suffixIcon:Pe,placement:b,prevIcon:v.createElement("span",{className:`${Y}-prev-icon`}),nextIcon:v.createElement("span",{className:`${Y}-next-icon`}),superPrevIcon:v.createElement("span",{className:`${Y}-super-prev-icon`}),superNextIcon:v.createElement("span",{className:`${Y}-super-next-icon`}),transitionName:`${ie}-slide-up`,picker:l,onCalendarChange:ae},se,D,{locale:Oe.lang,className:Se({[`${Y}-${_e}`]:_e,[`${Y}-${j}`]:re},no(Y,io(Ke,O),Ze),ee,k,H==null?void 0:H.className,y,oe,J,C),style:Object.assign(Object.assign({},H==null?void 0:H.style),w),prefixCls:Y,getPopupContainer:p||z,generateConfig:n,components:Ce,direction:P,disabled:ze,classNames:{popup:Se(ee,oe,J,C,S||_)},styles:{popup:Object.assign(Object.assign({},f.popupStyle),{zIndex:Ue})},allowClear:q,removeIcon:le}))))})},t=e(),i=e(bd,_d),r=e(Sd,Nd),s=e(Td,Dd),a=e(Rd,Id),o=e(Jo,da);return{DatePicker:t,WeekPicker:i,MonthPicker:r,YearPicker:s,TimePicker:o,QuarterPicker:a}},tl=n=>{const{DatePicker:e,WeekPicker:t,MonthPicker:i,YearPicker:r,TimePicker:s,QuarterPicker:a}=Pd(n),o=Ad(n),l=e;return l.WeekPicker=t,l.MonthPicker=i,l.YearPicker=r,l.RangePicker=o,l.TimePicker=s,l.QuarterPicker=a,l},Yn=tl(ac),zd=ro(Yn,"popupAlign",void 0,"picker");Yn._InternalPanelDoNotUseOrYouWillBeFired=zd;const Fd=ro(Yn.RangePicker,"popupAlign",void 0,"picker");Yn._InternalRangePanelDoNotUseOrYouWillBeFired=Fd;Yn.generatePicker=tl;function $d(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)&&n==null?[]:Array.isArray(n)?n:[n]}var Hd={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},Bd=function(e,t){return v.createElement($n,we({},e,{ref:t,icon:Hd}))},Yd=v.forwardRef(Bd),Wd={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},Vd=function(e,t){return v.createElement($n,we({},e,{ref:t,icon:Wd}))},jd=v.forwardRef(Vd),Ud={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"},Gd=function(e,t){return v.createElement($n,we({},e,{ref:t,icon:Ud}))},Xd=v.forwardRef(Gd);const Kd=(n,e,t,i)=>{const{titleMarginBottom:r,fontWeightStrong:s}=i;return{marginBottom:r,color:t,fontWeight:s,fontSize:n,lineHeight:e}},qd=n=>{const e=[1,2,3,4,5],t={};return e.forEach(i=>{t[`
      h${i}&,
      div&-h${i},
      div&-h${i} > textarea,
      h${i}
    `]=Kd(n[`fontSizeHeading${i}`],n[`lineHeightHeading${i}`],n.colorTextHeading,n)}),t},Zd=n=>{const{componentCls:e}=n;return{"a&, a":Object.assign(Object.assign({},Ja(n)),{userSelect:"text",[`&[disabled], &${e}-disabled`]:{color:n.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:n.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}},Qd=n=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:n.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:n.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:mh[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:n.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}}),Jd=n=>{const{componentCls:e,paddingSM:t}=n,i=t;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:n.calc(n.paddingSM).mul(-1).equal(),marginTop:n.calc(i).mul(-1).equal(),marginBottom:`calc(1em - ${de(i)})`},[`${e}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:n.calc(n.marginXS).add(2).equal(),insetBlockEnd:n.marginXS,color:n.colorTextDescription,fontWeight:"normal",fontSize:n.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}},eu=n=>({[`${n.componentCls}-copy-success`]:{"\n    &,\n    &:hover,\n    &:focus":{color:n.colorSuccess}},[`${n.componentCls}-copy-icon-only`]:{marginInlineStart:0}}),tu=()=>({"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-ellipsis-single-line":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}),nu=n=>{const{componentCls:e,titleMarginTop:t}=n;return{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:n.colorText,wordBreak:"break-word",lineHeight:n.lineHeight,[`&${e}-secondary`]:{color:n.colorTextDescription},[`&${e}-success`]:{color:n.colorSuccess},[`&${e}-warning`]:{color:n.colorWarning},[`&${e}-danger`]:{color:n.colorError,"a&:active, a&:focus":{color:n.colorErrorActive},"a&:hover":{color:n.colorErrorHover}},[`&${e}-disabled`]:{color:n.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"}},qd(n)),{[`
      & + h1${e},
      & + h2${e},
      & + h3${e},
      & + h4${e},
      & + h5${e}
      `]:{marginTop:t},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:t}}}),Qd(n)),Zd(n)),{[`
        ${e}-expand,
        ${e}-collapse,
        ${e}-edit,
        ${e}-copy
      `]:Object.assign(Object.assign({},Ja(n)),{marginInlineStart:n.marginXXS})}),Jd(n)),eu(n)),tu()),{"&-rtl":{direction:"rtl"}})}},iu=()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"}),nl=Ns("Typography",n=>[nu(n)],iu),ru=n=>{const{prefixCls:e,"aria-label":t,className:i,style:r,direction:s,maxLength:a,autoSize:o=!0,value:l,onSave:h,onCancel:c,onEnd:d,component:f,enterIcon:m=v.createElement(Xd,null)}=n,u=v.useRef(null),g=v.useRef(!1),p=v.useRef(null),[x,w]=v.useState(l);v.useEffect(()=>{w(l)},[l]),v.useEffect(()=>{var A;if(!((A=u.current)===null||A===void 0)&&A.resizableTextArea){const{textArea:D}=u.current.resizableTextArea;D.focus();const{length:L}=D.value;D.setSelectionRange(L,L)}},[]);const y=A=>{let{target:D}=A;w(D.value.replace(/[\n\r]/g,""))},C=()=>{g.current=!0},E=()=>{g.current=!1},M=A=>{let{keyCode:D}=A;g.current||(p.current=D)},b=()=>{h(x.trim())},N=A=>{let{keyCode:D,ctrlKey:L,altKey:P,metaKey:z,shiftKey:H}=A;p.current!==D||g.current||L||P||z||H||(D===Ki.ENTER?(b(),d==null||d()):D===Ki.ESC&&c())},S=()=>{b()},[_,R,O]=nl(e),I=Se(e,`${e}-edit-content`,{[`${e}-rtl`]:s==="rtl",[`${e}-${f}`]:!!f},i,R,O);return _(v.createElement("div",{className:I,style:r},v.createElement(so,{ref:u,maxLength:a,value:x,onChange:y,onKeyDown:M,onKeyUp:N,onCompositionStart:C,onCompositionEnd:E,onBlur:S,"aria-label":t,rows:1,autoSize:o}),m!==null?rs(m,{className:`${e}-edit-content-confirm`}):null))};var su=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{h(i.next(c))}catch(d){a(d)}}function l(c){try{h(i.throw(c))}catch(d){a(d)}}function h(c){c.done?s(c.value):r(c.value).then(o,l)}h((i=i.apply(n,e||[])).next())})};const au=n=>{let{copyConfig:e,children:t}=n;const[i,r]=v.useState(!1),[s,a]=v.useState(!1),o=v.useRef(null),l=()=>{o.current&&clearTimeout(o.current)},h={};e.format&&(h.format=e.format),v.useEffect(()=>l,[]);const c=et(d=>su(void 0,void 0,void 0,function*(){var f;d==null||d.preventDefault(),d==null||d.stopPropagation(),a(!0);try{const m=typeof e.text=="function"?yield e.text():e.text;Th(m||$d(t,!0).join("")||"",h),a(!1),r(!0),l(),o.current=setTimeout(()=>{r(!1)},3e3),(f=e.onCopy)===null||f===void 0||f.call(e,d)}catch(m){throw a(!1),m}}));return{copied:i,copyLoading:s,onClick:c}};function Vr(n,e){return v.useMemo(()=>{const t=!!n;return[t,Object.assign(Object.assign({},e),t&&typeof n=="object"?n:null)]},[n])}const ou=n=>{const e=v.useRef(void 0);return v.useEffect(()=>{e.current=n}),e.current},lu=(n,e,t)=>v.useMemo(()=>n===!0?{title:e??t}:v.isValidElement(n)?{title:n}:typeof n=="object"?Object.assign({title:e??t},n):{title:n},[n,e,t]);var hu=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};const il=v.forwardRef((n,e)=>{const{prefixCls:t,component:i="article",className:r,rootClassName:s,setContentRef:a,children:o,direction:l,style:h}=n,c=hu(n,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:d,direction:f,typography:m}=v.useContext(zn),u=l??f,g=a?eo(e,a):e,p=d("typography",t),[x,w,y]=nl(p),C=Se(p,m==null?void 0:m.className,{[`${p}-rtl`]:u==="rtl"},r,s,w,y),E=Object.assign(Object.assign({},m==null?void 0:m.style),h);return x(v.createElement(i,Object.assign({className:C,style:E,ref:g},c),o))});function ua(n){return n===!1?[!1,!1]:Array.isArray(n)?n:[n]}function jr(n,e,t){return n===!0||n===void 0?e:n||t&&e}function cu(n){const e=document.createElement("em");n.appendChild(e);const t=n.getBoundingClientRect(),i=e.getBoundingClientRect();return n.removeChild(e),t.left>i.left||i.right>t.right||t.top>i.top||i.bottom>t.bottom}const Fs=n=>["string","number"].includes(typeof n),du=n=>{let{prefixCls:e,copied:t,locale:i,iconOnly:r,tooltips:s,icon:a,tabIndex:o,onCopy:l,loading:h}=n;const c=ua(s),d=ua(a),{copied:f,copy:m}=i??{},u=t?f:m,g=jr(c[t?1:0],u),p=typeof g=="string"?g:u;return v.createElement(Rt,{title:g},v.createElement("button",{type:"button",className:Se(`${e}-copy`,{[`${e}-copy-success`]:t,[`${e}-copy-icon-only`]:r}),onClick:l,"aria-label":p,tabIndex:o},t?jr(d[1],v.createElement(Dh,null),!0):jr(d[0],h?v.createElement(bh,null):v.createElement(Yd,null),!0)))},Hi=v.forwardRef((n,e)=>{let{style:t,children:i}=n;const r=v.useRef(null);return v.useImperativeHandle(e,()=>({isExceed:()=>{const s=r.current;return s.scrollHeight>s.clientHeight},getHeight:()=>r.current.clientHeight})),v.createElement("span",{"aria-hidden":!0,ref:r,style:Object.assign({position:"fixed",display:"block",left:0,top:0,pointerEvents:"none",backgroundColor:"rgba(255, 0, 0, 0.65)"},t)},i)}),uu=n=>n.reduce((e,t)=>e+(Fs(t)?String(t).length:1),0);function fa(n,e){let t=0;const i=[];for(let r=0;r<n.length;r+=1){if(t===e)return i;const s=n[r],o=Fs(s)?String(s).length:1,l=t+o;if(l>e){const h=e-t;return i.push(String(s).slice(0,h)),i}i.push(s),t=l}return n}const Ur=0,Gr=1,Xr=2,Kr=3,pa=4,Bi={display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical"};function fu(n){const{enableMeasure:e,width:t,text:i,children:r,rows:s,expanded:a,miscDeps:o,onEllipsis:l}=n,h=v.useMemo(()=>ar(i),[i]),c=v.useMemo(()=>uu(h),[i]),d=v.useMemo(()=>r(h,!1),[i]),[f,m]=v.useState(null),u=v.useRef(null),g=v.useRef(null),p=v.useRef(null),x=v.useRef(null),w=v.useRef(null),[y,C]=v.useState(!1),[E,M]=v.useState(Ur),[b,N]=v.useState(0),[S,_]=v.useState(null);gt(()=>{M(e&&t&&c?Gr:Ur)},[t,i,s,e,h]),gt(()=>{var A,D,L,P;if(E===Gr){M(Xr);const z=g.current&&getComputedStyle(g.current).whiteSpace;_(z)}else if(E===Xr){const z=!!(!((A=p.current)===null||A===void 0)&&A.isExceed());M(z?Kr:pa),m(z?[0,c]:null),C(z);const H=((D=p.current)===null||D===void 0?void 0:D.getHeight())||0,Y=s===1?0:((L=x.current)===null||L===void 0?void 0:L.getHeight())||0,$=((P=w.current)===null||P===void 0?void 0:P.getHeight())||0,k=Math.max(H,Y+$);N(k+1),l(z)}},[E]);const R=f?Math.ceil((f[0]+f[1])/2):0;gt(()=>{var A;const[D,L]=f||[0,0];if(D!==L){const z=(((A=u.current)===null||A===void 0?void 0:A.getHeight())||0)>b;let H=R;L-D===1&&(H=z?D:L),m(z?[D,H]:[H,L])}},[f,R]);const O=v.useMemo(()=>{if(!e)return r(h,!1);if(E!==Kr||!f||f[0]!==f[1]){const A=r(h,!1);return[pa,Ur].includes(E)?A:v.createElement("span",{style:Object.assign(Object.assign({},Bi),{WebkitLineClamp:s})},A)}return r(a?h:fa(h,f[0]),y)},[a,E,f,h].concat(ht(o))),I={width:t,margin:0,padding:0,whiteSpace:S==="nowrap"?"normal":"inherit"};return v.createElement(v.Fragment,null,O,E===Xr&&v.createElement(v.Fragment,null,v.createElement(Hi,{style:Object.assign(Object.assign(Object.assign({},I),Bi),{WebkitLineClamp:s}),ref:p},d),v.createElement(Hi,{style:Object.assign(Object.assign(Object.assign({},I),Bi),{WebkitLineClamp:s-1}),ref:x},d),v.createElement(Hi,{style:Object.assign(Object.assign(Object.assign({},I),Bi),{WebkitLineClamp:1}),ref:w},r([],!0))),E===Kr&&f&&f[0]!==f[1]&&v.createElement(Hi,{style:Object.assign(Object.assign({},I),{top:400}),ref:u},r(fa(h,R),!0)),E===Gr&&v.createElement("span",{style:{whiteSpace:"inherit"},ref:g}))}const pu=n=>{let{enableEllipsis:e,isEllipsis:t,children:i,tooltipProps:r}=n;return!(r!=null&&r.title)||!e?i:v.createElement(Rt,Object.assign({open:t?void 0:!1},r),i)};var mu=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};function gu(n,e){let{mark:t,code:i,underline:r,delete:s,strong:a,keyboard:o,italic:l}=n,h=e;function c(d,f){f&&(h=v.createElement(d,{},h))}return c("strong",a),c("u",r),c("del",s),c("code",i),c("mark",t),c("kbd",o),c("i",l),h}const vu="...",pr=v.forwardRef((n,e)=>{var t;const{prefixCls:i,className:r,style:s,type:a,disabled:o,children:l,ellipsis:h,editable:c,copyable:d,component:f,title:m}=n,u=mu(n,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:g,direction:p}=v.useContext(zn),[x]=Rs("Text"),w=v.useRef(null),y=v.useRef(null),C=g("typography",i),E=On(u,["mark","code","delete","underline","strong","keyboard","italic"]),[M,b]=Vr(c),[N,S]=St(!1,{value:b.editing}),{triggerType:_=["icon"]}=b,R=V=>{var F;V&&((F=b.onStart)===null||F===void 0||F.call(b)),S(V)},O=ou(N);gt(()=>{var V;!N&&O&&((V=y.current)===null||V===void 0||V.focus())},[N]);const I=V=>{V==null||V.preventDefault(),R(!0)},A=V=>{var F;(F=b.onChange)===null||F===void 0||F.call(b,V),R(!1)},D=()=>{var V;(V=b.onCancel)===null||V===void 0||V.call(b),R(!1)},[L,P]=Vr(d),{copied:z,copyLoading:H,onClick:Y}=au({copyConfig:P,children:l}),[$,k]=v.useState(!1),[W,j]=v.useState(!1),[re,J]=v.useState(!1),[G,ee]=v.useState(!1),[oe,se]=v.useState(!0),[K,ie]=Vr(h,{expandable:!1,symbol:V=>V?x==null?void 0:x.collapse:x==null?void 0:x.expand}),[Q,X]=St(ie.defaultExpanded||!1,{value:ie.expanded}),te=K&&(!Q||ie.expandable==="collapsible"),{rows:ae=1}=ie,q=v.useMemo(()=>te&&(ie.suffix!==void 0||ie.onEllipsis||ie.expandable||M||L),[te,ie,M,L]);gt(()=>{K&&!q&&(k(aa("webkitLineClamp")),j(aa("textOverflow")))},[q,K]);const[le,Ce]=v.useState(te),_e=v.useMemo(()=>q?!1:ae===1?W:$,[q,W,$]);gt(()=>{Ce(_e&&te)},[_e,te]);const ge=te&&(le?G:re),ze=te&&ae===1&&le,Xe=te&&ae>1&&le,Ze=(V,F)=>{var Z;X(F.expanded),(Z=ie.onExpand)===null||Z===void 0||Z.call(ie,V,F)},[Ke,nt]=v.useState(0),Pe=V=>{let{offsetWidth:F}=V;nt(F)},yt=V=>{var F;J(V),re!==V&&((F=ie.onEllipsis)===null||F===void 0||F.call(ie,V))};v.useEffect(()=>{const V=w.current;if(K&&le&&V){const F=cu(V);G!==F&&ee(F)}},[K,le,l,Xe,oe,Ke]),v.useEffect(()=>{const V=w.current;if(typeof IntersectionObserver>"u"||!V||!le||!te)return;const F=new IntersectionObserver(()=>{se(!!V.offsetParent)});return F.observe(V),()=>{F.disconnect()}},[le,te]);const Oe=lu(ie.tooltip,b.text,l),Ue=v.useMemo(()=>{if(!(!K||le))return[b.text,l,m,Oe.title].find(Fs)},[K,le,m,Oe.title,ge]);if(N)return v.createElement(ru,{value:(t=b.text)!==null&&t!==void 0?t:typeof l=="string"?l:"",onSave:A,onCancel:D,onEnd:b.onEnd,prefixCls:C,className:r,style:s,direction:p,component:f,maxLength:b.maxLength,autoSize:b.autoSize,enterIcon:b.enterIcon});const Qe=()=>{const{expandable:V,symbol:F}=ie;return V?v.createElement("button",{type:"button",key:"expand",className:`${C}-${Q?"collapse":"expand"}`,onClick:Z=>Ze(Z,{expanded:!Q}),"aria-label":Q?x.collapse:x==null?void 0:x.expand},typeof F=="function"?F(Q):F):null},Re=()=>{if(!M)return;const{icon:V,tooltip:F,tabIndex:Z}=b,ke=ar(F)[0]||(x==null?void 0:x.edit),Fe=typeof ke=="string"?ke:"";return _.includes("icon")?v.createElement(Rt,{key:"edit",title:F===!1?"":ke},v.createElement("button",{type:"button",ref:y,className:`${C}-edit`,onClick:I,"aria-label":Fe,tabIndex:Z},V||v.createElement(jd,{role:"button"}))):null},ue=()=>L?v.createElement(du,Object.assign({key:"copy"},P,{prefixCls:C,copied:z,locale:x,onCopy:Y,loading:H,iconOnly:l==null})):null,ne=V=>[V&&Qe(),Re(),ue()],he=V=>[V&&!Q&&v.createElement("span",{"aria-hidden":!0,key:"ellipsis"},vu),ie.suffix,ne(V)];return v.createElement(Ds,{onResize:Pe,disabled:!te},V=>v.createElement(pu,{tooltipProps:Oe,enableEllipsis:te,isEllipsis:ge},v.createElement(il,Object.assign({className:Se({[`${C}-${a}`]:a,[`${C}-disabled`]:o,[`${C}-ellipsis`]:K,[`${C}-ellipsis-single-line`]:ze,[`${C}-ellipsis-multiple-line`]:Xe},r),prefixCls:i,style:Object.assign(Object.assign({},s),{WebkitLineClamp:Xe?ae:void 0}),component:f,ref:eo(V,w,e),direction:p,onClick:_.includes("text")?I:void 0,"aria-label":Ue==null?void 0:Ue.toString(),title:m},E),v.createElement(fu,{enableMeasure:te&&!le,text:l,rows:ae,width:Ke,onEllipsis:yt,expanded:Q,miscDeps:[z,Q,H,M,L,x]},(F,Z)=>gu(n,v.createElement(v.Fragment,null,F.length>0&&Z&&!Q&&Ue?v.createElement("span",{key:"show-content","aria-hidden":!0},F):F,he(Z)))))))});var xu=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};const yu=v.forwardRef((n,e)=>{var{ellipsis:t,rel:i}=n,r=xu(n,["ellipsis","rel"]);const s=Object.assign(Object.assign({},r),{rel:i===void 0&&r.target==="_blank"?"noopener noreferrer":i});return delete s.navigate,v.createElement(pr,Object.assign({},s,{ref:e,ellipsis:!!t,component:"a"}))}),wu=v.forwardRef((n,e)=>v.createElement(pr,Object.assign({ref:e},n,{component:"div"})));var Cu=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};const Eu=(n,e)=>{var{ellipsis:t}=n,i=Cu(n,["ellipsis"]);const r=v.useMemo(()=>t&&typeof t=="object"?On(t,["expandable","rows"]):t,[t]);return v.createElement(pr,Object.assign({ref:e},i,{ellipsis:r,component:"span"}))},Mu=v.forwardRef(Eu);var bu=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};const _u=[1,2,3,4,5],Su=v.forwardRef((n,e)=>{const{level:t=1}=n,i=bu(n,["level"]),r=_u.includes(t)?`h${t}`:"h1";return v.createElement(pr,Object.assign({ref:e},i,{component:r}))}),fi=il;fi.Text=Mu;fi.Link=yu;fi.Title=Su;fi.Paragraph=wu;const T={CHANGE_THEME:"changeTheme",CHANGE_LAYOUT:"changeLayout",SET_DATA:"setData",MODE:{READONLY:"readonly",EDIT:"edit"},LAYOUT:{LOGICAL_STRUCTURE:"logicalStructure",LOGICAL_STRUCTURE_LEFT:"logicalStructureLeft",MIND_MAP:"mindMap",ORGANIZATION_STRUCTURE:"organizationStructure",CATALOG_ORGANIZATION:"catalogOrganization",TIMELINE:"timeline",TIMELINE2:"timeline2",FISHBONE:"fishbone",VERTICAL_TIMELINE:"verticalTimeline"},DIR:{UP:"up",LEFT:"left",DOWN:"down",RIGHT:"right"},SHAPE:{RECTANGLE:"rectangle",DIAMOND:"diamond",PARALLELOGRAM:"parallelogram",ROUNDED_RECTANGLE:"roundedRectangle",OCTAGONAL_RECTANGLE:"octagonalRectangle",OUTER_TRIANGULAR_RECTANGLE:"outerTriangularRectangle",INNER_TRIANGULAR_RECTANGLE:"innerTriangularRectangle",ELLIPSE:"ellipse",CIRCLE:"circle"},MOUSE_WHEEL_ACTION:{ZOOM:"zoom",MOVE:"move"},INIT_ROOT_NODE_POSITION:{LEFT:"left",TOP:"top",RIGHT:"right",BOTTOM:"bottom",CENTER:"center"},LAYOUT_GROW_DIR:{LEFT:"left",TOP:"top",RIGHT:"right",BOTTOM:"bottom"},CREATE_NEW_NODE_BEHAVIOR:{DEFAULT:"default",NOT_ACTIVE:"notActive",ACTIVE_ONLY:"activeOnly"},TAG_POSITION:{RIGHT:"right",BOTTOM:"bottom"},EDIT_NODE_CLASS:{SMM_NODE_EDIT_WRAP:"smm-node-edit-wrap",RICH_TEXT_EDIT_WRAP:"ql-editor",ASSOCIATIVE_LINE_TEXT_EDIT_WRAP:"associative-line-text-edit-warp"}},ma={[T.INIT_ROOT_NODE_POSITION.LEFT]:0,[T.INIT_ROOT_NODE_POSITION.TOP]:0,[T.INIT_ROOT_NODE_POSITION.RIGHT]:1,[T.INIT_ROOT_NODE_POSITION.BOTTOM]:1,[T.INIT_ROOT_NODE_POSITION.CENTER]:.5},ga=[T.LAYOUT.LOGICAL_STRUCTURE,T.LAYOUT.LOGICAL_STRUCTURE_LEFT,T.LAYOUT.MIND_MAP,T.LAYOUT.CATALOG_ORGANIZATION,T.LAYOUT.ORGANIZATION_STRUCTURE,T.LAYOUT.TIMELINE,T.LAYOUT.TIMELINE2,T.LAYOUT.VERTICAL_TIMELINE,T.LAYOUT.FISHBONE],Nu=["text","image","imageTitle","imageSize","icon","tag","hyperlink","hyperlinkTitle","note","expand","isActive","generalization","richText","resetRichText","uid","activeStyle","associativeLineTargets","associativeLineTargetControlOffsets","associativeLinePoint","associativeLineText","attachmentUrl","attachmentName","notation","outerFrame","number","range","customLeft","customTop","customTextWidth","checkbox","dir","needUpdate"],Ln={READ_CLIPBOARD_ERROR:"read_clipboard_error",CUSTOM_HANDLE_CLIPBOARD_TEXT_ERROR:"custom_handle_clipboard_text_error",LOAD_CLIPBOARD_IMAGE_ERROR:"load_clipboard_image_error",BEFORE_TEXT_EDIT_ERROR:"before_text_edit_error",EXPORT_ERROR:"export_error",DATA_CHANGE_DETAIL_EVENT_ERROR:"data_change_detail_event_error"},Tu=`
  /* 鼠标hover和激活时渲染的矩形 */
  .smm-hover-node{
    display: none;
    opacity: 0.6;
    stroke-width: 1;
  }

  .smm-node:not(.smm-node-dragging):hover .smm-hover-node{
    display: block;
  }

  .smm-node.active .smm-hover-node, .smm-node-highlight .smm-hover-node{
    display: block;
    opacity: 1;
    stroke-width: 2;
  }

  .smm-text-node-wrap, .smm-expand-btn-text {
    user-select: none;
  }
`,er=1.2,Du=["fontFamily","fontSize","fontWeight","fontStyle","textDecoration","color"];class Ru{constructor(e={}){this.opt=e,this.mindMap=this.opt.mindMap,this.scale=1,this.sx=0,this.sy=0,this.x=0,this.y=0,this.firstDrag=!0,this.setTransformData(this.mindMap.opt.viewData),this.bind()}bind(){this.mindMap.keyCommand.addShortcut("Control+=",()=>{this.enlarge()}),this.mindMap.keyCommand.addShortcut("Control+-",()=>{this.narrow()}),this.mindMap.keyCommand.addShortcut("Control+i",()=>{this.fit()}),this.mindMap.event.on("mousedown",e=>{const{isDisableDrag:t,mousedownEventPreventDefault:i}=this.mindMap.opt;t||(i&&e.preventDefault(),this.sx=this.x,this.sy=this.y)}),this.mindMap.event.on("drag",(e,t)=>{e.ctrlKey||e.metaKey||this.mindMap.opt.isDisableDrag||(this.firstDrag&&(this.firstDrag=!1,this.mindMap.renderer.activeNodeList.length>0&&this.mindMap.execCommand("CLEAR_ACTIVE_NODE")),this.x=this.sx+t.mousemoveOffset.x,this.y=this.sy+t.mousemoveOffset.y,this.transform())}),this.mindMap.event.on("mouseup",()=>{this.firstDrag=!0}),this.mindMap.event.on("mousewheel",(e,t,i,r)=>{const{customHandleMousewheel:s,mousewheelAction:a,mouseScaleCenterUseMousePosition:o,mousewheelMoveStep:l,mousewheelZoomActionReverse:h,disableMouseWheelZoom:c,translateRatio:d}=this.mindMap.opt;if(s&&typeof s=="function")return s(e);if(a===T.MOUSE_WHEEL_ACTION.ZOOM||e.ctrlKey||e.metaKey){if(c)return;const{x:f,y:m}=this.mindMap.toPos(e.clientX,e.clientY),u=o?f:void 0,g=o?m:void 0;switch(r&&(t.includes(T.DIR.LEFT)||t.includes(T.DIR.RIGHT))&&(t=t.filter(p=>![T.DIR.LEFT,T.DIR.RIGHT].includes(p))),!0){case t.includes(T.DIR.UP):h?this.enlarge(u,g,r):this.narrow(u,g,r);break;case t.includes(T.DIR.DOWN):h?this.narrow(u,g,r):this.enlarge(u,g,r);break}}else{let f=0,m=0;r?(f=Math.abs(e.wheelDeltaX),m=Math.abs(e.wheelDeltaY)):f=m=l;let u=0,g=0;t.includes(T.DIR.DOWN)&&(g=-m),t.includes(T.DIR.UP)&&(g=m),t.includes(T.DIR.LEFT)&&(u=f),t.includes(T.DIR.RIGHT)&&(u=-f),this.translateXY(u*d,g*d)}}),this.mindMap.on("resize",()=>{this.checkNeedMindMapInCanvas()&&this.transform()})}getTransformData(){return{transform:this.mindMap.draw.transform(),state:{scale:this.scale,x:this.x,y:this.y,sx:this.sx,sy:this.sy}}}setTransformData(e){e&&(Object.keys(e.state).forEach(t=>{this[t]=e.state[t]}),this.mindMap.draw.transform({...e.transform}),this.mindMap.emit("view_data_change",this.getTransformData()),this.emitEvent("scale"),this.emitEvent("translate"))}translateXY(e,t){e===0&&t===0||(this.x+=e,this.y+=t,this.transform(),this.emitEvent("translate"))}translateX(e){e!==0&&(this.x+=e,this.transform(),this.emitEvent("translate"))}translateXTo(e){this.x=e,this.transform(),this.emitEvent("translate")}translateY(e){e!==0&&(this.y+=e,this.transform(),this.emitEvent("translate"))}translateYTo(e){this.y=e,this.transform(),this.emitEvent("translate")}transform(){try{this.limitMindMapInCanvas()}catch{}this.mindMap.draw.transform({origin:[0,0],scale:this.scale,translate:[this.x,this.y]}),this.mindMap.emit("view_data_change",this.getTransformData())}reset(){const e=this.scale!==1,t=this.x!==0||this.y!==0;this.scale=1,this.x=0,this.y=0,this.transform(),e&&this.emitEvent("scale"),t&&this.emitEvent("translate")}narrow(e,t,i){let{scaleRatio:r,minZoomRatio:s}=this.mindMap.opt;r=r/(i?5:1);const a=Math.max(this.scale-r,s/100);this.scaleInCenter(a,e,t),this.transform(),this.emitEvent("scale")}enlarge(e,t,i){let{scaleRatio:r,maxZoomRatio:s}=this.mindMap.opt;r=r/(i?5:1);let a=0;s===-1?a=this.scale+r:a=Math.min(this.scale+r,s/100),this.scaleInCenter(a,e,t),this.transform(),this.emitEvent("scale")}scaleInCenter(e,t,i){(t===void 0||i===void 0)&&(t=this.mindMap.width/2,i=this.mindMap.height/2);const r=this.scale,s=1-e/r,a=(t-this.x)*s,o=(i-this.y)*s;this.x+=a,this.y+=o,this.scale=e}setScale(e,t,i){t!==void 0&&i!==void 0?this.scaleInCenter(e,t,i):this.scale=e,this.transform(),this.emitEvent("scale")}fit(e=()=>{},t=!1,i){i=i===void 0?this.mindMap.opt.fitPadding:i;const r=this.mindMap.draw,s=r.transform(),a=e()||r.rbox(),o=a.width/s.scaleX,l=a.height/s.scaleY,h=o/l;let{width:c,height:d}=this.mindMap.elRect;c=c-i*2,d=d-i*2;const f=c/d;let m=0,u="";if(o<=c&&l<=d&&!t)m=1,u=1;else{let w=0;h>f?(w=c,u=2):(w=d*h,u=3),m=w/o}this.setScale(m);const g=e()||r.rbox();g.x-=this.mindMap.elRect.left,g.y-=this.mindMap.elRect.top;let p=0,x=0;u===1?(p=-g.x+i+(c-g.width)/2,x=-g.y+i+(d-g.height)/2):u===2?(p=-g.x+i,x=-g.y+i+(d-g.height)/2):u===3&&(p=-g.x+i+(c-g.width)/2,x=-g.y+i),this.translateXY(p,x)}checkNeedMindMapInCanvas(){if(this.mindMap.demonstrate&&this.mindMap.demonstrate.isInDemonstrate)return!1;const{isLimitMindMapInCanvasWhenHasScrollbar:e,isLimitMindMapInCanvas:t}=this.mindMap.opt;return this.mindMap.scrollbar?e:t}limitMindMapInCanvas(){if(!this.checkNeedMindMapInCanvas())return;let{scale:e,left:t,top:i,right:r,bottom:s}=this.getPositionLimit();const a=(this.mindMap.width-this.mindMap.initWidth)/2*e,o=(this.mindMap.height-this.mindMap.initHeight)/2*e,l=this.scale/e;t*=l,r*=l,i*=l,s*=l;const h=this.mindMap.width/2,c=this.mindMap.height/2,d=this.scale-1;t-=d*h-a,r-=d*h-a,i-=d*c-o,s-=d*c-o,this.x>t&&(this.x=t),this.x<r&&(this.x=r),this.y>i&&(this.y=i),this.y<s&&(this.y=s)}getPositionLimit(){const{scaleX:e,scaleY:t}=this.mindMap.draw.transform(),i=this.mindMap.draw.rbox(),r=this.mindMap.renderer.root.group.rbox(),s=this.mindMap.renderer.layout.getRootCenterOffset(r.width,r.height),a=r.x-i.x-s.x*e,o=r.x-i.x2-s.x*e,l=r.y-i.y-s.y*t,h=r.y-i.y2-s.y*t;return{scale:e,left:a,right:o,top:l,bottom:h}}emitEvent(e){switch(e){case"scale":this.mindMap.emit("scale",this.scale);case"translate":this.mindMap.emit("translate",this.x,this.y)}}}var rl={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function r(l,h,c){this.fn=l,this.context=h,this.once=c||!1}function s(l,h,c,d,f){if(typeof c!="function")throw new TypeError("The listener must be a function");var m=new r(c,d||l,f),u=t?t+h:h;return l._events[u]?l._events[u].fn?l._events[u]=[l._events[u],m]:l._events[u].push(m):(l._events[u]=m,l._eventsCount++),l}function a(l,h){--l._eventsCount===0?l._events=new i:delete l._events[h]}function o(){this._events=new i,this._eventsCount=0}o.prototype.eventNames=function(){var h=[],c,d;if(this._eventsCount===0)return h;for(d in c=this._events)e.call(c,d)&&h.push(t?d.slice(1):d);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(c)):h},o.prototype.listeners=function(h){var c=t?t+h:h,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,m=d.length,u=new Array(m);f<m;f++)u[f]=d[f].fn;return u},o.prototype.listenerCount=function(h){var c=t?t+h:h,d=this._events[c];return d?d.fn?1:d.length:0},o.prototype.emit=function(h,c,d,f,m,u){var g=t?t+h:h;if(!this._events[g])return!1;var p=this._events[g],x=arguments.length,w,y;if(p.fn){switch(p.once&&this.removeListener(h,p.fn,void 0,!0),x){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,c),!0;case 3:return p.fn.call(p.context,c,d),!0;case 4:return p.fn.call(p.context,c,d,f),!0;case 5:return p.fn.call(p.context,c,d,f,m),!0;case 6:return p.fn.call(p.context,c,d,f,m,u),!0}for(y=1,w=new Array(x-1);y<x;y++)w[y-1]=arguments[y];p.fn.apply(p.context,w)}else{var C=p.length,E;for(y=0;y<C;y++)switch(p[y].once&&this.removeListener(h,p[y].fn,void 0,!0),x){case 1:p[y].fn.call(p[y].context);break;case 2:p[y].fn.call(p[y].context,c);break;case 3:p[y].fn.call(p[y].context,c,d);break;case 4:p[y].fn.call(p[y].context,c,d,f);break;default:if(!w)for(E=1,w=new Array(x-1);E<x;E++)w[E-1]=arguments[E];p[y].fn.apply(p[y].context,w)}}return!0},o.prototype.on=function(h,c,d){return s(this,h,c,d,!1)},o.prototype.once=function(h,c,d){return s(this,h,c,d,!0)},o.prototype.removeListener=function(h,c,d,f){var m=t?t+h:h;if(!this._events[m])return this;if(!c)return a(this,m),this;var u=this._events[m];if(u.fn)u.fn===c&&(!f||u.once)&&(!d||u.context===d)&&a(this,m);else{for(var g=0,p=[],x=u.length;g<x;g++)(u[g].fn!==c||f&&!u[g].once||d&&u[g].context!==d)&&p.push(u[g]);p.length?this._events[m]=p.length===1?p[0]:p:a(this,m)}return this},o.prototype.removeAllListeners=function(h){var c;return h?(c=t?t+h:h,this._events[c]&&a(this,c)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,n.exports=o})(rl);var Iu=rl.exports;const Lu=gn(Iu);class Ou extends Lu{constructor(e={}){super(),this.opt=e,this.mindMap=e.mindMap,this.isLeftMousedown=!1,this.isRightMousedown=!1,this.isMiddleMousedown=!1,this.mousedownPos={x:0,y:0},this.mousemovePos={x:0,y:0},this.mousemoveOffset={x:0,y:0},this.bindFn(),this.bind()}bindFn(){this.onBodyMousedown=this.onBodyMousedown.bind(this),this.onBodyClick=this.onBodyClick.bind(this),this.onDrawClick=this.onDrawClick.bind(this),this.onMousedown=this.onMousedown.bind(this),this.onMousemove=this.onMousemove.bind(this),this.onMouseup=this.onMouseup.bind(this),this.onNodeMouseup=this.onNodeMouseup.bind(this),this.onMousewheel=this.onMousewheel.bind(this),this.onContextmenu=this.onContextmenu.bind(this),this.onSvgMousedown=this.onSvgMousedown.bind(this),this.onKeyup=this.onKeyup.bind(this),this.onMouseenter=this.onMouseenter.bind(this),this.onMouseleave=this.onMouseleave.bind(this)}bind(){document.body.addEventListener("mousedown",this.onBodyMousedown),document.body.addEventListener("click",this.onBodyClick),this.mindMap.svg.on("click",this.onDrawClick),this.mindMap.el.addEventListener("mousedown",this.onMousedown),this.mindMap.svg.on("mousedown",this.onSvgMousedown),window.addEventListener("mousemove",this.onMousemove),window.addEventListener("mouseup",this.onMouseup),this.on("node_mouseup",this.onNodeMouseup),this.mindMap.el.addEventListener("wheel",this.onMousewheel),this.mindMap.svg.on("contextmenu",this.onContextmenu),this.mindMap.svg.on("mouseenter",this.onMouseenter),this.mindMap.svg.on("mouseleave",this.onMouseleave),window.addEventListener("keyup",this.onKeyup)}unbind(){document.body.removeEventListener("mousedown",this.onBodyMousedown),document.body.removeEventListener("click",this.onBodyClick),this.mindMap.svg.off("click",this.onDrawClick),this.mindMap.el.removeEventListener("mousedown",this.onMousedown),window.removeEventListener("mousemove",this.onMousemove),window.removeEventListener("mouseup",this.onMouseup),this.off("node_mouseup",this.onNodeMouseup),this.mindMap.el.removeEventListener("wheel",this.onMousewheel),this.mindMap.svg.off("contextmenu",this.onContextmenu),this.mindMap.svg.off("mouseenter",this.onMouseenter),this.mindMap.svg.off("mouseleave",this.onMouseleave),window.removeEventListener("keyup",this.onKeyup)}onDrawClick(e){this.emit("draw_click",e)}onBodyMousedown(e){this.emit("body_mousedown",e)}onBodyClick(e){this.emit("body_click",e)}onSvgMousedown(e){this.emit("svg_mousedown",e)}onMousedown(e){e.which===1?this.isLeftMousedown=!0:e.which===3?this.isRightMousedown=!0:e.which===2&&(this.isMiddleMousedown=!0),this.mousedownPos.x=e.clientX,this.mousedownPos.y=e.clientY,this.emit("mousedown",e,this)}onMousemove(e){let{useLeftKeySelectionRightKeyDrag:t}=this.mindMap.opt;this.mousemovePos.x=e.clientX,this.mousemovePos.y=e.clientY,this.mousemoveOffset.x=e.clientX-this.mousedownPos.x,this.mousemoveOffset.y=e.clientY-this.mousedownPos.y,this.emit("mousemove",e,this),(this.isMiddleMousedown||(t?this.isRightMousedown:this.isLeftMousedown))&&(e.preventDefault(),this.emit("drag",e,this))}onMouseup(e){this.onNodeMouseup(),this.emit("mouseup",e,this)}onNodeMouseup(){this.isLeftMousedown=!1,this.isRightMousedown=!1,this.isMiddleMousedown=!1}onMousewheel(e){e.stopPropagation(),e.preventDefault();const t=[];e.deltaY<0&&t.push(T.DIR.UP),e.deltaY>0&&t.push(T.DIR.DOWN),e.deltaX<0&&t.push(T.DIR.LEFT),e.deltaX>0&&t.push(T.DIR.RIGHT);let i=!1;const{customCheckIsTouchPad:r}=this.mindMap.opt;typeof r=="function"?i=r(e):i=Math.abs(e.deltaY)<=10,this.emit("mousewheel",e,t,this,i)}onContextmenu(e){e.preventDefault(),!e.ctrlKey&&this.emit("contextmenu",e)}onKeyup(e){this.emit("keyup",e)}onMouseenter(e){this.emit("svg_mouseenter",e)}onMouseleave(e){this.emit("svg_mouseleave",e)}}var tr=function(e){return Au(e)&&!ku(e)};function Au(n){return!!n&&typeof n=="object"}function ku(n){var e=Object.prototype.toString.call(n);return e==="[object RegExp]"||e==="[object Date]"||Fu(n)}var Pu=typeof Symbol=="function"&&Symbol.for,zu=Pu?Symbol.for("react.element"):60103;function Fu(n){return n.$$typeof===zu}function $u(n){return Array.isArray(n)?[]:{}}function si(n,e){var t=e&&e.clone===!0;return t&&tr(n)?An($u(n),n,e):n}function va(n,e,t){var i=n.slice();return e.forEach(function(r,s){typeof i[s]>"u"?i[s]=si(r,t):tr(r)?i[s]=An(n[s],r,t):n.indexOf(r)===-1&&i.push(si(r,t))}),i}function Hu(n,e,t){var i={};return tr(n)&&Object.keys(n).forEach(function(r){i[r]=si(n[r],t)}),Object.keys(e).forEach(function(r){!tr(e[r])||!n[r]?i[r]=si(e[r],t):i[r]=An(n[r],e[r],t)}),i}function An(n,e,t){var i=Array.isArray(e),r=Array.isArray(n),s=t||{arrayMerge:va},a=i===r;if(a)if(i){var o=s.arrayMerge||va;return o(n,e,t)}else return Hu(n,e,t);else return si(e,t)}An.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce(function(i,r){return An(i,r,t)})};var nr=An;let Yi;const Bu=new Uint8Array(16);function Yu(){if(!Yi&&(Yi=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Yi))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Yi(Bu)}const rt=[];for(let n=0;n<256;++n)rt.push((n+256).toString(16).slice(1));function Wu(n,e=0){return rt[n[e+0]]+rt[n[e+1]]+rt[n[e+2]]+rt[n[e+3]]+"-"+rt[n[e+4]]+rt[n[e+5]]+"-"+rt[n[e+6]]+rt[n[e+7]]+"-"+rt[n[e+8]]+rt[n[e+9]]+"-"+rt[n[e+10]]+rt[n[e+11]]+rt[n[e+12]]+rt[n[e+13]]+rt[n[e+14]]+rt[n[e+15]]}const Vu=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),xa={randomUUID:Vu};function ju(n,e,t){if(xa.randomUUID&&!n)return xa.randomUUID();n=n||{};const i=n.random||(n.rng||Yu)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,Wu(i)}function $s(n){this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,this.init_genrand(n)}$s.prototype.init_genrand=function(n){for(this.mt[0]=n>>>0,this.mti=1;this.mti<this.N;this.mti++)n=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30,this.mt[this.mti]=(((n&4294901760)>>>16)*1812433253<<16)+(n&65535)*1812433253+this.mti,this.mt[this.mti]>>>=0};$s.prototype.genrand_int32=function(){var n,e=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var t;for(this.mti==this.N+1&&this.init_genrand(5489),t=0;t<this.N-this.M;t++)n=this.mt[t]&this.UPPER_MASK|this.mt[t+1]&this.LOWER_MASK,this.mt[t]=this.mt[t+this.M]^n>>>1^e[n&1];for(;t<this.N-1;t++)n=this.mt[t]&this.UPPER_MASK|this.mt[t+1]&this.LOWER_MASK,this.mt[t]=this.mt[t+(this.M-this.N)]^n>>>1^e[n&1];n=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^n>>>1^e[n&1],this.mti=0}return n=this.mt[this.mti++],n^=n>>>11,n^=n<<7&2636928640,n^=n<<15&4022730752,n^=n>>>18,n>>>0};const hs={},sl=[];function Ee(n,e){if(Array.isArray(n)){for(const t of n)Ee(t,e);return}if(typeof n=="object"){for(const t in n)Ee(t,n[t]);return}al(Object.getOwnPropertyNames(e)),hs[n]=Object.assign(hs[n]||{},e)}function vt(n){return hs[n]||{}}function Uu(){return[...new Set(sl)]}function al(n){sl.push(...n)}function Hs(n,e){let t;const i=n.length,r=[];for(t=0;t<i;t++)r.push(e(n[t]));return r}function Gu(n,e){let t;const i=n.length,r=[];for(t=0;t<i;t++)e(n[t])&&r.push(n[t]);return r}function qr(n){return n%360*Math.PI/180}function Wi(n){return n.toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()})}function Xu(n){return n.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()})}function ol(n){return n.charAt(0).toUpperCase()+n.slice(1)}function Wn(n,e,t,i){return(e==null||t==null)&&(i=i||n.bbox(),e==null?e=i.width/i.height*t:t==null&&(t=i.height/i.width*e)),{width:e,height:t}}function cs(n,e){const t=n.origin;let i=n.ox!=null?n.ox:n.originX!=null?n.originX:"center",r=n.oy!=null?n.oy:n.originY!=null?n.originY:"center";t!=null&&([i,r]=Array.isArray(t)?t:typeof t=="object"?[t.x,t.y]:[t,t]);const s=typeof i=="string",a=typeof r=="string";if(s||a){const{height:o,width:l,x:h,y:c}=e.bbox();s&&(i=i.includes("left")?h:i.includes("right")?h+l:h+l/2),a&&(r=r.includes("top")?c:r.includes("bottom")?c+o:c+o/2)}return[i,r]}const Bs="http://www.w3.org/2000/svg",Ku="http://www.w3.org/1999/xhtml",Vi="http://www.w3.org/2000/xmlns/",pi="http://www.w3.org/1999/xlink",qu="http://svgjs.dev/svgjs",De={window:typeof window>"u"?null:window,document:typeof document>"u"?null:document};let Ys=class{};const dn={},Ws="___SYMBOL___ROOT___";function ai(n,e=Bs){return De.document.createElementNS(e,n)}function ut(n,e=!1){if(n instanceof Ys)return n;if(typeof n=="object")return Zr(n);if(n==null)return new dn[Ws];if(typeof n=="string"&&n.charAt(0)!=="<")return Zr(De.document.querySelector(n));const t=e?De.document.createElement("div"):ai("svg");return t.innerHTML=n,n=Zr(t.firstChild),t.removeChild(t.firstChild),n}function Be(n,e){return e&&e.ownerDocument&&e instanceof e.ownerDocument.defaultView.Node?e:ai(n)}function bt(n){if(!n)return null;if(n.instance instanceof Ys)return n.instance;if(n.nodeName==="#document-fragment")return new dn.Fragment(n);let e=ol(n.nodeName||"Dom");return e==="LinearGradient"||e==="RadialGradient"?e="Gradient":dn[e]||(e="Dom"),new dn[e](n)}let Zr=bt;function Te(n,e=n.name,t=!1){return dn[e]=n,t&&(dn[Ws]=n),al(Object.getOwnPropertyNames(n.prototype)),n}function Zu(n){return dn[n]}let Qu=1e3;function ll(n){return"Svgjs"+ol(n)+Qu++}function hl(n){for(let e=n.children.length-1;e>=0;e--)hl(n.children[e]);return n.id&&(n.id=ll(n.nodeName)),n}function be(n,e){let t,i;for(n=Array.isArray(n)?n:[n],i=n.length-1;i>=0;i--)for(t in e)n[i].prototype[t]=e[t]}function He(n){return function(...e){const t=e[e.length-1];return t&&t.constructor===Object&&!(t instanceof Array)?n.apply(this,e.slice(0,-1)).attr(t):n.apply(this,e)}}function Ju(){return this.parent().children()}function ef(){return this.parent().index(this)}function tf(){return this.siblings()[this.position()+1]}function nf(){return this.siblings()[this.position()-1]}function rf(){const n=this.position();return this.parent().add(this.remove(),n+1),this}function sf(){const n=this.position();return this.parent().add(this.remove(),n?n-1:0),this}function af(){return this.parent().add(this.remove()),this}function of(){return this.parent().add(this.remove(),0),this}function lf(n){n=ut(n),n.remove();const e=this.position();return this.parent().add(n,e),this}function hf(n){n=ut(n),n.remove();const e=this.position();return this.parent().add(n,e+1),this}function cf(n){return n=ut(n),n.before(this),this}function df(n){return n=ut(n),n.after(this),this}Ee("Dom",{siblings:Ju,position:ef,next:tf,prev:nf,forward:rf,backward:sf,front:af,back:of,before:lf,after:hf,insertBefore:cf,insertAfter:df});const cl=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,uf=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,ff=/rgb\((\d+),(\d+),(\d+)\)/,pf=/(#[a-z_][a-z0-9\-_]*)/i,mf=/\)\s*,?\s*/,gf=/\s/g,ya=/^#[a-f0-9]{3}$|^#[a-f0-9]{6}$/i,wa=/^rgb\(/,Ca=/^(\s+)?$/,Ea=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,vf=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,Yt=/[\s,]+/,Vs=/[MLHVCSQTAZ]/i;function xf(){const n=this.attr("class");return n==null?[]:n.trim().split(Yt)}function yf(n){return this.classes().indexOf(n)!==-1}function wf(n){if(!this.hasClass(n)){const e=this.classes();e.push(n),this.attr("class",e.join(" "))}return this}function Cf(n){return this.hasClass(n)&&this.attr("class",this.classes().filter(function(e){return e!==n}).join(" ")),this}function Ef(n){return this.hasClass(n)?this.removeClass(n):this.addClass(n)}Ee("Dom",{classes:xf,hasClass:yf,addClass:wf,removeClass:Cf,toggleClass:Ef});function Mf(n,e){const t={};if(arguments.length===0)return this.node.style.cssText.split(/\s*;\s*/).filter(function(i){return!!i.length}).forEach(function(i){const r=i.split(/\s*:\s*/);t[r[0]]=r[1]}),t;if(arguments.length<2){if(Array.isArray(n)){for(const i of n){const r=Wi(i);t[i]=this.node.style[r]}return t}if(typeof n=="string")return this.node.style[Wi(n)];if(typeof n=="object")for(const i in n)this.node.style[Wi(i)]=n[i]==null||Ca.test(n[i])?"":n[i]}return arguments.length===2&&(this.node.style[Wi(n)]=e==null||Ca.test(e)?"":e),this}function bf(){return this.css("display","")}function _f(){return this.css("display","none")}function Sf(){return this.css("display")!=="none"}Ee("Dom",{css:Mf,show:bf,hide:_f,visible:Sf});function Nf(n,e,t){if(n==null)return this.data(Hs(Gu(this.node.attributes,i=>i.nodeName.indexOf("data-")===0),i=>i.nodeName.slice(5)));if(n instanceof Array){const i={};for(const r of n)i[r]=this.data(r);return i}else if(typeof n=="object")for(e in n)this.data(e,n[e]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+n))}catch{return this.attr("data-"+n)}else this.attr("data-"+n,e===null?null:t===!0||typeof e=="string"||typeof e=="number"?e:JSON.stringify(e));return this}Ee("Dom",{data:Nf});function Tf(n,e){if(typeof arguments[0]=="object")for(const t in n)this.remember(t,n[t]);else{if(arguments.length===1)return this.memory()[n];this.memory()[n]=e}return this}function Df(){if(arguments.length===0)this._memory={};else for(let n=arguments.length-1;n>=0;n--)delete this.memory()[arguments[n]];return this}function Rf(){return this._memory=this._memory||{}}Ee("Dom",{remember:Tf,forget:Df,memory:Rf});function If(n){return n.length===4?["#",n.substring(1,2),n.substring(1,2),n.substring(2,3),n.substring(2,3),n.substring(3,4),n.substring(3,4)].join(""):n}function Lf(n){const e=Math.round(n),i=Math.max(0,Math.min(255,e)).toString(16);return i.length===1?"0"+i:i}function Sn(n,e){for(let t=e.length;t--;)if(n[e[t]]==null)return!1;return!0}function Of(n,e){const t=Sn(n,"rgb")?{_a:n.r,_b:n.g,_c:n.b,_d:0,space:"rgb"}:Sn(n,"xyz")?{_a:n.x,_b:n.y,_c:n.z,_d:0,space:"xyz"}:Sn(n,"hsl")?{_a:n.h,_b:n.s,_c:n.l,_d:0,space:"hsl"}:Sn(n,"lab")?{_a:n.l,_b:n.a,_c:n.b,_d:0,space:"lab"}:Sn(n,"lch")?{_a:n.l,_b:n.c,_c:n.h,_d:0,space:"lch"}:Sn(n,"cmyk")?{_a:n.c,_b:n.m,_c:n.y,_d:n.k,space:"cmyk"}:{_a:0,_b:0,_c:0,space:"rgb"};return t.space=e||t.space,t}function Af(n){return n==="lab"||n==="xyz"||n==="lch"}function Qr(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}class Ae{constructor(...e){this.init(...e)}static isColor(e){return e&&(e instanceof Ae||this.isRgb(e)||this.test(e))}static isRgb(e){return e&&typeof e.r=="number"&&typeof e.g=="number"&&typeof e.b=="number"}static random(e="vibrant",t,i){const{random:r,round:s,sin:a,PI:o}=Math;if(e==="vibrant"){const l=24*r()+57,h=38*r()+45,c=360*r();return new Ae(l,h,c,"lch")}else if(e==="sine"){t=t??r();const l=s(80*a(2*o*t/.5+.01)+150),h=s(50*a(2*o*t/.5+4.6)+200),c=s(100*a(2*o*t/.5+2.3)+150);return new Ae(l,h,c)}else if(e==="pastel"){const l=8*r()+86,h=17*r()+9,c=360*r();return new Ae(l,h,c,"lch")}else if(e==="dark"){const l=10+10*r(),h=50*r()+86,c=360*r();return new Ae(l,h,c,"lch")}else if(e==="rgb"){const l=255*r(),h=255*r(),c=255*r();return new Ae(l,h,c)}else if(e==="lab"){const l=100*r(),h=256*r()-128,c=256*r()-128;return new Ae(l,h,c,"lab")}else if(e==="grey"){const l=255*r();return new Ae(l,l,l)}else throw new Error("Unsupported random color mode")}static test(e){return typeof e=="string"&&(ya.test(e)||wa.test(e))}cmyk(){const{_a:e,_b:t,_c:i}=this.rgb(),[r,s,a]=[e,t,i].map(f=>f/255),o=Math.min(1-r,1-s,1-a);if(o===1)return new Ae(0,0,0,1,"cmyk");const l=(1-r-o)/(1-o),h=(1-s-o)/(1-o),c=(1-a-o)/(1-o);return new Ae(l,h,c,o,"cmyk")}hsl(){const{_a:e,_b:t,_c:i}=this.rgb(),[r,s,a]=[e,t,i].map(g=>g/255),o=Math.max(r,s,a),l=Math.min(r,s,a),h=(o+l)/2,c=o===l,d=o-l,f=c?0:h>.5?d/(2-o-l):d/(o+l),m=c?0:o===r?((s-a)/d+(s<a?6:0))/6:o===s?((a-r)/d+2)/6:o===a?((r-s)/d+4)/6:0;return new Ae(360*m,100*f,100*h,"hsl")}init(e=0,t=0,i=0,r=0,s="rgb"){if(e=e||0,this.space)for(const d in this.space)delete this[this.space[d]];if(typeof e=="number")s=typeof r=="string"?r:s,r=typeof r=="string"?0:r,Object.assign(this,{_a:e,_b:t,_c:i,_d:r,space:s});else if(e instanceof Array)this.space=t||(typeof e[3]=="string"?e[3]:e[4])||"rgb",Object.assign(this,{_a:e[0],_b:e[1],_c:e[2],_d:e[3]||0});else if(e instanceof Object){const d=Of(e,t);Object.assign(this,d)}else if(typeof e=="string")if(wa.test(e)){const d=e.replace(gf,""),[f,m,u]=ff.exec(d).slice(1,4).map(g=>parseInt(g));Object.assign(this,{_a:f,_b:m,_c:u,_d:0,space:"rgb"})}else if(ya.test(e)){const d=g=>parseInt(g,16),[,f,m,u]=uf.exec(If(e)).map(d);Object.assign(this,{_a:f,_b:m,_c:u,_d:0,space:"rgb"})}else throw Error("Unsupported string format, can't construct Color");const{_a:a,_b:o,_c:l,_d:h}=this,c=this.space==="rgb"?{r:a,g:o,b:l}:this.space==="xyz"?{x:a,y:o,z:l}:this.space==="hsl"?{h:a,s:o,l}:this.space==="lab"?{l:a,a:o,b:l}:this.space==="lch"?{l:a,c:o,h:l}:this.space==="cmyk"?{c:a,m:o,y:l,k:h}:{};Object.assign(this,c)}lab(){const{x:e,y:t,z:i}=this.xyz(),r=116*t-16,s=500*(e-t),a=200*(t-i);return new Ae(r,s,a,"lab")}lch(){const{l:e,a:t,b:i}=this.lab(),r=Math.sqrt(t**2+i**2);let s=180*Math.atan2(i,t)/Math.PI;return s<0&&(s*=-1,s=360-s),new Ae(e,r,s,"lch")}rgb(){if(this.space==="rgb")return this;if(Af(this.space)){let{x:e,y:t,z:i}=this;if(this.space==="lab"||this.space==="lch"){let{l:m,a:u,b:g}=this;if(this.space==="lch"){const{c:M,h:b}=this,N=Math.PI/180;u=M*Math.cos(N*b),g=M*Math.sin(N*b)}const p=(m+16)/116,x=u/500+p,w=p-g/200,y=16/116,C=.008856,E=7.787;e=.95047*(x**3>C?x**3:(x-y)/E),t=1*(p**3>C?p**3:(p-y)/E),i=1.08883*(w**3>C?w**3:(w-y)/E)}const r=e*3.2406+t*-1.5372+i*-.4986,s=e*-.9689+t*1.8758+i*.0415,a=e*.0557+t*-.204+i*1.057,o=Math.pow,l=.0031308,h=r>l?1.055*o(r,1/2.4)-.055:12.92*r,c=s>l?1.055*o(s,1/2.4)-.055:12.92*s,d=a>l?1.055*o(a,1/2.4)-.055:12.92*a;return new Ae(255*h,255*c,255*d)}else if(this.space==="hsl"){let{h:e,s:t,l:i}=this;if(e/=360,t/=100,i/=100,t===0)return i*=255,new Ae(i,i,i);const r=i<.5?i*(1+t):i+t-i*t,s=2*i-r,a=255*Qr(s,r,e+1/3),o=255*Qr(s,r,e),l=255*Qr(s,r,e-1/3);return new Ae(a,o,l)}else if(this.space==="cmyk"){const{c:e,m:t,y:i,k:r}=this,s=255*(1-Math.min(1,e*(1-r)+r)),a=255*(1-Math.min(1,t*(1-r)+r)),o=255*(1-Math.min(1,i*(1-r)+r));return new Ae(s,a,o)}else return this}toArray(){const{_a:e,_b:t,_c:i,_d:r,space:s}=this;return[e,t,i,r,s]}toHex(){const[e,t,i]=this._clamped().map(Lf);return`#${e}${t}${i}`}toRgb(){const[e,t,i]=this._clamped();return`rgb(${e},${t},${i})`}toString(){return this.toHex()}xyz(){const{_a:e,_b:t,_c:i}=this.rgb(),[r,s,a]=[e,t,i].map(x=>x/255),o=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,l=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92,h=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92,c=(o*.4124+l*.3576+h*.1805)/.95047,d=(o*.2126+l*.7152+h*.0722)/1,f=(o*.0193+l*.1192+h*.9505)/1.08883,m=c>.008856?Math.pow(c,1/3):7.787*c+16/116,u=d>.008856?Math.pow(d,1/3):7.787*d+16/116,g=f>.008856?Math.pow(f,1/3):7.787*f+16/116;return new Ae(m,u,g,"xyz")}_clamped(){const{_a:e,_b:t,_c:i}=this.rgb(),{max:r,min:s,round:a}=Math,o=l=>r(0,s(a(l),255));return[e,t,i].map(o)}}class Ge{constructor(...e){this.init(...e)}clone(){return new Ge(this)}init(e,t){const i={x:0,y:0},r=Array.isArray(e)?{x:e[0],y:e[1]}:typeof e=="object"?{x:e.x,y:e.y}:{x:e,y:t};return this.x=r.x==null?i.x:r.x,this.y=r.y==null?i.y:r.y,this}toArray(){return[this.x,this.y]}transform(e){return this.clone().transformO(e)}transformO(e){ce.isMatrixLike(e)||(e=new ce(e));const{x:t,y:i}=this;return this.x=e.a*t+e.c*i+e.e,this.y=e.b*t+e.d*i+e.f,this}}function kf(n,e){return new Ge(n,e).transformO(this.screenCTM().inverseO())}function Nn(n,e,t){return Math.abs(e-n)<1e-6}class ce{constructor(...e){this.init(...e)}static formatTransforms(e){const t=e.flip==="both"||e.flip===!0,i=e.flip&&(t||e.flip==="x")?-1:1,r=e.flip&&(t||e.flip==="y")?-1:1,s=e.skew&&e.skew.length?e.skew[0]:isFinite(e.skew)?e.skew:isFinite(e.skewX)?e.skewX:0,a=e.skew&&e.skew.length?e.skew[1]:isFinite(e.skew)?e.skew:isFinite(e.skewY)?e.skewY:0,o=e.scale&&e.scale.length?e.scale[0]*i:isFinite(e.scale)?e.scale*i:isFinite(e.scaleX)?e.scaleX*i:i,l=e.scale&&e.scale.length?e.scale[1]*r:isFinite(e.scale)?e.scale*r:isFinite(e.scaleY)?e.scaleY*r:r,h=e.shear||0,c=e.rotate||e.theta||0,d=new Ge(e.origin||e.around||e.ox||e.originX,e.oy||e.originY),f=d.x,m=d.y,u=new Ge(e.position||e.px||e.positionX||NaN,e.py||e.positionY||NaN),g=u.x,p=u.y,x=new Ge(e.translate||e.tx||e.translateX,e.ty||e.translateY),w=x.x,y=x.y,C=new Ge(e.relative||e.rx||e.relativeX,e.ry||e.relativeY),E=C.x,M=C.y;return{scaleX:o,scaleY:l,skewX:s,skewY:a,shear:h,theta:c,rx:E,ry:M,tx:w,ty:y,ox:f,oy:m,px:g,py:p}}static fromArray(e){return{a:e[0],b:e[1],c:e[2],d:e[3],e:e[4],f:e[5]}}static isMatrixLike(e){return e.a!=null||e.b!=null||e.c!=null||e.d!=null||e.e!=null||e.f!=null}static matrixMultiply(e,t,i){const r=e.a*t.a+e.c*t.b,s=e.b*t.a+e.d*t.b,a=e.a*t.c+e.c*t.d,o=e.b*t.c+e.d*t.d,l=e.e+e.a*t.e+e.c*t.f,h=e.f+e.b*t.e+e.d*t.f;return i.a=r,i.b=s,i.c=a,i.d=o,i.e=l,i.f=h,i}around(e,t,i){return this.clone().aroundO(e,t,i)}aroundO(e,t,i){const r=e||0,s=t||0;return this.translateO(-r,-s).lmultiplyO(i).translateO(r,s)}clone(){return new ce(this)}decompose(e=0,t=0){const i=this.a,r=this.b,s=this.c,a=this.d,o=this.e,l=this.f,h=i*a-r*s,c=h>0?1:-1,d=c*Math.sqrt(i*i+r*r),f=Math.atan2(c*r,c*i),m=180/Math.PI*f,u=Math.cos(f),g=Math.sin(f),p=(i*s+r*a)/h,x=s*d/(p*i-r)||a*d/(p*r+i),w=o-e+e*u*d+t*(p*u*d-g*x),y=l-t+e*g*d+t*(p*g*d+u*x);return{scaleX:d,scaleY:x,shear:p,rotate:m,translateX:w,translateY:y,originX:e,originY:t,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}equals(e){if(e===this)return!0;const t=new ce(e);return Nn(this.a,t.a)&&Nn(this.b,t.b)&&Nn(this.c,t.c)&&Nn(this.d,t.d)&&Nn(this.e,t.e)&&Nn(this.f,t.f)}flip(e,t){return this.clone().flipO(e,t)}flipO(e,t){return e==="x"?this.scaleO(-1,1,t,0):e==="y"?this.scaleO(1,-1,0,t):this.scaleO(-1,-1,e,t||e)}init(e){const t=ce.fromArray([1,0,0,1,0,0]);return e=e instanceof zt?e.matrixify():typeof e=="string"?ce.fromArray(e.split(Yt).map(parseFloat)):Array.isArray(e)?ce.fromArray(e):typeof e=="object"&&ce.isMatrixLike(e)?e:typeof e=="object"?new ce().transform(e):arguments.length===6?ce.fromArray([].slice.call(arguments)):t,this.a=e.a!=null?e.a:t.a,this.b=e.b!=null?e.b:t.b,this.c=e.c!=null?e.c:t.c,this.d=e.d!=null?e.d:t.d,this.e=e.e!=null?e.e:t.e,this.f=e.f!=null?e.f:t.f,this}inverse(){return this.clone().inverseO()}inverseO(){const e=this.a,t=this.b,i=this.c,r=this.d,s=this.e,a=this.f,o=e*r-t*i;if(!o)throw new Error("Cannot invert "+this);const l=r/o,h=-t/o,c=-i/o,d=e/o,f=-(l*s+c*a),m=-(h*s+d*a);return this.a=l,this.b=h,this.c=c,this.d=d,this.e=f,this.f=m,this}lmultiply(e){return this.clone().lmultiplyO(e)}lmultiplyO(e){const t=this,i=e instanceof ce?e:new ce(e);return ce.matrixMultiply(i,t,this)}multiply(e){return this.clone().multiplyO(e)}multiplyO(e){const t=this,i=e instanceof ce?e:new ce(e);return ce.matrixMultiply(t,i,this)}rotate(e,t,i){return this.clone().rotateO(e,t,i)}rotateO(e,t=0,i=0){e=qr(e);const r=Math.cos(e),s=Math.sin(e),{a,b:o,c:l,d:h,e:c,f:d}=this;return this.a=a*r-o*s,this.b=o*r+a*s,this.c=l*r-h*s,this.d=h*r+l*s,this.e=c*r-d*s+i*s-t*r+t,this.f=d*r+c*s-t*s-i*r+i,this}scale(e,t,i,r){return this.clone().scaleO(...arguments)}scaleO(e,t=e,i=0,r=0){arguments.length===3&&(r=i,i=t,t=e);const{a:s,b:a,c:o,d:l,e:h,f:c}=this;return this.a=s*e,this.b=a*t,this.c=o*e,this.d=l*t,this.e=h*e-i*e+i,this.f=c*t-r*t+r,this}shear(e,t,i){return this.clone().shearO(e,t,i)}shearO(e,t=0,i=0){const{a:r,b:s,c:a,d:o,e:l,f:h}=this;return this.a=r+s*e,this.c=a+o*e,this.e=l+h*e-i*e,this}skew(e,t,i,r){return this.clone().skewO(...arguments)}skewO(e,t=e,i=0,r=0){arguments.length===3&&(r=i,i=t,t=e),e=qr(e),t=qr(t);const s=Math.tan(e),a=Math.tan(t),{a:o,b:l,c:h,d:c,e:d,f}=this;return this.a=o+l*s,this.b=l+o*a,this.c=h+c*s,this.d=c+h*a,this.e=d+f*s-r*s,this.f=f+d*a-i*a,this}skewX(e,t,i){return this.skew(e,0,t,i)}skewY(e,t,i){return this.skew(0,e,t,i)}toArray(){return[this.a,this.b,this.c,this.d,this.e,this.f]}toString(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}transform(e){if(ce.isMatrixLike(e))return new ce(e).multiplyO(this);const t=ce.formatTransforms(e),i=this,{x:r,y:s}=new Ge(t.ox,t.oy).transform(i),a=new ce().translateO(t.rx,t.ry).lmultiplyO(i).translateO(-r,-s).scaleO(t.scaleX,t.scaleY).skewO(t.skewX,t.skewY).shearO(t.shear).rotateO(t.theta).translateO(r,s);if(isFinite(t.px)||isFinite(t.py)){const o=new Ge(r,s).transform(a),l=isFinite(t.px)?t.px-o.x:0,h=isFinite(t.py)?t.py-o.y:0;a.translateO(l,h)}return a.translateO(t.tx,t.ty),a}translate(e,t){return this.clone().translateO(e,t)}translateO(e,t){return this.e+=e||0,this.f+=t||0,this}valueOf(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}}function Pf(){return new ce(this.node.getCTM())}function zf(){if(typeof this.isRoot=="function"&&!this.isRoot()){const n=this.rect(1,1),e=n.node.getScreenCTM();return n.remove(),new ce(e)}return new ce(this.node.getScreenCTM())}Te(ce,"Matrix");function Gt(){if(!Gt.nodes){const n=ut().size(2,0);n.node.style.cssText=["opacity: 0","position: absolute","left: -100%","top: -100%","overflow: hidden"].join(";"),n.attr("focusable","false"),n.attr("aria-hidden","true");const e=n.path().node;Gt.nodes={svg:n,path:e}}if(!Gt.nodes.svg.node.parentNode){const n=De.document.body||De.document.documentElement;Gt.nodes.svg.addTo(n)}return Gt.nodes}function dl(n){return!n.width&&!n.height&&!n.x&&!n.y}function Ff(n){return n===De.document||(De.document.documentElement.contains||function(e){for(;e.parentNode;)e=e.parentNode;return e===De.document}).call(De.document.documentElement,n)}class ot{constructor(...e){this.init(...e)}addOffset(){return this.x+=De.window.pageXOffset,this.y+=De.window.pageYOffset,new ot(this)}init(e){const t=[0,0,0,0];return e=typeof e=="string"?e.split(Yt).map(parseFloat):Array.isArray(e)?e:typeof e=="object"?[e.left!=null?e.left:e.x,e.top!=null?e.top:e.y,e.width,e.height]:arguments.length===4?[].slice.call(arguments):t,this.x=e[0]||0,this.y=e[1]||0,this.width=this.w=e[2]||0,this.height=this.h=e[3]||0,this.x2=this.x+this.w,this.y2=this.y+this.h,this.cx=this.x+this.w/2,this.cy=this.y+this.h/2,this}isNulled(){return dl(this)}merge(e){const t=Math.min(this.x,e.x),i=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x+e.width)-t,s=Math.max(this.y+this.height,e.y+e.height)-i;return new ot(t,i,r,s)}toArray(){return[this.x,this.y,this.width,this.height]}toString(){return this.x+" "+this.y+" "+this.width+" "+this.height}transform(e){e instanceof ce||(e=new ce(e));let t=1/0,i=-1/0,r=1/0,s=-1/0;return[new Ge(this.x,this.y),new Ge(this.x2,this.y),new Ge(this.x,this.y2),new Ge(this.x2,this.y2)].forEach(function(o){o=o.transform(e),t=Math.min(t,o.x),i=Math.max(i,o.x),r=Math.min(r,o.y),s=Math.max(s,o.y)}),new ot(t,r,i-t,s-r)}}function ul(n,e,t){let i;try{if(i=e(n.node),dl(i)&&!Ff(n.node))throw new Error("Element not in the dom")}catch{i=t(n)}return i}function $f(){const t=ul(this,r=>r.getBBox(),r=>{try{const s=r.clone().addTo(Gt().svg).show(),a=s.node.getBBox();return s.remove(),a}catch(s){throw new Error(`Getting bbox of element "${r.node.nodeName}" is not possible: ${s.toString()}`)}});return new ot(t)}function Hf(n){const i=ul(this,s=>s.getBoundingClientRect(),s=>{throw new Error(`Getting rbox of element "${s.node.nodeName}" is not possible`)}),r=new ot(i);return n?r.transform(n.screenCTM().inverseO()):r.addOffset()}function Bf(n,e){const t=this.bbox();return n>t.x&&e>t.y&&n<t.x+t.width&&e<t.y+t.height}Ee({viewbox:{viewbox(n,e,t,i){return n==null?new ot(this.attr("viewBox")):this.attr("viewBox",new ot(n,e,t,i))},zoom(n,e){let{width:t,height:i}=this.attr(["width","height"]);if((!t&&!i||typeof t=="string"||typeof i=="string")&&(t=this.node.clientWidth,i=this.node.clientHeight),!t||!i)throw new Error("Impossible to get absolute width and height. Please provide an absolute width and height attribute on the zooming element");const r=this.viewbox(),s=t/r.width,a=i/r.height,o=Math.min(s,a);if(n==null)return o;let l=o/n;l===1/0&&(l=Number.MAX_SAFE_INTEGER/100),e=e||new Ge(t/2/s+r.x,i/2/a+r.y);const h=new ot(r).transform(new ce({scale:l,origin:e}));return this.viewbox(h)}}});Te(ot,"Box");class pn extends Array{constructor(e=[],...t){if(super(e,...t),typeof e=="number")return this;this.length=0,this.push(...e)}}be([pn],{each(n,...e){return typeof n=="function"?this.map((t,i,r)=>n.call(t,t,i,r)):this.map(t=>t[n](...e))},toArray(){return Array.prototype.concat.apply([],this)}});const Yf=["toArray","constructor","each"];pn.extend=function(n){n=n.reduce((e,t)=>(Yf.includes(t)||t[0]==="_"||(e[t]=function(...i){return this.each(t,...i)}),e),{}),be([pn],n)};function Vn(n,e){return new pn(Hs((e||De.document).querySelectorAll(n),function(t){return bt(t)}))}function Wf(n){return Vn(n,this.node)}function Vf(n){return bt(this.node.querySelector(n))}let jf=0;const fl={};function pl(n){let e=n.getEventHolder();return e===De.window&&(e=fl),e.events||(e.events={}),e.events}function js(n){return n.getEventTarget()}function Uf(n){let e=n.getEventHolder();e===De.window&&(e=fl),e.events&&(e.events={})}function ds(n,e,t,i,r){const s=t.bind(i||n),a=ut(n),o=pl(a),l=js(a);e=Array.isArray(e)?e:e.split(Yt),t._svgjsListenerId||(t._svgjsListenerId=++jf),e.forEach(function(h){const c=h.split(".")[0],d=h.split(".")[1]||"*";o[c]=o[c]||{},o[c][d]=o[c][d]||{},o[c][d][t._svgjsListenerId]=s,l.addEventListener(c,s,r||!1)})}function Dn(n,e,t,i){const r=ut(n),s=pl(r),a=js(r);typeof t=="function"&&(t=t._svgjsListenerId,!t)||(e=Array.isArray(e)?e:(e||"").split(Yt),e.forEach(function(o){const l=o&&o.split(".")[0],h=o&&o.split(".")[1];let c,d;if(t)s[l]&&s[l][h||"*"]&&(a.removeEventListener(l,s[l][h||"*"][t],i||!1),delete s[l][h||"*"][t]);else if(l&&h){if(s[l]&&s[l][h]){for(d in s[l][h])Dn(a,[l,h].join("."),d);delete s[l][h]}}else if(h)for(o in s)for(c in s[o])h===c&&Dn(a,[o,h].join("."));else if(l){if(s[l]){for(c in s[l])Dn(a,[l,c].join("."));delete s[l]}}else{for(o in s)Dn(a,o);Uf(r)}}))}function Gf(n,e,t,i){const r=js(n);return e instanceof De.window.Event||(e=new De.window.CustomEvent(e,{detail:t,cancelable:!0,...i})),r.dispatchEvent(e),e}class mi extends Ys{addEventListener(){}dispatch(e,t,i){return Gf(this,e,t,i)}dispatchEvent(e){const t=this.getEventHolder().events;if(!t)return!0;const i=t[e.type];for(const r in i)for(const s in i[r])i[r][s](e);return!e.defaultPrevented}fire(e,t,i){return this.dispatch(e,t,i),this}getEventHolder(){return this}getEventTarget(){return this}off(e,t,i){return Dn(this,e,t,i),this}on(e,t,i,r){return ds(this,e,t,i,r),this}removeEventListener(){}}Te(mi,"EventTarget");function Ma(){}const Jn={duration:400,ease:">",delay:0},Xf={"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","text-anchor":"start"};class kn extends Array{constructor(...e){super(...e),this.init(...e)}clone(){return new this.constructor(this)}init(e){return typeof e=="number"?this:(this.length=0,this.push(...this.parse(e)),this)}parse(e=[]){return e instanceof Array?e:e.trim().split(Yt).map(parseFloat)}toArray(){return Array.prototype.concat.apply([],this)}toSet(){return new Set(this)}toString(){return this.join(" ")}valueOf(){const e=[];return e.push(...this),e}}class xe{constructor(...e){this.init(...e)}convert(e){return new xe(this.value,e)}divide(e){return e=new xe(e),new xe(this/e,this.unit||e.unit)}init(e,t){return t=Array.isArray(e)?e[1]:t,e=Array.isArray(e)?e[0]:e,this.value=0,this.unit=t||"",typeof e=="number"?this.value=isNaN(e)?0:isFinite(e)?e:e<0?-34e37:34e37:typeof e=="string"?(t=e.match(cl),t&&(this.value=parseFloat(t[1]),t[5]==="%"?this.value/=100:t[5]==="s"&&(this.value*=1e3),this.unit=t[5])):e instanceof xe&&(this.value=e.valueOf(),this.unit=e.unit),this}minus(e){return e=new xe(e),new xe(this-e,this.unit||e.unit)}plus(e){return e=new xe(e),new xe(this+e,this.unit||e.unit)}times(e){return e=new xe(e),new xe(this*e,this.unit||e.unit)}toArray(){return[this.value,this.unit]}toJSON(){return this.toString()}toString(){return(this.unit==="%"?~~(this.value*1e8)/1e6:this.unit==="s"?this.value/1e3:this.value)+this.unit}valueOf(){return this.value}}const ml=[];function Kf(n){ml.push(n)}function qf(n,e,t){if(n==null){n={},e=this.node.attributes;for(const i of e)n[i.nodeName]=Ea.test(i.nodeValue)?parseFloat(i.nodeValue):i.nodeValue;return n}else{if(n instanceof Array)return n.reduce((i,r)=>(i[r]=this.attr(r),i),{});if(typeof n=="object"&&n.constructor===Object)for(e in n)this.attr(e,n[e]);else if(e===null)this.node.removeAttribute(n);else{if(e==null)return e=this.node.getAttribute(n),e==null?Xf[n]:Ea.test(e)?parseFloat(e):e;e=ml.reduce((i,r)=>r(n,i,this),e),typeof e=="number"?e=new xe(e):Ae.isColor(e)?e=new Ae(e):e.constructor===Array&&(e=new kn(e)),n==="leading"?this.leading&&this.leading(e):typeof t=="string"?this.node.setAttributeNS(t,n,e.toString()):this.node.setAttribute(n,e.toString()),this.rebuild&&(n==="font-size"||n==="x")&&this.rebuild()}}return this}class Zt extends mi{constructor(e,t){super(),this.node=e,this.type=e.nodeName,t&&e!==t&&this.attr(t)}add(e,t){return e=ut(e),e.removeNamespace&&this.node instanceof De.window.SVGElement&&e.removeNamespace(),t==null?this.node.appendChild(e.node):e.node!==this.node.childNodes[t]&&this.node.insertBefore(e.node,this.node.childNodes[t]),this}addTo(e,t){return ut(e).put(this,t)}children(){return new pn(Hs(this.node.children,function(e){return bt(e)}))}clear(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this}clone(e=!0,t=!0){this.writeDataToDom();let i=this.node.cloneNode(e);return t&&(i=hl(i)),new this.constructor(i)}each(e,t){const i=this.children();let r,s;for(r=0,s=i.length;r<s;r++)e.apply(i[r],[r,i]),t&&i[r].each(e,t);return this}element(e,t){return this.put(new Zt(ai(e),t))}first(){return bt(this.node.firstChild)}get(e){return bt(this.node.childNodes[e])}getEventHolder(){return this.node}getEventTarget(){return this.node}has(e){return this.index(e)>=0}html(e,t){return this.xml(e,t,Ku)}id(e){return typeof e>"u"&&!this.node.id&&(this.node.id=ll(this.type)),this.attr("id",e)}index(e){return[].slice.call(this.node.childNodes).indexOf(e.node)}last(){return bt(this.node.lastChild)}matches(e){const t=this.node,i=t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector||null;return i&&i.call(t,e)}parent(e){let t=this;if(!t.node.parentNode)return null;if(t=bt(t.node.parentNode),!e)return t;do if(typeof e=="string"?t.matches(e):t instanceof e)return t;while(t=bt(t.node.parentNode));return t}put(e,t){return e=ut(e),this.add(e,t),e}putIn(e,t){return ut(e).add(this,t)}remove(){return this.parent()&&this.parent().removeElement(this),this}removeElement(e){return this.node.removeChild(e.node),this}replace(e){return e=ut(e),this.node.parentNode&&this.node.parentNode.replaceChild(e.node,this.node),e}round(e=2,t=null){const i=10**e,r=this.attr(t);for(const s in r)typeof r[s]=="number"&&(r[s]=Math.round(r[s]*i)/i);return this.attr(r),this}svg(e,t){return this.xml(e,t,Bs)}toString(){return this.id()}words(e){return this.node.textContent=e,this}wrap(e){const t=this.parent();if(!t)return this.addTo(e);const i=t.index(this);return t.put(e,i).put(this)}writeDataToDom(){return this.each(function(){this.writeDataToDom()}),this}xml(e,t,i){if(typeof e=="boolean"&&(i=t,t=e,e=null),e==null||typeof e=="function"){t=t??!0,this.writeDataToDom();let o=this;if(e!=null){if(o=bt(o.node.cloneNode(!0)),t){const l=e(o);if(o=l||o,l===!1)return""}o.each(function(){const l=e(this),h=l||this;l===!1?this.remove():l&&this!==h&&this.replace(h)},!0)}return t?o.node.outerHTML:o.node.innerHTML}t=t??!1;const r=ai("wrapper",i),s=De.document.createDocumentFragment();r.innerHTML=e;for(let o=r.children.length;o--;)s.appendChild(r.firstElementChild);const a=this.parent();return t?this.replace(s)&&a:this.add(s)}}be(Zt,{attr:qf,find:Wf,findOne:Vf});Te(Zt,"Dom");class zt extends Zt{constructor(e,t){super(e,t),this.dom={},this.node.instance=this,e.hasAttribute("svgjs:data")&&this.setData(JSON.parse(e.getAttribute("svgjs:data"))||{})}center(e,t){return this.cx(e).cy(t)}cx(e){return e==null?this.x()+this.width()/2:this.x(e-this.width()/2)}cy(e){return e==null?this.y()+this.height()/2:this.y(e-this.height()/2)}defs(){const e=this.root();return e&&e.defs()}dmove(e,t){return this.dx(e).dy(t)}dx(e=0){return this.x(new xe(e).plus(this.x()))}dy(e=0){return this.y(new xe(e).plus(this.y()))}getEventHolder(){return this}height(e){return this.attr("height",e)}move(e,t){return this.x(e).y(t)}parents(e=this.root()){const t=typeof e=="string";t||(e=ut(e));const i=new pn;let r=this;for(;(r=r.parent())&&r.node!==De.document&&r.nodeName!=="#document-fragment"&&(i.push(r),!(!t&&r.node===e.node||t&&r.matches(e)));)if(r.node===this.root().node)return null;return i}reference(e){if(e=this.attr(e),!e)return null;const t=(e+"").match(pf);return t?ut(t[1]):null}root(){const e=this.parent(Zu(Ws));return e&&e.root()}setData(e){return this.dom=e,this}size(e,t){const i=Wn(this,e,t);return this.width(new xe(i.width)).height(new xe(i.height))}width(e){return this.attr("width",e)}writeDataToDom(){return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),super.writeDataToDom()}x(e){return this.attr("x",e)}y(e){return this.attr("y",e)}}be(zt,{bbox:$f,rbox:Hf,inside:Bf,point:kf,ctm:Pf,screenCTM:zf});Te(zt,"Element");const qn={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(n,e){return e==="color"?n:n+"-"+e}};["fill","stroke"].forEach(function(n){const e={};let t;e[n]=function(i){if(typeof i>"u")return this.attr(n);if(typeof i=="string"||i instanceof Ae||Ae.isRgb(i)||i instanceof zt)this.attr(n,i);else for(t=qn[n].length-1;t>=0;t--)i[qn[n][t]]!=null&&this.attr(qn.prefix(n,qn[n][t]),i[qn[n][t]]);return this},Ee(["Element","Runner"],e)});Ee(["Element","Runner"],{matrix:function(n,e,t,i,r,s){return n==null?new ce(this):this.attr("transform",new ce(n,e,t,i,r,s))},rotate:function(n,e,t){return this.transform({rotate:n,ox:e,oy:t},!0)},skew:function(n,e,t,i){return arguments.length===1||arguments.length===3?this.transform({skew:n,ox:e,oy:t},!0):this.transform({skew:[n,e],ox:t,oy:i},!0)},shear:function(n,e,t){return this.transform({shear:n,ox:e,oy:t},!0)},scale:function(n,e,t,i){return arguments.length===1||arguments.length===3?this.transform({scale:n,ox:e,oy:t},!0):this.transform({scale:[n,e],ox:t,oy:i},!0)},translate:function(n,e){return this.transform({translate:[n,e]},!0)},relative:function(n,e){return this.transform({relative:[n,e]},!0)},flip:function(n="both",e="center"){return"xybothtrue".indexOf(n)===-1&&(e=n,n="both"),this.transform({flip:n,origin:e},!0)},opacity:function(n){return this.attr("opacity",n)}});Ee("radius",{radius:function(n,e=n){return(this._element||this).type==="radialGradient"?this.attr("r",new xe(n)):this.rx(n).ry(e)}});Ee("Path",{length:function(){return this.node.getTotalLength()},pointAt:function(n){return new Ge(this.node.getPointAtLength(n))}});Ee(["Element","Runner"],{font:function(n,e){if(typeof n=="object"){for(e in n)this.font(e,n[e]);return this}return n==="leading"?this.leading(e):n==="anchor"?this.attr("text-anchor",e):n==="size"||n==="family"||n==="weight"||n==="stretch"||n==="variant"||n==="style"?this.attr("font-"+n,e):this.attr(n,e)}});const Zf=["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].reduce(function(n,e){const t=function(i){return i===null?this.off(e):this.on(e,i),this};return n[e]=t,n},{});Ee("Element",Zf);function Qf(){return this.attr("transform",null)}function Jf(){return(this.attr("transform")||"").split(mf).slice(0,-1).map(function(e){const t=e.trim().split("(");return[t[0],t[1].split(Yt).map(function(i){return parseFloat(i)})]}).reverse().reduce(function(e,t){return t[0]==="matrix"?e.lmultiply(ce.fromArray(t[1])):e[t[0]].apply(e,t[1])},new ce)}function e1(n,e){if(this===n)return this;const t=this.screenCTM(),i=n.screenCTM().inverse();return this.addTo(n,e).untransform().transform(i.multiply(t)),this}function t1(n){return this.toParent(this.root(),n)}function n1(n,e){if(n==null||typeof n=="string"){const r=new ce(this).decompose();return n==null?r:r[n]}ce.isMatrixLike(n)||(n={...n,origin:cs(n,this)});const t=e===!0?this:e||!1,i=new ce(t).transform(n);return this.attr("transform",i)}Ee("Element",{untransform:Qf,matrixify:Jf,toParent:e1,toRoot:t1,transform:n1});class xt extends zt{flatten(e=this,t){return this.each(function(){if(this instanceof xt)return this.flatten().ungroup()}),this}ungroup(e=this.parent(),t=e.index(this)){return t=t===-1?e.children().length:t,this.each(function(i,r){return r[r.length-i-1].toParent(e,t)}),this.remove()}}Te(xt,"Container");class Us extends xt{constructor(e,t=e){super(Be("defs",e),t)}flatten(){return this}ungroup(){return this}}Te(Us,"Defs");let Ct=class extends zt{};Te(Ct,"Shape");function Gs(n){return this.attr("rx",n)}function Xs(n){return this.attr("ry",n)}function gl(n){return n==null?this.cx()-this.rx():this.cx(n+this.rx())}function vl(n){return n==null?this.cy()-this.ry():this.cy(n+this.ry())}function xl(n){return this.attr("cx",n)}function yl(n){return this.attr("cy",n)}function wl(n){return n==null?this.rx()*2:this.rx(new xe(n).divide(2))}function Cl(n){return n==null?this.ry()*2:this.ry(new xe(n).divide(2))}var i1={__proto__:null,rx:Gs,ry:Xs,x:gl,y:vl,cx:xl,cy:yl,width:wl,height:Cl};class mr extends Ct{constructor(e,t=e){super(Be("ellipse",e),t)}size(e,t){const i=Wn(this,e,t);return this.rx(new xe(i.width).divide(2)).ry(new xe(i.height).divide(2))}}be(mr,i1);Ee("Container",{ellipse:He(function(n=0,e=n){return this.put(new mr).size(n,e).move(0,0)})});Te(mr,"Ellipse");class El extends Zt{constructor(e=De.document.createDocumentFragment()){super(e)}xml(e,t,i){if(typeof e=="boolean"&&(i=t,t=e,e=null),e==null||typeof e=="function"){const r=new Zt(ai("wrapper",i));return r.add(this.node.cloneNode(!0)),r.xml(!1,i)}return super.xml(e,!1,i)}}Te(El,"Fragment");function Ml(n,e){return(this._element||this).type==="radialGradient"?this.attr({fx:new xe(n),fy:new xe(e)}):this.attr({x1:new xe(n),y1:new xe(e)})}function bl(n,e){return(this._element||this).type==="radialGradient"?this.attr({cx:new xe(n),cy:new xe(e)}):this.attr({x2:new xe(n),y2:new xe(e)})}var r1={__proto__:null,from:Ml,to:bl};class gi extends xt{constructor(e,t){super(Be(e+"Gradient",typeof e=="string"?null:e),t)}attr(e,t,i){return e==="transform"&&(e="gradientTransform"),super.attr(e,t,i)}bbox(){return new ot}targets(){return Vn("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(e){return this.clear(),typeof e=="function"&&e.call(this,this),this}url(){return"url(#"+this.id()+")"}}be(gi,r1);Ee({Container:{gradient(...n){return this.defs().gradient(...n)}},Defs:{gradient:He(function(n,e){return this.put(new gi(n)).update(e)})}});Te(gi,"Gradient");class oi extends xt{constructor(e,t=e){super(Be("pattern",e),t)}attr(e,t,i){return e==="transform"&&(e="patternTransform"),super.attr(e,t,i)}bbox(){return new ot}targets(){return Vn("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(e){return this.clear(),typeof e=="function"&&e.call(this,this),this}url(){return"url(#"+this.id()+")"}}Ee({Container:{pattern(...n){return this.defs().pattern(...n)}},Defs:{pattern:He(function(n,e,t){return this.put(new oi).update(t).attr({x:0,y:0,width:n,height:e,patternUnits:"userSpaceOnUse"})})}});Te(oi,"Pattern");let yn=class extends Ct{constructor(e,t=e){super(Be("image",e),t)}load(e,t){if(!e)return this;const i=new De.window.Image;return ds(i,"load",function(r){const s=this.parent(oi);this.width()===0&&this.height()===0&&this.size(i.width,i.height),s instanceof oi&&s.width()===0&&s.height()===0&&s.size(this.width(),this.height()),typeof t=="function"&&t.call(this,r)},this),ds(i,"load error",function(){Dn(i)}),this.attr("href",i.src=e,pi)}};Kf(function(n,e,t){return(n==="fill"||n==="stroke")&&vf.test(e)&&(e=t.root().defs().image(e)),e instanceof yn&&(e=t.root().defs().pattern(0,0,i=>{i.add(e)})),e});Ee({Container:{image:He(function(n,e){return this.put(new yn).size(0,0).load(n,e)})}});Te(yn,"Image");class Qt extends kn{bbox(){let e=-1/0,t=-1/0,i=1/0,r=1/0;return this.forEach(function(s){e=Math.max(s[0],e),t=Math.max(s[1],t),i=Math.min(s[0],i),r=Math.min(s[1],r)}),new ot(i,r,e-i,t-r)}move(e,t){const i=this.bbox();if(e-=i.x,t-=i.y,!isNaN(e)&&!isNaN(t))for(let r=this.length-1;r>=0;r--)this[r]=[this[r][0]+e,this[r][1]+t];return this}parse(e=[0,0]){const t=[];e instanceof Array?e=Array.prototype.concat.apply([],e):e=e.trim().split(Yt).map(parseFloat),e.length%2!==0&&e.pop();for(let i=0,r=e.length;i<r;i=i+2)t.push([e[i],e[i+1]]);return t}size(e,t){let i;const r=this.bbox();for(i=this.length-1;i>=0;i--)r.width&&(this[i][0]=(this[i][0]-r.x)*e/r.width+r.x),r.height&&(this[i][1]=(this[i][1]-r.y)*t/r.height+r.y);return this}toLine(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]}}toString(){const e=[];for(let t=0,i=this.length;t<i;t++)e.push(this[t].join(","));return e.join(" ")}transform(e){return this.clone().transformO(e)}transformO(e){ce.isMatrixLike(e)||(e=new ce(e));for(let t=this.length;t--;){const[i,r]=this[t];this[t][0]=e.a*i+e.c*r+e.e,this[t][1]=e.b*i+e.d*r+e.f}return this}}const s1=Qt;function a1(n){return n==null?this.bbox().x:this.move(n,this.bbox().y)}function o1(n){return n==null?this.bbox().y:this.move(this.bbox().x,n)}function l1(n){const e=this.bbox();return n==null?e.width:this.size(n,e.height)}function h1(n){const e=this.bbox();return n==null?e.height:this.size(e.width,n)}var Ks={__proto__:null,MorphArray:s1,x:a1,y:o1,width:l1,height:h1};class li extends Ct{constructor(e,t=e){super(Be("line",e),t)}array(){return new Qt([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])}move(e,t){return this.attr(this.array().move(e,t).toLine())}plot(e,t,i,r){return e==null?this.array():(typeof t<"u"?e={x1:e,y1:t,x2:i,y2:r}:e=new Qt(e).toLine(),this.attr(e))}size(e,t){const i=Wn(this,e,t);return this.attr(this.array().size(i.width,i.height).toLine())}}be(li,Ks);Ee({Container:{line:He(function(...n){return li.prototype.plot.apply(this.put(new li),n[0]!=null?n:[0,0,0,0])})}});Te(li,"Line");class ir extends xt{constructor(e,t=e){super(Be("marker",e),t)}height(e){return this.attr("markerHeight",e)}orient(e){return this.attr("orient",e)}ref(e,t){return this.attr("refX",e).attr("refY",t)}toString(){return"url(#"+this.id()+")"}update(e){return this.clear(),typeof e=="function"&&e.call(this,this),this}width(e){return this.attr("markerWidth",e)}}Ee({Container:{marker(...n){return this.defs().marker(...n)}},Defs:{marker:He(function(n,e,t){return this.put(new ir).size(n,e).ref(n/2,e/2).viewbox(0,0,n,e).attr("orient","auto").update(t)})},marker:{marker(n,e,t,i){let r=["marker"];return n!=="all"&&r.push(n),r=r.join("-"),n=arguments[1]instanceof ir?arguments[1]:this.defs().marker(e,t,i),this.attr(r,n)}}});Te(ir,"Marker");function Rn(n,e){return function(t){return t==null?this[n]:(this[n]=t,e&&e.call(this),this)}}const c1={"-":function(n){return n},"<>":function(n){return-Math.cos(n*Math.PI)/2+.5},">":function(n){return Math.sin(n*Math.PI/2)},"<":function(n){return-Math.cos(n*Math.PI/2)+1},bezier:function(n,e,t,i){return function(r){return r<0?n>0?e/n*r:t>0?i/t*r:0:r>1?t<1?(1-i)/(1-t)*r+(i-t)/(1-t):n<1?(1-e)/(1-n)*r+(e-n)/(1-n):1:3*r*(1-r)**2*e+3*r**2*(1-r)*i+r**3}},steps:function(n,e="end"){e=e.split("-").reverse()[0];let t=n;return e==="none"?--t:e==="both"&&++t,(i,r=!1)=>{let s=Math.floor(i*n);const a=i*s%1===0;return(e==="start"||e==="both")&&++s,r&&a&&--s,i>=0&&s<0&&(s=0),i<=1&&s>t&&(s=t),s/t}}};class qs{done(){return!1}}class us extends qs{constructor(e=Jn.ease){super(),this.ease=c1[e]||e}step(e,t,i){return typeof e!="number"?i<1?e:t:e+(t-e)*this.ease(i)}}class rr extends qs{constructor(e){super(),this.stepper=e}done(e){return e.done}step(e,t,i,r){return this.stepper(e,t,i,r)}}function ba(){const n=(this._duration||500)/1e3,e=this._overshoot||0,t=1e-10,i=Math.PI,r=Math.log(e/100+t),s=-r/Math.sqrt(i*i+r*r),a=3.9/(s*n);this.d=2*s*a,this.k=a*a}class d1 extends rr{constructor(e=500,t=0){super(),this.duration(e).overshoot(t)}step(e,t,i,r){if(typeof e=="string")return e;if(r.done=i===1/0,i===1/0)return t;if(i===0)return e;i>100&&(i=16),i/=1e3;const s=r.velocity||0,a=-this.d*s-this.k*(e-t),o=e+s*i+a*i*i/2;return r.velocity=s+a*i,r.done=Math.abs(t-o)+Math.abs(s)<.002,r.done?t:o}}be(d1,{duration:Rn("_duration",ba),overshoot:Rn("_overshoot",ba)});class u1 extends rr{constructor(e=.1,t=.01,i=0,r=1e3){super(),this.p(e).i(t).d(i).windup(r)}step(e,t,i,r){if(typeof e=="string")return e;if(r.done=i===1/0,i===1/0)return t;if(i===0)return e;const s=t-e;let a=(r.integral||0)+s*i;const o=(s-(r.error||0))/i,l=this._windup;return l!==!1&&(a=Math.max(-l,Math.min(a,l))),r.error=s,r.integral=a,r.done=Math.abs(s)<.001,r.done?t:e+(this.P*s+this.I*a+this.D*o)}}be(u1,{windup:Rn("_windup"),p:Rn("P"),i:Rn("I"),d:Rn("D")});const f1={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0},fs={M:function(n,e,t){return e.x=t.x=n[0],e.y=t.y=n[1],["M",e.x,e.y]},L:function(n,e){return e.x=n[0],e.y=n[1],["L",n[0],n[1]]},H:function(n,e){return e.x=n[0],["H",n[0]]},V:function(n,e){return e.y=n[0],["V",n[0]]},C:function(n,e){return e.x=n[4],e.y=n[5],["C",n[0],n[1],n[2],n[3],n[4],n[5]]},S:function(n,e){return e.x=n[2],e.y=n[3],["S",n[0],n[1],n[2],n[3]]},Q:function(n,e){return e.x=n[2],e.y=n[3],["Q",n[0],n[1],n[2],n[3]]},T:function(n,e){return e.x=n[0],e.y=n[1],["T",n[0],n[1]]},Z:function(n,e,t){return e.x=t.x,e.y=t.y,["Z"]},A:function(n,e){return e.x=n[5],e.y=n[6],["A",n[0],n[1],n[2],n[3],n[4],n[5],n[6]]}},Jr="mlhvqtcsaz".split("");for(let n=0,e=Jr.length;n<e;++n)fs[Jr[n]]=function(t){return function(i,r,s){if(t==="H")i[0]=i[0]+r.x;else if(t==="V")i[0]=i[0]+r.y;else if(t==="A")i[5]=i[5]+r.x,i[6]=i[6]+r.y;else for(let a=0,o=i.length;a<o;++a)i[a]=i[a]+(a%2?r.y:r.x);return fs[t](i,r,s)}}(Jr[n].toUpperCase());function p1(n){const e=n.segment[0];return fs[e](n.segment.slice(1),n.p,n.p0)}function ps(n){return n.segment.length&&n.segment.length-1===f1[n.segment[0].toUpperCase()]}function m1(n,e){n.inNumber&&ln(n,!1);const t=Vs.test(e);if(t)n.segment=[e];else{const i=n.lastCommand,r=i.toLowerCase(),s=i===r;n.segment=[r==="m"?s?"l":"L":i]}return n.inSegment=!0,n.lastCommand=n.segment[0],t}function ln(n,e){if(!n.inNumber)throw new Error("Parser Error");n.number&&n.segment.push(parseFloat(n.number)),n.inNumber=e,n.number="",n.pointSeen=!1,n.hasExponent=!1,ps(n)&&ms(n)}function ms(n){n.inSegment=!1,n.absolute&&(n.segment=p1(n)),n.segments.push(n.segment)}function g1(n){if(!n.segment.length)return!1;const e=n.segment[0].toUpperCase()==="A",t=n.segment.length;return e&&(t===4||t===5)}function v1(n){return n.lastToken.toUpperCase()==="E"}function x1(n,e=!0){let t=0,i="";const r={segment:[],inNumber:!1,number:"",lastToken:"",inSegment:!1,segments:[],pointSeen:!1,hasExponent:!1,absolute:e,p0:new Ge,p:new Ge};for(;r.lastToken=i,i=n.charAt(t++);)if(!(!r.inSegment&&m1(r,i))){if(i==="."){if(r.pointSeen||r.hasExponent){ln(r,!1),--t;continue}r.inNumber=!0,r.pointSeen=!0,r.number+=i;continue}if(!isNaN(parseInt(i))){if(r.number==="0"||g1(r)){r.inNumber=!0,r.number=i,ln(r,!0);continue}r.inNumber=!0,r.number+=i;continue}if(i===" "||i===","){r.inNumber&&ln(r,!1);continue}if(i==="-"){if(r.inNumber&&!v1(r)){ln(r,!1),--t;continue}r.number+=i,r.inNumber=!0;continue}if(i.toUpperCase()==="E"){r.number+=i,r.hasExponent=!0;continue}if(Vs.test(i)){if(r.inNumber)ln(r,!1);else if(ps(r))ms(r);else throw new Error("parser Error");--t}}return r.inNumber&&ln(r,!1),r.inSegment&&ps(r)&&ms(r),r.segments}function y1(n){let e="";for(let t=0,i=n.length;t<i;t++)e+=n[t][0],n[t][1]!=null&&(e+=n[t][1],n[t][2]!=null&&(e+=" ",e+=n[t][2],n[t][3]!=null&&(e+=" ",e+=n[t][3],e+=" ",e+=n[t][4],n[t][5]!=null&&(e+=" ",e+=n[t][5],e+=" ",e+=n[t][6],n[t][7]!=null&&(e+=" ",e+=n[t][7])))));return e+" "}class mn extends kn{bbox(){return Gt().path.setAttribute("d",this.toString()),new ot(Gt.nodes.path.getBBox())}move(e,t){const i=this.bbox();if(e-=i.x,t-=i.y,!isNaN(e)&&!isNaN(t))for(let r,s=this.length-1;s>=0;s--)r=this[s][0],r==="M"||r==="L"||r==="T"?(this[s][1]+=e,this[s][2]+=t):r==="H"?this[s][1]+=e:r==="V"?this[s][1]+=t:r==="C"||r==="S"||r==="Q"?(this[s][1]+=e,this[s][2]+=t,this[s][3]+=e,this[s][4]+=t,r==="C"&&(this[s][5]+=e,this[s][6]+=t)):r==="A"&&(this[s][6]+=e,this[s][7]+=t);return this}parse(e="M0 0"){return Array.isArray(e)&&(e=Array.prototype.concat.apply([],e).toString()),x1(e)}size(e,t){const i=this.bbox();let r,s;for(i.width=i.width===0?1:i.width,i.height=i.height===0?1:i.height,r=this.length-1;r>=0;r--)s=this[r][0],s==="M"||s==="L"||s==="T"?(this[r][1]=(this[r][1]-i.x)*e/i.width+i.x,this[r][2]=(this[r][2]-i.y)*t/i.height+i.y):s==="H"?this[r][1]=(this[r][1]-i.x)*e/i.width+i.x:s==="V"?this[r][1]=(this[r][1]-i.y)*t/i.height+i.y:s==="C"||s==="S"||s==="Q"?(this[r][1]=(this[r][1]-i.x)*e/i.width+i.x,this[r][2]=(this[r][2]-i.y)*t/i.height+i.y,this[r][3]=(this[r][3]-i.x)*e/i.width+i.x,this[r][4]=(this[r][4]-i.y)*t/i.height+i.y,s==="C"&&(this[r][5]=(this[r][5]-i.x)*e/i.width+i.x,this[r][6]=(this[r][6]-i.y)*t/i.height+i.y)):s==="A"&&(this[r][1]=this[r][1]*e/i.width,this[r][2]=this[r][2]*t/i.height,this[r][6]=(this[r][6]-i.x)*e/i.width+i.x,this[r][7]=(this[r][7]-i.y)*t/i.height+i.y);return this}toString(){return y1(this)}}const _l=n=>{const e=typeof n;return e==="number"?xe:e==="string"?Ae.isColor(n)?Ae:Yt.test(n)?Vs.test(n)?mn:kn:cl.test(n)?xe:gs:Zs.indexOf(n.constructor)>-1?n.constructor:Array.isArray(n)?kn:e==="object"?hi:gs};class hn{constructor(e){this._stepper=e||new us("-"),this._from=null,this._to=null,this._type=null,this._context=null,this._morphObj=null}at(e){return this._morphObj.morph(this._from,this._to,e,this._stepper,this._context)}done(){return this._context.map(this._stepper.done).reduce(function(t,i){return t&&i},!0)}from(e){return e==null?this._from:(this._from=this._set(e),this)}stepper(e){return e==null?this._stepper:(this._stepper=e,this)}to(e){return e==null?this._to:(this._to=this._set(e),this)}type(e){return e==null?this._type:(this._type=e,this)}_set(e){this._type||this.type(_l(e));let t=new this._type(e);return this._type===Ae&&(t=this._to?t[this._to[4]]():this._from?t[this._from[4]]():t),this._type===hi&&(t=this._to?t.align(this._to):this._from?t.align(this._from):t),t=t.toConsumable(),this._morphObj=this._morphObj||new this._type,this._context=this._context||Array.apply(null,Array(t.length)).map(Object).map(function(i){return i.done=!0,i}),t}}class gs{constructor(...e){this.init(...e)}init(e){return e=Array.isArray(e)?e[0]:e,this.value=e,this}toArray(){return[this.value]}valueOf(){return this.value}}class vi{constructor(...e){this.init(...e)}init(e){return Array.isArray(e)&&(e={scaleX:e[0],scaleY:e[1],shear:e[2],rotate:e[3],translateX:e[4],translateY:e[5],originX:e[6],originY:e[7]}),Object.assign(this,vi.defaults,e),this}toArray(){const e=this;return[e.scaleX,e.scaleY,e.shear,e.rotate,e.translateX,e.translateY,e.originX,e.originY]}}vi.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0};const w1=(n,e)=>n[0]<e[0]?-1:n[0]>e[0]?1:0;class hi{constructor(...e){this.init(...e)}align(e){const t=this.values;for(let i=0,r=t.length;i<r;++i){if(t[i+1]===e[i+1]){if(t[i+1]===Ae&&e[i+7]!==t[i+7]){const o=e[i+7],l=new Ae(this.values.splice(i+3,5))[o]().toArray();this.values.splice(i+3,0,...l)}i+=t[i+2]+2;continue}if(!e[i+1])return this;const s=new e[i+1]().toArray(),a=t[i+2]+3;t.splice(i,a,e[i],e[i+1],e[i+2],...s),i+=t[i+2]+2}return this}init(e){if(this.values=[],Array.isArray(e)){this.values=e.slice();return}e=e||{};const t=[];for(const i in e){const r=_l(e[i]),s=new r(e[i]).toArray();t.push([i,r,s.length,...s])}return t.sort(w1),this.values=t.reduce((i,r)=>i.concat(r),[]),this}toArray(){return this.values}valueOf(){const e={},t=this.values;for(;t.length;){const i=t.shift(),r=t.shift(),s=t.shift(),a=t.splice(0,s);e[i]=new r(a)}return e}}const Zs=[gs,vi,hi];function C1(n=[]){Zs.push(...[].concat(n))}function E1(){be(Zs,{to(n){return new hn().type(this.constructor).from(this.toArray()).to(n)},fromArray(n){return this.init(n),this},toConsumable(){return this.toArray()},morph(n,e,t,i,r){const s=function(a,o){return i.step(a,e[o],t,r[o],r)};return this.fromArray(n.map(s))}})}class wn extends Ct{constructor(e,t=e){super(Be("path",e),t)}array(){return this._array||(this._array=new mn(this.attr("d")))}clear(){return delete this._array,this}height(e){return e==null?this.bbox().height:this.size(this.bbox().width,e)}move(e,t){return this.attr("d",this.array().move(e,t))}plot(e){return e==null?this.array():this.clear().attr("d",typeof e=="string"?e:this._array=new mn(e))}size(e,t){const i=Wn(this,e,t);return this.attr("d",this.array().size(i.width,i.height))}width(e){return e==null?this.bbox().width:this.size(e,this.bbox().height)}x(e){return e==null?this.bbox().x:this.move(e,this.bbox().y)}y(e){return e==null?this.bbox().y:this.move(this.bbox().x,e)}}wn.prototype.MorphArray=mn;Ee({Container:{path:He(function(n){return this.put(new wn).plot(n||new mn)})}});Te(wn,"Path");function M1(){return this._array||(this._array=new Qt(this.attr("points")))}function b1(){return delete this._array,this}function _1(n,e){return this.attr("points",this.array().move(n,e))}function S1(n){return n==null?this.array():this.clear().attr("points",typeof n=="string"?n:this._array=new Qt(n))}function N1(n,e){const t=Wn(this,n,e);return this.attr("points",this.array().size(t.width,t.height))}var Sl={__proto__:null,array:M1,clear:b1,move:_1,plot:S1,size:N1};class Cn extends Ct{constructor(e,t=e){super(Be("polygon",e),t)}}Ee({Container:{polygon:He(function(n){return this.put(new Cn).plot(n||new Qt)})}});be(Cn,Ks);be(Cn,Sl);Te(Cn,"Polygon");class xi extends Ct{constructor(e,t=e){super(Be("polyline",e),t)}}Ee({Container:{polyline:He(function(n){return this.put(new xi).plot(n||new Qt)})}});be(xi,Ks);be(xi,Sl);Te(xi,"Polyline");class Nt extends Ct{constructor(e,t=e){super(Be("rect",e),t)}}be(Nt,{rx:Gs,ry:Xs});Ee({Container:{rect:He(function(n,e){return this.put(new Nt).size(n,e)})}});Te(Nt,"Rect");class es{constructor(){this._first=null,this._last=null}first(){return this._first&&this._first.value}last(){return this._last&&this._last.value}push(e){const t=typeof e.next<"u"?e:{value:e,next:null,prev:null};return this._last?(t.prev=this._last,this._last.next=t,this._last=t):(this._last=t,this._first=t),t}remove(e){e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e===this._last&&(this._last=e.prev),e===this._first&&(this._first=e.next),e.prev=null,e.next=null}shift(){const e=this._first;return e?(this._first=e.next,this._first&&(this._first.prev=null),this._last=this._first?this._last:null,e.value):null}}const Ie={nextDraw:null,frames:new es,timeouts:new es,immediates:new es,timer:()=>De.window.performance||De.window.Date,transforms:[],frame(n){const e=Ie.frames.push({run:n});return Ie.nextDraw===null&&(Ie.nextDraw=De.window.requestAnimationFrame(Ie._draw)),e},timeout(n,e){e=e||0;const t=Ie.timer().now()+e,i=Ie.timeouts.push({run:n,time:t});return Ie.nextDraw===null&&(Ie.nextDraw=De.window.requestAnimationFrame(Ie._draw)),i},immediate(n){const e=Ie.immediates.push(n);return Ie.nextDraw===null&&(Ie.nextDraw=De.window.requestAnimationFrame(Ie._draw)),e},cancelFrame(n){n!=null&&Ie.frames.remove(n)},clearTimeout(n){n!=null&&Ie.timeouts.remove(n)},cancelImmediate(n){n!=null&&Ie.immediates.remove(n)},_draw(n){let e=null;const t=Ie.timeouts.last();for(;(e=Ie.timeouts.shift())&&(n>=e.time?e.run():Ie.timeouts.push(e),e!==t););let i=null;const r=Ie.frames.last();for(;i!==r&&(i=Ie.frames.shift());)i.run(n);let s=null;for(;s=Ie.immediates.shift();)s();Ie.nextDraw=Ie.timeouts.first()||Ie.frames.first()?De.window.requestAnimationFrame(Ie._draw):null}},T1=function(n){const e=n.start,t=n.runner.duration(),i=e+t;return{start:e,duration:t,end:i,runner:n.runner}},D1=function(){const n=De.window;return(n.performance||n.Date).now()};let Nl=class extends mi{constructor(e=D1){super(),this._timeSource=e,this._startTime=0,this._speed=1,this._persist=0,this._nextFrame=null,this._paused=!0,this._runners=[],this._runnerIds=[],this._lastRunnerId=-1,this._time=0,this._lastSourceTime=0,this._lastStepTime=0,this._step=this._stepFn.bind(this,!1),this._stepImmediate=this._stepFn.bind(this,!0)}active(){return!!this._nextFrame}finish(){return this.time(this.getEndTimeOfTimeline()+1),this.pause()}getEndTime(){const e=this.getLastRunnerInfo(),t=e?e.runner.duration():0;return(e?e.start:this._time)+t}getEndTimeOfTimeline(){const e=this._runners.map(t=>t.start+t.runner.duration());return Math.max(0,...e)}getLastRunnerInfo(){return this.getRunnerInfoById(this._lastRunnerId)}getRunnerInfoById(e){return this._runners[this._runnerIds.indexOf(e)]||null}pause(){return this._paused=!0,this._continue()}persist(e){return e==null?this._persist:(this._persist=e,this)}play(){return this._paused=!1,this.updateTime()._continue()}reverse(e){const t=this.speed();if(e==null)return this.speed(-t);const i=Math.abs(t);return this.speed(e?-i:i)}schedule(e,t,i){if(e==null)return this._runners.map(T1);let r=0;const s=this.getEndTime();if(t=t||0,i==null||i==="last"||i==="after")r=s;else if(i==="absolute"||i==="start")r=t,t=0;else if(i==="now")r=this._time;else if(i==="relative"){const l=this.getRunnerInfoById(e.id);l&&(r=l.start+t,t=0)}else if(i==="with-last"){const l=this.getLastRunnerInfo();r=l?l.start:this._time}else throw new Error('Invalid value for the "when" parameter');e.unschedule(),e.timeline(this);const a=e.persist(),o={persist:a===null?this._persist:a,start:r+t,runner:e};return this._lastRunnerId=e.id,this._runners.push(o),this._runners.sort((l,h)=>l.start-h.start),this._runnerIds=this._runners.map(l=>l.runner.id),this.updateTime()._continue(),this}seek(e){return this.time(this._time+e)}source(e){return e==null?this._timeSource:(this._timeSource=e,this)}speed(e){return e==null?this._speed:(this._speed=e,this)}stop(){return this.time(0),this.pause()}time(e){return e==null?this._time:(this._time=e,this._continue(!0))}unschedule(e){const t=this._runnerIds.indexOf(e.id);return t<0?this:(this._runners.splice(t,1),this._runnerIds.splice(t,1),e.timeline(null),this)}updateTime(){return this.active()||(this._lastSourceTime=this._timeSource()),this}_continue(e=!1){return Ie.cancelFrame(this._nextFrame),this._nextFrame=null,e?this._stepImmediate():this._paused?this:(this._nextFrame=Ie.frame(this._step),this)}_stepFn(e=!1){const t=this._timeSource();let i=t-this._lastSourceTime;e&&(i=0);const r=this._speed*i+(this._time-this._lastStepTime);this._lastSourceTime=t,e||(this._time+=r,this._time=this._time<0?0:this._time),this._lastStepTime=this._time,this.fire("time",this._time);for(let a=this._runners.length;a--;){const o=this._runners[a],l=o.runner;this._time-o.start<=0&&l.reset()}let s=!1;for(let a=0,o=this._runners.length;a<o;a++){const l=this._runners[a],h=l.runner;let c=r;const d=this._time-l.start;if(d<=0){s=!0;continue}else d<c&&(c=d);if(!h.active())continue;h.step(c).done?l.persist!==!0&&h.duration()-h.time()+this._time+l.persist<this._time&&(h.unschedule(),--a,--o):s=!0}return s&&!(this._speed<0&&this._time===0)||this._runnerIds.length&&this._speed<0&&this._time>0?this._continue():(this.pause(),this.fire("finished")),this}};Ee({Element:{timeline:function(n){return n==null?(this._timeline=this._timeline||new Nl,this._timeline):(this._timeline=n,this)}}});class wt extends mi{constructor(e){super(),this.id=wt.id++,e=e??Jn.duration,e=typeof e=="function"?new rr(e):e,this._element=null,this._timeline=null,this.done=!1,this._queue=[],this._duration=typeof e=="number"&&e,this._isDeclarative=e instanceof rr,this._stepper=this._isDeclarative?e:new us,this._history={},this.enabled=!0,this._time=0,this._lastTime=0,this._reseted=!0,this.transforms=new ce,this.transformId=1,this._haveReversed=!1,this._reverse=!1,this._loopsDone=0,this._swing=!1,this._wait=0,this._times=1,this._frameId=null,this._persist=this._isDeclarative?!0:null}static sanitise(e,t,i){let r=1,s=!1,a=0;return e=e||Jn.duration,t=t||Jn.delay,i=i||"last",typeof e=="object"&&!(e instanceof qs)&&(t=e.delay||t,i=e.when||i,s=e.swing||s,r=e.times||r,a=e.wait||a,e=e.duration||Jn.duration),{duration:e,delay:t,swing:s,times:r,wait:a,when:i}}active(e){return e==null?this.enabled:(this.enabled=e,this)}addTransform(e,t){return this.transforms.lmultiplyO(e),this}after(e){return this.on("finished",e)}animate(e,t,i){const r=wt.sanitise(e,t,i),s=new wt(r.duration);return this._timeline&&s.timeline(this._timeline),this._element&&s.element(this._element),s.loop(r).schedule(r.delay,r.when)}clearTransform(){return this.transforms=new ce,this}clearTransformsFromQueue(){(!this.done||!this._timeline||!this._timeline._runnerIds.includes(this.id))&&(this._queue=this._queue.filter(e=>!e.isTransform))}delay(e){return this.animate(0,e)}duration(){return this._times*(this._wait+this._duration)-this._wait}during(e){return this.queue(null,e)}ease(e){return this._stepper=new us(e),this}element(e){return e==null?this._element:(this._element=e,e._prepareRunner(),this)}finish(){return this.step(1/0)}loop(e,t,i){return typeof e=="object"&&(t=e.swing,i=e.wait,e=e.times),this._times=e||1/0,this._swing=t||!1,this._wait=i||0,this._times===!0&&(this._times=1/0),this}loops(e){const t=this._duration+this._wait;if(e==null){const a=Math.floor(this._time/t),l=(this._time-a*t)/this._duration;return Math.min(a+l,this._times)}const i=Math.floor(e),r=e%1,s=t*i+this._duration*r;return this.time(s)}persist(e){return e==null?this._persist:(this._persist=e,this)}position(e){const t=this._time,i=this._duration,r=this._wait,s=this._times,a=this._swing,o=this._reverse;let l;if(e==null){const f=function(u){const g=a*Math.floor(u%(2*(r+i))/(r+i)),p=g&&!o||!g&&o,x=Math.pow(-1,p)*(u%(r+i))/i+p;return Math.max(Math.min(x,1),0)},m=s*(r+i)-r;return l=t<=0?Math.round(f(1e-5)):t<m?f(t):Math.round(f(m-1e-5)),l}const h=Math.floor(this.loops()),c=a&&h%2===0;return l=h+(c&&!o||o&&c?e:1-e),this.loops(l)}progress(e){return e==null?Math.min(1,this._time/this.duration()):this.time(e*this.duration())}queue(e,t,i,r){return this._queue.push({initialiser:e||Ma,runner:t||Ma,retarget:i,isTransform:r,initialised:!1,finished:!1}),this.timeline()&&this.timeline()._continue(),this}reset(){return this._reseted?this:(this.time(0),this._reseted=!0,this)}reverse(e){return this._reverse=e??!this._reverse,this}schedule(e,t,i){if(e instanceof Nl||(i=t,t=e,e=this.timeline()),!e)throw Error("Runner cannot be scheduled without timeline");return e.schedule(this,t,i),this}step(e){if(!this.enabled)return this;e=e??16,this._time+=e;const t=this.position(),i=this._lastPosition!==t&&this._time>=0;this._lastPosition=t;const r=this.duration(),s=this._lastTime<=0&&this._time>0,a=this._lastTime<r&&this._time>=r;this._lastTime=this._time,s&&this.fire("start",this);const o=this._isDeclarative;this.done=!o&&!a&&this._time>=r,this._reseted=!1;let l=!1;return(i||o)&&(this._initialise(i),this.transforms=new ce,l=this._run(o?e:t),this.fire("step",this)),this.done=this.done||l&&o,a&&this.fire("finished",this),this}time(e){if(e==null)return this._time;const t=e-this._time;return this.step(t),this}timeline(e){return typeof e>"u"?this._timeline:(this._timeline=e,this)}unschedule(){const e=this.timeline();return e&&e.unschedule(this),this}_initialise(e){if(!(!e&&!this._isDeclarative))for(let t=0,i=this._queue.length;t<i;++t){const r=this._queue[t],s=this._isDeclarative||!r.initialised&&e;e=!r.finished,s&&e&&(r.initialiser.call(this),r.initialised=!0)}}_rememberMorpher(e,t){if(this._history[e]={morpher:t,caller:this._queue[this._queue.length-1]},this._isDeclarative){const i=this.timeline();i&&i.play()}}_run(e){let t=!0;for(let i=0,r=this._queue.length;i<r;++i){const s=this._queue[i],a=s.runner.call(this,e);s.finished=s.finished||a===!0,t=t&&s.finished}return t}_tryRetarget(e,t,i){if(this._history[e]){if(!this._history[e].caller.initialised){const s=this._queue.indexOf(this._history[e].caller);return this._queue.splice(s,1),!1}this._history[e].caller.retarget?this._history[e].caller.retarget.call(this,t,i):this._history[e].morpher.to(t),this._history[e].caller.finished=!1;const r=this.timeline();return r&&r.play(),!0}return!1}}wt.id=0;class sr{constructor(e=new ce,t=-1,i=!0){this.transforms=e,this.id=t,this.done=i}clearTransformsFromQueue(){}}be([wt,sr],{mergeWith(n){return new sr(n.transforms.lmultiply(this.transforms),n.id)}});const Tl=(n,e)=>n.lmultiplyO(e),Dl=n=>n.transforms;function R1(){const e=this._transformationRunners.runners.map(Dl).reduce(Tl,new ce);this.transform(e),this._transformationRunners.merge(),this._transformationRunners.length()===1&&(this._frameId=null)}class I1{constructor(){this.runners=[],this.ids=[]}add(e){if(this.runners.includes(e))return;const t=e.id+1;return this.runners.push(e),this.ids.push(t),this}clearBefore(e){const t=this.ids.indexOf(e+1)||1;return this.ids.splice(0,t,0),this.runners.splice(0,t,new sr).forEach(i=>i.clearTransformsFromQueue()),this}edit(e,t){const i=this.ids.indexOf(e+1);return this.ids.splice(i,1,e+1),this.runners.splice(i,1,t),this}getByID(e){return this.runners[this.ids.indexOf(e+1)]}length(){return this.ids.length}merge(){let e=null;for(let t=0;t<this.runners.length;++t){const i=this.runners[t];if(e&&i.done&&e.done&&(!i._timeline||!i._timeline._runnerIds.includes(i.id))&&(!e._timeline||!e._timeline._runnerIds.includes(e.id))){this.remove(i.id);const s=i.mergeWith(e);this.edit(e.id,s),e=s,--t}else e=i}return this}remove(e){const t=this.ids.indexOf(e+1);return this.ids.splice(t,1),this.runners.splice(t,1),this}}Ee({Element:{animate(n,e,t){const i=wt.sanitise(n,e,t),r=this.timeline();return new wt(i.duration).loop(i).element(this).timeline(r.play()).schedule(i.delay,i.when)},delay(n,e){return this.animate(0,n,e)},_clearTransformRunnersBefore(n){this._transformationRunners.clearBefore(n.id)},_currentTransform(n){return this._transformationRunners.runners.filter(e=>e.id<=n.id).map(Dl).reduce(Tl,new ce)},_addRunner(n){this._transformationRunners.add(n),Ie.cancelImmediate(this._frameId),this._frameId=Ie.immediate(R1.bind(this))},_prepareRunner(){this._frameId==null&&(this._transformationRunners=new I1().add(new sr(new ce(this))))}}});const L1=(n,e)=>n.filter(t=>!e.includes(t));be(wt,{attr(n,e){return this.styleAttr("attr",n,e)},css(n,e){return this.styleAttr("css",n,e)},styleAttr(n,e,t){if(typeof e=="string")return this.styleAttr(n,{[e]:t});let i=e;if(this._tryRetarget(n,i))return this;let r=new hn(this._stepper).to(i),s=Object.keys(i);return this.queue(function(){r=r.from(this.element()[n](s))},function(a){return this.element()[n](r.at(a).valueOf()),r.done()},function(a){const o=Object.keys(a),l=L1(o,s);if(l.length){const c=this.element()[n](l),d=new hi(r.from()).valueOf();Object.assign(d,c),r.from(d)}const h=new hi(r.to()).valueOf();Object.assign(h,a),r.to(h),s=o,i=a}),this._rememberMorpher(n,r),this},zoom(n,e){if(this._tryRetarget("zoom",n,e))return this;let t=new hn(this._stepper).to(new xe(n));return this.queue(function(){t=t.from(this.element().zoom())},function(i){return this.element().zoom(t.at(i),e),t.done()},function(i,r){e=r,t.to(i)}),this._rememberMorpher("zoom",t),this},transform(n,e,t){if(e=n.relative||e,this._isDeclarative&&!e&&this._tryRetarget("transform",n))return this;const i=ce.isMatrixLike(n);t=n.affine!=null?n.affine:t??!i;const r=new hn(this._stepper).type(t?vi:ce);let s,a,o,l,h;function c(){a=a||this.element(),s=s||cs(n,a),h=new ce(e?void 0:a),a._addRunner(this),e||a._clearTransformRunnersBefore(this)}function d(m){e||this.clearTransform();const{x:u,y:g}=new Ge(s).transform(a._currentTransform(this));let p=new ce({...n,origin:[u,g]}),x=this._isDeclarative&&o?o:h;if(t){p=p.decompose(u,g),x=x.decompose(u,g);const y=p.rotate,C=x.rotate,E=[y-360,y,y+360],M=E.map(S=>Math.abs(S-C)),b=Math.min(...M),N=M.indexOf(b);p.rotate=E[N]}e&&(i||(p.rotate=n.rotate||0),this._isDeclarative&&l&&(x.rotate=l)),r.from(x),r.to(p);const w=r.at(m);return l=w.rotate,o=new ce(w),this.addTransform(o),a._addRunner(this),r.done()}function f(m){(m.origin||"center").toString()!==(n.origin||"center").toString()&&(s=cs(m,a)),n={...m,origin:s}}return this.queue(c,d,f,!0),this._isDeclarative&&this._rememberMorpher("transform",r),this},x(n,e){return this._queueNumber("x",n)},y(n){return this._queueNumber("y",n)},dx(n=0){return this._queueNumberDelta("x",n)},dy(n=0){return this._queueNumberDelta("y",n)},dmove(n,e){return this.dx(n).dy(e)},_queueNumberDelta(n,e){if(e=new xe(e),this._tryRetarget(n,e))return this;const t=new hn(this._stepper).to(e);let i=null;return this.queue(function(){i=this.element()[n](),t.from(i),t.to(i+e)},function(r){return this.element()[n](t.at(r)),t.done()},function(r){t.to(i+new xe(r))}),this._rememberMorpher(n,t),this},_queueObject(n,e){if(this._tryRetarget(n,e))return this;const t=new hn(this._stepper).to(e);return this.queue(function(){t.from(this.element()[n]())},function(i){return this.element()[n](t.at(i)),t.done()}),this._rememberMorpher(n,t),this},_queueNumber(n,e){return this._queueObject(n,new xe(e))},cx(n){return this._queueNumber("cx",n)},cy(n){return this._queueNumber("cy",n)},move(n,e){return this.x(n).y(e)},center(n,e){return this.cx(n).cy(e)},size(n,e){let t;return(!n||!e)&&(t=this._element.bbox()),n||(n=t.width/t.height*e),e||(e=t.height/t.width*n),this.width(n).height(e)},width(n){return this._queueNumber("width",n)},height(n){return this._queueNumber("height",n)},plot(n,e,t,i){if(arguments.length===4)return this.plot([n,e,t,i]);if(this._tryRetarget("plot",n))return this;const r=new hn(this._stepper).type(this._element.MorphArray).to(n);return this.queue(function(){r.from(this._element.array())},function(s){return this._element.plot(r.at(s)),r.done()}),this._rememberMorpher("plot",r),this},leading(n){return this._queueNumber("leading",n)},viewbox(n,e,t,i){return this._queueObject("viewbox",new ot(n,e,t,i))},update(n){return typeof n!="object"?this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]}):(n.opacity!=null&&this.attr("stop-opacity",n.opacity),n.color!=null&&this.attr("stop-color",n.color),n.offset!=null&&this.attr("offset",n.offset),this)}});be(wt,{rx:Gs,ry:Xs,from:Ml,to:bl});Te(wt,"Runner");class Qs extends xt{constructor(e,t=e){super(Be("svg",e),t),this.namespace()}defs(){return this.isRoot()?bt(this.node.querySelector("defs"))||this.put(new Us):this.root().defs()}isRoot(){return!this.node.parentNode||!(this.node.parentNode instanceof De.window.SVGElement)&&this.node.parentNode.nodeName!=="#document-fragment"}namespace(){return this.isRoot()?this.attr({xmlns:Bs,version:"1.1"}).attr("xmlns:xlink",pi,Vi).attr("xmlns:svgjs",qu,Vi):this.root().namespace()}removeNamespace(){return this.attr({xmlns:null,version:null}).attr("xmlns:xlink",null,Vi).attr("xmlns:svgjs",null,Vi)}root(){return this.isRoot()?this:super.root()}}Ee({Container:{nested:He(function(){return this.put(new Qs)})}});Te(Qs,"Svg",!0);let Js=class extends xt{constructor(e,t=e){super(Be("symbol",e),t)}};Ee({Container:{symbol:He(function(){return this.put(new Js)})}});Te(Js,"Symbol");function O1(n){return this._build===!1&&this.clear(),this.node.appendChild(De.document.createTextNode(n)),this}function A1(){return this.node.getComputedTextLength()}function k1(n,e=this.bbox()){return n==null?e.x:this.attr("x",this.attr("x")+n-e.x)}function P1(n,e=this.bbox()){return n==null?e.y:this.attr("y",this.attr("y")+n-e.y)}function z1(n,e,t=this.bbox()){return this.x(n,t).y(e,t)}function F1(n,e=this.bbox()){return n==null?e.cx:this.attr("x",this.attr("x")+n-e.cx)}function $1(n,e=this.bbox()){return n==null?e.cy:this.attr("y",this.attr("y")+n-e.cy)}function H1(n,e,t=this.bbox()){return this.cx(n,t).cy(e,t)}function B1(n){return this.attr("x",n)}function Y1(n){return this.attr("y",n)}function W1(n,e){return this.ax(n).ay(e)}function V1(n){return this._build=!!n,this}var Rl={__proto__:null,plain:O1,length:A1,x:k1,y:P1,move:z1,cx:F1,cy:$1,center:H1,ax:B1,ay:Y1,amove:W1,build:V1};class tt extends Ct{constructor(e,t=e){super(Be("text",e),t),this.dom.leading=new xe(1.3),this._rebuild=!0,this._build=!1}leading(e){return e==null?this.dom.leading:(this.dom.leading=new xe(e),this.rebuild())}rebuild(e){if(typeof e=="boolean"&&(this._rebuild=e),this._rebuild){const t=this;let i=0;const r=this.dom.leading;this.each(function(s){const a=De.window.getComputedStyle(this.node).getPropertyValue("font-size"),o=r*new xe(a);this.dom.newLined&&(this.attr("x",t.attr("x")),this.text()===`
`?i+=o:(this.attr("dy",s?o+i:0),i=0))}),this.fire("rebuild")}return this}setData(e){return this.dom=e,this.dom.leading=new xe(e.leading||1.3),this}text(e){if(e===void 0){const t=this.node.childNodes;let i=0;e="";for(let r=0,s=t.length;r<s;++r){if(t[r].nodeName==="textPath"){r===0&&(i=1);continue}r!==i&&t[r].nodeType!==3&&bt(t[r]).dom.newLined===!0&&(e+=`
`),e+=t[r].textContent}return e}if(this.clear().build(!0),typeof e=="function")e.call(this,this);else{e=(e+"").split(`
`);for(let t=0,i=e.length;t<i;t++)this.newLine(e[t])}return this.build(!1).rebuild()}}be(tt,Rl);Ee({Container:{text:He(function(n=""){return this.put(new tt).text(n)}),plain:He(function(n=""){return this.put(new tt).plain(n)})}});Te(tt,"Text");class gr extends Ct{constructor(e,t=e){super(Be("tspan",e),t),this._build=!1}dx(e){return this.attr("dx",e)}dy(e){return this.attr("dy",e)}newLine(){this.dom.newLined=!0;const e=this.parent();if(!(e instanceof tt))return this;const t=e.index(this),i=De.window.getComputedStyle(this.node).getPropertyValue("font-size"),r=e.dom.leading*new xe(i);return this.dy(t?r:0).attr("x",e.x())}text(e){return e==null?this.node.textContent+(this.dom.newLined?`
`:""):(typeof e=="function"?(this.clear().build(!0),e.call(this,this),this.build(!1)):this.plain(e),this)}}be(gr,Rl);Ee({Tspan:{tspan:He(function(n=""){const e=new gr;return this._build||this.clear(),this.put(e).text(n)})},Text:{newLine:function(n=""){return this.tspan(n).newLine()}}});Te(gr,"Tspan");class yi extends Ct{constructor(e,t=e){super(Be("circle",e),t)}radius(e){return this.attr("r",e)}rx(e){return this.attr("r",e)}ry(e){return this.rx(e)}size(e){return this.radius(new xe(e).divide(2))}}be(yi,{x:gl,y:vl,cx:xl,cy:yl,width:wl,height:Cl});Ee({Container:{circle:He(function(n=0){return this.put(new yi).size(n).move(0,0)})}});Te(yi,"Circle");class vs extends xt{constructor(e,t=e){super(Be("clipPath",e),t)}remove(){return this.targets().forEach(function(e){e.unclip()}),super.remove()}targets(){return Vn("svg [clip-path*="+this.id()+"]")}}Ee({Container:{clip:He(function(){return this.defs().put(new vs)})},Element:{clipper(){return this.reference("clip-path")},clipWith(n){const e=n instanceof vs?n:this.parent().clip().add(n);return this.attr("clip-path","url(#"+e.id()+")")},unclip(){return this.attr("clip-path",null)}}});Te(vs,"ClipPath");class ea extends zt{constructor(e,t=e){super(Be("foreignObject",e),t)}}Ee({Container:{foreignObject:He(function(n,e){return this.put(new ea).size(n,e)})}});Te(ea,"ForeignObject");function j1(n,e){return this.children().forEach((t,i)=>{let r;try{r=t.bbox()}catch{return}const s=new ce(t),a=s.translate(n,e).transform(s.inverse()),o=new Ge(r.x,r.y).transform(a);t.move(o.x,o.y)}),this}function U1(n){return this.dmove(n,0)}function G1(n){return this.dmove(0,n)}function X1(n,e=this.bbox()){return n==null?e.height:this.size(e.width,n,e)}function K1(n=0,e=0,t=this.bbox()){const i=n-t.x,r=e-t.y;return this.dmove(i,r)}function q1(n,e,t=this.bbox()){const i=Wn(this,n,e,t),r=i.width/t.width,s=i.height/t.height;return this.children().forEach((a,o)=>{const l=new Ge(t).transform(new ce(a).inverse());a.scale(r,s,l.x,l.y)}),this}function Z1(n,e=this.bbox()){return n==null?e.width:this.size(n,e.height,e)}function Q1(n,e=this.bbox()){return n==null?e.x:this.move(n,e.y,e)}function J1(n,e=this.bbox()){return n==null?e.y:this.move(e.x,n,e)}var Il={__proto__:null,dmove:j1,dx:U1,dy:G1,height:X1,move:K1,size:q1,width:Z1,x:Q1,y:J1};class ft extends xt{constructor(e,t=e){super(Be("g",e),t)}}be(ft,Il);Ee({Container:{group:He(function(){return this.put(new ft)})}});Te(ft,"G");class ci extends xt{constructor(e,t=e){super(Be("a",e),t)}target(e){return this.attr("target",e)}to(e){return this.attr("href",e,pi)}}be(ci,Il);Ee({Container:{link:He(function(n){return this.put(new ci).to(n)})},Element:{unlink(){const n=this.linker();if(!n)return this;const e=n.parent();if(!e)return this.remove();const t=e.index(n);return e.add(this,t),n.remove(),this},linkTo(n){let e=this.linker();return e||(e=new ci,this.wrap(e)),typeof n=="function"?n.call(e,e):e.to(n),this},linker(){const n=this.parent();return n&&n.node.nodeName.toLowerCase()==="a"?n:null}}});Te(ci,"A");class xs extends xt{constructor(e,t=e){super(Be("mask",e),t)}remove(){return this.targets().forEach(function(e){e.unmask()}),super.remove()}targets(){return Vn("svg [mask*="+this.id()+"]")}}Ee({Container:{mask:He(function(){return this.defs().put(new xs)})},Element:{masker(){return this.reference("mask")},maskWith(n){const e=n instanceof xs?n:this.parent().mask().add(n);return this.attr("mask","url(#"+e.id()+")")},unmask(){return this.attr("mask",null)}}});Te(xs,"Mask");class Ll extends zt{constructor(e,t=e){super(Be("stop",e),t)}update(e){return(typeof e=="number"||e instanceof xe)&&(e={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),e.opacity!=null&&this.attr("stop-opacity",e.opacity),e.color!=null&&this.attr("stop-color",e.color),e.offset!=null&&this.attr("offset",new xe(e.offset)),this}}Ee({Gradient:{stop:function(n,e,t){return this.put(new Ll).update(n,e,t)}}});Te(Ll,"Stop");function e0(n,e){if(!n)return"";if(!e)return n;let t=n+"{";for(const i in e)t+=Xu(i)+":"+e[i]+";";return t+="}",t}let ys=class extends zt{constructor(e,t=e){super(Be("style",e),t)}addText(e=""){return this.node.textContent+=e,this}font(e,t,i={}){return this.rule("@font-face",{fontFamily:e,src:t,...i})}rule(e,t){return this.addText(e0(e,t))}};Ee("Dom",{style(n,e){return this.put(new ys).rule(n,e)},fontface(n,e,t){return this.put(new ys).font(n,e,t)}});Te(ys,"Style");class ta extends tt{constructor(e,t=e){super(Be("textPath",e),t)}array(){const e=this.track();return e?e.array():null}plot(e){const t=this.track();let i=null;return t&&(i=t.plot(e)),e==null?i:this}track(){return this.reference("href")}}Ee({Container:{textPath:He(function(n,e){return n instanceof tt||(n=this.text(n)),n.path(e)})},Text:{path:He(function(n,e=!0){const t=new ta;n instanceof wn||(n=this.defs().path(n)),t.attr("href","#"+n,pi);let i;if(e)for(;i=this.node.firstChild;)t.node.appendChild(i);return this.put(t)}),textPath(){return this.findOne("textPath")}},Path:{text:He(function(n){return n instanceof tt||(n=new tt().addTo(this.parent()).text(n)),n.path(this)}),targets(){return Vn("svg textPath").filter(n=>(n.attr("href")||"").includes(this.id()))}}});ta.prototype.MorphArray=mn;Te(ta,"TextPath");class Ol extends Ct{constructor(e,t=e){super(Be("use",e),t)}use(e,t){return this.attr("href",(t||"")+"#"+e,pi)}}Ee({Container:{use:He(function(n,e){return this.put(new Ol).use(n,e)})}});Te(Ol,"Use");const lt=ut;be([Qs,Js,yn,oi,ir],vt("viewbox"));be([li,xi,Cn,wn],vt("marker"));be(tt,vt("Text"));be(wn,vt("Path"));be(Us,vt("Defs"));be([tt,gr],vt("Tspan"));be([Nt,mr,gi,wt],vt("radius"));be(mi,vt("EventTarget"));be(Zt,vt("Dom"));be(zt,vt("Element"));be(Ct,vt("Shape"));be([xt,El],vt("Container"));be(gi,vt("Gradient"));be(wt,vt("Runner"));pn.extend(Uu());C1([xe,Ae,ot,ce,kn,Qt,mn,Ge]);E1();const Al={paddingX:15,paddingY:5,imgMaxWidth:200,imgMaxHeight:100,iconSize:20,lineWidth:1,lineColor:"#549688",lineDasharray:"none",lineFlow:!1,lineFlowDuration:1,lineFlowForward:!0,lineStyle:"straight",rootLineKeepSameInCurve:!0,rootLineStartPositionKeepSameInCurve:!1,lineRadius:5,showLineMarker:!1,generalizationLineWidth:1,generalizationLineColor:"#549688",generalizationLineMargin:0,generalizationNodeMargin:20,associativeLineWidth:2,associativeLineColor:"rgb(51, 51, 51)",associativeLineActiveWidth:8,associativeLineActiveColor:"rgba(2, 167, 240, 1)",associativeLineDasharray:[6,4],associativeLineTextColor:"rgb(51, 51, 51)",associativeLineTextFontSize:14,associativeLineTextLineHeight:1.2,associativeLineTextFontFamily:"微软雅黑, Microsoft YaHei",backgroundColor:"#fafafa",backgroundImage:"none",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"cover",nodeUseLineStyle:!1,root:{shape:"rectangle",fillColor:"#549688",fontFamily:"微软雅黑, Microsoft YaHei",color:"#fff",fontSize:16,fontWeight:"bold",fontStyle:"normal",borderColor:"transparent",borderWidth:0,borderDasharray:"none",borderRadius:5,textDecoration:"none",gradientStyle:!1,startColor:"#549688",endColor:"#fff",startDir:[0,0],endDir:[1,0],lineMarkerDir:"end",hoverRectColor:"",hoverRectRadius:5},second:{shape:"rectangle",marginX:100,marginY:40,fillColor:"#fff",fontFamily:"微软雅黑, Microsoft YaHei",color:"#565656",fontSize:16,fontWeight:"normal",fontStyle:"normal",borderColor:"#549688",borderWidth:1,borderDasharray:"none",borderRadius:5,textDecoration:"none",gradientStyle:!1,startColor:"#549688",endColor:"#fff",startDir:[0,0],endDir:[1,0],lineMarkerDir:"end",hoverRectColor:"",hoverRectRadius:5},node:{shape:"rectangle",marginX:50,marginY:0,fillColor:"transparent",fontFamily:"微软雅黑, Microsoft YaHei",color:"#6a6d6c",fontSize:14,fontWeight:"normal",fontStyle:"normal",borderColor:"transparent",borderWidth:0,borderRadius:5,borderDasharray:"none",textDecoration:"none",gradientStyle:!1,startColor:"#549688",endColor:"#fff",startDir:[0,0],endDir:[1,0],lineMarkerDir:"end",hoverRectColor:"",hoverRectRadius:5},generalization:{shape:"rectangle",marginX:100,marginY:40,fillColor:"#fff",fontFamily:"微软雅黑, Microsoft YaHei",color:"#565656",fontSize:16,fontWeight:"normal",fontStyle:"normal",borderColor:"#549688",borderWidth:1,borderDasharray:"none",borderRadius:5,textDecoration:"none",gradientStyle:!1,startColor:"#549688",endColor:"#fff",startDir:[0,0],endDir:[1,0],hoverRectColor:"",hoverRectRadius:5}},t0=["lineWidth","lineColor","lineDasharray","lineStyle","generalizationLineWidth","generalizationLineColor","associativeLineWidth","associativeLineColor","associativeLineActiveWidth","associativeLineActiveColor","associativeLineTextColor","associativeLineTextFontSize","associativeLineTextLineHeight","associativeLineTextFontFamily","backgroundColor","backgroundImage","backgroundRepeat","backgroundPosition","backgroundSize","rootLineKeepSameInCurve","rootLineStartPositionKeepSameInCurve","showLineMarker","lineRadius","hoverRectColor","hoverRectRadius","lineFlow","lineFlowDuration","lineFlowForward"],n0=n=>{let e=Object.keys(n);for(let t=0;t<e.length;t++)if(!t0.find(i=>i===e[t]))return!1;return!0},ws=["lineColor","lineDasharray","lineWidth","lineMarkerDir","lineFlow","lineFlowDuration","lineFlowForward"],Le=(n,e,t,i,r,s=0,a=0,o=[])=>{let l=!1;if(t&&(l=t(n,e,r,s,a,o)),!l&&n.children&&n.children.length>0){let h=s+1;n.children.forEach((c,d)=>{Le(c,n,t,i,!1,h,d,[...o,n])})}i&&i(n,e,r,s,a,o)},kl=(n,e)=>{let t=[n],i=!1;for(e(n,null)==="stop"&&(i=!0);t.length&&!i;){let r=t.shift();r.children&&r.children.length&&r.children.forEach(s=>{i||(t.push(s),e(s,r)==="stop"&&(i=!0))})}},i0=(n,e,t,i)=>{let r=n/e,s=[];if(t&&i)if(n<=t&&e<=i)s=[n,e];else{let a=t/i;r>a?s=[t,t/r]:s=[r*i,i]}else t?n<=t?s=[n,e]:s=[t,t/r]:i&&(e<=i?s=[n,e]:s=[r*i,i]);return s},r0=n=>{n=n.replace(/<br>/gim,`
`);let e=document.createElement("div");return e.innerHTML=n,n=e.textContent,n},mt=n=>{try{return JSON.parse(JSON.stringify(n))}catch{return null}},Pl=(n,e,t=!1)=>(n.data=mt(e.data),t&&(n.data.isActive=!1,_s(n.data).forEach(r=>{r.isActive=!1})),n.children=[],e.children&&e.children.length>0&&e.children.forEach((i,r)=>{n.children[r]=Pl({},i,t)}),Object.keys(e).forEach(i=>{!["data","children"].includes(i)&&!/^_/.test(i)&&(n[i]=e[i])}),n),di=(n,e,t=!1,i=!0)=>{const r=e.nodeData?e.nodeData:e;return n.data=mt(r.data),i?delete n.data.uid:n.data.uid||(n.data.uid=$t()),t&&(n.data.isActive=!1),n.children=[],e.children&&e.children.length>0?e.children.forEach((s,a)=>{n.children[a]=di({},s,t,i)}):e.nodeData&&e.nodeData.children&&e.nodeData.children.length>0&&e.nodeData.children.forEach((s,a)=>{n.children[a]=di({},s,t,i)}),Object.keys(r).forEach(s=>{!["data","children"].includes(s)&&!/^_/.test(s)&&(n[s]=r[s])}),n},na=(n,e=300,t)=>{let i=null;return(...r)=>{i||(i=setTimeout(()=>{n.call(t,...r),i=null},e))}},s0=(n,e=300,t)=>{let i=null;return(...r)=>{i&&clearTimeout(i);const s=!i;i=setTimeout(()=>{i=null,n.apply(t,r)},e),s&&n.apply(t,r)}},En=(n,e=()=>{})=>{let t=0,i=n.length;if(i<=0)return e();let r=()=>{if(t>=i){e();return}n[t](),setTimeout(()=>{t++,r()},0)};r()},In=n=>n*(Math.PI/180),a0=n=>n.replace(/([a-z])([A-Z])/g,(...e)=>e[1]+"-"+e[2].toLowerCase()),o0=function(n,e){let t=!1,i=null,r=()=>{t=!1,e?n.call(e):n()};if(typeof MutationObserver<"u"){let s=1,a=new MutationObserver(r),o=document.createTextNode(s);a.observe(o,{characterData:!0}),i=function(){s=(s+1)%2,o.data=s}}else i=setTimeout;return function(){t||(t=!0,i(r,0))}},l0=(n,e)=>{let t=n.elRect,{scaleX:i,scaleY:r,translateX:s,translateY:a}=n.draw.transform(),{left:o,top:l,width:h,height:c}=e,d=(o+h)*i+s,f=(l+c)*r+a;o=o*i+s,l=l*r+a;let m=0,u=0;return o<0&&(m=-o),d>t.width&&(m=-(d-t.width)),l<0&&(u=-l),f>t.height&&(u=-(f-t.height)),{isOuter:m!==0||u!==0,offsetLeft:m,offsetTop:u}};let ji=null;const zl=n=>(ji||(ji=document.createElement("div")),ji.innerHTML=n,ji.textContent),h0=n=>new Promise(e=>{let t=new Image;t.src=n,t.onload=()=>{e({width:t.width,height:t.height})},t.onerror=()=>{e({width:0,height:0})}}),$t=()=>ju(),c0=n=>new Promise((e,t)=>{let i=new FileReader;i.readAsDataURL(n),i.onload=async r=>{let s=r.target.result,a=await h0(s);e({url:s,size:a})},i.onerror=r=>{t(r)}}),cn=n=>Object.prototype.toString.call(n).slice(8,-1),Mn=n=>n==null||n==="";let Ui=null;const d0=n=>{Ui||(Ui=document.createElement("div")),Ui.innerHTML=n;for(let e=Ui.childNodes,t=e.length;t--;)if(e[t].nodeType==1)return!0;return!1},Fl=n=>(n=String(n).replaceAll(/\s+/g,""),["#fff","#ffffff","#FFF","#FFFFFF","rgb(255,255,255)"].includes(n)||/rgba\(255,255,255,[^)]+\)/.test(n)),u0=n=>(n=String(n).replaceAll(/\s+/g,""),["","transparent"].includes(n)||/rgba\(\d+,\d+,\d+,0\)/.test(n)),f0=n=>{let{lineColor:e,root:t,second:i,node:r}=n,s=[e,t.fillColor,t.color,i.fillColor,i.color,r.fillColor,r.color,t.borderColor,i.borderColor,r.borderColor];for(let a=0;a<s.length;a++){let o=s[a];if(!u0(o)&&!Fl(o))return o}};let Ut=null;const p0=n=>{Ut||(Ut=document.createElement("div")),Ut.innerHTML=n;const e=Ut.querySelectorAll(".ql-formula");Array.from(e).forEach(r=>{const s=document.createTextNode("$smmformula$");r.parentNode.replaceChild(s,r)});const t=Ut.childNodes;let i=[];for(let r=0;r<t.length;r++){const s=t[r];s.nodeType===1?i.push(s.textContent):s.nodeType===3&&i.push(s.nodeValue)}if(n=i.map(r=>`<p><span>${vr(r)}</span></p>`).join(""),e.length>0){n=n.replace(/\$smmformula\$/g,'<span class="smmformula"></span>'),Ut.innerHTML=n;const r=Ut.querySelectorAll(".smmformula");Array.from(r).forEach((s,a)=>{s.parentNode.replaceChild(e[a],s)}),n=Ut.innerHTML}return n},m0=(n,e)=>{const t={};return Object.keys(e).forEach(i=>{const r=n[i],s=e[i];if(cn(r)!==cn(s)){t[i]=s;return}if(cn(r)==="Object"){if(JSON.stringify(r)!==JSON.stringify(s)){t[i]=s;return}}else if(r!==s){t[i]=s;return}}),t},Cs=n=>/^_/.test(n)?!1:!Nu.includes(n),g0=n=>{const e=[...ws],t=Object.keys(n);for(let i=0;i<t.length;i++)if(!e.includes(t[i]))return!1;return!0},v0=n=>n.reduce((e,t)=>{const i=e.find(r=>r.type===t.type);return i?t.list.forEach(r=>{const s=i.list.find(a=>a.name===r.name);s?s.icon=r.icon:i.list.push(r)}):e.push({...t}),e},[]),Es=n=>{let e=[];return n.forEach(t=>{n.find(i=>i.uid!==t.uid&&i.isAncestor(t))||e.push(t)}),e},x0=n=>{const e={},t={};n.forEach(r=>{const s=r.parent;if(s){const a=s.uid;t[a]=s;const o=r.getIndexInBrothers(),l={node:r,index:o};e[a]?e[a].find(h=>h.index===l.index)||e[a].push(l):e[a]=[l]}});const i=[];return Object.keys(e).forEach(r=>{if(e[r].length>1){const s=e[r].map(a=>a.index).sort((a,o)=>a-o);i.push({node:t[r],range:[s[0],s[s.length-1]]})}else i.push({node:e[r][0].node})}),i},y0=n=>{let e=window.getSelection(),t=document.createRange();t.selectNodeContents(n),t.collapse(),e.removeAllRanges(),e.addRange(t)},w0=n=>{let e=window.getSelection(),t=document.createRange();t.selectNodeContents(n),e.removeAllRanges(),e.addRange(t)},Gi=(n,e={})=>{e={...e},e&&e.richText&&e.resetRichText&&delete e.resetRichText;const i=r=>{r.forEach(s=>{s.data={...s.data,...e},s.children&&s.children.length>0&&i(s.children)})};return i(n),n},Xi=(n,e=!1,t=null)=>{const i=r=>{r.forEach(s=>{s.data||(s.data={}),(e||Mn(s.data.uid))&&(s.data.uid=$t()),t&&t(s),s.children&&s.children.length>0&&i(s.children)})};return i(n),n},Mt=n=>n?Array.isArray(n)?n:[n]:[],ei=n=>n.parent?n.parent.nodeData.children.findIndex(e=>e.data.uid===n.uid):0,Je=(n,e)=>e.findIndex(t=>t.uid===n.uid),$l=n=>{let e=0;for(let r=0;r<n.length;r++)e=n.charCodeAt(r)+((e<<5)-e);return"hsla("+new $s(e).genrand_int32()%360+", 50%, 50%, 1)"},vr=n=>([["&","&amp;"],["<","&lt;"],[">","&gt;"]].forEach(e=>{n=n.replace(new RegExp(e[0],"g"),e[1])}),n),Ms=(n,e)=>{const t=cn(n);if(t!==cn(e))return!1;if(t==="Object"){const i=Object.keys(n),r=Object.keys(e);if(i.length!==r.length)return!1;for(let s=0;s<i.length;s++){const a=i[s];if(!r.includes(a)||!Ms(n[a],e[a]))return!1}return!0}else if(t==="Array"){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){const r=n[i],s=e[i],a=cn(r),o=cn(s);if(a!==o||!Ms(r,s))return!1}return!0}else return n===e},Hl=()=>navigator.clipboard&&typeof navigator.clipboard.read=="function",_a=n=>{navigator.clipboard&&navigator.clipboard.writeText&&navigator.clipboard.writeText(JSON.stringify(n))},C0=async()=>{let n=null,e=null;if(Hl()){const t=await navigator.clipboard.read();if(t&&t.length>0)for(const i of t)for(const r of i.types)/^image\//.test(r)?e=await i.getType(r):r==="text/plain"&&(n=await(await i.getType(r)).text())}return{text:n,img:e}},ts=n=>{if(!n||!n.parent)return;const e=ei(n);e!==-1&&n.parent.nodeData.children.splice(e,1)},E0=(n,e)=>{if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!e.find(i=>i.uid===n[t].uid))return!1;return!0},Sa=n=>({simpleMindMap:!0,data:n}),bs=n=>{let e=null;if(typeof n=="string")try{const i=JSON.parse(n);typeof i=="object"&&i.simpleMindMap&&(e=i.data)}catch{}else typeof n=="object"&&n.simpleMindMap&&(e=n.data);const t=!!e;return{isSmm:t,data:t?e:String(n)}},Na=(n,e)=>{n.preventDefault();const t=window.getSelection();if(!t.rangeCount)return;t.deleteFromDocument(),e=e||n.clipboardData.getData("text"),e=vr(e),e=zl(e);const i=e.split(/\n/g),r=document.createDocumentFragment();i.forEach((s,a)=>{const o=document.createTextNode(s);if(r.appendChild(o),a<i.length-1){const l=document.createElement("br");r.appendChild(l)}}),t.getRangeAt(0).insertNode(r),t.collapseToEnd()},Ta=n=>{const e={},t=(i,r)=>{const s=i.data.uid;r&&r.children.push(s),e[s]={isRoot:!r,data:{...i.data},children:[]},i.children&&i.children.length>0&&i.children.forEach(a=>{t(a,e[s])})};return t(n,null),e},M0=({addContentToHeader:n,addContentToFooter:e})=>{const t=[];let i=null,r=0,s=null,a=0;const o=(l,h)=>{if(typeof l=="function"){const c=l();if(!c)return;const{el:d,cssText:f,height:m}=c;if(d instanceof HTMLElement){ri(d);const u=ii({el:d,height:m});h(u,m)}f&&t.push(f)}};return o(n,(l,h)=>{i=l,r=h}),o(e,(l,h)=>{s=l,a=h}),{cssTextList:t,header:i,headerHeight:r,footer:s,footerHeight:a}},b0=(n,e=0,t=0,i=0,r=0,s=!1,a=!1)=>{let o=1/0,l=-1/0,h=1/0,c=-1/0;const d=(f,m)=>{if(!(m&&s)&&f.group)try{const{x:u,y:g,width:p,height:x}=f.group.findOne(".smm-node-shape").rbox();u<o&&(o=u),u+p>l&&(l=u+p),g<h&&(h=g),g+x>c&&(c=g+x)}catch{}!a&&f._generalizationList.length>0&&f._generalizationList.forEach(u=>{d(u.generalizationNode)}),f.children&&f.children.forEach(u=>{d(u)})};return d(n,!0),o=o-e+i,h=h-t+r,l=l-e+i,c=c-t+r,{left:o,top:h,width:l-o,height:c-h}},_0=()=>{if(document.documentElement.requestFullScreen)return"fullscreenchange";if(document.documentElement.webkitRequestFullScreen)return"webkitfullscreenchange";if(document.documentElement.mozRequestFullScreen)return"mozfullscreenchange";if(document.documentElement.msRequestFullscreen)return"msfullscreenchange"};_0();const ii=({el:n,width:e,height:t})=>{const i=new ea;return e!==void 0&&i.width(e),t!==void 0&&i.height(t),i.add(n),i},_s=n=>{const e=n.generalization;return e?Array.isArray(e)?e:[e]:[]},ri=n=>{n.setAttribute("xmlns","http://www.w3.org/1999/xhtml")},Ss=n=>(n=[...n],n.sort((e,t)=>e.sortIndex-t.sortIndex),n),Bl=(n,e)=>nr(n,e,{arrayMerge:(t,i)=>i}),S0=n=>{const e={};return Du.forEach(t=>{let i=n.style.merge(t);t==="fontSize"&&(i=i+"px"),e[t]=i}),e},Da=["backgroundColor","backgroundImage","backgroundRepeat","backgroundPosition","backgroundSize"];class Dt{static setBackgroundStyle(e,t){if(!e)return;if(!Dt.cacheStyle){Dt.cacheStyle={};let l=window.getComputedStyle(e);Da.forEach(h=>{Dt.cacheStyle[h]=l[h]})}let{backgroundColor:i,backgroundImage:r,backgroundRepeat:s,backgroundPosition:a,backgroundSize:o}=t;e.style.backgroundColor=i,r&&r!=="none"?(e.style.backgroundImage=`url(${r})`,e.style.backgroundRepeat=s,e.style.backgroundPosition=a,e.style.backgroundSize=o):e.style.backgroundImage="none"}static removeBackgroundStyle(e){Dt.cacheStyle&&(Da.forEach(t=>{e.style[t]=Dt.cacheStyle[t]}),Dt.cacheStyle=null)}constructor(e){this.ctx=e,this._markerPath=null,this._marker=null,this._gradient=null}merge(e,t){let i=this.ctx.mindMap.themeConfig,r=null,s=!1;t?(s=!0,r=i):this.ctx.isGeneralization?r=i.generalization:this.ctx.layerIndex===0?r=i.root:this.ctx.layerIndex===1?r=i.second:r=i.node;let a="";return this.getSelfStyle(e)!==void 0?a=this.getSelfStyle(e):r[e]!==void 0?a=r[e]:a=i[e],s||this.addToEffectiveStyles({[e]:a}),a}getStyle(e,t){return this.merge(e,t)}getSelfStyle(e){return this.ctx.getData(e)}addToEffectiveStyles(e){this.ctx.effectiveStyles={...this.ctx.effectiveStyles,...e}}rect(e){this.shape(e),e.radius(this.merge("borderRadius"))}shape(e){const t={gradientStyle:this.merge("gradientStyle"),startColor:this.merge("startColor"),endColor:this.merge("endColor"),startDir:this.merge("startDir"),endDir:this.merge("endDir"),fillColor:this.merge("fillColor"),borderColor:this.merge("borderColor"),borderWidth:this.merge("borderWidth"),borderDasharray:this.merge("borderDasharray")};t.gradientStyle?(this._gradient||(this._gradient=this.ctx.nodeDraw.gradient("linear")),this._gradient.update(i=>{i.stop(0,t.startColor),i.stop(1,t.endColor)}),this._gradient.from(...t.startDir).to(...t.endDir),e.fill(this._gradient)):e.fill({color:t.fillColor}),e.stroke({color:t.borderColor,width:t.borderWidth,dasharray:t.borderDasharray})}text(e){const t={color:this.merge("color"),fontFamily:this.merge("fontFamily"),fontSize:this.merge("fontSize"),fontWeight:this.merge("fontWeight"),fontStyle:this.merge("fontStyle"),textDecoration:this.merge("textDecoration")};e.fill({color:t.color}).css({"font-family":t.fontFamily,"font-size":t.fontSize+"px","font-weight":t.fontWeight,"font-style":t.fontStyle,"text-decoration":t.textDecoration})}createStyleText(e={}){const t={color:this.merge("color"),fontFamily:this.merge("fontFamily"),fontSize:this.merge("fontSize"),fontWeight:this.merge("fontWeight"),fontStyle:this.merge("fontStyle"),textDecoration:this.merge("textDecoration"),...e};return`
      color: ${t.color};
      font-family: ${t.fontFamily};
      font-size: ${t.fontSize+"px"};
      font-weight: ${t.fontWeight};
      font-style: ${t.fontStyle};
      text-decoration: ${t.textDecoration}
    `}getTextFontStyle(){const e={color:this.merge("color"),fontFamily:this.merge("fontFamily"),fontSize:this.merge("fontSize"),fontWeight:this.merge("fontWeight"),fontStyle:this.merge("fontStyle"),textDecoration:this.merge("textDecoration")};return{italic:e.fontStyle==="italic",bold:e.fontWeight,fontSize:e.fontSize,fontFamily:e.fontFamily}}domText(e,t=1){const i={color:this.merge("color"),fontFamily:this.merge("fontFamily"),fontSize:this.merge("fontSize"),fontWeight:this.merge("fontWeight"),fontStyle:this.merge("fontStyle"),textDecoration:this.merge("textDecoration")};e.style.color=i.color,e.style.textDecoration=i.textDecoration,e.style.fontFamily=i.fontFamily,e.style.fontSize=i.fontSize*t+"px",e.style.fontWeight=i.fontWeight||"normal",e.style.fontStyle=i.fontStyle}tagText(e,t){e.fill({color:"#fff"}).css({"font-size":t.fontSize+"px"})}tagRect(e,t){e.fill({color:t.fill}),t.radius&&e.radius(t.radius)}iconNode(e,t){e.attr({fill:t||this.merge("color")})}line(e,{width:t,color:i,dasharray:r}={},s,a){const{customHandleLine:o}=this.ctx.mindMap.opt;if(typeof o=="function"&&o(this.ctx,e,{width:t,color:i,dasharray:r}),e.stroke({color:i,dasharray:r,width:t}).fill({color:"none"}),s){const l=this.merge("showLineMarker",!0),h=a.style;if(l){h._marker=h._marker||h.createMarker(),h._markerPath.stroke({color:i}).fill({color:i}),e.attr("marker-start",""),e.attr("marker-end","");const c=h.merge("lineMarkerDir");e.marker(c,h._marker)}else h._marker&&(e.attr("marker-start",""),e.attr("marker-end",""),h._marker.remove(),h._marker=null)}}createMarker(){return this.ctx.lineDraw.marker(20,20,e=>{e.ref(8,5),e.size(20,20),e.attr("markerUnits","userSpaceOnUse"),e.attr("orient","auto-start-reverse"),this._markerPath=e.path("M0,0 L2,5 L0,10 L10,5 Z")})}generalizationLine(e){e.stroke({width:this.merge("generalizationLineWidth",!0),color:this.merge("generalizationLineColor",!0)}).fill({color:"none"})}iconBtn(e,t,i){let{color:r,fill:s,fontSize:a,fontColor:o}=this.ctx.mindMap.opt.expandBtnStyle||{color:"#808080",fill:"#fff",fontSize:12,fontColor:"#333333"};e.fill({color:r}),t.fill({color:r}),i.fill({color:s}),this.ctx.mindMap.opt.isShowExpandNum&&e.attr({"font-size":a+"px","font-color":o})}hasCustomStyle(){let e=!1;return Object.keys(this.ctx.getData()).forEach(t=>{Cs(t)&&(e=!0)}),e}getCustomStyle(){const e={};return Object.keys(this.ctx.getData()).forEach(t=>{Cs(t)&&(e[t]=this.ctx.getData(t))}),e}hoverNode(e){const t=this.merge("hoverRectColor")||this.ctx.mindMap.opt.hoverRectColor,i=this.merge("hoverRectRadius");e.radius(i).fill("none").stroke({color:t})}onRemove(){this._marker&&(this._marker.remove(),this._marker=null),this._markerPath&&(this._markerPath.remove(),this._markerPath=null),this._gradient&&(this._gradient.remove(),this._gradient=null)}}Dt.cacheStyle=null;class N0{constructor(e){this.node=e,this.mindMap=e.mindMap}getShapePadding(e,t,i,r){const s=this.node.getShape(),a=15,o=5,l=e+i*2,h=t+r*2,c=Math.abs(l-h);switch(s){case T.SHAPE.ROUNDED_RECTANGLE:return{paddingX:t>e?(t-e)/2:0,paddingY:0};case T.SHAPE.DIAMOND:return{paddingX:e/2,paddingY:t/2};case T.SHAPE.PARALLELOGRAM:return{paddingX:i<=0?a:0,paddingY:0};case T.SHAPE.OUTER_TRIANGULAR_RECTANGLE:return{paddingX:i<=0?a:0,paddingY:0};case T.SHAPE.INNER_TRIANGULAR_RECTANGLE:return{paddingX:i<=0?a:0,paddingY:0};case T.SHAPE.ELLIPSE:return{paddingX:i<=0?a:0,paddingY:r<=0?o:0};case T.SHAPE.CIRCLE:return{paddingX:h>l?c/2:0,paddingY:h<l?c/2:0};default:return{paddingX:0,paddingY:0}}}createShape(){const e=this.node.getShape();let t=null;return e===T.SHAPE.RECTANGLE?t=this.createRect():e===T.SHAPE.DIAMOND?t=this.createDiamond():e===T.SHAPE.PARALLELOGRAM?t=this.createParallelogram():e===T.SHAPE.ROUNDED_RECTANGLE?t=this.createRoundedRectangle():e===T.SHAPE.OCTAGONAL_RECTANGLE?t=this.createOctagonalRectangle():e===T.SHAPE.OUTER_TRIANGULAR_RECTANGLE?t=this.createOuterTriangularRectangle():e===T.SHAPE.INNER_TRIANGULAR_RECTANGLE?t=this.createInnerTriangularRectangle():e===T.SHAPE.ELLIPSE?t=this.createEllipse():e===T.SHAPE.CIRCLE&&(t=this.createCircle()),t}getNodeSize(){const e=this.node.getBorderWidth();let{width:t,height:i}=this.node;return t-=e,i-=e,{width:t,height:i}}createPath(e){const{customCreateNodePath:t}=this.mindMap.opt;return t?lt(t(e)):new wn().plot(e)}createPolygon(e){const{customCreateNodePolygon:t}=this.mindMap.opt;return t?lt(t(e)):new Cn().plot(e)}createRect(){let{width:e,height:t}=this.getNodeSize(),i=this.node.style.merge("borderRadius");const r=`
      M${i},0
      L${e-i},0
      C${e-i},0 ${e},0 ${e},${i}
      L${e},${t-i}
      C${e},${t-i} ${e},${t} ${e-i},${t}
      L${i},${t}
      C${i},${t} 0,${t} 0,${t-i}
      L0,${i}
      C0,${i} 0,0 ${i},0
      Z
    `;return this.createPath(r)}createDiamond(){let{width:e,height:t}=this.getNodeSize(),i=e/2,r=t/2;const m=[[i,0],[e,r],[i,t],[0,r]];return this.createPolygon(m)}createParallelogram(){let{paddingX:e}=this.node.getPaddingVale();e=e||this.node.shapePadding.paddingX;let{width:t,height:i}=this.getNodeSize();const r=[[e,0],[t,0],[t-e,i],[0,i]];return this.createPolygon(r)}createRoundedRectangle(){let{width:e,height:t}=this.getNodeSize(),i=t/2;const r=`
      M${i},0
      L${e-i},0
      A${t/2},${t/2} 0 0,1 ${e-i},${t} 
      L${i},${t}
      A${t/2},${t/2} 0 0,1 ${i},0
    `;return this.createPath(r)}createOctagonalRectangle(){let e=5,{width:t,height:i}=this.getNodeSize();const r=[[0,e],[e,0],[t-e,0],[t,e],[t,i-e],[t-e,i],[e,i],[0,i-e]];return this.createPolygon(r)}createOuterTriangularRectangle(){let{paddingX:e}=this.node.getPaddingVale();e=e||this.node.shapePadding.paddingX;let{width:t,height:i}=this.getNodeSize();const r=[[e,0],[t-e,0],[t,i/2],[t-e,i],[e,i],[0,i/2]];return this.createPolygon(r)}createInnerTriangularRectangle(){let{paddingX:e}=this.node.getPaddingVale();e=e||this.node.shapePadding.paddingX;let{width:t,height:i}=this.getNodeSize();const r=[[0,0],[t,0],[t-e/2,i/2],[t,i],[0,i],[e/2,i/2]];return this.createPolygon(r)}createEllipse(){let{width:e,height:t}=this.getNodeSize(),i=e/2,r=t/2;const s=`
      M${i},0
      A${i},${r} 0 0,1 ${i},${t} 
      M${i},${t} 
      A${i},${r} 0 0,1 ${i},0 
    `;return this.createPath(s)}createCircle(){let{width:e,height:t}=this.getNodeSize(),i=e/2,r=t/2;const s=`
      M${i},0
      A${i},${r} 0 0,1 ${i},${t} 
      M${i},${t} 
      A${i},${r} 0 0,1 ${i},0 
    `;return this.createPath(s)}}const T0=[T.SHAPE.RECTANGLE,T.SHAPE.DIAMOND,T.SHAPE.PARALLELOGRAM,T.SHAPE.ROUNDED_RECTANGLE,T.SHAPE.OCTAGONAL_RECTANGLE,T.SHAPE.OUTER_TRIANGULAR_RECTANGLE,T.SHAPE.INNER_TRIANGULAR_RECTANGLE,T.SHAPE.ELLIPSE,T.SHAPE.CIRCLE];function D0(){const n=this.getData("generalization");return Array.isArray(n)?n:n?[n]:[]}function R0(){return this.formatGetGeneralization().length>0}function I0(){return!!this.formatGetGeneralization().find(e=>!e.range||e.range.length<=0)}function L0(n){return this._generalizationList.findIndex(e=>e.generalizationNode.uid===n.uid)}function O0(){if(this.isGeneralization||!this.checkHasGeneralization())return;let n=0,e=0;this.formatGetGeneralization().forEach((i,r)=>{let s=this._generalizationList[r];s||(s=this._generalizationList[r]={}),s.node=this,s.range=i.range,s.generalizationLine||(s.generalizationLine=this.lineDraw.path()),s.generalizationNode||(s.generalizationNode=new yr({data:{inserting:i.inserting,data:i},uid:$t(),renderer:this.renderer,mindMap:this.mindMap,isGeneralization:!0})),delete i.inserting,s.generalizationNode.generalizationBelongNode=this,s.generalizationNode.width>n&&(n=s.generalizationNode.width),s.generalizationNode.height>e&&(e=s.generalizationNode.height),i.isActive&&this.renderer.addNodeToActiveList(s.generalizationNode)}),this._generalizationNodeWidth=n,this._generalizationNodeHeight=e}function A0(){this.isGeneralization||(this.removeGeneralization(),this.createGeneralizationNode())}function k0(n){if(this.isGeneralization)return;this.updateGeneralizationData();const e=this.formatGetGeneralization();if(e.length<=0||this.getData("expand")===!1){this.removeGeneralization();return}e.length!==this._generalizationList.length&&this.removeGeneralization(),this.createGeneralizationNode(),this.renderer.layout.renderGeneralization(this._generalizationList),this._generalizationList.forEach(t=>{this.style.generalizationLine(t.generalizationLine),t.generalizationNode.render(()=>{},n)})}function P0(){const n=this.nodeData.children.length,e=this.formatGetGeneralization(),t=[];e.forEach(i=>{if(!i.range){t.push(i);return}i.range.length>0&&i.range[0]<=n-1&&i.range[1]<=n-1&&t.push(i)}),t.length!==e.length&&this.setData({generalization:t})}function z0(){this.isGeneralization||(this._generalizationList.forEach(n=>{n.generalizationNode.style.onRemove(),n.generalizationLine&&(n.generalizationLine.remove(),n.generalizationLine=null),n.generalizationNode&&(this.renderer.removeNodeFromActiveList(n.generalizationNode),n.generalizationNode.remove(),n.generalizationNode=null)}),this._generalizationList=[],this.generalizationBelongNode&&this.nodeDraw.find(".generalization_"+this.generalizationBelongNode.uid).remove())}function F0(){this.isGeneralization||this._generalizationList.forEach(n=>{n.generalizationLine&&n.generalizationLine.hide(),n.generalizationNode&&n.generalizationNode.hide()})}function $0(){this.isGeneralization||this._generalizationList.forEach(n=>{n.generalizationLine&&n.generalizationLine.show(),n.generalizationNode&&n.generalizationNode.show()})}function H0(n){this._generalizationList.forEach(e=>{e.generalizationLine.opacity(n),e.generalizationNode.group.opacity(n)})}function B0(){const n=this.generalizationBelongNode,e=n.formatGetGeneralization(),t=n.getGeneralizationNodeIndex(this),i=e[t],s=this.getStyle("hoverRectColor")||this.mindMap.opt.hoverRectColor,a=s?{stroke:s}:null;Array.isArray(i.range)&&i.range.length>0?this.mindMap.renderer.highlightNode(n,i.range,a):this.mindMap.renderer.highlightNode(n,null,a)}function Y0(){this.mindMap.renderer.closeHighlightNode()}const Ra={formatGetGeneralization:D0,checkHasGeneralization:R0,checkHasSelfGeneralization:I0,getGeneralizationNodeIndex:L0,createGeneralizationNode:O0,updateGeneralization:A0,updateGeneralizationData:P0,renderGeneralization:k0,removeGeneralization:z0,hideGeneralization:F0,showGeneralization:$0,setGeneralizationOpacity:H0,handleGeneralizationMouseenter:B0,handleGeneralizationMouseleave:Y0},W0='<svg t="1618141562310" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="13476" width="200" height="200"><path d="M475.136 327.168v147.968h-147.968v74.24h147.968v147.968h74.24v-147.968h147.968v-74.24h-147.968v-147.968h-74.24z m36.864-222.208c225.28 0 407.04 181.76 407.04 407.04s-181.76 407.04-407.04 407.04-407.04-181.76-407.04-407.04 181.76-407.04 407.04-407.04z m0-74.24c-265.216 0-480.768 215.552-480.768 480.768s215.552 480.768 480.768 480.768 480.768-215.552 480.768-480.768-215.552-480.768-480.768-480.768z" p-id="13477"></path></svg>',V0='<svg t="1618141589243" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="13611" width="200" height="200"><path d="M512 105.472c225.28 0 407.04 181.76 407.04 407.04s-181.76 407.04-407.04 407.04-407.04-181.76-407.04-407.04 181.76-407.04 407.04-407.04z m0-74.24c-265.216 0-480.768 215.552-480.768 480.768s215.552 480.768 480.768 480.768 480.768-215.552 480.768-480.768-215.552-480.768-480.768-480.768z" p-id="13612"></path><path d="M252.928 474.624h518.144v74.24h-518.144z" p-id="13613"></path></svg>',Ia={open:W0,close:V0};function j0(){if(this._openExpandNode)return;let{close:n,open:e}=this.mindMap.opt.expandBtnIcon||{};this.mindMap.opt.isShowExpandNum?(this._openExpandNode=new tt,this._openExpandNode.addClass("smm-expand-btn-text"),this._openExpandNode.attr({"text-anchor":"middle","dominant-baseline":"middle",x:this.expandBtnSize/2,y:2})):(this._openExpandNode=lt(e||Ia.open).size(this.expandBtnSize,this.expandBtnSize),this._openExpandNode.x(0).y(-this.expandBtnSize/2)),this._closeExpandNode=lt(n||Ia.close).size(this.expandBtnSize,this.expandBtnSize),this._closeExpandNode.x(0).y(-this.expandBtnSize/2),this._fillExpandNode=new yi().size(this.expandBtnSize),this._fillExpandNode.x(0).y(-this.expandBtnSize/2),this.style.iconBtn(this._openExpandNode,this._closeExpandNode,this._fillExpandNode)}function U0(n=[]){return n.reduce((e,t)=>e+this.sumNode(t.children||[]),n.length)}function G0(){let{expand:n}=this.getData();if(n===this._lastExpandBtnType)return;this._expandBtn&&this._expandBtn.clear(),this.createExpandNodeContent();let e;if(n===!1?(e=this._openExpandNode,this._lastExpandBtnType=!1):(e=this._closeExpandNode,this._lastExpandBtnType=!0),this._expandBtn){let{isShowExpandNum:t,expandBtnStyle:i,expandBtnNumHandler:r}=this.mindMap.opt;if(t)if(n)this._fillExpandNode.stroke("none");else{this._fillExpandNode.stroke({color:i.strokeColor});let s=this.sumNode(this.nodeData.children);if(typeof r=="function"){const a=r(s,this);Mn(a)||(s=a)}e.text(String(s))}this._expandBtn.add(this._fillExpandNode).add(e)}}function X0(){this._expandBtn&&this.renderer.layout.renderExpandBtn(this,this._expandBtn)}function K0(){!this.nodeData.children||this.nodeData.children.length<=0||this.isRoot||(this._expandBtn?this.group.add(this._expandBtn):(this._expandBtn=new ft,this._expandBtn.on("mouseover",n=>{n.stopPropagation(),this._expandBtn.css({cursor:"pointer"})}),this._expandBtn.on("mouseout",n=>{n.stopPropagation(),this._expandBtn.css({cursor:"auto"})}),this._expandBtn.on("click",n=>{n.stopPropagation(),this.mindMap.execCommand("SET_NODE_EXPAND",this,!this.getData("expand")),this.mindMap.emit("expand_btn_click",this)}),this._expandBtn.on("dblclick",n=>{n.stopPropagation()}),this._expandBtn.addClass("smm-expand-btn"),this.group.add(this._expandBtn)),this._showExpandBtn=!0,this.updateExpandBtnNode(),this.updateExpandBtnPos())}function q0(){this._expandBtn&&this._showExpandBtn&&(this._expandBtn.remove(),this._showExpandBtn=!1)}function Z0(){const{alwaysShowExpandBtn:n,notShowExpandBtn:e}=this.mindMap.opt;n||e||setTimeout(()=>{this.renderExpandBtn()},0)}function Q0(){const{alwaysShowExpandBtn:n,notShowExpandBtn:e}=this.mindMap.opt;if(n||this._isMouseenter||e)return;let{isActive:t,expand:i}=this.getData();!t&&i&&setTimeout(()=>{this.removeExpandBtn()},0)}const La={createExpandNodeContent:j0,updateExpandBtnNode:G0,updateExpandBtnPos:X0,renderExpandBtn:K0,removeExpandBtn:q0,showExpandBtn:Z0,hideExpandBtn:Q0,sumNode:U0};function J0(n={}){this.mindMap.execCommand("SET_NODE_DATA",this,n)}function e3(n,e,t){this.mindMap.execCommand("SET_NODE_TEXT",this,n,e,t)}function t3(n){this.mindMap.execCommand("SET_NODE_IMAGE",this,n)}function n3(n){this.mindMap.execCommand("SET_NODE_ICON",this,n)}function i3(n,e){this.mindMap.execCommand("SET_NODE_HYPERLINK",this,n,e)}function r3(n){this.mindMap.execCommand("SET_NODE_NOTE",this,n)}function s3(n,e){this.mindMap.execCommand("SET_NODE_ATTACHMENT",this,n,e)}function a3(n){this.mindMap.execCommand("SET_NODE_TAG",this,n)}function o3(n){this.mindMap.execCommand("SET_NODE_SHAPE",this,n)}function l3(n,e){this.mindMap.execCommand("SET_NODE_STYLE",this,n,e)}function h3(n){this.mindMap.execCommand("SET_NODE_STYLES",this,n)}const Oa={setData:J0,setText:e3,setImage:t3,setIcon:n3,setHyperlink:i3,setNote:r3,setAttachment:s3,setTag:a3,setShape:o3,setStyle:l3,setStyles:h3},c3='<svg t="1624174958075" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7982" ><path d="M435.484444 251.733333v68.892445L295.822222 320.682667a168.504889 168.504889 0 0 0-2.844444 336.952889h142.506666v68.892444H295.822222a237.397333 237.397333 0 0 1 0-474.794667h139.662222z m248.945778 0a237.397333 237.397333 0 0 1 0 474.851556H544.654222v-69.006222l139.776 0.056889a168.504889 168.504889 0 0 0 2.844445-336.952889H544.597333V251.676444h139.776z m-25.827555 203.946667a34.474667 34.474667 0 0 1 0 68.892444H321.649778a34.474667 34.474667 0 0 1 0-68.892444h336.952889z" p-id="7983"></path></svg>',d3='<svg t="1624195132675" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8792" ><path d="M152.768 985.984 152.768 49.856l434.56 0 66.816 0 234.048 267.392 0 66.816 0 601.92L152.768 985.984 152.768 985.984zM654.144 193.088l0 124.16 108.736 0L654.144 193.088 654.144 193.088zM821.312 384.064l-167.168 0L587.328 384.064 587.328 317.312 587.328 116.736 219.584 116.736 219.584 919.04l601.728 0L821.312 384.064 821.312 384.064zM386.688 517.888 319.808 517.888 319.808 450.944l66.816 0L386.624 517.888 386.688 517.888zM386.688 651.584 319.808 651.584 319.808 584.704l66.816 0L386.624 651.584 386.688 651.584zM386.688 785.344 319.808 785.344l0-66.88 66.816 0L386.624 785.344 386.688 785.344zM721.024 517.888 453.632 517.888 453.632 450.944l267.392 0L721.024 517.888 721.024 517.888zM654.144 651.584 453.632 651.584 453.632 584.704l200.512 0L654.144 651.584 654.144 651.584zM620.672 785.344l-167.04 0 0-66.88 167.04 0L620.672 785.344 620.672 785.344z" p-id="8793"></path></svg>',u3='<svg t="1711935375590" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3864" xmlns:xlink="http://www.w3.org/1999/xlink" width="128" height="128"><path d="M516.373333 375.978667l136.576-136.576a147.797333 147.797333 0 0 1 208.853334-0.021334 147.690667 147.690667 0 0 1-0.042667 208.832l-204.8 204.778667v0.021333l-153.621333 153.6c-85.973333 85.973333-225.28 85.973333-311.253334 0.021334-85.994667-85.973333-85.973333-225.216 0.149334-311.36L431.146667 256.362667a21.333333 21.333333 0 0 0-30.165334-30.165334L162.069333 465.066667c-102.805333 102.826667-102.826667 269.056-0.149333 371.733333 102.613333 102.613333 268.970667 102.613333 371.584 0l153.6-153.642667h0.021333l0.021334-0.021333 204.778666-204.778667c74.325333-74.325333 74.346667-194.858667 0.021334-269.184-74.24-74.24-194.88-74.24-269.162667 0.042667l-136.576 136.554667-187.626667 187.626666a117.845333 117.845333 0 0 0-0.106666 166.826667 118.037333 118.037333 0 0 0 166.826666-0.106667l255.850667-255.829333a21.333333 21.333333 0 0 0-30.165333-30.165333L435.136 669.973333a75.370667 75.370667 0 0 1-106.496 0.106667 75.178667 75.178667 0 0 1 0.128-106.496l187.605333-187.605333z" p-id="3865"></path></svg>',Yl=[{name:"优先级图标",type:"priority",list:[{name:"1",icon:'<svg viewBox="0 0 1024 1024"><path d="M512.042667 1024C229.248 1024 0 794.794667 0 511.957333 0 229.205333 229.248 0 512.042667 0 794.752 0 1024 229.205333 1024 511.957333 1024 794.794667 794.752 1024 512.042667 1024z" fill="#E93B30"></path><path d="M580.309333 256h-75.52c-10.666667 29.824-30.165333 55.765333-58.709333 78.165333-28.416 22.314667-54.869333 37.418667-79.146667 45.397334v84.608a320 320 0 0 0 120.234667-70.698667v352.085333H580.266667V256z" fill="#FFFFFF"></path></svg>'},{name:"2",icon:'<svg viewBox="0 0 1024 1024"><path d="M511.957333 1024C229.248 1024 0 794.752 0 512S229.248 0 511.957333 0C794.752 0 1024 229.248 1024 512s-229.248 512-512.042667 512z" fill="#FA8D2E"></path><path d="M667.946667 658.602667h-185.301334c4.864-8.533333 11.178667-17.066667 19.072-25.984 7.808-8.874667 26.453333-26.837333 55.936-53.888 29.525333-27.008 49.877333-47.786667 61.226667-62.165334 16.981333-21.717333 29.44-42.453333 37.290667-62.293333 7.808-19.84 11.776-40.746667 11.776-62.677333 0-38.570667-13.738667-70.741333-41.088-96.725334C599.466667 268.928 561.706667 256 513.834667 256c-43.690667 0-80.128 11.136-109.354667 33.578667-29.098667 22.4-46.506667 59.306667-52.010667 110.805333l93.184 9.301333c1.792-27.349333 8.405333-46.890667 19.754667-58.624 11.434667-11.776 26.837333-17.664 46.165333-17.664 19.541333 0 34.858667 5.589333 45.909334 16.768 11.136 11.264 16.682667 27.221333 16.682666 48.042667 0 18.858667-6.4 37.930667-19.242666 57.258667-9.472 14.037333-35.157333 40.533333-77.098667 79.872-52.096 48.554667-87.04 87.509333-104.704 116.821333A226.688 226.688 0 0 0 341.333333 745.429333h326.613334v-86.826666z" fill="#FFFFFF"></path></svg>'},{name:"3",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z" fill="#2E66FA"></path><path d="M627.754667 731.733333c-29.354667 25.088-66.901333 37.632-112.725334 37.632-44.928 0-81.792-11.52-110.592-34.773333-33.066667-26.538667-49.877333-64.469333-50.304-114.133333h92.16c0.426667 21.76 7.552 38.314667 21.333334 49.664 12.288 10.88 28.117333 16.341333 47.402666 16.341333 20.309333 0 36.778667-6.101333 49.322667-18.432 12.544-12.330667 18.773333-29.568 18.773333-51.797333 0-21.290667-6.229333-38.186667-18.773333-50.773334-12.544-12.501333-29.866667-18.773333-52.138667-18.773333h-13.525333v-80.042667H512c42.112 0 63.274667-21.034667 63.274667-63.146666 0-20.309333-5.888-36.096-17.706667-47.445334a60.757333 60.757333 0 0 0-43.818667-17.066666c-17.493333 0-32 5.504-43.434666 16.298666-11.562667 10.88-17.792 25.728-18.773334 44.714667H359.68c0.981333-43.946667 16.042667-78.976 45.397333-104.96 29.354667-25.941333 65.706667-39.04 109.226667-39.04 44.928 0 81.792 13.525333 110.592 40.490667 28.8 26.922667 43.306667 61.610667 43.306667 104.149333 0 48.213333-19.413333 82.688-58.154667 103.552 43.52 23.125333 65.28 61.44 65.28 114.858667 0 48.128-15.957333 85.76-47.573333 112.682666z" fill="#FFFFFF"></path></svg>'},{name:"4",icon:'<svg viewBox="0 0 1024 1024"><path d="M512.042667 1024C229.248 1024 0 794.794667 0 512.042667 0 229.205333 229.248 0 512.042667 0 794.752 0 1024 229.205333 1024 512.042667 1024 794.794667 794.752 1024 512.042667 1024z" fill="#6D768D"></path><path d="M600.96 256v309.802667h60.117333v81.536h-60.16v98.218666h-90.154666v-98.218666H311.466667v-81.237334L522.666667 256h78.293333zM510.72 399.104l-112.042667 166.698667h112.042667V399.104z" fill="#FFFFFF"></path></svg>'},{name:"5",icon:'<svg viewBox="0 0 1024 1024"><path d="M512.042667 1024C229.248 1024 0 794.794667 0 512.042667 0 229.205333 229.248 0 512.042667 0 794.752 0 1024 229.205333 1024 512.042667 1024 794.794667 794.752 1024 512.042667 1024z" fill="#6D768D"></path><path d="M470.912 343.552h175.786667V256H400.256l-47.786667 253.952 75.434667 10.837333c21.205333-23.552 45.269333-35.413333 72.021333-35.413333 21.546667 0 38.997333 7.509333 52.437334 22.4 13.312 15.018667 20.053333 37.418667 20.053333 67.328 0 31.872-6.741333 55.765333-20.181333 71.552-13.397333 15.872-29.866667 23.765333-49.237334 23.765333-17.066667 0-32.085333-6.186667-45.013333-18.432-13.013333-12.373333-20.821333-29.013333-23.466667-50.133333L341.333333 611.498667c5.546667 40.874667 22.485333 73.429333 50.730667 97.621333 28.330667 24.32 64.938667 36.437333 109.866667 36.437333 56.149333 0 100.053333-21.546667 131.754666-64.554666a176.64 176.64 0 0 0 34.816-107.52c0-48.042667-14.378667-87.210667-43.221333-117.333334-28.8-30.208-63.957333-45.312-105.514667-45.312-21.674667 0-42.922667 5.248-63.829333 15.616l14.976-82.901333z" fill="#FFFFFF"></path></svg>'},{name:"6",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 1024C229.248 1024 0 794.794667 0 512.042667 0 229.205333 229.248 0 512 0c282.88 0 512 229.205333 512 512.042667C1024 794.794667 794.88 1024 512 1024z" fill="#6D768D"></path><path d="M519.210667 256c36.992 0 67.626667 10.368 91.776 31.189333 24.192 20.821333 39.68 51.029333 46.293333 90.709334l-90.197333 9.984c-2.176-18.56-7.978667-32.298667-17.28-41.173334-9.258667-8.874667-21.418667-13.226667-36.224-13.226666-19.754667 0-36.437333 8.789333-50.048 26.453333-13.696 17.664-22.314667 54.613333-25.856 110.549333 23.296-27.52 52.138667-41.258667 86.656-41.258666 38.997333 0 72.362667 14.805333 100.181333 44.544 27.733333 29.696 41.685333 68.010667 41.685333 114.858666 0 49.877333-14.634667 89.856-43.818666 119.936-29.226667 30.208-66.730667 45.226667-112.554667 45.226667-49.066667 0-89.429333-19.072-121.130667-57.344C357.12 658.218667 341.333333 595.541333 341.333333 508.416c0-89.344 16.469333-153.813333 49.493334-193.194667C423.722667 275.754667 466.56 256 519.168 256z m-9.472 241.834667c-17.962667 0-33.066667 6.997333-45.525334 21.12-12.330667 14.037333-18.56 34.858667-18.56 62.293333 0 30.421333 6.912 53.76 20.906667 70.4 13.952 16.469333 29.866667 24.746667 47.786667 24.746667 17.28 0 31.701333-6.826667 43.178666-20.309334 11.52-13.525333 17.237333-35.669333 17.237334-66.56 0-31.658667-6.186667-54.869333-18.517334-69.546666a58.197333 58.197333 0 0 0-46.506666-22.144z" fill="#FFFFFF"></path></svg>'},{name:"7",icon:'<svg viewBox="0 0 1024 1024"><path d="M512.042667 1024C229.248 1024 0 794.752 0 512S229.248 0 512.042667 0C794.752 0 1024 229.248 1024 512s-229.248 512-511.957333 512z" fill="#6D768D"></path><path d="M673.024 273.066667H354.133333v86.869333h212.224a691.2 691.2 0 0 0-104.746666 187.989333c-26.026667 70.101333-39.978667 138.88-41.429334 206.293334h89.6c-0.298667-42.922667 6.698667-91.776 21.034667-146.474667a654.72 654.72 0 0 1 62.08-154.965333c27.136-48.554667 53.888-85.76 80.128-111.701334V273.066667z" fill="#FFFFFF"></path></svg>'},{name:"8",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 1024C229.248 1024 0 794.752 0 512S229.248 0 512 0s512 229.248 512 512-229.248 512-512 512z" fill="#6D768D"></path><path d="M512.426667 256c46.208 0 82.048 11.861333 107.605333 35.541333 25.6 23.68 38.314667 53.674667 38.314667 89.898667 0 22.613333-5.802667 42.666667-17.578667 60.330667a111.445333 111.445333 0 0 1-49.450667 40.277333c26.965333 10.837333 47.36 26.752 61.312 47.658667 13.994667 20.906667 21.034667 45.013333 21.034667 72.362666 0 45.098667-14.336 81.834667-42.965333 109.952-28.586667 28.245333-66.602667 42.368-114.090667 42.368-44.245333 0-81.066667-11.648-110.464-34.986666-34.645333-27.52-52.010667-65.28-52.010667-113.365334 0-26.368 6.528-50.645333 19.626667-72.746666 13.056-22.144 33.578667-39.210667 61.696-51.242667-24.064-10.154667-41.557333-24.192-52.48-41.941333a109.824 109.824 0 0 1-16.512-58.666667c0-36.224 12.757333-66.218667 37.973333-89.898667 25.386667-23.68 61.354667-35.541333 108.032-35.541333z m1.28 265.429333c-22.784 0-39.722667 7.978667-50.901334 23.893334-11.136 15.786667-16.64 33.066667-16.64 51.498666 0 25.984 6.485333 46.208 19.712 60.714667 13.098667 14.506667 29.525333 21.802667 49.152 21.802667 19.242667 0 35.157333-6.997333 47.786667-20.992 12.629333-13.909333 18.858667-34.048 18.858667-60.416 0-23.082667-6.314667-41.557333-19.2-55.466667a63.274667 63.274667 0 0 0-48.725334-21.034667z m-0.341334-191.488c-17.792 0-32 5.333333-42.581333 16-10.538667 10.666667-15.872 24.746667-15.872 42.325334 0 18.645333 5.248 33.152 15.701333 43.648 10.453333 10.453333 24.362667 15.658667 41.770667 15.658666 17.664 0 31.658667-5.290667 42.24-15.872 10.538667-10.581333 15.872-25.173333 15.872-43.818666 0-17.493333-5.248-31.573333-15.701333-42.154667s-24.277333-15.786667-41.429334-15.786667z" fill="#FFFFFF"></path></svg>'},{name:"9",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 1024C229.248 1024 0 794.794667 0 512.042667 0 229.333333 229.248 0 512 0c282.88 0 512 229.333333 512 512.042667C1024 794.794667 794.88 1024 512 1024z" fill="#6D768D"></path><path d="M497.28 256c49.365333 0 89.856 19.157333 121.429333 57.429333 31.701333 38.229333 47.488 101.205333 47.488 188.842667 0 89.173333-16.384 153.386667-49.365333 192.853333-32.853333 39.594667-75.605333 59.264-128.426667 59.264-37.888 0-68.608-10.154667-91.989333-30.506666s-38.4-50.816-45.013333-91.306667l90.112-9.984c2.261333 18.474667 8.021333 32.085333 17.28 41.088 9.173333 8.874667 21.418667 13.312 36.608 13.312 19.2 0 35.541333-8.874667 48.981333-26.752 13.44-17.749333 22.016-54.613333 25.770667-110.549333-23.466667 27.264-52.821333 40.874667-88.064 40.874666-38.314667 0-71.253333-14.72-99.114667-44.330666C355.242667 506.709333 341.333333 468.224 341.333333 420.864c0-49.493333 14.592-89.258667 43.946667-119.466667C414.549333 271.104 451.925333 256 497.237333 256z m-4.352 77.482667c-17.237333 0-31.658667 6.826667-43.008 20.437333-11.477333 13.653333-17.194667 35.84-17.194667 66.816 0 31.402667 6.229333 54.485333 18.645334 69.205333 12.458667 14.72 27.946667 22.101333 46.592 22.101334 18.005333 0 33.066667-7.082667 45.44-21.205334 12.330667-14.208 18.432-35.029333 18.432-62.506666 0-29.994667-6.912-53.376-20.821334-69.973334-13.824-16.597333-29.866667-24.874667-48.085333-24.874666z" fill="#FFFFFF"></path></svg>'},{name:"10",icon:'<svg viewBox="0 0 1024 1024"><path d="M512.042667 1024C229.248 1024 0 794.794667 0 511.957333 0 229.205333 229.248 0 512.042667 0 794.752 0 1024 229.205333 1024 511.957333 1024 794.794667 794.752 1024 512.042667 1024z" fill="#6D768D"></path><path d="M619.946667 273.066667c46.976 0 83.754667 16.042667 110.250666 48.042666 31.573333 37.973333 47.36 100.864 47.36 188.672 0 87.722667-15.829333 150.698667-47.658666 189.056-26.325333 31.616-62.976 47.36-109.952 47.36-47.274667 0-85.418667-17.237333-114.346667-51.968-28.885333-34.602667-43.392-96.426667-43.392-185.386666 0-87.168 15.872-150.016 47.701333-188.416 26.282667-31.488 62.933333-47.36 110.037334-47.36z m-207.488 12.8v452.266666H325.504V411.690667A299.904 299.904 0 0 1 213.333333 476.373333V398.933333c22.656-7.296 47.36-21.12 73.856-41.514666 26.624-20.522667 44.842667-44.288 54.784-71.552h70.485334z m207.488 60.842666c-11.306667 0-21.461333 3.413333-30.336 10.24-8.874667 6.826667-15.786667 19.157333-20.693334 36.864-6.4 22.997333-9.642667 61.653333-9.642666 115.968 0 54.442667 2.944 91.733333 8.661333 112.128 5.802667 20.352 13.098667 33.877333 21.845333 40.618667 8.789333 6.741333 18.858667 10.154667 30.165334 10.154667 11.349333 0 21.376-3.498667 30.250666-10.325334 8.874667-6.826667 15.786667-19.157333 20.693334-36.778666 6.4-22.826667 9.642667-61.354667 9.642666-115.797334 0-54.314667-2.858667-91.648-8.661333-112.042666-5.802667-20.352-13.013333-33.962667-21.76-40.789334a47.616 47.616 0 0 0-30.165333-10.24z" fill="#FFFFFF"></path></svg>'}]},{name:"进度图标",type:"progress",list:[{name:"1",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z" fill="#12BB37"></path><path d="M512 928c-229.76 0-416-186.24-416-416S282.24 96 512 96V512l294.144-294.144A414.72 414.72 0 0 1 928 512c0 229.76-186.24 416-416 416z" fill="#FFFFFF"></path></svg>'},{name:"2",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z" fill="#12BB37"></path><path d="M512 928c-229.76 0-416-186.24-416-416S282.24 96 512 96V512h416c0 229.76-186.24 416-416 416z" fill="#FFFFFF"></path></svg>'},{name:"3",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z" fill="#12BB37"></path><path d="M512 928c-229.76 0-416-186.24-416-416S282.24 96 512 96V512l294.144 294.144A414.72 414.72 0 0 1 512 928z" fill="#FFFFFF"></path></svg>'},{name:"4",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z" fill="#12BB37"></path><path d="M512 928c-229.76 0-416-186.24-416-416S282.24 96 512 96v832z" fill="#FFFFFF"></path></svg>'},{name:"5",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z" fill="#12BB37"></path><path d="M512 512l-294.144 294.144A414.72 414.72 0 0 1 96 512c0-229.76 186.24-416 416-416V512z" fill="#FFFFFF"></path></svg>'},{name:"6",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z" fill="#12BB37"></path><path d="M512 512H96c0-229.76 186.24-416 416-416V512z" fill="#FFFFFF"></path></svg>'},{name:"7",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z" fill="#12BB37"></path><path d="M512 512L217.856 217.856A414.72 414.72 0 0 1 512 96V512z" fill="#FFFFFF"></path></svg>'},{name:"8",icon:'<svg viewBox="0 0 1024 1024"><path d="M0 512c0 282.752 229.248 512 512 512s512-229.248 512-512S794.752 0 512 0 0 229.248 0 512z" fill="#12BB37"></path><path d="M716.629333 341.333333h-51.328a35.072 35.072 0 0 0-28.330666 14.293334l-171.989334 233.984-77.909333-106.026667a35.2 35.2 0 0 0-28.330667-14.293333H307.413333c-7.082667 0-11.264 7.936-7.082666 13.653333l136.32 185.472a35.2 35.2 0 0 0 56.533333 0l230.4-313.429333a8.533333 8.533333 0 0 0-6.954667-13.653334z" fill="#FFFFFF"></path></svg>'}]},{name:"表情图标",type:"expression",list:[{name:"1",icon:'<svg t="1624457751393" class="icon" viewBox="0 0 1026 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12255"><path d="M1.097856 1.097642h1021.804717v1021.804716H1.097856z" fill="#F09495" p-id="12256"></path><path d="M1024.000214 1024H0.000214V0h1024v1024z m-1021.804716-2.195284h1019.609433V2.195284H2.195498v1019.609432z" fill="#FFFFFF" p-id="12257"></path><path d="M234.695985 335.179887m-27.341259 0a27.341259 27.341259 0 1 0 54.682518 0 27.341259 27.341259 0 1 0-54.682518 0Z" fill="#040000" p-id="12258"></path><path d="M234.695985 363.519002c-15.666342 0-28.339115-12.772559-28.339115-28.339115 0-15.666342 12.772559-28.339115 28.339115-28.339115s28.339115 12.772559 28.339115 28.339115c0.099786 15.666342-12.672773 28.339115-28.339115 28.339115z m0-54.582732c-14.468914 0-26.243617 11.774703-26.243617 26.243617s11.774703 26.243617 26.243617 26.243617 26.243617-11.774703 26.243617-26.243617-11.774703-26.243617-26.243617-26.243617z" fill="#FFFFFF" p-id="12259"></path><path d="M776.232528 335.179887m-27.341259 0a27.341259 27.341259 0 1 0 54.682518 0 27.341259 27.341259 0 1 0-54.682518 0Z" fill="#040000" p-id="12260"></path><path d="M776.232528 363.519002c-15.666342 0-28.339115-12.772559-28.339115-28.339115 0-15.666342 12.772559-28.339115 28.339115-28.339115 15.666342 0 28.339115 12.772559 28.339115 28.339115 0 15.666342-12.772559 28.339115-28.339115 28.339115z m0-54.582732c-14.468914 0-26.243617 11.774703-26.243617 26.243617s11.774703 26.243617 26.243617 26.243617 26.243617-11.774703 26.243617-26.243617c-0.099786-14.468914-11.874488-26.243617-26.243617-26.243617z" fill="#FFFFFF" p-id="12261"></path><path d="M512.000214 671.656987c-52.58702 0-105.872539-17.961411-105.872539-52.387449S459.413194 566.882089 512.000214 566.882089s105.872539 17.961411 105.87254 52.387449S564.587234 671.656987 512.000214 671.656987z m0-74.240499c-21.952836 0-43.207172 3.592282-58.2748 9.77899-13.870201 5.68778-17.06334 11.275775-17.06334 12.07406s3.19314 6.386279 17.06334 12.07406c15.067628 6.186708 36.321965 9.77899 58.2748 9.77899s43.207172-3.592282 58.274801-9.77899c13.870201-5.68778 17.06334-11.275775 17.06334-12.07406s-3.19314-6.386279-17.06334-12.07406c-15.067628-6.286494-36.321965-9.77899-58.274801-9.77899z" fill="#040000" p-id="12262"></path></svg>'},{name:"2",icon:'<svg t="1624457767572" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1048"><path d="M0 0h1024v1024H0z" fill="#E6A6C9" p-id="1049"></path><path d="M315.1 368.1c-23.9 0-43.3-19.4-43.3-43.3s19.4-43.3 43.3-43.3 43.3 19.4 43.3 43.3-19.4 43.3-43.3 43.3z m0-74.7c-17.3 0-31.3 14.1-31.3 31.3 0 17.3 14.1 31.3 31.3 31.3 17.3 0 31.3-14.1 31.3-31.3 0-17.2-14-31.3-31.3-31.3zM738.7 368.1c-23.9 0-43.3-19.4-43.3-43.3s19.4-43.3 43.3-43.3 43.3 19.4 43.3 43.3-19.4 43.3-43.3 43.3z m0-74.7c-17.3 0-31.3 14.1-31.3 31.3 0 17.3 14.1 31.3 31.3 31.3 17.3 0 31.3-14.1 31.3-31.3 0-17.2-14-31.3-31.3-31.3zM293.5 698.8l-14.5-1.3c0.1-0.6 1.5-14.6 15.1-27.9 17.2-16.7 45-24.8 82.7-24 4.9-0.1 10.9-10.5 16.1-19.6 8.4-14.7 19-33.1 37.9-34.3 19.4-1.2 42.2 16.4 71.5 55.4 9.9 5.2 16.5 11.2 21.8 16.1 8.4 7.7 13.1 11.9 25.1 10.8 14.9-1.4 38.9-11.1 77.5-31.4 26.8-28.4 56.4-41.4 83.5-36.6 27.9 4.9 50.6 27.6 67.5 67.5l-13.4 5.7c-14.7-34.5-34.3-54.9-56.7-58.8-22.3-3.9-47.6 7.8-71.2 33.1l-0.8 0.9-1.1 0.6c-85.6 45.1-99.4 38-120.2 19.1-5.5-5-11.2-10.2-20.1-14.7l-1.5-0.8-1-1.4c-32.2-43.2-50.4-51.6-60-51-11.1 0.7-18.8 14-26.2 27-7.6 13.2-15.4 26.9-28.8 26.9h-0.2c-78.4-1.6-83 38.3-83 38.7z" fill="#040000" p-id="1050"></path></svg>'},{name:"3",icon:'<svg t="1624457776082" class="icon" viewBox="0 0 1026 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1204" ><path d="M1.1 1.097642h1021.804716v1021.804716H1.1z" fill="#F7E983" p-id="1205"></path><path d="M1024.002358 1024H0.002358V0h1024v1024z m-1021.804716-2.195284h1019.609433V2.195284H2.197642v1019.609432z" fill="#FFFFFF" p-id="1206"></path><path d="M329.174412 344.491728a38.118106 10.277919 57.6 1 0 17.355867-11.014369 38.118106 10.277919 57.6 1 0-17.355867 11.014369Z" fill="#040000" p-id="1207"></path><path d="M644.769475 355.956059a11.175989 36.321965 30 1 0 36.321965-62.911488 11.175989 36.321965 30 1 0-36.321965 62.911488Z" fill="#040000" p-id="1208"></path><path d="M569.678445 671.158059c-26.343403 0-51.190021-5.288638-70.049503-14.967843-20.755408-10.577275-32.230754-25.445332-32.230755-41.710388 0-16.265056 11.475346-31.133112 32.230755-41.710387 18.859482-9.579419 43.805886-14.967843 70.049503-14.967843s51.190021 5.288638 70.049503 14.967843c20.755408 10.577275 32.230754 25.445332 32.230754 41.710387 0 16.265056-11.475346 31.133112-32.230754 41.710388-18.859482 9.679205-43.805886 14.967843-70.049503 14.967843z m0-95.095693c-49.693237 0-84.318846 20.356266-84.318846 38.517248s34.625609 38.517248 84.318846 38.517248 84.318846-20.356266 84.318846-38.517248-34.725395-38.517248-84.318846-38.517248z" fill="#040000" p-id="1209"></path></svg>'},{name:"4",icon:'<svg t="1624457781889" class="icon" viewBox="0 0 1026 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1363" ><path d="M1.1 1.097642h1021.804716v1021.804716H1.1z" fill="#A6D9E2" p-id="1364"></path><path d="M1024.002358 1024H0.002358V0h1024v1024z m-1021.804716-2.195284h1019.609433V2.195284H2.197642v1019.609432z" fill="#FFFFFF" p-id="1365"></path><path d="M376.194134 348.950302m-23.44962 0a23.44962 23.44962 0 1 0 46.89924 0 23.44962 23.44962 0 1 0-46.89924 0Z" fill="#040000" p-id="1366"></path><path d="M629.150672 348.950302m-24.647047 0a24.647047 24.647047 0 1 0 49.294095 0 24.647047 24.647047 0 1 0-49.294095 0Z" fill="#040000" p-id="1367"></path><path d="M397.847613 603.503411c13.471058 8.282206 28.738258 14.468914 43.7061 19.458195 29.835899 9.978562 62.266225 14.169558 93.299551 7.483921 21.054765-4.490353 40.213604-14.369129 56.778016-28.039758 6.785422-5.587995-2.893783-15.167414-9.579419-9.579419-46.999026 38.916391-112.258819 31.033327-163.847983 6.086922-4.590138-2.195284-9.080491-4.490353-13.371272-7.184564-7.583707-4.590138-14.468914 7.184564-6.984993 11.774703z" fill="#040000" p-id="1368"></path><path d="M627.753674 534.052621c-31.033327 24.048334-58.474371 68.253362-37.419607 106.970182 10.577275 19.35841 29.835899 32.629897 48.795167 42.708244 7.982849 4.190996 15.067628-7.883064 7.084779-12.07406-25.245761-13.271487-53.485091-35.324108-49.094524-66.557006 2.793997-20.156695 15.766127-37.319821 29.736114-51.190022 3.392711-3.392711 6.984993-6.785422 10.776847-9.77899 2.993569-2.295069 2.394855-7.483921 0-9.878776-2.893783-3.19314-6.885208-2.49464-9.878776-0.199572z" fill="#040000" p-id="1369"></path></svg>'},{name:"5",icon:'<svg t="1624457787809" class="icon" viewBox="0 0 1026 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1523" ><path d="M1.1 1.097642h1021.804716v1021.804716H1.1z" fill="#AD6F59" p-id="1524"></path><path d="M1024.002358 1024H0.002358V0h1024v1024z m-1021.804716-2.195284h1019.609433V2.195284H2.197642v1019.609432z" fill="#FFFFFF" p-id="1525"></path><path d="M411.829832 330.730879a38.118106 10.277919 57.6 1 0 17.355867-11.014368 38.118106 10.277919 57.6 1 0-17.355867 11.014368Z" fill="#040000" p-id="1526"></path><path d="M480.669675 609.989476c11.774703-25.844475 27.740401-51.788735 44.60417-73.342429 13.770415-17.462483 29.237186-33.92711 47.897096-44.803742 17.262912-10.078347 35.324108-13.67063 54.283376-6.58585 11.974274 4.390567 23.948548 14.468914 33.128825 24.547261 14.369129 15.865913 25.145975 34.625609 34.725394 53.684662 4.290782 8.581563 17.262912 0.997856 12.972131-7.583707-15.167414-30.334828-35.224323-63.763009-66.157864-80.327421-21.054765-11.37556-44.504385-11.475346-66.157864-1.895927-21.054765 9.280062-38.617034 25.644904-53.485091 42.907815-14.468914 16.863769-27.041902 35.324108-38.217891 54.582733-5.887351 10.178133-11.674917 20.555837-16.464627 31.232898-1.696355 3.692068-0.997856 7.982849 2.694212 10.277918 3.19314 1.895927 8.581563 0.898071 10.178133-2.694211z" fill="#040000" p-id="1527"></path><path d="M663.863649 338.091735a14.468914 33.727538 30 1 0 33.727538-58.417811 14.468914 33.727538 30 1 0-33.727538 58.417811Z" fill="#040000" p-id="1528"></path></svg>'},{name:"6",icon:'<svg t="1624457794933" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1680" ><path d="M762.9 77.4H261.1L10.2 512l250.9 434.6h501.8L1013.8 512z" fill="#83CEE3" p-id="1681"></path><path d="M369 375.8m-34.6 0a34.6 34.6 0 1 0 69.2 0 34.6 34.6 0 1 0-69.2 0Z" fill="#040000" p-id="1682"></path><path d="M369 411.7c-19.8 0-36-16.1-36-36s16.1-36 36-36 36 16.1 36 36-16.1 36-36 36z m0-69.1c-18.3 0-33.2 14.9-33.2 33.2S350.7 409 369 409s33.2-14.9 33.2-33.2-14.9-33.2-33.2-33.2z" fill="#FFFFFF" p-id="1683"></path><path d="M672.2 333.6c-15.1 7.6-30.2 15.6-44.3 25-5.9 3.9-17 10.4-14.6 19.1 1.8 6.5 12 11.2 17.3 14.3 15.7 9.3 32.1 17.6 48.3 25.9 8.6 4.4 16.2-8.5 7.6-13-14.1-7.3-28.3-14.5-42.1-22.3-3.9-2.2-7.9-4.5-11.7-6.9-1.2-0.8-2.4-1.5-3.5-2.4-0.6-0.4-1.1-0.8-1.6-1.2 2.2 1.7-0.3-0.3-0.3-0.3-0.9 0.1-1.5-3.2-0.2 0.5 0.9 2.4 1.1 3.8 0.3 5.8 0.6-1.5-0.9 0.8-0.1 0 0.5-0.5 1-1.1 1.6-1.6 0.5-0.5 1-0.9 1.6-1.3 0.6-0.5 0 0 1.2-0.9 1.7-1.3 3.5-2.5 5.3-3.6 8.4-5.5 17.2-10.4 26-15.2 5.6-3 11.2-6 16.8-8.9 8.6-4.4 1-17.3-7.6-13zM578.2 720.9c-12.5-96.7-33.3-154.7-55.6-155.6-8.8 3.9-22.3 17.5-37.7 60.1-10.8 29.8-18.4 62.2-23 81.6-1.2 5.1-2.1 9.1-2.9 11.8l-9.3-2.4c0.7-2.6 1.6-6.6 2.8-11.6 14.9-63 36-136.8 67.5-148.8l0.8-0.3h0.8c18.2-0.4 33.2 19.5 45.8 60.8 10.2 33.3 16.7 74.6 20.5 103.3l-9.7 1.1z" fill="#040000" p-id="1684"></path></svg>'},{name:"7",icon:'<svg t="1624457802025" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1838" ><path d="M762.9 77.4H261.1L10.2 512l250.9 434.6h501.8L1013.8 512z" fill="#8CC66D" p-id="1839"></path><path d="M375.778679 404.47473a14.5 33.8 30 1 0 33.8-58.543317 14.5 33.8 30 1 0-33.8 58.543317Z" fill="#040000" p-id="1840"></path><path d="M627.220263 374.211388a43.1 11.6 57.6 1 0 19.588408-12.431182 43.1 11.6 57.6 1 0-19.588408 12.431182Z" fill="#040000" p-id="1841"></path><path d="M451.1 548.5c17.6-9.3 63.9-30 105.3-16.2 17 20.3 32.7 98.8 28.8 138.1-27.5 10.2-82.5 10.2-106.1 5.8-8.3-10.5-32.7-81.8-35.3-114.6-0.4-5.5 2.5-10.6 7.3-13.1z" fill="#040000" p-id="1842"></path></svg>'},{name:"8",icon:'<svg t="1624457816632" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1996" ><path d="M762.9 77.4H261.1L10.2 512l250.9 434.6h501.8L1013.8 512z" fill="#5A74B8" p-id="1997"></path><path d="M357.7 400m-34.6 0a34.6 34.6 0 1 0 69.2 0 34.6 34.6 0 1 0-69.2 0Z" fill="#040000" p-id="1998"></path><path d="M357.7 436c-19.8 0-36-16.1-36-36s16.1-36 36-36 36 16.1 36 36-16.2 36-36 36z m0-69.2c-18.3 0-33.2 14.9-33.2 33.2s14.9 33.2 33.2 33.2 33.2-14.9 33.2-33.2-14.9-33.2-33.2-33.2z" fill="#FFFFFF" p-id="1999"></path><path d="M676 400m-34.6 0a34.6 34.6 0 1 0 69.2 0 34.6 34.6 0 1 0-69.2 0Z" fill="#040000" p-id="2000"></path><path d="M676 436c-19.8 0-36-16.1-36-36s16.1-36 36-36 36 16.1 36 36-16.2 36-36 36z m0-69.2c-18.3 0-33.2 14.9-33.2 33.2s14.9 33.2 33.2 33.2c18.3 0 33.2-14.9 33.2-33.2s-14.9-33.2-33.2-33.2z" fill="#FFFFFF" p-id="2001"></path><path d="M347.6 684.1c0.3-0.9 0.6-1.7 0.9-2.6 0.2-0.5 1.4-3.2 0.3-0.8 0.6-1.4 1.3-2.9 2-4.3 3.2-6.3 6-10.7 10.9-15.3 4.3-4 10.8-7.5 17.1-6.1 3.9 0.9 7.9 4.9 11.1 7.2 3.1 2.2 6.3 4.5 9.7 6.2 7.5 3.8 15.3 4.4 23.4 1.9 4.7-1.5 9.2-3.6 13.6-5.9 5-2.6 10.7-5 14.2-9.5 4.5-5.7 6.1-8.5 11.4-14.1 1-1 2-2 3.1-3 0.2-0.2 2.2-1.7 0.6-0.5 0.6-0.4 1.2-0.9 1.8-1.3 1-0.6 2.1-1.3 3.2-1.7-2 0.8 0.2 0 0.6-0.1 2.3-0.7-0.3-0.2 1.2-0.3 2.8-0.1 3.6 0 5.5 1 3.8 1.9 6.6 4.7 9.5 7.8 4.5 5 7.5 11.1 11.7 16.2 1.8 2.2 3.7 4.3 5.4 6.5 8.1 10.3 17.7 22.2 32.2 22 8.8-0.1 16.6-5.2 22.6-11.2 4.2-4.1 7.7-8.9 11-13.7 2.9-4.2 4.6-9.9 6.2-13.5 3.2-7.1 7.2-13.1 13-18.1 4.8-4.2 11.1-6.5 16.7-5.3 10.5 2.4 17.2 12.1 23.1 20.2 4.7 6.5 9.8 13 16 18.2 7.8 6.4 17.1 11.4 27.5 11.1 14.1-0.4 25.5-9.5 34.2-19.9 3-3.6 3.6-8.8 0-12.4-3.1-3.1-9.4-3.7-12.4 0-6.3 7.6-14.7 15.9-24.9 14.7-2.2-0.3-5.3-1.5-7.9-3.1-3.5-2.1-6.1-4.4-9.1-7.5-4.9-5.1-6.8-8.1-10.9-13.8-7.3-10.1-16.1-19.6-28.2-23.7-18.5-6.3-35.7 5.6-46 20.1-2.4 3.3-4.4 6.9-6.1 10.6-1.8 3.9-2.7 8.5-5.2 11.9-3.1 4.4-6.2 8.8-10.2 12.5-3 2.8-5.7 4.4-8.6 5.1-0.4 0.1-1.7 0.1 0.1 0h-2.2c2.1 0.1 0 0-0.5-0.1-0.7-0.2-1.4-0.4-2-0.6 1.8 0.7-1.8-1.1-2.4-1.5l-1.2-0.9c1.5 1.2-0.9-0.9-1.2-1.1-4.7-4.3-8.4-9.5-12.3-14.4-10.9-13.6-20.9-34-41-34.9-14.2-0.6-24.5 10.6-32.4 20.8-1.2 1.6-2.5 3.2-3.7 4.8-1.5 1.9 1.1-1.4-0.4 0.5-0.4 0.5-0.8 1.2-1.3 1.6-1.7 1.4-4.6 2.6-6.6 3.6-2.9 1.6-5.9 3.2-9 4.5-1.6 0.7-3.4 1.2-5.1 1.7-2.2 0.6-0.7 0.5-2.8 0.4-2.8 0-3.9-0.4-6.6-1.9-3.9-2.2-7.5-4.9-11.1-7.5-5.6-4-10-6.9-17-7.5-10.5-0.9-20.3 3.2-28.2 9.9-9.4 8.1-16.4 20.2-20.1 32-3.6 11.2 13.3 15.8 16.8 5.1z" fill="#040000" p-id="2002"></path></svg>'},{name:"9",icon:'<svg t="1624457826949" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2156" ><path d="M762.9 77.4H261.1L10.2 512l250.9 434.6h501.8L1013.8 512z" fill="#F0884F" p-id="2157"></path><path d="M287.2 382c6.4 2.3 11.6-3.7 15.4-7.9 5.1-5.5 10.2-11 16-15.9 0.8-0.7 1.7-1.4 2.5-2.1 1.2-0.9-1.7 1.3 0.2-0.2l1.2-0.9c2.1-1.5 4.3-2.9 6.5-4.3 2-1.2 4-2.2 6.1-3.2 0.6-0.3 1.2-0.6 1.9-0.9-0.3 0.2-1.5 0.6 0.2-0.1 1.3-0.5 2.6-1 4-1.5 11.2-3.7 21.8-4 33.4-1.1 19.5 4.9 36.4 17 51.2 30.2 8.6 7.7 21.4-5 12.7-12.7-25.2-22.6-57.1-42.1-92.2-36.2-20.4 3.4-37.7 16.1-51.6 30.9-2.3 2.4-4.5 5-6.8 7.4-0.7 0.7-1.9 1.5-2.4 2.4-0.5 0.8 2.3-1.5 0.8-0.7 1.3-0.7 3.9-1.4 5.8-0.7-11.1-3.7-15.8 13.7-4.9 17.5zM598 382c6.4 2.3 11.6-3.7 15.4-7.9 5.1-5.5 10.2-11 16-15.9 0.8-0.7 1.7-1.4 2.5-2.1 1.2-0.9-1.7 1.3 0.2-0.2l1.2-0.9c2.1-1.5 4.3-2.9 6.5-4.3 2-1.2 4-2.2 6.1-3.2 0.6-0.3 1.2-0.6 1.9-0.9-0.3 0.2-1.5 0.6 0.2-0.1 1.3-0.5 2.6-1 4-1.5 11.2-3.7 21.8-4 33.4-1.1 19.5 4.9 36.4 17 51.2 30.2 8.6 7.7 21.4-5 12.7-12.7-25.2-22.6-57.1-42.1-92.2-36.2-20.4 3.4-37.7 16.1-51.6 30.9-2.3 2.4-4.5 5-6.8 7.4-0.7 0.7-1.9 1.5-2.4 2.4-0.5 0.8 2.3-1.5 0.8-0.7 1.3-0.7 3.9-1.4 5.8-0.7-11.1-3.7-15.8 13.7-4.9 17.5zM505.9 527.1c3.4 0.7 6.8 1.7 10.2 2.8 6.7 2.2 10.4 3.5 16.6 7.7 1.6 1.1-0.5-0.5 0.6 0.5 0.6 0.5 1.1 1.1 1.7 1.6 1.5 1.4-0.1-0.4 0.5 0.6 0.4 0.6 0.7 1.2 1 1.8-1-2 0.1 0 0 0.5 0.1-2-0.1 0-0.1 0-0.1 0.8 0 0.7 0.1-0.5-0.1 0.4-0.1 0.7-0.3 1.1-0.6 1 0.7-0.9-0.4 1-1.6 2.5-4.6 5.4-8.1 7.8-6.8 4.6-14.4 8.2-22 11.4-7 3-7.4 11.9 0 14.8 7.4 2.8 15 5.3 22.4 8.1 3.1 1.1 4.2 1.5 6.9 2.9 1.1 0.6 2.1 1.2 3.2 1.8 1.2 0.8-0.7-0.5 0.1 0 0.4 0.3 0.8 0.7 1.1 1.1 0.6 0.8-1.1-1.2-0.2-0.2 0.8 0.9-0.3-1.4-0.1-0.2 0.1 0.9 0.2-1.9 0-0.9-0.1 0.5-0.8 1.8 0 0.2-0.2 0.5-0.5 1-0.8 1.4-0.3 0.3-0.9 1.3-0.3 0.5-0.5 0.7-1.1 1.3-1.7 1.9-6.9 7.3-15.9 12.8-24.4 18.1-8.3 5.3-0.6 18.5 7.7 13.2 9.9-6.3 20.9-12.8 28.6-21.8 4.8-5.5 8.1-12.9 4.2-19.9-3.4-6-10.5-8.9-16.6-11.4-8.6-3.5-17.5-6.2-26.2-9.5v14.8c14.4-6.1 47.2-18.8 41.2-40.3-3.5-12.9-19.4-18.9-30.8-22.6-3.4-1.1-6.9-2.1-10.5-2.9-9.1-2.2-13.3 12.5-3.6 14.6z" fill="#040000" p-id="2158"></path></svg>'},{name:"10",icon:'<svg t="1624457835383" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2312" ><path d="M762.9 77.4H261.1L10.2 512l250.9 434.6h501.8L1013.8 512z" fill="#F6F180" p-id="2313"></path><path d="M342.9 400.6m-29.5 0a29.5 29.5 0 1 0 59 0 29.5 29.5 0 1 0-59 0Z" fill="#040000" p-id="2314"></path><path d="M342.9 431.3c-16.9 0-30.7-13.8-30.7-30.7s13.8-30.7 30.7-30.7 30.7 13.8 30.7 30.7-13.7 30.7-30.7 30.7z m0-59c-15.6 0-28.3 12.7-28.3 28.3s12.7 28.3 28.3 28.3 28.3-12.7 28.3-28.3-12.6-28.3-28.3-28.3z" fill="#FFFFFF" p-id="2315"></path><path d="M702 400.6m-29.5 0a29.5 29.5 0 1 0 59 0 29.5 29.5 0 1 0-59 0Z" fill="#040000" p-id="2316"></path><path d="M702 431.3c-16.9 0-30.7-13.8-30.7-30.7s13.8-30.7 30.7-30.7 30.7 13.8 30.7 30.7-13.8 30.7-30.7 30.7z m0-59c-15.6 0-28.3 12.7-28.3 28.3s12.7 28.3 28.3 28.3 28.3-12.7 28.3-28.3-12.7-28.3-28.3-28.3z" fill="#FFFFFF" p-id="2317"></path><path d="M358.7 519.9c20 22 45.5 40.4 71.3 54.8 51.2 28.5 111.7 39.9 168 19.5 44.3-16.1 80.7-47.8 110.2-83.9 3-3.7 3.6-8.9 0-12.5-3.1-3.1-9.5-3.7-12.5 0-25.5 31.4-56.2 59.7-93.7 76-27.1 11.7-56.6 15.7-85.8 12.2-24.7-2.9-49.5-11.8-71.5-23.4-18.7-9.8-36.6-22.2-51.1-34.3-7.8-6.5-15.5-13.3-22.4-20.9-7.7-8.5-20.1 4.1-12.5 12.5z" p-id="2318"></path></svg>'},{name:"11",icon:'<svg t="1624457841751" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2472" ><path d="M48.2 844.9c-68.5-210.6 186-782.1 409.1-795.4 6.3-0.4 12.5 0.2 18.6 1.6C665.1 94.6 985.4 515 987.1 821.3c0.1 20-12.9 37.9-22.4 43.1-162.7 89.8-605.8 179.7-884.4 30.9-15-7.9-24.2-26.1-32.1-50.4z" fill="#F0884F" p-id="2473"></path><path d="M401 352.1m-52.4 0a52.4 52.4 0 1 0 104.8 0 52.4 52.4 0 1 0-104.8 0Z" fill="#FFFFFF" p-id="2474"></path><path d="M408.7 329m-29.3 0a29.3 29.3 0 1 0 58.6 0 29.3 29.3 0 1 0-58.6 0Z" fill="#040000" p-id="2475"></path><path d="M527.5 352.1m-52.4 0a52.4 52.4 0 1 0 104.8 0 52.4 52.4 0 1 0-104.8 0Z" fill="#FFFFFF" p-id="2476"></path><path d="M527.5 329m-29.3 0a29.3 29.3 0 1 0 58.6 0 29.3 29.3 0 1 0-58.6 0Z" fill="#040000" p-id="2477"></path><path d="M450.7 517c1.1-8.2 3.2-16.4 6.1-24.1 0.1-0.3 1-2.5 0.5-1.4s0.3-0.7 0.5-1c0.7-1.4 1.4-2.8 2.2-4.1 0.4-0.8 2.8-3.9 1.3-2.1 0.8-1 1.7-1.9 2.6-2.8 1-1-1.5 1 0.1 0 0.5-0.3 1-0.6 1.5-0.8-1.3 0.7-1.2 0.3 0 0.1 1.9-0.3-1.8 0.3 0.1 0 1.2-0.2 1.5 0.3 0-0.1 0.6 0.2 1.3 0.3 1.9 0.5 0.3 0.1-1.3-0.7 0.2 0.1 0.8 0.5 1.6 0.9 2.4 1.4 1.4 1 0-0.1 1.4 1.1 0.9 0.8 1.8 1.7 2.6 2.6 1.8 1.9 3.5 3.9 5 6.1 5.1 7.1 9.3 14.8 13.2 22.6 3.5 6.9 13.7 4.7 15.8-2.1 2.6-8.7 4.8-17.4 7.4-26.1 0.9-3.2 1.9-6.4 3.2-9.4-0.7 1.6 0.8-1.6 1.2-2.2l0.9-1.5c0.7-1.2-1.4 0.7 0.1-0.1 1.7-0.9-1.2 0.3-0.3 0.1 0.8-0.2 1-1.2 0.3-0.3-0.6 0.8 0.6 0-0.5 0.2-2 0.3 2.4 0.5-1.1 0 0.5 0.1 1.2 0.2 1.6 0.4-1.1-0.8-0.8-0.4 0.2 0.2 0.7 0.4 3.4 2.3 2.7 1.8 8.9 7.1 15.9 16.9 22.5 26 2.8 3.8 7.5 5.6 11.8 3.1 3.7-2.2 5.9-8 3.1-11.8-8.2-11.1-16.6-23-27.7-31.4-6.3-4.7-14.5-7.6-21.7-3-6.7 4.2-9.6 12.5-11.9 19.6-3.2 9.9-5.5 20-8.6 29.9 5.3-0.7 10.5-1.4 15.8-2.1-7.8-15.5-24.8-50.1-48-41.7-14.1 5.1-19.7 23-22.9 36.2-0.9 3.8-1.8 7.7-2.3 11.6-0.6 4.6 1.1 9.3 6 10.6 4.2 1 10.2-1.5 10.8-6.1z" fill="#040000" p-id="2478"></path></svg>'},{name:"12",icon:'<svg t="1624457847424" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2632" ><path d="M485.538528 993.072489a362.00362 481.804818 3.149 1 0 52.933731-962.15464 362.00362 481.804818 3.149 1 0-52.933731 962.15464Z" fill="#AADCF0" p-id="2633"></path><path d="M688.2 334.1c-15.1 7.6-30.2 15.6-44.3 25-5.9 3.9-17 10.4-14.6 19.1 1.8 6.5 12 11.2 17.3 14.3 15.7 9.3 32.1 17.6 48.3 25.9 8.6 4.4 16.2-8.5 7.6-13-14.1-7.3-28.3-14.5-42.1-22.3-3.9-2.2-7.9-4.5-11.7-6.9-1.2-0.8-2.4-1.5-3.5-2.4-0.6-0.4-1.1-0.8-1.6-1.2 2.2 1.7-0.3-0.3-0.3-0.3-0.9 0.1-1.5-3.2-0.2 0.5 0.9 2.4 1.1 3.8 0.3 5.8 0.6-1.5-0.9 0.8-0.1 0 0.5-0.5 1-1.1 1.6-1.6 0.5-0.5 1-0.9 1.6-1.3 0.6-0.5 0 0 1.2-0.9 1.7-1.3 3.5-2.5 5.3-3.6 8.4-5.5 17.2-10.4 26-15.2 5.6-3 11.2-6 16.8-8.9 8.6-4.4 1-17.4-7.6-13zM375.8 347c13.4 6.8 26.7 14 39.5 21.9 1.8 1.2 3.7 2.3 5.5 3.5 0.9 0.6 1.7 1.2 2.6 1.8 0.9 0.6 1.9 1.4 1.6 1.1 1.1 0.9 2.1 1.9 3.1 2.8 1.2 1 0-0.3 0.1 0 0-0.2-0.8-2.4-0.3-4.1 1.5-5.5 2.3-2.7 0.8-2-0.4 0.2-0.9 0.8-1.3 1.1 1.7-1.4-1.6 1.1-2.3 1.6-3.4 2.3-6.9 4.4-10.4 6.4-14.9 8.6-30.3 16.4-45.6 24.3-8.6 4.4-1 17.4 7.6 13 15-7.7 30.1-15.4 44.8-23.8 6.2-3.6 13.8-7.3 18.7-12.7 7.6-8.3-3.8-16.6-9.9-20.9-8.7-6.1-18-11.3-27.3-16.4-6.5-3.6-13-7.1-19.6-10.4-8.6-4.5-16.3 8.5-7.6 12.8zM412.8 570.9c13.5 7.7 28.5 13.3 43.3 17.9 29.8 9.2 61.7 13.1 92.6 7.3 20.6-3.9 40-12.5 56.6-25.2 2.8-2.2 4.3-5.6 2.3-9-1.6-2.8-6.2-4.5-9-2.3-48.3 36.9-113.3 30-165.6 6.7-4.6-2.1-9.2-4.2-13.7-6.7-7.3-4.2-13.9 7.2-6.5 11.3z" fill="#040000" p-id="2634"></path><path d="M644.6 505.2c-30.1 21.5-60.6 62.5-39.1 99.8 10.7 18.6 30.3 30.9 49.1 40.1 7.8 3.8 14.6-7.9 6.8-11.7-23.6-11.5-53.7-31.4-49.4-60.9 2.8-18.9 15.8-34.6 29.5-47.2 2.5-2.3 5.1-4.6 7.8-6.7 0.5-0.4 0.9-0.7 1.4-1.1-0.4 0.3-1.2 0.9-0.1 0.1l0.9-0.6c6.9-5.1 0.2-16.8-6.9-11.8z" fill="#040000" p-id="2635"></path></svg>'},{name:"13",icon:'<svg t="1624457855182" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2789" ><path d="M235.1 76.9c75.6-26.5 297.3-90.1 514.2-16.6 16.3 5.5 29.8 17.4 37.1 33 57.5 122.4 127.1 602.1 62.1 785.6a62.58 62.58 0 0 1-32.5 35.8c-109.5 51.8-428.1 136.7-609.3 37.2-14.4-7.9-25-21.3-29.7-37.1-41.9-140.6-37-627.7 19.1-798 6.1-18.7 20.5-33.4 39-39.9z" fill="#F9DABD" p-id="2790"></path><path d="M392.2 360.2m-35.2 0a35.2 35.2 0 1 0 70.4 0 35.2 35.2 0 1 0-70.4 0Z" fill="#040000" p-id="2791"></path><path d="M618.6 360.2m-35.2 0a35.2 35.2 0 1 0 70.4 0 35.2 35.2 0 1 0-70.4 0Z" fill="#040000" p-id="2792"></path><path d="M512 562.6c-36 0-65.3-29.3-65.3-65.3S476 432 512 432s65.3 29.3 65.3 65.3-29.3 65.3-65.3 65.3z m0-122.9c-31.7 0-57.6 25.8-57.6 57.6s25.8 57.6 57.6 57.6c31.7 0 57.6-25.8 57.6-57.6s-25.9-57.6-57.6-57.6z" fill="#040000" p-id="2793"></path></svg>'},{name:"14",icon:'<svg t="1624457863444" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2947" ><path d="M178.1 971.5c38.1 15.9 98.7 26.6 171.3-12.3 3.7-2 8.4-1.6 11.6 1.1 43.3 35.9 123.3 80.8 236 10.9 3.8-2.4 8.7-2.4 12.6-0.2 41.8 23.9 191.6 58.2 246.6 14.2 4.4-3.5 9.1-6.6 14.5-8.5C1065 909.5 678.2-652 194.3 351c-37.5 77.8-38.4 94.1-71.9 211.3-27.6 96.3-29.1 231.3 1.4 348.1 7.2 27.3 27.3 49.9 54.3 61.1z" fill="#ABAAAA" p-id="2948"></path><path d="M468.9 349H418c-6.1 0-11.1-5-11.1-11.1V336c0-6.1 5-11.1 11.1-11.1h50.9c6.1 0 11.1 5 11.1 11.1v1.9c0 6.1-5 11.1-11.1 11.1zM643 471.9H390c-6.6 0-12-5.4-12-12s5.4-12 12-12h253c6.6 0 12 5.4 12 12s-5.4 12-12 12zM609 349h-61.2c-6 0-11-4.9-11-11v-2.1c0-6 4.9-11 11-11H609c6 0 11 4.9 11 11v2.1c0 6.1-4.9 11-11 11z" fill="#040000" p-id="2949"></path></svg>'},{name:"15",icon:'<svg t="1624457870536" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3103" ><path d="M673.1 318.7c3.7-17.5 5.6-35.7 5.6-54.4 0-137.9-105.5-249.7-235.6-249.7S207.4 126.4 207.4 264.3c0 55.4 17.1 106.7 45.9 148.1-55.2 63.3-88.6 145.9-88.6 236.3 0 199.2 162.1 360.6 362.1 360.6 200 0 362.1-161.5 362.1-360.6 0.1-147.3-88.7-274-215.8-330z" fill="#4F8A54" p-id="3104"></path><path d="M392 246.2m-47.1 0a47.1 47.1 0 1 0 94.2 0 47.1 47.1 0 1 0-94.2 0Z" fill="#FFFFFF" p-id="3105"></path><path d="M386 252.8m-26.4 0a26.4 26.4 0 1 0 52.8 0 26.4 26.4 0 1 0-52.8 0Z" fill="#040000" p-id="3106"></path><path d="M505.6 246.2m-47.1 0a47.1 47.1 0 1 0 94.2 0 47.1 47.1 0 1 0-94.2 0Z" fill="#FFFFFF" p-id="3107"></path><path d="M501.4 252.8m-26.4 0a26.4 26.4 0 1 0 52.8 0 26.4 26.4 0 1 0-52.8 0Z" fill="#040000" p-id="3108"></path><path d="M474.3 364.8h-50.9c-6.1 0-11.1-5-11.1-11.1v-1.9c0-6.1 5-11.1 11.1-11.1h50.9c6.1 0 11.1 5 11.1 11.1v1.9c0 6.2-5 11.1-11.1 11.1z" fill="#040000" p-id="3109"></path></svg>'},{name:"16",icon:'<svg t="1624457876371" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3263" ><path d="M246.4 227.6c-166.9 101.1-461.9 344 87 564.1 1.5 0.6 2.9 1.1 4.4 1.6 80.7 27.7 392.8 165.4 641-198.1 40-58.6 38.5-136.2-3.7-193.3C892 289.5 727 201.1 429.1 182.7c-64.1-4-127.8 11.6-182.7 44.9z" fill="#CF92BE" p-id="3264"></path><path d="M617.1 393.4c-17.4 8.8-34.9 18.1-51.2 28.9-6.9 4.6-20.3 12.3-17.4 22.6 1.2 4.3 5.6 7 9 9.5 3.7 2.7 7.6 5 11.5 7.3 18.2 10.8 37.1 20.3 55.9 30 10 5.1 18.9-10 8.8-15.1-16.4-8.4-32.9-16.9-49-26-4.5-2.6-9.1-5.2-13.5-8l-4.5-3c-0.7-0.5-1.3-1-2-1.5 1.6 1.2 0.7 0.4-0.2-0.2-1.3-0.9-0.3-0.9-0.5-0.3 0.2 0.2 0.4 0.5 0.6 0.7 1 1.9 1.3 3.7 0.8 5.7 0.1-0.6 0.7-1.4-0.6 1.3 0.7-1.5-0.1 0-0.2 0.1 0.6-0.6 1.2-1.3 1.9-1.9l1.8-1.5c1.8-1.6-0.6 0.3 1.2-0.9 2-1.5 4.1-2.9 6.2-4.3 10-6.5 20.4-12.4 30.9-18 6.5-3.5 13.1-7 19.7-10.4 9.6-5 0.8-20.1-9.2-15zM323.1 408.5c15.9 8.1 31.7 16.5 46.8 26 2.2 1.4 4.3 2.8 6.5 4.2 1 0.7 1.9 1.3 2.8 2 0.5 0.3 1 0.7 1.4 1.1-1.1-0.9-0.3-0.3 0.3 0.3 1.1 1 2.2 2.2 3.3 3.1 1.4 1.1-1-1.7-0.1-0.1-0.6-1.1-0.9-4.1 0.3-6.7 2.2-4.8 0.7 0.1 0-0.5 0 0-1.1 0.9-1.3 1 2.3-1.9 0 0-0.5 0.4-0.8 0.5-1.5 1.1-2.3 1.6-4 2.7-8.1 5.1-12.3 7.5-17.3 10-35.1 19.1-52.8 28.2-10 5.1-1.2 20.2 8.8 15.1 17.5-9 35-17.9 52-27.7 7.3-4.2 15.9-8.6 21.8-14.7 9.3-9.7-4.3-19.7-11.5-24.7-10.1-7.1-20.9-13.1-31.7-19-7.6-4.2-15.2-8.2-22.9-12.1-9.7-5.2-18.6 9.9-8.6 15zM513 592.1c-12.2 0-24.6-1.4-36.3-4.3-8-2-13.9-8.2-15.4-16.2s1.7-15.8 8.4-20.5c23.2-16.3 60.5-31.9 106.2-13 6.4 2.6 11 8.3 12.3 15.1 1.3 6.7-0.8 13.6-5.7 18.3-13.5 13.1-40.9 20.6-69.5 20.6z m-37.4-32.5c-3.4 2.4-4.9 6.2-4.2 10.2 0.8 4.1 3.6 7.1 7.7 8.1 39.1 9.7 81.2 0.7 96.1-13.7 2.4-2.3 3.4-5.6 2.7-8.9-0.7-3.4-2.9-6.2-6.1-7.5-41.2-17.2-75.1-3.1-96.2 11.8z" fill="#040000" p-id="3265"></path></svg>'},{name:"17",icon:'<svg t="1624457881793" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3419" ><path d="M1008.6 465.7c0-124.9-95.5-226.2-213.4-226.2-12 0-23.8 1.1-35.2 3.1v-3.1c0-124.9-95.5-226.2-213.4-226.2S333.4 114.6 333.4 239.5c0 2.4 0 4.8 0.1 7.2-17.1-4.7-35-7.2-53.4-7.2-117.8 0-213.4 101.3-213.4 226.2 0 92.1 51.9 171.3 126.3 206.6-13.7 29.9-21.4 63.4-21.4 98.8 0 124.9 95.5 226.2 213.4 226.2 68.8 0 130-34.5 169-88.1 39 53.6 100.2 88.1 169 88.1 117.8 0 213.4-101.3 213.4-226.2 0-41.2-10.4-79.9-28.6-113.1 60.5-39.9 100.8-111.1 100.8-192.3z" fill="#8CC66D" p-id="3420"></path><path d="M437.8 400.7m-24.7 0a24.7 24.7 0 1 0 49.4 0 24.7 24.7 0 1 0-49.4 0Z" fill="#040000" p-id="3421"></path><path d="M649.7 400.7m-24.7 0a24.7 24.7 0 1 0 49.4 0 24.7 24.7 0 1 0-49.4 0Z" fill="#040000" p-id="3422"></path><path d="M527.3 625.9c6.3-14.2 13.1-28.3 17.9-43 6.2-19 8.3-38.6 10.5-58.3l2.1-19.2c0.7-6.2-9-6.1-9.7 0-1.7 16.3-2.8 32.8-5.7 48.9-4.2 23.7-13.8 45-23.5 66.7-2.5 5.6 5.9 10.5 8.4 4.9z" fill="#252525" p-id="3423"></path><path d="M447.7 522.3c20.3-0.1 40.6-0.2 61-0.4l96.6-0.6c7.5 0 14.9-0.1 22.4-0.1 16.6-0.1 16.7-25.9 0-25.8-20.3 0.1-40.6 0.2-61 0.4l-96.6 0.6c-7.5 0-14.9 0.1-22.4 0.1-16.6 0.1-16.7 25.9 0 25.8z" fill="#040000" p-id="3424"></path><path d="M495.4 508.2c-10.3 3.8-9.2 20.9-9.2 29.5 0.1 16 2.1 32.3 6.1 47.8 3.5 13.7 8.7 29.9 20.6 38.7 12.9 9.5 27.6 2.1 37.6-7.9 10.2-10.3 17.8-23 24.7-35.6 11.6-21.3 20.9-43.8 29.7-66.4 3-7.8-9.5-11.1-12.5-3.4-7.4 19.1-15.3 38.1-24.7 56.4-5.9 11.5-12.2 23-20.3 33.1-2.8 3.5-5.8 6.9-9.2 9.8-1.9 1.7-1.4 1.3-3.3 2.5-1.3 0.8-2.6 1.6-3.9 2.2-0.7 0.3 1-0.2-0.8 0.3-0.6 0.2-1.2 0.3-1.8 0.5-1.1 0.3-1.2 0.2-0.5 0.1-0.6 0-1.3 0-1.9 0.1-2.2 0.1 0.6 0.5-1.8-0.2l-1.8-0.6c1.5 0.5 0.2 0.1-0.5-0.3-0.8-0.5-2.9-2.1-1.7-1.1-1-0.9-2-1.7-2.8-2.7-0.4-0.5-0.9-1-1.3-1.5 0.4 0.5 0.1 0.2-0.5-0.7-0.8-1.3-1.7-2.5-2.4-3.9-0.7-1.3-1.4-2.5-2-3.8-0.4-0.8-0.8-1.6-1.1-2.4-0.1-0.2-0.5-1.1 0 0l-0.6-1.5a86.8 86.8 0 0 1-3.3-9.8c-4.4-14.9-6.2-27.9-6.8-42.8-0.3-6.6-0.3-13.1 0.4-19.7 0.2-1.5-0.3 1.5 0.1-0.5l0.3-1.8c0.2-0.9 0.5-1.8 0.7-2.8 0.4-1.9-0.7 1.1 0.3-0.7 0.5-1-1.3 1.2-0.3 0.5-0.3 0.3-1.1 0.8-2 1.1 7.7-2.9 4.3-15.4-3.5-12.5z" fill="#040000" p-id="3425"></path></svg>'},{name:"18",icon:'<svg t="1624457899440" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3579" ><path d="M75.4 739.8c-78.7-134.4-194-455.7 401.4-579.6 9.8-2 19.2-6.2 29.2-7.5C656.8 133 947.3 205 1000.1 578.4c42.6 223.8 29.7 392.1-822 233.6-43.1-8-80.6-34.4-102.7-72.2z" fill="#F09495" p-id="3580"></path><path d="M704.6 875.4c-129 0-301.8-20.5-526.6-62.3-43.5-8.1-81.2-34.6-103.5-72.7-19.3-32.9-44.8-84.3-57.1-142.5-13.9-65.1-8.8-125.3 15.1-179.2 54.3-122.3 203.7-209.6 444-259.6 4.1-0.9 8.3-2.1 12.3-3.4 5.5-1.7 11.1-3.4 16.9-4.2 29-3.8 75.7-5.9 133.8 5.7 54.5 10.9 105.3 31 150.8 59.9C843.7 251 888.2 296 922.7 351c39.7 63.1 66.1 139.6 78.5 227.3 8.1 42.4 15.2 87.3 12.5 127.9-2.8 42.6-16.4 75.5-41.5 100.7-42.5 42.7-120.3 65-237.8 68.1-9.6 0.2-19.6 0.4-29.8 0.4zM76.3 739.3c22 37.6 59.2 63.7 102.1 71.7 242.5 45.1 424.4 65.3 556.1 61.9 116.9-3.1 194.1-25.2 236.3-67.5 55.4-55.6 44.4-142.5 28.3-226.7C976 415.8 903.4 291.5 789.2 219c-124-78.7-248.1-69.9-283.2-65.3-5.6 0.7-11.2 2.4-16.6 4.1-4.1 1.2-8.3 2.5-12.5 3.4C237.3 211.1 88.5 298 34.5 419.6c-54.6 122.8 2.8 253 41.8 319.7z" fill="#FFFFFF" p-id="3581"></path><path d="M424.1 442.5m-24.7 0a24.7 24.7 0 1 0 49.4 0 24.7 24.7 0 1 0-49.4 0Z" fill="#040000" p-id="3582"></path><path d="M635.9 442.5m-24.7 0a24.7 24.7 0 1 0 49.4 0 24.7 24.7 0 1 0-49.4 0Z" fill="#040000" p-id="3583"></path><path d="M426.2 543.3c17.1 7.9 36.6 26 25.5 46.1-6.9 12.5-19.8 21.2-31.7 28.4-4.5 2.7-0.4 9.8 4.1 7.1 17.4-10.5 41.6-27.6 39-51.1-1.6-14-12.4-24.8-23.5-32.3-3-2-6.1-3.9-9.3-5.4-4.8-2.1-8.9 5-4.1 7.2zM629.5 535.4c-21.8 11.7-40.6 37-25.7 61.3 8.2 13.4 22.2 22.7 35.7 30.3 4.7 2.7 8.9-4.6 4.2-7.2-15.5-8.7-39.9-23.9-36.9-45.2 1.6-11.4 10.7-20.7 19.6-27.2 2.4-1.7 4.8-3.4 7.4-4.8 4.7-2.5 0.4-9.8-4.3-7.2z" fill="#040000" p-id="3584"></path><path d="M457.2 584.6c25.6 25.6 66.7 41 101.8 28.3 18.2-6.6 33.2-19.1 45.5-33.8 4.2-5.1-3-12.4-7.3-7.3-18.5 22-43.3 38.1-73 35-18.6-1.9-36.2-10.8-50.9-22-2.9-2.2-6.1-4.8-8.8-7.5-4.7-4.7-12 2.6-7.3 7.3z" fill="#040000" p-id="3585"></path></svg>'},{name:"19",icon:'<svg t="1624457904464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3739" ><path d="M915.9 510.5c8.4-19 13.1-39.8 13.1-61.7 0-90-78.9-162.9-176.2-162.9-3.2 0-6.3 0.1-9.5 0.2v-0.2c0-94.8-116.2-171.6-259.6-171.6S224 191.2 224 286v2c-96.2 0-174.1 72-174.1 160.9 0 38 14.3 73 38.2 100.5-41.8 29.4-68.8 75.9-68.8 128.2 0 88.9 78 160.9 174.1 160.9 17.1 0 33.6-2.3 49.3-6.5 28.9 46.1 88.7 77.7 157.6 77.7 49.4 0 94-16.2 126-42.3 32 26.1 76.6 42.3 126 42.3 77.3 0 143-39.7 166.7-95 3.1 0.2 6.3 0.2 9.5 0.2 97.3 0 176.2-72.9 176.2-162.9 0-60.6-35.7-113.4-88.8-141.5z" fill="#5A74B8" p-id="3740"></path><path d="M357.6 449.5a46.6 73.2 0 1 0 93.2 0 46.6 73.2 0 1 0-93.2 0Z" fill="#FEFEFD" p-id="3741"></path><path d="M357.5 449.5a25.1 39.4 0 1 0 50.2 0 25.1 39.4 0 1 0-50.2 0Z" fill="#040000" p-id="3742"></path><path d="M531.3 449.5a46.6 73.2 0 1 0 93.2 0 46.6 73.2 0 1 0-93.2 0Z" fill="#FEFEFD" p-id="3743"></path><path d="M531.2 449.5a25.1 39.4 0 1 0 50.2 0 25.1 39.4 0 1 0-50.2 0Z" fill="#040000" p-id="3744"></path><path d="M426.7 574.6c20.9 29.9 59.7 52.2 96.2 38.6 19.2-7.2 34.7-21.2 47.6-36.9 2.8-3.5 3.4-8.3 0-11.7-2.9-2.9-8.9-3.5-11.7 0-16.5 20.2-40.9 40.9-68.1 35.5-17.3-3.4-31-13.2-42.9-25.9-2-2.2-3.9-4.4-5.8-6.7-1.6-1.9 1.1 1.5-0.4-0.6-0.2-0.2-0.3-0.5-0.5-0.7-6.2-8.7-20.6-0.4-14.4 8.4z" fill="#040000" p-id="3745"></path></svg>'},{name:"20",icon:'<svg t="1624457910321" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3899" ><path d="M792.8 301.4c-8.2 0-16.2 0.4-24.2 1.3-12.3-81.8-129.2-145.9-271.8-145.9-137.1 0-250.5 59.3-269.9 136.6C105.3 295.5 7.4 391.2 7.4 508.9c0 119.1 100.2 215.6 223.7 215.6 5.3 0 10.6-0.2 15.8-0.5 14.4 80.5 130.4 143.2 271.3 143.2 135.9 0 248.6-58.3 269.4-134.6 1.7 0 3.4 0.1 5.1 0.1 123.6 0 223.7-96.5 223.7-215.6s-100-215.7-223.6-215.7z" fill="#F6CD50" p-id="3900"></path><path d="M435.9 431.5m-52.2 0a52.2 52.2 0 1 0 104.4 0 52.2 52.2 0 1 0-104.4 0Z" fill="#FAFAFA" p-id="3901"></path><path d="M588.1 431.5m-52.2 0a52.2 52.2 0 1 0 104.4 0 52.2 52.2 0 1 0-104.4 0Z" fill="#FAFAFA" p-id="3902"></path><path d="M435.9 431.5m-27.8 0a27.8 27.8 0 1 0 55.6 0 27.8 27.8 0 1 0-55.6 0Z" fill="#040000" p-id="3903"></path><path d="M601.9 407.4c-5.7 2.9-11.3 5.9-16.9 9-6.8 3.8-15.3 7.8-20.5 13.8-5.6 6.5 1.6 11.1 6.7 14.4 11.2 7.1 23.3 13 35.1 19 5.7 2.9 10.8-5.7 5.1-8.6-10.9-5.6-21.9-11.1-32.4-17.4-2.4-1.4-4.6-3.1-7-4.6 1 0.6-0.4-0.4-0.4-0.4-1.9-0.3-0.5 4.2 0.5 4.1-0.1 0-0.6 0.3 0.3-0.3 0.5-0.3 1-0.9 1.5-1.3 9.7-7.9 21.9-13.5 33.1-19.2 5.7-2.7 0.6-11.4-5.1-8.5zM406.6 547.6c11.5 14.4 27 26.7 42.7 36.3 32.2 19.8 71.2 27.2 107.6 15.4 29.5-9.6 54.6-29.1 75.5-51.6 10.8-11.6-6.6-29.1-17.5-17.5-9.4 10.1-19.5 19.7-30.8 27.7-4.6 3.2-9.3 6.2-14.2 8.9-5 2.8-9.9 5.1-14.1 6.7-4.6 1.7-9.3 3.2-14.1 4.4-2.2 0.5-4.4 1-6.6 1.4-1 0.2-2 0.3-2.9 0.5 2.6-0.4-2.1 0.2-2.5 0.3-4.1 0.4-8.3 0.5-12.5 0.4-2.2-0.1-4.4-0.2-6.6-0.4-1.1-0.1-2.2-0.2-3.2-0.3-1.5-0.2-1.4-0.2 0.1 0l-2.1-0.3c-7.8-1.3-15.4-3.4-22.8-6.2-0.9-0.4-1.8-0.7-2.8-1.1-3.1-1.2 2.3 1.1-0.7-0.3-1.5-0.7-2.9-1.3-4.4-2-3.7-1.8-7.2-3.7-10.8-5.8-5.7-3.4-11.1-7.1-16.4-11.1 3 2.3-1.1-0.9-1.8-1.5-1.1-0.9-2.1-1.7-3.1-2.6-2.1-1.8-4.2-3.7-6.3-5.6-4.4-4.1-8.7-8.4-12.4-13.1-4.2-5.2-13.1-4.3-17.5 0-5 5.1-4 12.2 0.2 17.4z" fill="#040000" p-id="3904"></path></svg>'}]},{name:"标记图标",type:"sign",list:[{name:"1",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M809.728 429.696a18.901333 18.901333 0 0 0-15.274667-12.885333l-183.466666-26.624-81.92-166.272a18.901333 18.901333 0 0 0-34.005334 0l-81.92 166.272-183.594666 26.624a19.029333 19.029333 0 0 0-10.496 32.298666l132.693333 129.536-31.274667 182.741334a18.816 18.816 0 0 0 27.477334 19.84l164.138666-86.186667 164.096 86.058667a18.773333 18.773333 0 1 0 27.434667-19.84l-31.36-182.741334 132.693333-129.408a18.901333 18.901333 0 0 0 4.778667-19.413333z" fill="#FFFFFF"></path></svg>'},{name:"2",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M644.565333 306.901333c32.128 0 65.834667-5.76 101.077334-17.237333a17.066667 17.066667 0 0 1 22.357333 16.213333v328.32c-1.109333 0.768 10.325333 27.093333-99.370667 19.84-109.653333-7.210667-181.76-45.098667-246.869333-45.098666-65.152 0-49.322667 2.688-74.154667 8.405333v168.064a24.746667 24.746667 0 0 1-24.490666 25.258667 22.528 22.528 0 0 1-17.28-7.253334 24.149333 24.149333 0 0 1-7.168-18.005333V281.258667C299.776 280.490667 328.106667 256 421.76 256s164.437333 50.901333 222.805333 50.901333z" fill="#FFFFFF"></path></svg>'},{name:"3",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M524.074667 225.408l274.517333 274.517333a17.066667 17.066667 0 0 1 0 24.149334l-274.517333 274.517333a17.066667 17.066667 0 0 1-24.149334 0l-274.517333-274.517333a17.066667 17.066667 0 0 1 0-24.149334l274.517333-274.517333a17.066667 17.066667 0 0 1 24.149334 0z" fill="#FFFFFF"></path></svg>'},{name:"4",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M317.866667 300.8h388.266666c9.386667 0 17.066667 7.68 17.066667 17.066667v388.266666a17.066667 17.066667 0 0 1-17.066667 17.066667h-388.266666a17.066667 17.066667 0 0 1-17.066667-17.066667v-388.266666c0-9.386667 7.68-17.066667 17.066667-17.066667z" fill="#FFFFFF"></path></svg>'},{name:"5",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M498.346667 279.082667L248.789333 701.44a15.829333 15.829333 0 0 0 13.653334 23.893333h499.114666a15.829333 15.829333 0 0 0 13.653334-23.893333l-249.6-422.357333a15.829333 15.829333 0 0 0-27.264 0z" fill="#FFFFFF"></path></svg>'},{name:"6",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M497.749333 798.549333l-31.445333-28.501333C313.941333 631.722667 213.333333 540.501333 213.333333 428.8a160.981333 160.981333 0 0 1 162.730667-162.730667c51.498667 0 100.906667 23.978667 133.12 61.696a177.536 177.536 0 0 1 133.162667-61.696 160.981333 160.981333 0 0 1 162.730666 162.730667c0 111.701333-100.608 202.965333-252.970666 341.333333l-31.445334 28.458667a17.066667 17.066667 0 0 1-22.912 0z" fill="#FFFFFF"></path><path d="M634.538667 487.808L555.050667 426.24 507.306667 256a201.002667 201.002667 0 0 0-23.594667 20.394667l-0.256-0.256L525.653333 426.666667l-133.290666 59.946666a14.08 14.08 0 0 0-8.021334 15.957334l28.757334 126.378666a14.208 14.208 0 0 0 27.733333-6.229333l-26.24-115.114667 126.037333-56.704 76.416 59.136a14.250667 14.250667 0 0 0 19.968-2.474666 14.08 14.08 0 0 0-2.474666-19.797334z" fill="#6D768D"></path></svg>'},{name:"7",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M497.749333 798.549333l-31.445333-28.501333C313.941333 631.722667 213.333333 540.501333 213.333333 428.8a160.981333 160.981333 0 0 1 162.730667-162.730667c51.498667 0 100.906667 23.978667 133.12 61.696a177.536 177.536 0 0 1 133.162667-61.696 160.981333 160.981333 0 0 1 162.730666 162.730667c0 111.701333-100.608 202.965333-252.970666 341.333333l-31.445334 28.458667a17.066667 17.066667 0 0 1-22.912 0z" fill="#FFFFFF"></path></svg>'},{name:"8",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M374.656 273.194667c5.973333 4.48 12.117333 9.6 18.346667 15.36 6.272 5.717333 11.904 12.373333 16.896 19.84 2.517333 4.010667 5.504 8.490667 9.002666 13.482666a529.493333 529.493333 0 0 1 20.266667 32.213334h155.221333a169.813333 169.813333 0 0 0 9.770667-15.744c2.474667-4.48 5.248-8.96 8.234667-13.482667a460.842667 460.842667 0 0 1 23.253333-31.829333c4.992-6.229333 12.245333-12.373333 21.76-18.346667a34.261333 34.261333 0 0 0 10.112-9.728 31.274667 31.274667 0 0 0 5.248-11.989333 18.56 18.56 0 0 0-1.536-11.605334 17.664 17.664 0 0 0-10.112-8.618666c-4.48-1.493333-8.362667-2.005333-11.605333-1.493334a46.933333 46.933333 0 0 0-9.770667 2.602667c-3.242667 1.28-6.613333 2.645333-10.112 4.138667a32.426667 32.426667 0 0 1-12.757333 2.261333 26.026667 26.026667 0 0 1-12.373334-2.645333 45.653333 45.653333 0 0 1-8.96-6.357334l-8.661333-7.850666a30.336 30.336 0 0 0-11.989333-6.4c-9.984-3.968-18.005333-4.693333-24.021334-2.218667-5.973333 2.474667-11.946667 6.485333-17.962666 11.946667a88.618667 88.618667 0 0 1-11.989334 10.496 7.338667 7.338667 0 0 1-3.754666 1.493333 46.165333 46.165333 0 0 1-8.277334-5.205333 71.808 71.808 0 0 1-7.125333-4.906667 37.973333 37.973333 0 0 1-6.4-6.357333c-3.968-3.968-9.941333-6.613333-17.92-7.850667a31.061333 31.061333 0 0 0-21.76 4.138667c-8.533333 5.461333-14.506667 10.069333-18.048 13.824a29.354667 29.354667 0 0 1-15.744 7.893333 23.978667 23.978667 0 0 1-13.098667-0.768 987.733333 987.733333 0 0 0-14.634666-4.48 80.725333 80.725333 0 0 0-14.250667-2.986667 16.768 16.768 0 0 0-11.989333 2.986667c-6.997333 5.461333-9.258667 12.074667-6.741334 19.84a34.56 34.56 0 0 0 13.482667 18.346667z" fill="#FFFFFF"></path><path d="M780.757333 545.152a219.306667 219.306667 0 0 0-19.882666-65.536 224.981333 224.981333 0 0 0-33.365334-49.792 430.336 430.336 0 0 0-37.12-37.12c-14.506667-11.946667-27.264-23.296-38.272-34.048a544.512 544.512 0 0 1-27.733333-28.842667 305.28 305.28 0 0 1-22.485333-26.197333h-168.746667c-6.485333 8.490667-13.994667 17.493333-22.485333 26.965333a360.96 360.96 0 0 1-26.24 28.074667c-10.538667 10.24-22.272 21.12-35.285334 32.597333a305.493333 305.493333 0 0 0-41.6 44.16 250.026667 250.026667 0 0 0-49.493333 117.589334 216.106667 216.106667 0 0 0 1.877333 70.4 220.586667 220.586667 0 0 0 75.349334 126.549333c21.248 18.005333 47.146667 32.597333 77.653333 43.818667 30.464 11.264 65.493333 16.853333 104.96 16.853333 38.528 0 72.874667-4.864 103.125333-14.592a265.045333 265.045333 0 0 0 78.378667-39.338667c21.973333-16.469333 39.594667-35.797333 52.864-58.026666 13.226667-22.186667 22.101333-45.824 26.624-70.784 4.992-30.421333 5.632-58.026667 1.877333-82.773334z" fill="#FFFFFF"></path><path d="M593.322667 647.509333a20.48 20.48 0 0 1-11.861334 3.2h-50.133333v14.165334c0 4.266667-1.792 8.362667-5.376 12.373333a15.914667 15.914667 0 0 1-13.952 5.333333 24.917333 24.917333 0 0 1-14.336-3.882666c-3.84-2.602667-5.973333-7.210667-6.4-13.824v-14.165334h-48.725333a17.792 17.792 0 0 1-11.818667-3.882666 10.24 10.24 0 0 1-3.968-9.6c0-4.266667 1.578667-7.68 4.693333-10.24a16.768 16.768 0 0 1 11.093334-3.925334h48.682666v-24.789333h-48.682666a15.573333 15.573333 0 0 1-11.52-4.266667 13.525333 13.525333 0 0 1-4.266667-9.941333 15.36 15.36 0 0 1 4.693333-10.624 14.72 14.72 0 0 1 11.093334-4.949333h48.682666l0.725334-14.890667a1053.568 1053.568 0 0 1-40.832-42.538667l-10.752-9.898666a41.216 41.216 0 0 1-6.442667-11.690667c-1.92-4.992-0.938667-10.069333 2.858667-15.274667a13.653333 13.653333 0 0 1 15.786666-3.84c6.186667 2.090667 11.221333 4.821333 15.018667 8.106667 1.92 2.389333 5.248 5.888 10.026667 10.666667l15.061333 14.848 19.328 19.157333 22.186667-20.565333a987.605333 987.605333 0 0 1 29.397333-25.514667 21.162667 21.162667 0 0 1 14.293333-5.674667c5.290667 0 9.557333 2.133333 12.928 6.4 6.186667 7.082667 3.84 15.36-7.168 24.789334a179.072 179.072 0 0 0-12.885333 12.373333c-5.76 5.973333-11.52 11.733333-17.194667 17.408-6.698667 7.082667-14.08 14.378667-22.186666 21.973333v13.44h46.506666c6.698667 0 11.605333 1.536 14.72 4.608a14.165333 14.165333 0 0 1 4.650667 10.282667c0 4.266667-1.450667 7.936-4.309333 11.008-2.858667 3.029333-7.637333 4.352-14.336 3.84l-46.506667 0.768-0.768 24.064h45.866667c13.354667 0 20.053333 4.992 20.053333 14.933333 0.469333 4.693333-0.853333 8.106667-3.925333 10.24z" fill="#6D768D"></path></svg>'},{name:"9",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M512 213.333333l234.666667 341.333334h-128v213.333333h-213.333334v-213.333333h-128L512 213.333333z" fill="#FFFFFF"></path></svg>'},{name:"10",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M533.333333 810.666667L298.666667 469.333333h128V256h213.333333v213.333333h128l-234.666667 341.333334z" fill="#FFFFFF"></path></svg>'},{name:"11",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M213.333333 533.333333L554.666667 298.666667v128h213.333333v213.333333h-213.333333v128l-341.333334-234.666667z" fill="#FFFFFF"></path></svg>'},{name:"12",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M810.666667 533.333333L469.333333 768v-128H256v-213.333333h213.333333V298.666667l341.333334 234.666666z" fill="#FFFFFF"></path></svg>'},{name:"13",icon:'<svg viewBox="0 0 1024 1024"><path d="M0 512c0 282.752 229.248 512 512 512s512-229.248 512-512S794.752 0 512 0 0 229.248 0 512z" fill="#6D768D"></path><path d="M571.349333 508.586667l162.389334-162.346667a44.330667 44.330667 0 1 0-62.72-62.72l-162.389334 162.389333-162.517333-162.389333a44.330667 44.330667 0 1 0-62.72 62.72l162.389333 162.389333-162.389333 162.474667a44.330667 44.330667 0 1 0 62.72 62.72l162.389333-162.346667 162.389334 162.389334a44.330667 44.330667 0 1 0 62.72-62.72l-162.261334-162.56z" fill="#FFFFFF"></path></svg>'},{name:"14",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 0C233.386667 0 0 225.877333 0 512s225.877333 512 512 512 512-225.877333 512-512S790.613333 0 512 0z" fill="#6D768D"></path><path d="M726.144 311.210667l-277.333333 305.066666-124.8-124.8c-13.866667-13.866667-41.6-13.866667-55.466667 0-13.866667 13.866667-13.866667 41.6 0 55.466667l159.445333 152.533333c13.866667 13.866667 41.6 13.866667 55.466667 0l305.066667-332.8c13.866667-13.866667 13.866667-41.6 0-55.466666-20.778667-13.866667-48.512-13.866667-62.378667 0z" fill="#FFFFFF"></path></svg>'},{name:"15",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M541.952 755.626667a40.618667 40.618667 0 0 1-29.824 12.373333 41.344 41.344 0 0 1-30.122667-12.373333 40.106667 40.106667 0 0 1-12.672-30.122667c0-11.605333 4.096-21.845333 12.672-30.122667a40.405333 40.405333 0 0 1 30.122667-12.714666c11.605333 0 21.546667 4.138667 29.824 12.714666a40.32 40.32 0 0 1 12.714667 30.122667c0 11.861333-4.096 21.76-12.714667 30.122667zM450.986667 241.28A77.866667 77.866667 0 0 1 512.256 213.333333c24.874667 0 45.354667 8.917333 61.354667 27.946667 15.488 18.432 23.722667 41.685333 23.722666 69.674667 0 23.765333-33.152 200.533333-44.672 329.045333h-80.128C463.146667 511.402667 426.666667 334.677333 426.666667 310.954667c0-27.392 8.277333-50.645333 24.32-69.674667z" fill="#FFFFFF"></path></svg>'},{name:"16",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.794667 0 512 0z" fill="#6D768D"></path><path d="M490.666667 682.666667a64 64 0 1 1 0 128 64 64 0 0 1 0-128z m13.994666-490.752c61.397333 0 112.341333 14.634667 153.002667 43.946666 40.533333 29.269333 60.885333 72.618667 60.885333 130.133334 0 35.242667-12.373333 64.938667-29.952 89.045333-10.282667 14.677333-33.664 33.408-62.890666 56.192l-32.426667 22.357333c-15.701333 12.202667-29.696 26.453333-34.858667 42.666667-1.706667 5.546667-3.072 14.677333-3.968 24.533333-0.426667 4.949333-4.864 15.018667-15.232 15.018667h-83.328c-13.568 0-15.957333-10.581333-15.744-15.786667 1.493333-34.005333 4.608-64.213333 18.474667-80.469333 28.074667-32.896 91.904-73.813333 91.904-73.813333a104.106667 104.106667 0 0 0 23.552-24.021334c10.837333-14.933333 19.797333-31.317333 19.797333-49.237333 0-20.565333-6.016-39.338667-18.090666-56.32-12.032-16.938667-34.090667-25.386667-66.005334-25.386667-31.445333 0-53.76 10.410667-66.901333 31.274667-9.685333 15.445333-15.786667 29.610667-18.346667 45.013333-0.853333 5.461333-4.394667 16.981333-16.042666 16.981334H327.210667c-17.322667 0-21.12-11.221333-20.650667-16.64 6.272-68.138667 32.896-114.688 80-144.597334 32-20.565333 71.381333-30.890667 118.101333-30.890666z" fill="#FFFFFF"></path></svg>'},{name:"17",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M336.256 410.026667H253.312a40.021333 40.021333 0 0 0-39.850667 43.264l23.296 278.101333c1.706667 20.693333 19.072 36.608 39.850667 36.608h59.648c11.050667 0 20.010667-8.96 20.010667-19.968v-318.037333a19.968 19.968 0 0 0-20.010667-19.968z m434.432 0h-178.944C653.312 182.314667 548.949333 170.666667 548.949333 170.666667c-44.288 0-35.114667 34.986667-38.442666 40.832 0 84.48-68.010667 155.093333-101.034667 184.362666a39.552 39.552 0 0 0-13.226667 29.653334v322.56c0 11.008 8.96 19.925333 20.010667 19.925333h233.728c30.378667 0 58.154667-17.152 71.68-44.373333 18.176-36.736 40.448-90.112 54.656-133.973334 13.781333-42.410667 26.24-94.976 33.578667-131.968a39.850667 39.850667 0 0 0-39.253334-47.658666z" fill="#FFFFFF"></path></svg>'},{name:"18",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M796.16 413.909333c-31.146667-0.298667-115.626667-0.085333-146.858667-0.085333h-158.464c8.533333-7.68 15.914667-14.506667 23.594667-20.906667 29.781333-24.874667 25.813333-71.082667-14.208-88.874666-22.954667-10.24-44.970667-5.632-64 11.52-34.944 31.274667-69.632 62.677333-104.277333 93.994666a15.488 15.488 0 0 1-11.178667 4.437334c-11.221333-0.085333-26.88-0.128-46.933333-0.170667a17.066667 17.066667 0 0 0-17.109334 17.066667L256 719.701333a17.066667 17.066667 0 0 0 17.066667 17.152l49.578666-0.085333c3.968 0 7.466667 0.768 10.88 2.602667 15.829333 8.832 31.701333 17.493333 47.616 26.24a18.133333 18.133333 0 0 0 9.301334 2.346666h168.405333c6.186667 0 11.946667-0.981333 17.834667-2.56 29.44-7.253333 40.021333-30.293333 38.528-52.565333-0.768-9.728-4.266667-18.346667-9.984-26.24 19.626667-5.76 35.114667-16.213333 42.112-36.096 7.125333-20.394667 1.621333-38.4-12.672-53.333333 28.16-19.754667 34.858667-44.672 18.645333-75.648h140.458667c6.570667 0 13.013333-0.597333 19.370666-2.645334 31.957333-9.813333 48.810667-42.88 35.626667-71.552-10.154667-22.186667-28.629333-33.152-52.608-33.450666z" fill="#FFFFFF"></path></svg>'},{name:"19",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M270.506667 413.909333c31.146667-0.298667 115.626667-0.085333 146.858666-0.085333h158.464c-8.533333-7.68-15.914667-14.506667-23.594666-20.906667-29.781333-24.874667-25.813333-71.082667 14.208-88.874666 22.954667-10.24 44.970667-5.632 64 11.52 34.944 31.274667 69.632 62.677333 104.277333 93.994666 3.413333 2.986667 6.528 4.437333 11.178667 4.437334 11.221333-0.085333 26.88-0.128 46.933333-0.170667a17.066667 17.066667 0 0 1 17.109333 17.066667l0.682667 288.853333a17.066667 17.066667 0 0 1-17.066667 17.152l-49.578666-0.085333a22.101333 22.101333 0 0 0-10.88 2.602666c-15.829333 8.832-31.701333 17.493333-47.616 26.24a18.133333 18.133333 0 0 1-9.301334 2.346667h-168.405333a68.693333 68.693333 0 0 1-17.834667-2.56c-29.44-7.253333-40.021333-30.293333-38.528-52.565333 0.768-9.728 4.266667-18.346667 9.984-26.24-19.626667-5.76-35.114667-16.213333-42.112-36.096-7.125333-20.394667-1.621333-38.4 12.672-53.333334-28.16-19.754667-34.858667-44.672-18.645333-75.648H272.853333c-6.570667 0-13.013333-0.597333-19.370666-2.645333-31.957333-9.813333-48.810667-42.88-35.626667-71.552 10.154667-22.186667 28.629333-33.152 52.608-33.450667z" fill="#FFFFFF"></path></svg>'},{name:"20",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M667.733333 480.128H400v-111.36a97.706667 97.706667 0 0 1 97.621333-97.621333 97.706667 97.706667 0 0 1 97.578667 97.621333 28.885333 28.885333 0 0 0 57.813333 0A155.605333 155.605333 0 0 0 497.621333 213.333333a155.605333 155.605333 0 0 0-155.392 155.434667v111.36h-14.677333A28.885333 28.885333 0 0 0 298.666667 509.013333v292.010667a28.885333 28.885333 0 0 0 28.885333 28.885333h340.138667a28.885333 28.885333 0 0 0 28.928-28.885333V509.013333a28.885333 28.885333 0 0 0-28.928-28.885333z" fill="#FFFFFF"></path></svg>'},{name:"21",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M400.042667 437.461333v-111.36a97.706667 97.706667 0 0 1 97.621333-97.621333 97.706667 97.706667 0 0 1 97.578667 97.621333 28.885333 28.885333 0 0 0 57.813333 0A155.605333 155.605333 0 0 0 497.621333 170.666667a155.605333 155.605333 0 0 0-155.392 155.434666v111.36h-14.677333A28.885333 28.885333 0 0 0 298.666667 466.346667v292.010666a28.885333 28.885333 0 0 0 28.885333 28.885334h340.138667a28.885333 28.885333 0 0 0 28.928-28.885334V466.346667a28.885333 28.885333 0 0 0-28.928-28.885334H400.042667z" fill="#FFFFFF"></path><path d="M595.242667 437.461333v-111.36a97.706667 97.706667 0 0 0-97.621334-97.621333 97.706667 97.706667 0 0 0-97.578666 97.621333 28.885333 28.885333 0 0 1-57.813334 0A155.605333 155.605333 0 0 1 497.621333 170.666667a155.605333 155.605333 0 0 1 155.434667 155.434666v111.36h14.634667c16 0 28.928 12.928 28.928 28.885334v292.010666a28.885333 28.885333 0 0 1-28.928 28.885334H327.552A28.885333 28.885333 0 0 1 298.666667 758.357333V466.346667c0-15.957333 12.928-28.885333 28.885333-28.885334h267.690667z" fill="#FFFFFF"></path></svg>'},{name:"22",icon:'<svg viewBox="0 0 1024 1024"><path d="M511.999787 512.000213m-511.999787 0a511.999787 511.999787 0 1 0 1023.999573 0 511.999787 511.999787 0 1 0-1023.999573 0Z" fill="#6D768D"></path><path d="M381.354508 364.586941c0 54.015977 29.013321 103.935957 75.946635 130.986613a152.53327 152.53327 0 0 0 151.935936 0 151.12527 151.12527 0 0 0 75.946636-130.986613A151.594604 151.594604 0 0 0 533.333111 213.333671a151.594604 151.594604 0 0 0-151.89327 151.25327zM660.479725 498.901552a185.258589 185.258589 0 0 1-127.146614 50.346646c-49.066646 0-93.866628-19.199992-127.06128-50.346646C317.141201 544.853533 255.999893 637.440161 255.999893 744.106783c0 13.183995 10.709329 23.850657 23.978657 23.850657h506.709122a23.893323 23.893323 0 0 0 23.978657-23.893323c0-106.538622-61.098641-199.25325-150.186604-245.205232z" fill="#FFFFFF"></path></svg>'},{name:"23",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M445.610667 401.578667a129.322667 129.322667 0 1 0 258.645333 0 129.322667 129.322667 0 0 0-258.645333 0z m237.568 114.901333a157.354667 157.354667 0 0 1-216.362667 0 236.373333 236.373333 0 0 0-127.957333 209.706667c0 11.264 9.130667 20.394667 20.394666 20.394666h431.402667a20.394667 20.394667 0 0 0 20.394667-20.394666 236.373333 236.373333 0 0 0-127.872-209.706667zM409.813333 401.578667c0-40.362667 14.592-77.397333 38.698667-106.112a112.725333 112.725333 0 0 0-29.013333-3.925334 112.64 112.64 0 0 0-112.426667 112.469334 112.64 112.64 0 0 0 144.853333 107.648 164.693333 164.693333 0 0 1-42.112-110.08z m-18.602666 136.704a136.533333 136.533333 0 0 1-65.706667-34.474667 205.44 205.44 0 0 0-111.232 182.4c0 9.813333 7.936 17.706667 17.706667 17.706667H303.36a273.621333 273.621333 0 0 1 87.893333-165.632z" fill="#FFFFFF"></path></svg>'}]}],f3=(n,e=[])=>{let t=n.split("_"),r=v0([...Yl,...e]).find(s=>s.type===t[0]);if(r){let s=r.list.find(a=>a.name===t[1]);return s?s.icon:""}else return""},xr={hyperlink:c3,note:d3,attachment:u3,nodeIconList:Yl,getNodeIconListIcon:f3},p3=(n,e)=>{const t=new ft,i=new tt().text(n);return e.text(i),t.add(i),t.bbox()},Aa={radius:3,fontSize:12,fill:"",height:20,paddingX:8};function m3(){const n=this.getData("image");if(!n)return;const e=this.getImgShowSize(),t=new yn().load(n).size(...e),{defaultNodeImage:i}=this.mindMap.opt;if(i){const r=new Image;r.onerror=()=>{t.load(i)},r.src=n}return this.getData("imageTitle")&&t.attr("title",this.getData("imageTitle")),t.on("dblclick",r=>{this.mindMap.emit("node_img_dblclick",this,r)}),t.on("mouseenter",r=>{this.mindMap.emit("node_img_mouseenter",this,t,r)}),t.on("mouseleave",r=>{this.mindMap.emit("node_img_mouseleave",this,t,r)}),t.on("mousemove",r=>{this.mindMap.emit("node_img_mousemove",this,t,r)}),{node:t,width:e[0],height:e[1]}}function g3(){const{custom:n,width:e,height:t}=this.getData("imageSize");return n?[e,t]:i0(e,t,this.mindMap.themeConfig.imgMaxWidth,this.mindMap.themeConfig.imgMaxHeight)}function v3(){let n=this.getData();if(!n.icon||n.icon.length<=0)return[];let e=this.mindMap.themeConfig.iconSize;return n.icon.map(t=>{let i=xr.getNodeIconListIcon(t,this.mindMap.opt.iconList||[]),r=null;return/^<svg/.test(i)?r=lt(i):r=new yn().load(i),r.size(e,e),r.on("click",s=>{this.mindMap.emit("node_icon_click",this,t,s,r)}),r.on("mouseenter",s=>{this.mindMap.emit("node_icon_mouseenter",this,t,s,r)}),r.on("mouseleave",s=>{this.mindMap.emit("node_icon_mouseleave",this,t,s,r)}),{node:r,width:e,height:e}})}function x3(n){const e=this.hasCustomWidth();let t=typeof n=="string"?n:this.getData("text"),{textAutoWrapWidth:i,emptyTextMeasureHeightText:r}=this.mindMap.opt;i=e?this.customTextWidth:i;const s=new ft;let a=!1;this.getData("resetRichText")&&(delete this.nodeData.data.resetRichText,a=!0),a&&!Mn(t)&&(d0(t)?t=p0(t):t=`<p>${t}</p>`,this.setData({text:t}));const o=[],l=S0(this);Object.keys(l).forEach(p=>{o.push([p,l[p]])}),this.mindMap.commonCaches.measureRichtextNodeTextSizeEl||(this.mindMap.commonCaches.measureRichtextNodeTextSizeEl=document.createElement("div"),this.mindMap.commonCaches.measureRichtextNodeTextSizeEl.style.position="fixed",this.mindMap.commonCaches.measureRichtextNodeTextSizeEl.style.left="-999999px",this.mindMap.el.appendChild(this.mindMap.commonCaches.measureRichtextNodeTextSizeEl));const h=this.mindMap.commonCaches.measureRichtextNodeTextSizeEl;o.forEach(([p,x])=>{h.style[p]=x}),h.style.lineHeight=1.2;const c=`<div>${t}</div>`;h.innerHTML=c;const d=h.children[0];d.classList.add("smm-richtext-node-wrap"),ri(d),d.style.maxWidth=i+"px",e?d.style.width=this.customTextWidth+"px":d.style.width="";let{width:f,height:m}=d.getBoundingClientRect();if(m<=0){h.innerHTML=`<p>${r}</p>`;let p=h.children[0];p.classList.add("smm-richtext-node-wrap"),m=p.getBoundingClientRect().height,h.innerHTML=c}f=Math.min(Math.ceil(f)+1,i),m=Math.ceil(m),s.attr("data-width",f),s.attr("data-height",m);const u=ii({el:h.children[0],width:f,height:m}),g={"line-height":1.2};return o.forEach(([p,x])=>{g[a0(p)]=x}),u.css(g),s.add(u),{node:s,nodeContent:u,width:f,height:m}}function y3(n){if(this.getData("needUpdate")&&delete this.nodeData.data.needUpdate,this.getData("richText"))return this.createRichTextNode(n);const e=typeof n=="string"?n:this.getData("text");this.getData("resetRichText")&&delete this.nodeData.data.resetRichText;let t=new ft,i=this.getStyle("fontSize",!1),r=[];Mn(e)||(r=String(e).split(/\n/gim));const{textAutoWrapWidth:s,emptyTextMeasureHeightText:a}=this.mindMap.opt;let o=r.length>1;r.forEach((c,d)=>{let f=c.split(""),m=[],u=[];for(;f.length;){let g=f.shift(),p=[...u,g].join("");p3(p,this.style).width<=s?u.push(g):(m.push(u.join("")),u=[g])}u.length>0&&m.push(u.join("")),m.length>1&&(o=!0),r[d]=m.join(`
`)}),r=r.join(`
`).replace(/\n$/g,"").split(/\n/gim),r.forEach((c,d)=>{c===""&&(c="\uFEFF");const f=new tt().text(c);f.addClass("smm-text-node-wrap"),this.style.text(f),f.y(i*er*d+(er-1)*i/2),t.add(f)});let{width:l,height:h}=t.bbox();if(h<=0){const c=new tt().text(a);this.style.text(c),h=c.bbox().height}return l=Math.min(Math.ceil(l),s),h=Math.ceil(h),t.attr("data-width",l),t.attr("data-height",h),t.attr("data-ismultiLine",o||r.length>1),{node:t,width:l,height:h}}function w3(){const{hyperlink:n,hyperlinkTitle:e}=this.getData();if(!n)return;const{customHyperlinkJump:t,hyperlinkIcon:i}=this.mindMap.opt,{icon:r,style:s}=i,a=this.getNodeIconSize("hyperlinkIcon"),o=new lt().size(a,a),l=new ci().to(n).target("_blank");l.node.addEventListener("click",c=>{typeof t=="function"&&(c.preventDefault(),t(n,this))}),e&&o.add(lt(`<title>${e}</title>`)),l.rect(a,a).fill({color:"transparent"});const h=lt(r||xr.hyperlink).size(a,a);return this.style.iconNode(h,s.color),l.add(h),o.add(l),{node:o,width:a,height:a}}function C3(){const n=this.getData("tag");if(!n||n.length<=0)return[];let{maxTag:e,tagsColorMap:t}=this.mindMap.opt;t=t||{};const i=[];return n.slice(0,e).forEach((r,s)=>{let a="",o={...Aa};typeof r=="string"?a=r:(a=r.text,o={...Aa,...r.style});const l=typeof o.width<"u",h=new ft;h.on("click",()=>{this.mindMap.emit("node_tag_click",this,r,s,h)});const c=new tt().text(a);this.style.tagText(c,o);const{width:d,height:f}=c.bbox(),m=l?o.width:d+o.paddingX*2,u=l?Math.max(m,d):m,g=Math.max(o.height,f);l?c.x((u-d)/2):c.x(l?0:o.paddingX),c.cy(-g/2);const p=new Nt().size(m,o.height).cy(-g/2);l&&p.x((u-m)/2),this.style.tagRect(p,{...o,fill:o.fill||t[c.node.textContent]||$l(c.node.textContent)}),h.add(p).add(c),i.push({node:h,width:u,height:g})}),i}function E3(){if(!this.getData("note"))return null;const{icon:n,style:e}=this.mindMap.opt.noteIcon,t=this.getNodeIconSize("noteIcon"),i=new lt().attr("cursor","pointer").addClass("smm-node-note").size(t,t);i.add(new Nt().size(t,t).fill({color:"transparent"}));const r=lt(n||xr.note).size(t,t);return this.style.iconNode(r,e.color),i.add(r),this.mindMap.opt.customNoteContentShow||(this.noteEl||(this.noteEl=document.createElement("div"),this.noteEl.style.cssText=`
          position: fixed;
          padding: 10px;
          border-radius: 5px;
          box-shadow: 0 2px 5px rgb(0 0 0 / 10%);
          display: none;
          background-color: #fff;
          z-index: ${this.mindMap.opt.nodeNoteTooltipZIndex}
      `,(this.mindMap.opt.customInnerElsAppendTo||document.body).appendChild(this.noteEl)),this.noteEl.innerText=this.getData("note")),i.on("mouseover",()=>{const{left:s,top:a}=this.getNoteContentPosition();this.mindMap.opt.customNoteContentShow?this.mindMap.opt.customNoteContentShow.show(this.getData("note"),s,a,this):(this.noteEl.style.left=s+"px",this.noteEl.style.top=a+"px",this.noteEl.style.display="block")}),i.on("mouseout",()=>{this.mindMap.opt.customNoteContentShow?this.mindMap.opt.customNoteContentShow.hide():this.noteEl.style.display="none"}),i.on("click",s=>{this.mindMap.emit("node_note_click",this,s,i)}),i.on("dblclick",s=>{this.mindMap.emit("node_note_dblclick",this,s,i)}),{node:i,width:t,height:t}}function M3(){const{attachmentUrl:n,attachmentName:e}=this.getData();if(!n)return;const t=this.getNodeIconSize("attachmentIcon"),{icon:i,style:r}=this.mindMap.opt.attachmentIcon,s=new lt().attr("cursor","pointer").size(t,t);e&&s.add(lt(`<title>${e}</title>`)),s.add(new Nt().size(t,t).fill({color:"transparent"}));const a=lt(i||xr.attachment).size(t,t);return this.style.iconNode(a,r.color),s.add(a),s.on("click",o=>{this.mindMap.emit("node_attachmentClick",this,o,s)}),s.on("contextmenu",o=>{this.mindMap.emit("node_attachmentContextmenu",this,o,s)}),{node:s,width:t,height:t}}function b3(n){const{style:e}=this.mindMap.opt[n];return Mn(e.size)?this.mindMap.themeConfig.iconSize:e.size}function _3(){const n=this.getNodeIconSize("noteIcon"),{scaleY:e}=this.mindMap.view.getTransformData().transform,t=n*e;let{left:i,top:r}=this._noteData.node.node.getBoundingClientRect();return r+=t,{left:i,top:r}}function S3(n){this.mindMap.commonCaches.measureCustomNodeContentSizeEl||(this.mindMap.commonCaches.measureCustomNodeContentSizeEl=document.createElement("div"),this.mindMap.commonCaches.measureCustomNodeContentSizeEl.style.cssText=`
      position: fixed;
      left: -99999px;
      top: -99999px;
    `,this.mindMap.el.appendChild(this.mindMap.commonCaches.measureCustomNodeContentSizeEl)),this.mindMap.commonCaches.measureCustomNodeContentSizeEl.innerHTML="",this.mindMap.commonCaches.measureCustomNodeContentSizeEl.appendChild(n);let e=this.mindMap.commonCaches.measureCustomNodeContentSizeEl.getBoundingClientRect();return{width:e.width,height:e.height}}function N3(){return!!this._customNodeContent}const ka={createImgNode:m3,getImgShowSize:g3,createIconNode:v3,createRichTextNode:x3,createTextNode:y3,createHyperlinkNode:w3,createTagNode:C3,createNoteNode:E3,createAttachmentNode:M3,getNoteContentPosition:_3,getNodeIconSize:b3,measureCustomNodeContentSize:S3,isUseCustomNodeContent:N3};function T3(){if(!this.nodeData.children||this.nodeData.children.length<=0||this.isRoot)return;const{alwaysShowExpandBtn:n,notShowExpandBtn:e}=this.mindMap.opt;if(!n&&!e){let{width:t,height:i}=this;this._unVisibleRectRegionNode||(this._unVisibleRectRegionNode=new Nt,this._unVisibleRectRegionNode.fill({color:"transparent"})),this.group.add(this._unVisibleRectRegionNode),this.renderer.layout.renderExpandBtnRect(this._unVisibleRectRegionNode,this.expandBtnSize,t,i,this)}}function D3(){this._unVisibleRectRegionNode&&(this._unVisibleRectRegionNode.remove(),this._unVisibleRectRegionNode=null)}function R3(){this.needRerenderExpandBtnPlaceholderRect&&(this.needRerenderExpandBtnPlaceholderRect=!1,this.renderExpandBtnPlaceholderRect()),this.nodeData.children&&this.nodeData.children.length>0?this._unVisibleRectRegionNode||this.renderExpandBtnPlaceholderRect():this._unVisibleRectRegionNode&&this.clearExpandBtnPlaceholderRect()}const Pa={renderExpandBtnPlaceholderRect:T3,clearExpandBtnPlaceholderRect:D3,updateExpandBtnPlaceholderRect:R3};function I3(){this.checkEnableDragModifyNodeWidth()&&(this._dragHandleNodes=null,this.dragHandleWidth=4,this.dragHandleMousedownX=0,this.isDragHandleMousedown=!1,this.dragHandleIndex=0,this.dragHandleMousedownCustomTextWidth=0,this.dragHandleMousedownBodyCursor="",this.dragHandleMousedownLeft=0,this.onDragMousemoveHandle=this.onDragMousemoveHandle.bind(this),window.addEventListener("mousemove",this.onDragMousemoveHandle),this.onDragMouseupHandle=this.onDragMouseupHandle.bind(this),window.addEventListener("mouseup",this.onDragMouseupHandle),this.mindMap.on("node_mouseup",this.onDragMouseupHandle))}function L3(n){if(!this.isDragHandleMousedown)return;n.stopPropagation(),n.preventDefault();let{minNodeTextModifyWidth:e,maxNodeTextModifyWidth:t,isUseCustomNodeContent:i,customCreateNodeContent:r}=this.mindMap.opt;const s=i&&r&&this._customNodeContent;document.body.style.cursor="ew-resize",this.group.css({cursor:"ew-resize"});const{scaleX:a}=this.mindMap.draw.transform(),o=n.clientX-this.dragHandleMousedownX;let l=this.dragHandleMousedownCustomTextWidth+(this.dragHandleIndex===0?-o:o)/a;if(l=Math.max(l,e),t!==-1&&(l=Math.min(l,t)),!s&&this.getData("image")){const h=this.getImgShowSize();this._rectInfo.textContentWidth-this.customTextWidth+l<=h[0]&&(l=h[0]+this.customTextWidth-this._rectInfo.textContentWidth)}this.customTextWidth=l,this.dragHandleIndex===0&&(this.left=this.dragHandleMousedownLeft+o/a),this.reRender(s?[]:["text"],{ignoreUpdateCustomTextWidth:!0})}function O3(){this.isDragHandleMousedown&&(document.body.style.cursor=this.dragHandleMousedownBodyCursor,this.group.css({cursor:"default"}),this.isDragHandleMousedown=!1,this.dragHandleMousedownX=0,this.dragHandleIndex=0,this.dragHandleMousedownCustomTextWidth=0,this.setData({customTextWidth:this.customTextWidth}),this.mindMap.render(),this.mindMap.emit("dragModifyNodeWidthEnd",this))}function A3(){const n=[new Nt,new Nt];return n.forEach((e,t)=>{e.size(this.dragHandleWidth,this.height).fill({color:"transparent"}).css({cursor:"ew-resize"}),e.on("mousedown",i=>{i.stopPropagation(),i.preventDefault(),this.dragHandleMousedownX=i.clientX,this.dragHandleIndex=t,this.dragHandleMousedownCustomTextWidth=this.customTextWidth===void 0?this._textData?this._textData.width:this.width:this.customTextWidth,this.dragHandleMousedownBodyCursor=document.body.style.cursor,this.dragHandleMousedownLeft=this.left,this.isDragHandleMousedown=!0})}),n}function k3(){this.checkEnableDragModifyNodeWidth()&&(this._dragHandleNodes||(this._dragHandleNodes=this.createDragHandleNode()),this.getData("isActive")?(this._dragHandleNodes.forEach(n=>{n.height(this.height),this.group.add(n)}),this._dragHandleNodes[1].x(this.width-this.dragHandleWidth)):this._dragHandleNodes.forEach(n=>{n.remove()}))}const za={initDragHandle:I3,onDragMousemoveHandle:L3,onDragMouseupHandle:O3,createDragHandleNode:A3,updateDragHandle:k3};function P3(){this.mindMap.cooperate&&(this._userListGroup=new ft,this.group.add(this._userListGroup))}function z3(n){const{avatarSize:e,fontSize:t}=this.mindMap.opt.cooperateStyle,i=new ft,r=n.isMore?n.name:String(n.name)[0],s=new yi().size(e,e);s.fill({color:n.color||$l(r)});const a=new tt().text(r).fill({color:"#fff"}).css({"font-size":t+"px"}).dx(-t/2).dy((e-t)/2);return i.add(s).add(a),i}function F3(n){const{avatarSize:e}=this.mindMap.opt.cooperateStyle;return new yn().load(n.avatar).size(e,e)}function $3(){if(!this._userListGroup)return;const{avatarSize:n}=this.mindMap.opt.cooperateStyle;this._userListGroup.clear();const e=this.userList.length,t=Math.floor(this.width/n),i=[];e>t?i.push(...this.userList.slice(0,t-1),{isMore:!0,name:"+"+(e-t+1)}):i.push(...this.userList),i.forEach((r,s)=>{let a=null;r.avatar?a=this.createImageAvatar(r):a=this.createTextAvatar(r),a.on("click",o=>{this.mindMap.emit("node_cooperate_avatar_click",r,this,a,o)}),a.on("mouseenter",o=>{this.mindMap.emit("node_cooperate_avatar_mouseenter",r,this,a,o)}),a.on("mouseleave",o=>{this.mindMap.emit("node_cooperate_avatar_mouseleave",r,this,a,o)}),a.x(s*n).cy(-n/2),this._userListGroup.add(a)})}function H3(n){this.userList.find(e=>e.id==n.id)||(this.userList.push(n),this.updateUserListNode())}function B3(n){const e=this.userList.findIndex(t=>t.id==n.id);e!==-1&&(this.userList.splice(e,1),this.updateUserListNode())}function Y3(){this.userList=[],this.updateUserListNode()}const Fa={createUserListNode:P3,updateUserListNode:$3,createTextAvatar:z3,createImageAvatar:F3,addUser:H3,removeUser:B3,emptyUser:Y3};class yr{constructor(e={}){this.opt=e,this.nodeData=this.handleData(e.data||{}),this.nodeDataSnapshot="",this.uid=e.uid,this.mindMap=e.mindMap,this.renderer=e.renderer,this.draw=this.mindMap.draw,this.nodeDraw=this.mindMap.nodeDraw,this.lineDraw=this.mindMap.lineDraw,this.style=new Dt(this),this.effectiveStyles={},this.shapeInstance=new N0(this),this.shapePadding={paddingX:0,paddingY:0},this.isRoot=e.isRoot===void 0?!1:e.isRoot,this.isGeneralization=e.isGeneralization===void 0?!1:e.isGeneralization,this.generalizationBelongNode=null,this.layerIndex=e.layerIndex===void 0?0:e.layerIndex,this.width=e.width||0,this.height=e.height||0,this.customTextWidth=e.data.data.customTextWidth||void 0,this._left=e.left||0,this._top=e.top||0,this.customLeft=e.data.data.customLeft||void 0,this.customTop=e.data.data.customTop||void 0,this.isDrag=!1,this.parent=e.parent||null,this.children=e.children||[],this.userList=[],this.group=null,this.shapeNode=null,this.hoverNode=null,this._customNodeContent=null,this._imgData=null,this._iconData=null,this._textData=null,this._hyperlinkData=null,this._tagData=null,this._noteData=null,this.noteEl=null,this.noteContentIsShow=!1,this._attachmentData=null,this._prefixData=null,this._postfixData=null,this._expandBtn=null,this._lastExpandBtnType=null,this._showExpandBtn=!1,this._openExpandNode=null,this._closeExpandNode=null,this._fillExpandNode=null,this._userListGroup=null,this._lines=[],this._generalizationList=[],this._unVisibleRectRegionNode=null,this._isMouseenter=!1,this._rectInfo={imgContentWidth:0,imgContentHeight:0,textContentWidth:0,textContentHeight:0},this._generalizationNodeWidth=0,this._generalizationNodeHeight=0,this.textContentItemMargin=this.mindMap.opt.textContentMargin,this.blockContentMargin=this.mindMap.opt.imgTextMargin,this.expandBtnSize=this.mindMap.opt.expandBtnSize,this.isMultipleChoice=!1,this.needLayout=!1,this.isHide=!1;const t=Object.getPrototypeOf(this);t.bindEvent||(Object.keys(Ra).forEach(i=>{t[i]=Ra[i]}),Object.keys(La).forEach(i=>{t[i]=La[i]}),Object.keys(Pa).forEach(i=>{t[i]=Pa[i]}),Object.keys(Oa).forEach(i=>{t[i]=Oa[i]}),Object.keys(ka).forEach(i=>{t[i]=ka[i]}),this.mindMap.cooperate&&Object.keys(Fa).forEach(i=>{t[i]=Fa[i]}),Object.keys(za).forEach(i=>{t[i]=za[i]}),t.bindEvent=!0),this.getSize(),this.updateGeneralization(),this.initDragHandle()}get left(){return this.customLeft||this._left}set left(e){this._left=e}get top(){return this.customTop||this._top}set top(e){this._top=e}reset(){this.children=[],this.parent=null,this.isRoot=!1,this.layerIndex=0,this.left=0,this.top=0}resetWhenDelete(){this._isMouseenter=!1}handleData(e){return e.data.expand=e.data.expand!==!1,e.data.isActive=e.data.isActive===!0,e.children=e.children||[],e}createNodeData(e){const{isUseCustomNodeContent:t,customCreateNodeContent:i,createNodePrefixContent:r,createNodePostfixContent:s}=this.mindMap.opt,a=["custom","image","icon","text","hyperlink","tag","note","attachment","prefix","postfix",...this.mindMap.nodeInnerPrefixList.map(l=>l.name)],o={};if(Array.isArray(e)?a.forEach(l=>{e.includes(l)&&(o[l]=!0)}):a.forEach(l=>{o[l]=!0}),t&&i&&o.custom&&(this._customNodeContent=i(this)),this._customNodeContent){ri(this._customNodeContent);return}o.image&&(this._imgData=this.createImgNode()),o.icon&&(this._iconData=this.createIconNode()),o.text&&(this._textData=this.createTextNode()),o.hyperlink&&(this._hyperlinkData=this.createHyperlinkNode()),o.tag&&(this._tagData=this.createTagNode()),o.note&&(this._noteData=this.createNoteNode()),o.attachment&&(this._attachmentData=this.createAttachmentNode()),this.mindMap.nodeInnerPrefixList.forEach(l=>{o[l.name]&&(this[`_${l.name}Data`]=l.createContent(this))}),o.prefix&&(this._prefixData=r?r(this):null,this._prefixData&&this._prefixData.el&&ri(this._prefixData.el)),o.postfix&&(this._postfixData=s?s(this):null,this._postfixData&&this._postfixData.el&&ri(this._postfixData.el))}getSize(e,t={}){t.ignoreUpdateCustomTextWidth||!1||(this.customTextWidth=this.getData("customTextWidth")||void 0),this.customLeft=this.getData("customLeft")||void 0,this.customTop=this.getData("customTop")||void 0,this.createNodeData(e);const{width:r,height:s}=this.getNodeRect(),a=this.width!==r||this.height!==s;return this.width=r,this.height=s,a}getNodeRect(){if(this.isUseCustomNodeContent()){const x=this.measureCustomNodeContentSize(this._customNodeContent);return{width:this.hasCustomWidth()?this.customTextWidth:x.width,height:x.height}}const{tagPosition:e}=this.mindMap.opt,t=e===T.TAG_POSITION.BOTTOM;let i=0,r=0,s=0,a=0,o=0,l=0;if(this._imgData&&(this._rectInfo.imgContentWidth=i=this._imgData.width,this._rectInfo.imgContentHeight=r=this._imgData.height),this.mindMap.nodeInnerPrefixList.forEach(x=>{const w=this[`_${x.name}Data`];w&&(s+=w.width,a=Math.max(a,w.height))}),this._prefixData&&(s+=this._prefixData.width,a=Math.max(a,this._prefixData.height)),this._iconData.length>0&&(s+=this._iconData.reduce((x,w)=>(a=Math.max(a,w.height),x+=w.width+this.textContentItemMargin),0)),this._textData&&(s+=this._textData.width,a=Math.max(a,this._textData.height)),this._hyperlinkData&&(s+=this._hyperlinkData.width,a=Math.max(a,this._hyperlinkData.height)),this._tagData.length>0){let x=0;const w=this._tagData.reduce((y,C)=>(x=Math.max(x,C.height),y+=C.width+this.textContentItemMargin),0);t?(o=w,l=x):(s+=w,a=Math.max(a,x))}this._noteData&&(s+=this._noteData.width,a=Math.max(a,this._noteData.height)),this._attachmentData&&(s+=this._attachmentData.width,a=Math.max(a,this._attachmentData.height)),this._postfixData&&(s+=this._postfixData.width,a=Math.max(a,this._postfixData.height)),this._rectInfo.textContentWidth=s,this._rectInfo.textContentHeight=a;let h=r>0&&a>0?this.blockContentMargin:0;const{paddingX:c,paddingY:d}=this.getPaddingVale();let f=Math.max(i,s),m=r+a;t&&l>0&&a>0&&(h+=this.blockContentMargin,f=Math.max(f,o),m+=l);const{paddingX:u,paddingY:g}=this.shapeInstance.getShapePadding(f,m,c,d);this.shapePadding.paddingX=u,this.shapePadding.paddingY=g;const p=this.getBorderWidth();return{width:f+c*2+u*2+p,height:m+d*2+h+g*2+p}}layout(){if(!this.group)return;this.group.clear();const{hoverRectPadding:e,tagPosition:t,openRealtimeRenderOnNodeTextEdit:i}=this.mindMap.opt;let{width:r,height:s,textContentItemMargin:a}=this,{paddingY:o}=this.getPaddingVale();const l=this.getBorderWidth()/2;o+=this.shapePadding.paddingY+l,this.shapeNode=this.shapeInstance.createShape(),this.shapeNode.addClass("smm-node-shape"),this.shapeNode.translate(l,l),this.style.shape(this.shapeNode),this.group.add(this.shapeNode),this.renderExpandBtnPlaceholderRect(),this.createUserListNode&&this.createUserListNode(),this.isGeneralization&&this.generalizationBelongNode&&this.group.addClass("generalization_"+this.generalizationBelongNode.uid);const h=()=>{this.hoverNode=new Nt().size(r+e*2,s+e*2).x(-e).y(-e),this.hoverNode.addClass("smm-hover-node"),this.style.hoverNode(this.hoverNode,r,s),this.group.add(this.hoverNode)};if(this.isUseCustomNodeContent()){const x=ii({el:this._customNodeContent,width:r,height:s});this.group.add(x),h();return}const c=t===T.TAG_POSITION.BOTTOM,{textContentHeight:d}=this._rectInfo;let f=0;this._imgData&&(f=this._imgData.height,this.group.add(this._imgData.node),this._imgData.node.cx(r/2).y(o));let m=new ft,u=0;if(this.mindMap.nodeInnerPrefixList.forEach(x=>{const w=this[`_${x.name}Data`];w&&(w.node.x(u).y((d-w.height)/2),m.add(w.node),u+=w.width+a)}),this._prefixData){const x=ii({el:this._prefixData.el,width:this._prefixData.width,height:this._prefixData.height});x.x(u).y((d-this._prefixData.height)/2),m.add(x),u+=this._prefixData.width+a}let g=new ft;if(this._iconData&&this._iconData.length>0){let x=0;this._iconData.forEach(w=>{w.node.x(u+x).y((d-w.height)/2),g.add(w.node),x+=w.width+a}),m.add(g),u+=x}if(this._textData){const x=this._textData.node.attr("data-offsetx")||0;this._textData.node.attr("data-offsetx",u),(this._textData.nodeContent||this._textData.node).x(-x).x(u).y((d-this._textData.height)/2),i&&this._textData.node.opacity(this.mindMap.renderer.textEdit.getCurrentEditNode()===this?0:1),m.add(this._textData.node),u+=this._textData.width+a}this._hyperlinkData&&(this._hyperlinkData.node.x(u).y((d-this._hyperlinkData.height)/2),m.add(this._hyperlinkData.node),u+=this._hyperlinkData.width+a);let p=new ft;if(this._tagData&&this._tagData.length>0)if(c){let x=0;this._tagData.forEach(w=>{w.node.x(x).y(0),p.add(w.node),x+=w.width+a}),p.cx(r/2).y(o+f+d+(f>0&&d>0?this.blockContentMargin:0)+this.blockContentMargin),this.group.add(p)}else{let x=0;this._tagData.forEach(w=>{w.node.x(u+x).y((d-w.height)/2),p.add(w.node),x+=w.width+a}),m.add(p),u+=x}if(this._noteData&&(this._noteData.node.x(u).y((d-this._noteData.height)/2),m.add(this._noteData.node),u+=this._noteData.width),this._attachmentData&&(this._attachmentData.node.x(u).y((d-this._attachmentData.height)/2),m.add(this._attachmentData.node),u+=this._attachmentData.width),this._postfixData){const x=ii({el:this._postfixData.el,width:this._postfixData.width,height:this._postfixData.height});x.x(u).y((d-this._postfixData.height)/2),m.add(x),u+=this._postfixData.width}this.group.add(m),m.translate(r/2-m.bbox().width/2,o+f+(f>0&&d>0?this.blockContentMargin:0)),h(),this.mindMap.emit("node_layout_end",this)}bindGroupEvent(){this.group.on("click",e=>{if(this.mindMap.emit("node_click",this,e),this.isMultipleChoice){e.stopPropagation(),this.isMultipleChoice=!1;return}this.mindMap.opt.onlyOneEnableActiveNodeOnCooperate&&this.userList.length>0||this.active(e)}),this.group.on("mousedown",e=>{const{readonly:t,enableCtrlKeyNodeSelection:i,useLeftKeySelectionRightKeyDrag:r,mousedownEventPreventDefault:s}=this.mindMap.opt;if(s&&e.preventDefault(),t||(this.isRoot?e.which===3&&!r&&e.stopPropagation():e.which!==2&&e.stopPropagation()),!t&&(e.ctrlKey||e.metaKey)&&i){this.isMultipleChoice=!0;const a=this.getData("isActive");a||this.mindMap.emit("before_node_active",this,this.renderer.activeNodeList),this.mindMap.renderer[a?"removeNodeFromActiveList":"addNodeToActiveList"](this,!0),this.renderer.emitNodeActiveEvent(a?null:this)}this.mindMap.emit("node_mousedown",this,e)}),this.group.on("mouseup",e=>{!this.isRoot&&e.which!==2&&!this.mindMap.opt.readonly&&e.stopPropagation(),this.mindMap.emit("node_mouseup",this,e)}),this.group.on("mouseenter",e=>{this.isDrag||(this._isMouseenter=!0,this.showExpandBtn(),this.isGeneralization&&this.handleGeneralizationMouseenter(),this.mindMap.emit("node_mouseenter",this,e))}),this.group.on("mouseleave",e=>{this._isMouseenter&&(this._isMouseenter=!1,this.hideExpandBtn(),this.isGeneralization&&this.handleGeneralizationMouseleave(),this.mindMap.emit("node_mouseleave",this,e))}),this.group.on("dblclick",e=>{const{readonly:t,onlyOneEnableActiveNodeOnCooperate:i}=this.mindMap.opt;t||e.ctrlKey||e.metaKey||(e.stopPropagation(),!(i&&this.userList.length>0)&&this.mindMap.emit("node_dblclick",this,e))}),this.group.on("contextmenu",e=>{const{readonly:t,useLeftKeySelectionRightKeyDrag:i}=this.mindMap.opt;t||e.ctrlKey||(e.stopPropagation(),e.preventDefault(),!(this.mindMap.select&&!i&&this.mindMap.select.hasSelectRange())&&(this.getData("isActive")&&this.renderer.activeNodeList.length===1||(this.renderer.clearActiveNodeList(),this.active(e)),this.mindMap.emit("node_contextmenu",e,this)))})}active(e){this.mindMap.opt.readonly||(e&&e.stopPropagation(),!this.getData("isActive")&&(this.mindMap.emit("before_node_active",this,this.renderer.activeNodeList),this.renderer.clearActiveNodeList(),this.renderer.addNodeToActiveList(this,!0),this.renderer.emitNodeActiveEvent(this)))}deactivate(){this.mindMap.renderer.removeNodeFromActiveList(this),this.mindMap.renderer.emitNodeActiveEvent()}update(e){if(!this.group)return;this.updateNodeActiveClass();const{alwaysShowExpandBtn:t,notShowExpandBtn:i}=this.mindMap.opt;if(!i){const s=this.nodeData.children.length;if(t)this._expandBtn&&s<=0?this.removeExpandBtn():this.renderExpandBtn();else{const{isActive:a,expand:o}=this.getData();s<=0?this.removeExpandBtn():o&&!a&&!this._isMouseenter?this.hideExpandBtn():this.showExpandBtn()}}this.updateDragHandle(),this.renderGeneralization(e),this.updateUserListNode&&this.updateUserListNode();const r=this.group.transform();this.nodeDataSnapshot=JSON.stringify(this.getData()),(this.left!==r.translateX||this.top!==r.translateY)&&this.group.translate(this.left-r.translateX,this.top-r.translateY)}getNodePosInClient(e,t){const i=this.mindMap.draw.transform(),{scaleX:r,scaleY:s,translateX:a,translateY:o}=i,l=e*r+a,h=t*s+o;return{left:l,top:h}}checkIsInClient(e=0){const{left:t,top:i}=this.getNodePosInClient(this.left,this.top);return t+this.width>0-e&&i+this.height>0-e&&t<this.mindMap.width+e&&i<this.mindMap.height+e}reRender(e,t){const i=this.getSize(e,t);return this.layout(),this.update(),i}updateNodeActiveClass(){if(!this.group)return;const e=this.getData("isActive");this.group[e?"addClass":"removeClass"]("active")}updateNodeByActive(e){this.group&&(e?this.showExpandBtn():this.hideExpandBtn(),this.updateNodeActiveClass(),this.updateDragHandle())}render(e=()=>{},t=!1,i=!1){this.renderLine();const{openPerformance:r,performanceConfig:s}=this.mindMap.opt;if(t||!r||this.checkIsInClient(s.padding)||this.isRoot?this.group?(this.nodeDraw.has(this.group)||this.nodeDraw.add(this.group),this.needLayout&&(this.needLayout=!1,this.layout()),this.updateExpandBtnPlaceholderRect(),this.update(t)):(this.group=new ft,this.group.addClass("smm-node"),this.group.css({cursor:"default"}),this.bindGroupEvent(),this.nodeDraw.add(this.group),this.layout(),this.update(t)):r&&s.removeNodeWhenOutCanvas&&this.removeSelf(),this.children&&this.children.length&&this.getData("expand")!==!1){let a=0;this.children.forEach(o=>{const l=()=>{o.render(()=>{a++,a>=this.children.length&&e()},t,i)};i?setTimeout(l,0):l()})}else e();this.nodeData.inserting&&(delete this.nodeData.inserting,this.active(),this.mindMap.emit("node_dblclick",this,null,!0))}removeSelf(){this.group&&(this.group.remove(),this.removeGeneralization())}remove(){this.group&&(this.group.remove(),this.removeGeneralization(),this.removeLine(),this.children&&this.children.length&&this.children.forEach(e=>{e.remove()}))}destroy(){this.removeLine(),this.parent&&this.parent.removeLine(),this.group&&(this.emptyUser&&this.emptyUser(),this.resetWhenDelete(),this.group.remove(),this.removeGeneralization(),this.group=null,this.style.onRemove())}hide(){if(this.group&&this.group.hide(),this.hideGeneralization(),this.parent){const e=this.parent.children.indexOf(this);this.parent._lines[e]&&this.parent._lines[e].hide(),this._lines.forEach(t=>{t.hide()})}this.children&&this.children.length&&this.children.forEach(e=>{e.hide()})}show(){if(this.group){if(this.group.show(),this.showGeneralization(),this.parent){const e=this.parent.children.indexOf(this);this.parent._lines[e]&&this.parent._lines[e].show(),this._lines.forEach(t=>{t.show()})}this.children&&this.children.length&&this.children.forEach(e=>{e.show()})}}setOpacity(e){this.group&&this.group.opacity(e),this._lines.forEach(t=>{t.opacity(e)}),this.children.forEach(t=>{t.setOpacity(e)}),this.setGeneralizationOpacity(e)}hideChildren(){this._lines.forEach(e=>{e.hide()}),this.children&&this.children.length&&this.children.forEach(e=>{e.hide()})}showChildren(){this._lines.forEach(e=>{e.show()}),this.children&&this.children.length&&this.children.forEach(e=>{e.show()})}startDrag(){this.isDrag=!0,this.group&&this.group.addClass("smm-node-dragging")}endDrag(){this.isDrag=!1,this.group&&this.group.removeClass("smm-node-dragging")}renderLine(e=!1){if(this.getData("expand")===!1)return;let t=this.nodeData.children.length;this.mindMap.opt.layout===T.LAYOUT.FISHBONE&&(this.isRoot||this.layerIndex===1)&&(t=0),t>this._lines.length?new Array(t-this._lines.length).fill(0).forEach(()=>{this._lines.push(this.lineDraw.path())}):t<this._lines.length&&(this._lines.slice(t).forEach(i=>{i.remove()}),this._lines=this._lines.slice(0,t)),this.renderer.layout.renderLine(this,this._lines,(...i)=>{this.styleLine(...i)},this.style.getStyle("lineStyle",!0)),e&&this.children&&this.children.length>0&&this.children.forEach(i=>{i.renderLine(e)})}getShape(){return this.mindMap.themeConfig.nodeUseLineStyle?T.SHAPE.RECTANGLE:this.style.getStyle("shape",!1,!1)}hasCustomPosition(){return this.customLeft!==void 0&&this.customTop!==void 0}ancestorHasCustomPosition(){let e=this;for(;e;){if(e.hasCustomPosition())return!0;e=e.parent}return!1}ancestorHasGeneralization(){let e=this.parent;for(;e;){if(e.checkHasGeneralization())return!0;e=e.parent}return!1}addChildren(e){this.children.push(e)}styleLine(e,t,i){const r=t.getSelfInhertStyle("lineWidth")||t.getStyle("lineWidth",!0),s=t.getSelfInhertStyle("lineColor")||this.getRainbowLineColor(t)||t.getStyle("lineColor",!0),a=t.getSelfInhertStyle("lineDasharray")||t.getStyle("lineDasharray",!0);this.style.line(e,{width:r,color:s,dasharray:a},i,t)}getRainbowLineColor(e){return this.mindMap.rainbowLines?this.mindMap.rainbowLines.getNodeColor(e):""}removeLine(){this._lines.forEach(e=>{e.remove()}),this._lines=[]}isAncestor(e){if(this.uid===e.uid)return!1;let t=e.parent;for(;t;){if(this.uid===t.uid)return!0;t=t.parent}return!1}isParent(e){if(this.uid===e.uid)return!1;const t=e.parent;return!!(t&&this.uid===t.uid)}isBrother(e){return!this.parent||this.uid===e.uid?!1:this.parent.children.find(t=>t.uid===e.uid)}getIndexInBrothers(){return this.parent&&this.parent.children?this.parent.children.findIndex(e=>e.uid===this.uid):-1}getPaddingVale(){return{paddingX:this.getStyle("paddingX"),paddingY:this.getStyle("paddingY")}}getStyle(e,t){const i=this.style.merge(e,t);return i===void 0?"":i}getSelfStyle(e){return this.style.getSelfStyle(e)}getParentSelfStyle(e){return this.parent?this.parent.getSelfStyle(e)||this.parent.getParentSelfStyle(e):null}getSelfInhertStyle(e){return this.getSelfStyle(e)||this.getParentSelfStyle(e)}getBorderWidth(){return this.style.merge("borderWidth",!1)||0}getData(e){return e?this.nodeData.data[e]:this.nodeData.data}getPureData(e=!0,t=!1){return di({},this,e,t)}getAncestorNodes(){const e=[];let t=this.parent;for(;t;)e.unshift(t),t=t.parent;return e}hasCustomStyle(){return this.style.hasCustomStyle()}getRect(){return this.group?this.group.rbox():null}getRectInSvg(){const{scaleX:e,scaleY:t,translateX:i,translateY:r}=this.mindMap.draw.transform();let{left:s,top:a,width:o,height:l}=this;const h=(s+o)*e+i,c=(a+l)*t+r;return s=s*e+i,a=a*t+r,{left:s,right:h,top:a,bottom:c,width:o*e,height:l*t}}highlight(){this.group&&this.group.addClass("smm-node-highlight")}closeHighlight(){this.group&&this.group.removeClass("smm-node-highlight")}fakeClone(){const e=new yr({...this.opt,uid:$t()});return Object.keys(this).forEach(t=>{e[t]=this[t]}),e}createSvgTextNode(e=""){return new tt().text(e)}getSvgObjects(){return{SVG:lt,G:ft,Rect:Nt}}checkEnableDragModifyNodeWidth(){const{enableDragModifyNodeWidth:e,isUseCustomNodeContent:t,customCreateNodeContent:i}=this.mindMap.opt;return e&&(this.mindMap.richText||t&&i)}hasCustomWidth(){return this.checkEnableDragModifyNodeWidth()&&this.customTextWidth!==void 0}}class W3{constructor(e){this.max=e||1e3,this.size=0,this.pool=new Map}add(e,t){return!this.has(e)&&this.size>=this.max?!1:(this.delete(e),this.pool.set(e,t),this.size++,!0)}delete(e){this.pool.has(e)&&(this.pool.delete(e),this.size--)}has(e){return this.pool.has(e)}get(e){if(this.pool.has(e))return this.pool.get(e)}clear(){this.size=0,this.pool=new Map}}class en{constructor(e){this.renderer=e,this.mindMap=e.mindMap,this.draw=this.mindMap.draw,this.lineDraw=this.mindMap.lineDraw,this.root=null,this.lru=new W3(this.mindMap.opt.maxNodeCacheCount),this.rootNodeCenterOffset=null}doLayout(){throw new Error("【computed】方法为必要方法，需要子类进行重写！")}renderLine(){throw new Error("【renderLine】方法为必要方法，需要子类进行重写！")}renderExpandBtn(){throw new Error("【renderExpandBtn】方法为必要方法，需要子类进行重写！")}renderGeneralization(){}cacheNode(e,t){this.renderer.nodeCache[e]=t,this.lru.add(e,t)}checkIsNeedResizeSources(){return[T.CHANGE_THEME].includes(this.renderer.renderSource)}checkIsLayerTypeChange(e,t){if(e>=2&&t>=2)return!1;if(e>=2&&t<2||e<2&&t>=2)return!0}checkIsLayoutChangeRerenderExpandBtnPlaceholderRect(e){this.renderer.renderSource===T.CHANGE_LAYOUT&&(e.needRerenderExpandBtnPlaceholderRect=!0)}checkIsNodeDataChange(e,t){return e&&(e=typeof e=="string"?JSON.parse(e):e,e.isActive=t.isActive,e.expand=t.expand,e=JSON.stringify(e)),e!==JSON.stringify(t)}createNode(e,t,i,r,s,a){const o={};this.mindMap.nodeInnerPrefixList.forEach(c=>{if(c.createNodeData){const[d,f]=c.createNodeData({data:e,parent:t,ancestors:a,layerIndex:r,index:s});o[d]=f}});const l=e.data.uid;let h=null;if(e&&e._node&&!this.renderer.reRender){h=e._node;const c=this.checkIsLayerTypeChange(h.layerIndex,r);h.reset(),h.layerIndex=r,i?h.isRoot=!0:h.parent=t._node,this.cacheNode(e._node.uid,h),this.checkIsLayoutChangeRerenderExpandBtnPlaceholderRect(h);let d=!1;this.mindMap.nodeInnerPrefixList.forEach(u=>{if(u.updateNodeData){const g=u.updateNodeData(h,o);g&&(d=g)}});const f=this.checkIsNeedResizeSources(),m=this.checkIsNodeDataChange(e._node.nodeDataSnapshot,e.data);(f||m||c||h.getData("resetRichText")||h.getData("needUpdate")||d)&&(h.getSize(),h.needLayout=!0),this.checkGetGeneralizationChange(h,f)}else if((this.lru.has(l)||this.renderer.lastNodeCache[l])&&!this.renderer.reRender){h=this.lru.get(l)||this.renderer.lastNodeCache[l];const c=JSON.stringify(h.getData()),d=this.checkIsLayerTypeChange(h.layerIndex,r);h.reset(),h.nodeData=h.handleData(e||{}),h.layerIndex=r,i?h.isRoot=!0:h.parent=t._node,this.cacheNode(l,h),this.checkIsLayoutChangeRerenderExpandBtnPlaceholderRect(h),e._node=h;const f=this.checkIsNeedResizeSources(),m=this.checkIsNodeDataChange(c,e.data);let u=!1;this.mindMap.nodeInnerPrefixList.forEach(g=>{if(g.updateNodeData){const p=g.updateNodeData(h,o);p&&(u=p)}}),(f||m||d||h.getData("resetRichText")||h.getData("needUpdate")||u)&&(h.getSize(),h.needLayout=!0),this.checkGetGeneralizationChange(h,f)}else{const c=l||$t();h=new yr({data:e,uid:c,renderer:this.renderer,mindMap:this.mindMap,draw:this.draw,layerIndex:r,isRoot:i,parent:i?null:t._node,...o}),e.data.uid=c,this.cacheNode(c,h),e._node=h}return e.data.isActive&&this.renderer.addNodeToActiveList(h),this.mindMap.renderer.findActiveNodeIndex(h)!==-1&&h.setData({isActive:!0}),i?this.root=h:t._node.addChildren(h),h}checkGetGeneralizationChange(e,t){const i=e.getData("generalization");i&&e._generalizationList&&e._generalizationList.length>0&&e._generalizationList.forEach((r,s)=>{const a=r.generalizationNode,o=a.getData(),l=i[s];(t||l&&JSON.stringify(o)!==JSON.stringify(l))&&(l&&(a.nodeData.data=l),a.getSize(),a.needLayout=!0)})}formatPosition(e,t,i){return typeof e=="number"?e:ma[e]!==void 0?t*ma[e]:/^\d\d*%$/.test(e)?Number.parseFloat(e)/100*t:(t-i)/2}formatInitRootNodePosition(e){const{CENTER:t}=T.INIT_ROOT_NODE_POSITION;return(!e||!Array.isArray(e)||e.length<2)&&(e=[t,t]),e}setNodeCenter(e,t){let{initRootNodePosition:i}=this.mindMap.opt;i=this.formatInitRootNodePosition(t||i),e.left=this.formatPosition(i[0],this.mindMap.width,e.width),e.top=this.formatPosition(i[1],this.mindMap.height,e.height)}getRootCenterOffset(e,t){if(this.rootNodeCenterOffset)return this.rootNodeCenterOffset;let{initRootNodePosition:i}=this.mindMap.opt;const{CENTER:r}=T.INIT_ROOT_NODE_POSITION;if(i=this.formatInitRootNodePosition(i),i[0]===r&&i[1]===r)this.rootNodeCenterOffset={x:0,y:0};else{const s={width:e,height:t},a={width:e,height:t};this.setNodeCenter(s,[r,r]),this.setNodeCenter(a),this.rootNodeCenterOffset={x:a.left-s.left,y:a.top-s.top}}return this.rootNodeCenterOffset}updateChildren(e,t,i){e.forEach(r=>{r[t]+=i,r.children&&r.children.length&&!r.hasCustomPosition()&&this.updateChildren(r.children,t,i)})}updateChildrenPro(e,t){e.forEach(i=>{Object.keys(t).forEach(r=>{i[r]+=t[r]}),i.children&&i.children.length&&!i.hasCustomPosition()&&this.updateChildrenPro(i.children,t)})}getNodeAreaWidth(e,t=!1){let i=[],r=0,s=(a,o)=>{t&&a.checkHasGeneralization()&&(r+=a._generalizationNodeWidth),a.children.length?(o+=a.width/2,a.children.forEach(l=>{s(l,o)})):(o+=a.width,i.push(o))};return s(e,0),Math.max(...i)+r}quadraticCurvePath(e,t,i,r,s=!1){let a,o;return s?(a=e+(i-e)*.8,o=t+(r-t)*.2):(a=e+(i-e)*.2,o=t+(r-t)*.8),`M ${e},${t} Q ${a},${o} ${i},${r}`}cubicBezierPath(e,t,i,r,s=!1){let a,o,l,h;return s?(a=e,o=t+(r-t)/2,l=i,h=o):(a=e+(i-e)/2,o=t,l=a,h=r),`M ${e},${t} C ${a},${o} ${l},${h} ${i},${r}`}computeNewPoint(e,t,i=0){if(e[0]===t[0])return t[1]>e[1]?[t[0],t[1]-i]:[t[0],t[1]+i];if(e[1]===t[1])return t[0]>e[0]?[t[0]-i,t[1]]:[t[0]+i,t[1]]}createFoldLine(e){const{lineRadius:t}=this.mindMap.themeConfig,i=e.length;let r="",s="";if(i>=3&&t>0){const a=e[i-3],o=e[i-2],l=e[i-1];if(!(a[0].toFixed(0)===o[0].toFixed(0)&&o[0].toFixed(0)===l[0].toFixed(0)||a[1].toFixed(0)===o[1].toFixed(0)&&o[1].toFixed(0)===l[1].toFixed(0))){const c=this.computeNewPoint(a,o,t),d=this.computeNewPoint(l,o,t);s=`Q ${o[0]},${o[1]} ${d[0]},${d[1]}`,e.splice(i-2,1,c,s)}}return e.forEach((a,o)=>{if(typeof a=="string")r+=a;else{const[l,h]=a;o===0?r+=`M ${l},${h}`:r+=`L ${l},${h}`}}),r}getMarginX(e){const{themeConfig:t,opt:i}=this.mindMap,{second:r,node:s}=t,a=i.hoverRectPadding*2;return e===1?r.marginX+a:s.marginX+a}getMarginY(e){const{themeConfig:t,opt:i}=this.mindMap,{second:r,node:s}=t,a=i.hoverRectPadding*2;return e===1?r.marginY+a:s.marginY+a}getNodeWidthWithGeneralization(e){return Math.max(e.width,e.checkHasGeneralization()?e._generalizationNodeWidth:0)}getNodeHeightWithGeneralization(e){return Math.max(e.height,e.checkHasGeneralization()?e._generalizationNodeHeight:0)}getNodeBoundaries(e,t){let{generalizationLineMargin:i,generalizationNodeMargin:r}=this.mindMap.themeConfig,s=c=>{let d=1/0,f=-1/0,m=1/0,u=-1/0;c.children&&c.children.length>0&&c.children.forEach(p=>{let{left:x,right:w,top:y,bottom:C}=s(p),E=p.checkHasGeneralization()&&p.getData("expand")?p._generalizationNodeWidth+r:0,M=p.checkHasGeneralization()&&p.getData("expand")?p._generalizationNodeHeight+r:0;x-(t==="h"?E:0)<d&&(d=x-(t==="h"?E:0)),w+(t==="h"?E:0)>f&&(f=w+(t==="h"?E:0)),y<m&&(m=y),C+(t==="v"?M:0)>u&&(u=C+(t==="v"?M:0))});let g={left:c.left,right:c.left+c.width,top:c.top,bottom:c.top+c.height};return{left:g.left<d?g.left:d,right:g.right>f?g.right:f,top:g.top<m?g.top:m,bottom:g.bottom>u?g.bottom:u}},{left:a,right:o,top:l,bottom:h}=s(e);return{left:a,right:o,top:l,bottom:h,generalizationLineMargin:i,generalizationNodeMargin:r}}getChildrenBoundaries(e,t,i=0,r){let{generalizationLineMargin:s,generalizationNodeMargin:a}=this.mindMap.themeConfig;const o=e.children.slice(i,r+1);let l=1/0,h=-1/0,c=1/0,d=-1/0;return o.forEach(f=>{const m=this.getNodeBoundaries(f,t);l=m.left<l?m.left:l,h=m.right>h?m.right:h,c=m.top<c?m.top:c,d=m.bottom>d?m.bottom:d}),{left:l,right:h,top:c,bottom:d,generalizationLineMargin:s,generalizationNodeMargin:a}}getNodeGeneralizationRenderBoundaries(e,t){let i=null;return e.range?i=this.getChildrenBoundaries(e.node,t,e.range[0],e.range[1]):i=this.getNodeBoundaries(e.node,t),i}getNodeActChildrenLength(e){return e.nodeData.children&&e.nodeData.children.length}setLineStyle(e,t,i,r){t.plot(this.transformPath(i)),e&&e(t,r,!0)}transformPath(e){const{customTransformNodeLinePath:t}=this.mindMap.opt;return t?t(e):e}}class $a extends en{constructor(e={},t){super(e),this.isUseLeft=t===T.LAYOUT.LOGICAL_STRUCTURE_LEFT}doLayout(e){En([()=>{this.computedBaseValue()},()=>{this.computedTopValue()},()=>{this.adjustTopValue()},()=>{e(this.root)}])}computedBaseValue(){let e=0;Le(this.renderer.renderTree,null,(t,i,r,s,a,o)=>{let l=this.createNode(t,i,r,s,a,o);if(l.sortIndex=e,e++,r?this.setNodeCenter(l):this.isUseLeft?l.left=i._node.left-l.width-this.getMarginX(s):l.left=i._node.left+i._node.width+this.getMarginX(s),!t.data.expand)return!0},(t,i,r,s)=>{let a=t.data.expand===!1?0:t._node.children.length;t._node.childrenAreaHeight=a?t._node.children.reduce((l,h)=>l+h.height,0)+(a+1)*this.getMarginY(s+1):0;let o=t._node.checkHasGeneralization()?t._node._generalizationNodeHeight+this.getMarginY(s+1):0;t._node.childrenAreaHeight2=Math.max(t._node.childrenAreaHeight,o)},!0,0)}computedTopValue(){Le(this.root,null,(e,t,i,r)=>{if(e.getData("expand")&&e.children&&e.children.length){let s=this.getMarginY(r+1),o=e.top+e.height/2-e.childrenAreaHeight/2+s;e.children.forEach(l=>{l.top=o,o+=l.height+s})}},null,!0)}adjustTopValue(){Le(this.root,null,(e,t,i,r)=>{if(!e.getData("expand"))return;let s=e.childrenAreaHeight2-this.getMarginY(r+1)*2-e.height;s>0&&this.updateBrothers(e,s/2)},null,!0)}updateBrothers(e,t){if(e.parent){let i=e.parent.children,r=Je(e,i);i.forEach((s,a)=>{if(s.uid===e.uid||s.hasCustomPosition())return;let o=0;a<r?o=-t:a>r&&(o=t),s.top+=o,s.children&&s.children.length&&this.updateChildren(s.children,"top",o)}),this.updateBrothers(e.parent,t)}}renderLine(e,t,i,r){r==="curve"?this.renderLineCurve(e,t,i):r==="direct"?this.renderLineDirect(e,t,i):this.renderLineStraight(e,t,i)}renderLineStraight(e,t,i){if(e.children.length<=0)return[];let{left:r,top:s,width:a,height:o,expandBtnSize:l}=e;const{alwaysShowExpandBtn:h,notShowExpandBtn:c}=this.mindMap.opt;(!h||c)&&(l=0);let f=(this.getMarginX(e.layerIndex+1)-l)*.6;this.isUseLeft&&(f*=-1);let m=this.mindMap.themeConfig.nodeUseLineStyle;e.children.forEach((u,g)=>{let p;this.isUseLeft?p=e.layerIndex===0?r:r-l:p=e.layerIndex===0?r+a:r+a+l;let x=s+o/2,w=this.isUseLeft?u.left+u.width:u.left,y=u.top+u.height/2,C=m?u.width*(this.isUseLeft?-1:1):0;x=m&&!e.isRoot?x+o/2:x,y=m?y+u.height/2:y;let E=this.createFoldLine([[p,x],[p+f,x],[p+f,y],[w+C,y]]);this.setLineStyle(i,t[g],E,u)})}renderLineDirect(e,t,i){if(e.children.length<=0)return[];let{left:r,top:s,width:a,height:o,expandBtnSize:l}=e;const{alwaysShowExpandBtn:h,notShowExpandBtn:c}=this.mindMap.opt;(!h||c)&&(l=0);const{nodeUseLineStyle:d}=this.mindMap.themeConfig;e.children.forEach((f,m)=>{e.layerIndex===0&&(l=0);let u=this.isUseLeft?r-l:r+a+l,g=s+o/2,p=this.isUseLeft?f.left+f.width:f.left,x=f.top+f.height/2;g=d&&!e.isRoot?g+o/2:g,x=d?x+f.height/2:x;let w=d?` L ${this.isUseLeft?f.left:f.left+f.width},${x}`:"",y=`M ${u},${g} L ${p},${x}`+w;this.setLineStyle(i,t[m],y,f)})}renderLineCurve(e,t,i){if(e.children.length<=0)return[];let{left:r,top:s,width:a,height:o,expandBtnSize:l}=e;const{alwaysShowExpandBtn:h,notShowExpandBtn:c}=this.mindMap.opt;(!h||c)&&(l=0);const{nodeUseLineStyle:d,rootLineStartPositionKeepSameInCurve:f,rootLineKeepSameInCurve:m}=this.mindMap.themeConfig;e.children.forEach((u,g)=>{e.layerIndex===0&&(l=0);let p;this.isUseLeft?p=e.layerIndex===0&&!f?r+a/2:r-l:p=e.layerIndex===0&&!f?r+a/2:r+a+l;let x=s+o/2,w=this.isUseLeft?u.left+u.width:u.left,y=u.top+u.height/2,C="";x=d&&!e.isRoot?x+o/2:x,y=d?y+u.height/2:y;let E;this.isUseLeft?E=d?` L ${u.left},${y}`:"":E=d?` L ${u.left+u.width},${y}`:"",e.isRoot&&!m?C=this.quadraticCurvePath(p,x,w,y)+E:C=this.cubicBezierPath(p,x,w,y)+E,this.setLineStyle(i,t[g],C,u)})}renderExpandBtn(e,t){let{width:i,height:r,expandBtnSize:s,layerIndex:a}=e;a===0&&(s=0);let{translateX:o,translateY:l}=t.transform(),h=this.mindMap.themeConfig.nodeUseLineStyle?r/2:0,c=this.isUseLeft?0-s:i,d=r/2+h;c===o&&d===l||t.translate(c-o,d-l)}renderGeneralization(e){e.forEach(t=>{let{left:i,top:r,bottom:s,right:a,generalizationLineMargin:o,generalizationNodeMargin:l}=this.getNodeGeneralizationRenderBoundaries(t,"h"),h=this.isUseLeft?i-o:a+o,c=h,d=r,f=h,m=s,u=c+(this.isUseLeft?-20:20),g=d+(m-d)/2,p=`M ${c},${d} Q ${u},${g} ${f},${m}`;t.generalizationLine.plot(p),t.generalizationNode.left=h+(this.isUseLeft?-l:l)-(this.isUseLeft?t.generalizationNode.width:0),t.generalizationNode.top=r+(s-r-t.generalizationNode.height)/2})}renderExpandBtnRect(e,t,i,r){this.isUseLeft?e.size(t,r).x(-t).y(0):e.size(t,r).x(i).y(0)}}let V3=class extends en{constructor(e={}){super(e)}doLayout(e){En([()=>{this.computedBaseValue()},()=>{this.computedTopValue()},()=>{this.adjustTopValue()},()=>{e(this.root)}])}computedBaseValue(){Le(this.renderer.renderTree,null,(e,t,i,r,s,a)=>{let o=this.createNode(e,t,i,r,s,a);if(i?this.setNodeCenter(o):(t._node.dir?o.dir=t._node.dir:o.dir=o.getData("dir")||(s%2===0?T.LAYOUT_GROW_DIR.RIGHT:T.LAYOUT_GROW_DIR.LEFT),o.left=o.dir===T.LAYOUT_GROW_DIR.RIGHT?t._node.left+t._node.width+this.getMarginX(r):t._node.left-this.getMarginX(r)-o.width),!e.data.expand)return!0},(e,t,i,r)=>{if(!e.data.expand){e._node.leftChildrenAreaHeight=0,e._node.rightChildrenAreaHeight=0;return}let s=0,a=0,o=0,l=0;e._node.children.forEach(c=>{c.dir===T.LAYOUT_GROW_DIR.LEFT?(s++,o+=c.height):(a++,l+=c.height)}),e._node.leftChildrenAreaHeight=o+(s+1)*this.getMarginY(r+1),e._node.rightChildrenAreaHeight=l+(a+1)*this.getMarginY(r+1);let h=e._node.checkHasGeneralization()?e._node._generalizationNodeHeight+this.getMarginY(r+1):0;e._node.leftChildrenAreaHeight2=Math.max(e._node.leftChildrenAreaHeight,h),e._node.rightChildrenAreaHeight2=Math.max(e._node.rightChildrenAreaHeight,h)},!0,0)}computedTopValue(){Le(this.root,null,(e,t,i,r)=>{if(e.getData("expand")&&e.children&&e.children.length){let s=this.getMarginY(r+1),a=e.top+e.height/2+s,o=a-e.leftChildrenAreaHeight/2,l=a-e.rightChildrenAreaHeight/2;e.children.forEach(h=>{h.dir===T.LAYOUT_GROW_DIR.LEFT?(h.top=o,o+=h.height+s):(h.top=l,l+=h.height+s)})}},null,!0)}adjustTopValue(){Le(this.root,null,(e,t,i,r)=>{if(!e.getData("expand"))return;let s=this.getMarginY(r+1)*2+e.height,a=e.leftChildrenAreaHeight2-s,o=e.rightChildrenAreaHeight2-s;(a>0||o>0)&&this.updateBrothers(e,a/2,o/2)},null,!0)}updateBrothers(e,t,i){if(e.parent){let r=e.parent.children.filter(a=>a.dir===e.dir),s=Je(e,r);r.forEach((a,o)=>{if(a.hasCustomPosition())return;let l=0,h=a.dir===T.LAYOUT_GROW_DIR.LEFT?t:i;o<s?l=-h:o>s&&(l=h),a.top+=l,a.children&&a.children.length&&this.updateChildren(a.children,"top",l)}),this.updateBrothers(e.parent,t,i)}}renderLine(e,t,i,r){r==="curve"?this.renderLineCurve(e,t,i):r==="direct"?this.renderLineDirect(e,t,i):this.renderLineStraight(e,t,i)}renderLineStraight(e,t,i){if(e.children.length<=0)return[];let{left:r,top:s,width:a,height:o,expandBtnSize:l}=e;const{alwaysShowExpandBtn:h,notShowExpandBtn:c}=this.mindMap.opt;(!h||c)&&(l=0);let f=(this.getMarginX(e.layerIndex+1)-l)*.6,m=this.mindMap.themeConfig.nodeUseLineStyle;e.children.forEach((u,g)=>{let p=0,x=0,w=m?u.width:0;u.dir===T.LAYOUT_GROW_DIR.LEFT?(x=-f,p=e.layerIndex===0?r:r-l,w=-w):(x=f,p=e.layerIndex===0?r+a:r+a+l);let y=s+o/2,C=u.dir===T.LAYOUT_GROW_DIR.LEFT?u.left+u.width:u.left,E=u.top+u.height/2;y=m&&!e.isRoot?y+o/2:y,E=m?E+u.height/2:E;let M=this.createFoldLine([[p,y],[p+x,y],[p+x,E],[C+w,E]]);this.setLineStyle(i,t[g],M,u)})}renderLineDirect(e,t,i){if(e.children.length<=0)return[];let{left:r,top:s,width:a,height:o,expandBtnSize:l}=e;const{alwaysShowExpandBtn:h,notShowExpandBtn:c}=this.mindMap.opt;(!h||c)&&(l=0);const{nodeUseLineStyle:d}=this.mindMap.themeConfig;e.children.forEach((f,m)=>{e.layerIndex===0&&(l=0);let u=f.dir===T.LAYOUT_GROW_DIR.LEFT?r-l:r+a+l,g=s+o/2,p=f.dir===T.LAYOUT_GROW_DIR.LEFT?f.left+f.width:f.left,x=f.top+f.height/2;g=d&&!e.isRoot?g+o/2:g,x=d?x+f.height/2:x;let w="";d&&(f.dir===T.LAYOUT_GROW_DIR.LEFT?w=` L ${f.left},${x}`:w=` L ${f.left+f.width},${x}`);let y=`M ${u},${g} L ${p},${x}`+w;this.setLineStyle(i,t[m],y,f)})}renderLineCurve(e,t,i){if(e.children.length<=0)return[];let{left:r,top:s,width:a,height:o,expandBtnSize:l}=e;const{alwaysShowExpandBtn:h,notShowExpandBtn:c}=this.mindMap.opt;(!h||c)&&(l=0);const{nodeUseLineStyle:d,rootLineKeepSameInCurve:f,rootLineStartPositionKeepSameInCurve:m}=this.mindMap.themeConfig;e.children.forEach((u,g)=>{e.layerIndex===0&&(l=0);let p=e.layerIndex===0&&!m?r+a/2:u.dir===T.LAYOUT_GROW_DIR.LEFT?r-l:r+a+l,x=s+o/2,w=u.dir===T.LAYOUT_GROW_DIR.LEFT?u.left+u.width:u.left,y=u.top+u.height/2,C="";x=d&&!e.isRoot?x+o/2:x,y=d?y+u.height/2:y;let E="";d&&(u.dir===T.LAYOUT_GROW_DIR.LEFT?E=` L ${u.left},${y}`:E=` L ${u.left+u.width},${y}`),e.isRoot&&!f?C=this.quadraticCurvePath(p,x,w,y)+E:C=this.cubicBezierPath(p,x,w,y)+E,this.setLineStyle(i,t[g],C,u)})}renderExpandBtn(e,t){let{width:i,height:r,expandBtnSize:s}=e,{translateX:a,translateY:o}=t.transform(),l=this.mindMap.themeConfig.nodeUseLineStyle?r/2:0,h=e.dir===T.LAYOUT_GROW_DIR.LEFT?0-s:i,c=r/2+l;if(h===a&&c===o)return;let d=h-a,f=c-o;t.translate(d,f)}renderGeneralization(e){e.forEach(t=>{let i=t.node.dir===T.LAYOUT_GROW_DIR.LEFT,{top:r,bottom:s,left:a,right:o,generalizationLineMargin:l,generalizationNodeMargin:h}=this.getNodeGeneralizationRenderBoundaries(t,"h"),c=i?a-l:o+l,d=c,f=r,m=c,u=s,g=d+(i?-20:20),p=f+(u-f)/2,x=`M ${d},${f} Q ${g},${p} ${m},${u}`;t.generalizationLine.plot(x),t.generalizationNode.left=c+(i?-h:h)-(i?t.generalizationNode.width:0),t.generalizationNode.top=r+(s-r-t.generalizationNode.height)/2})}renderExpandBtnRect(e,t,i,r,s){s.dir===T.LAYOUT_GROW_DIR.LEFT?e.size(t,r).x(-t).y(0):e.size(t,r).x(i).y(0)}};class j3 extends en{constructor(e={}){super(e)}doLayout(e){En([()=>{this.computedBaseValue()},()=>{this.computedLeftTopValue()},()=>{this.adjustLeftTopValue()},()=>{e(this.root)}])}computedBaseValue(){Le(this.renderer.renderTree,null,(e,t,i,r,s,a)=>{let o=this.createNode(e,t,i,r,s,a);if(i?this.setNodeCenter(o):t._node.isRoot&&(o.top=t._node.top+t._node.height+this.getMarginX(r)),!e.data.expand)return!0},(e,t,i,r)=>{if(i){let s=e.data.expand===!1?0:e._node.children.length;e._node.childrenAreaWidth=s?e._node.children.reduce((a,o)=>a+o.width,0)+(s+1)*this.getMarginX(r+1):0}},!0,0)}computedLeftTopValue(){Le(this.root,null,(e,t,i,r)=>{if(e.getData("expand")&&e.children&&e.children.length){let s=this.getMarginX(r+1),a=this.getMarginY(r+1);if(i){let l=e.left+e.width/2-e.childrenAreaWidth/2+s;e.children.forEach(h=>{h.left=l,l+=h.width+s})}else{let o=e.top+this.getNodeHeightWithGeneralization(e)+a+(this.getNodeActChildrenLength(e)>0?e.expandBtnSize:0);e.children.forEach(l=>{l.left=e.left+e.width*.5,l.top=o,o+=this.getNodeHeightWithGeneralization(l)+a+(this.getNodeActChildrenLength(l)>0?l.expandBtnSize:0)})}}},null,!0)}adjustLeftTopValue(){Le(this.root,null,(e,t,i,r)=>{if(!e.getData("expand"))return;if(t&&t.isRoot){let o=this.getNodeAreaWidth(e,!0)-e.width;o>0&&this.updateBrothersLeft(e,o)}let s=e.children.length;if(t&&!t.isRoot&&s>0){let a=this.getMarginY(r+1),o=e.children.reduce((l,h)=>l+this.getNodeHeightWithGeneralization(h)+(this.getNodeActChildrenLength(h)>0?h.expandBtnSize:0),0)+s*a;this.updateBrothersTop(e,o)}},(e,t,i)=>{if(i){let{right:r,left:s}=this.getNodeBoundaries(e,"h"),a=r-s,o=e.left-s-(a-e.width)/2;this.updateChildren(e.children,"left",o)}},!0)}updateBrothersLeft(e,t){if(e.parent){let i=e.parent.children,r=Je(e,i);i.forEach((s,a)=>{s.hasCustomPosition()||a<=r||(s.left+=t,s.children&&s.children.length&&this.updateChildren(s.children,"left",t))}),this.updateBrothersLeft(e.parent,t)}}updateBrothersTop(e,t){if(e.parent&&!e.parent.isRoot){let i=e.parent.children,r=Je(e,i);i.forEach((s,a)=>{if(s.hasCustomPosition())return;let o=0;a>r&&(o=t),s.top+=o,s.children&&s.children.length&&this.updateChildren(s.children,"top",o)}),this.updateBrothersTop(e.parent,t)}}renderLine(e,t,i){if(e.children.length<=0)return[];let{left:r,top:s,width:a,height:o,expandBtnSize:l}=e;const{alwaysShowExpandBtn:h,notShowExpandBtn:c}=this.mindMap.opt;(!h||c)&&(l=0);let d=e.children.length,f=this.getMarginX(e.layerIndex+1);if(e.isRoot){let m=r+a/2,u=s+o,g=f*.7,p=1/0,x=-1/0;e.children.forEach((y,C)=>{let E=y.left+y.width/2,M=y.top;E<p&&(p=E),E>x&&(x=E);let b=this.mindMap.themeConfig.nodeUseLineStyle?` L ${y.left},${M} L ${y.left+y.width},${M}`:"",N=`M ${E},${u+g} L ${E},${u+g>M?M+y.height:M}`+b;this.setLineStyle(i,t[C],N,y)}),p=Math.min(p,m),x=Math.max(x,m);let w=this.lineDraw.path();if(e.style.line(w),w.plot(this.transformPath(`M ${m},${u} L ${m},${u+g}`)),e._lines.push(w),i&&i(w,e),d>0){let y=this.lineDraw.path();e.style.line(y),y.plot(this.transformPath(`M ${p},${u+g} L ${x},${u+g}`)),e._lines.push(y),i&&i(y,e)}}else{let m=s+o,u=-1/0,g=e.left+e.width*.3;if(e.children.forEach((p,x)=>{let w=p.top+p.height/2;w>u&&(u=w);let y="",C=p.left,E=p.left+p.width<g,M=!1;E?C=p.left+p.width:p.left<g&&p.left+p.width>g&&(M=!0,w=p.top,u=w),w>s&&w<m?y=`M ${E?e.left:e.left+e.width},${w} L ${C},${w}`:w<m?(M&&(w=p.top+p.height,C=g),y=`M ${g},${s} L ${g},${w} L ${C},${w}`):(M&&(C=g),y=`M ${g},${w} L ${C},${w}`);let b=this.mindMap.themeConfig.nodeUseLineStyle?` L ${C},${w-p.height/2} L ${C},${w+p.height/2}`:"";y+=b,this.setLineStyle(i,t[x],y,p)}),d>0){let p=this.lineDraw.path();l=d>0?l:0,e.style.line(p),u<m+l?p.hide():(p.plot(this.transformPath(`M ${g},${m+l} L ${g},${u}`)),p.show()),e._lines.push(p),i&&i(p,e)}}}renderExpandBtn(e,t){let{width:i,height:r,expandBtnSize:s,isRoot:a}=e;if(!a){let{translateX:o,translateY:l}=t.transform();t.translate(i*.3-s/2-o,r+s/2-l)}}renderGeneralization(e){e.forEach(t=>{let{top:i,bottom:r,right:s,generalizationLineMargin:a,generalizationNodeMargin:o}=this.getNodeGeneralizationRenderBoundaries(t,"h"),l=s+a,h=i,c=s+a,d=r,f=l+20,m=h+(d-h)/2,u=`M ${l},${h} Q ${f},${m} ${c},${d}`;t.generalizationLine.plot(this.transformPath(u)),t.generalizationNode.left=s+o,t.generalizationNode.top=i+(r-i-t.generalizationNode.height)/2})}renderExpandBtnRect(e,t,i,r,s){e.size(i,t).x(0).y(r)}}class U3 extends en{constructor(e={}){super(e)}doLayout(e){En([()=>{this.computedBaseValue()},()=>{this.computedLeftValue()},()=>{this.adjustLeftValue()},()=>{e(this.root)}])}computedBaseValue(){Le(this.renderer.renderTree,null,(e,t,i,r,s,a)=>{let o=this.createNode(e,t,i,r,s,a);if(i?this.setNodeCenter(o):o.top=t._node.top+t._node.height+this.getMarginX(r),!e.data.expand)return!0},(e,t,i,r)=>{let s=e.data.expand===!1?0:e._node.children.length;e._node.childrenAreaWidth=s?e._node.children.reduce((o,l)=>o+l.width,0)+(s+1)*this.getMarginY(r+1):0;let a=e._node.checkHasGeneralization()?e._node._generalizationNodeWidth+this.getMarginY(r+1):0;e._node.childrenAreaWidth2=Math.max(e._node.childrenAreaWidth,a)},!0,0)}computedLeftValue(){Le(this.root,null,(e,t,i,r)=>{if(e.getData("expand")&&e.children&&e.children.length){let s=this.getMarginY(r+1),o=e.left+e.width/2-e.childrenAreaWidth/2+s;e.children.forEach(l=>{l.left=o,o+=l.width+s})}},null,!0)}adjustLeftValue(){Le(this.root,null,(e,t,i,r)=>{if(!e.getData("expand"))return;let s=e.childrenAreaWidth2-this.getMarginY(r+1)*2-e.width;s>0&&this.updateBrothers(e,s/2)},null,!0)}updateBrothers(e,t){if(e.parent){let i=e.parent.children,r=Je(e,i);i.forEach((s,a)=>{if(s.hasCustomPosition())return;let o=0;a<r?o=-t:a>r&&(o=t),s.left+=o,s.children&&s.children.length&&this.updateChildren(s.children,"left",o)}),this.updateBrothers(e.parent,t)}}renderLine(e,t,i,r){r==="curve"?this.renderLineCurve(e,t,i):r==="direct"?this.renderLineDirect(e,t,i):this.renderLineStraight(e,t,i)}renderLineCurve(e,t,i){if(e.children.length<=0)return[];let{left:r,top:s,width:a,height:o,expandBtnSize:l}=e;const{alwaysShowExpandBtn:h,notShowExpandBtn:c}=this.mindMap.opt;(!h||c)&&(l=0);const{nodeUseLineStyle:d,rootLineStartPositionKeepSameInCurve:f,rootLineKeepSameInCurve:m}=this.mindMap.themeConfig;e.children.forEach((u,g)=>{e.layerIndex===0&&(l=0);let p=r+a/2,x=e.layerIndex===0&&!f?s+o/2:s+o+l,w=u.left+u.width/2,y=u.top,C="",E=d?` L ${u.left},${y} L ${u.left+u.width},${y}`:"";e.isRoot&&!m?C=this.quadraticCurvePath(p,x,w,y,!0)+E:C=this.cubicBezierPath(p,x,w,y,!0)+E,this.setLineStyle(i,t[g],C,u)})}renderLineDirect(e,t,i){if(e.children.length<=0)return[];let{left:r,top:s,width:a,height:o}=e;const{nodeUseLineStyle:l}=this.mindMap.themeConfig;let h=r+a/2,c=s+o;e.children.forEach((d,f)=>{let m=d.left+d.width/2,u=d.top,g=l?` L ${d.left},${u} L ${d.left+d.width},${u}`:"",p=`M ${h},${c} L ${m},${u}`+g;this.setLineStyle(i,t[f],p,d)})}renderLineStraight(e,t,i){if(e.children.length<=0)return[];let{left:r,top:s,width:a,height:o,expandBtnSize:l,isRoot:h}=e;const{alwaysShowExpandBtn:c,notShowExpandBtn:d}=this.mindMap.opt;(!c||d)&&(l=0);let f=r+a/2,m=s+o,g=this.getMarginX(e.layerIndex+1)*.7,p=1/0,x=-1/0,w=e.children.length;e.children.forEach((C,E)=>{let M=C.left+C.width/2,b=m+g>C.top?C.top+C.height:C.top;M<p&&(p=M),M>x&&(x=M);let N=this.mindMap.themeConfig.nodeUseLineStyle?` L ${C.left},${b} L ${C.left+C.width},${b}`:"",S=`M ${M},${m+g} L ${M},${b}`+N;this.setLineStyle(i,t[E],S,C)}),p=Math.min(f,p),x=Math.max(f,x);let y=this.lineDraw.path();if(e.style.line(y),l=w>0&&!h?l:0,y.plot(this.transformPath(`M ${f},${m+l} L ${f},${m+g}`)),e._lines.push(y),i&&i(y,e),w>0){let C=this.lineDraw.path();e.style.line(C),C.plot(this.transformPath(`M ${p},${m+g} L ${x},${m+g}`)),e._lines.push(C),i&&i(C,e)}}renderExpandBtn(e,t){let{width:i,height:r,expandBtnSize:s}=e,{translateX:a,translateY:o}=t.transform();t.translate(i/2-s/2-a,r+s/2-o)}renderGeneralization(e){e.forEach(t=>{let{bottom:i,left:r,right:s,generalizationLineMargin:a,generalizationNodeMargin:o}=this.getNodeGeneralizationRenderBoundaries(t,"v"),l=r,h=i+a,c=s,d=i+a,f=l+(c-l)/2,m=h+20,u=`M ${l},${h} Q ${f},${m} ${c},${d}`;t.generalizationLine.plot(this.transformPath(u)),t.generalizationNode.top=i+o,t.generalizationNode.left=r+(s-r-t.generalizationNode.width)/2})}renderExpandBtnRect(e,t,i,r,s){e.size(i,t).x(0).y(r)}}class Ha extends en{constructor(e={},t){super(e),this.layout=t}doLayout(e){En([()=>{this.computedBaseValue()},()=>{this.computedLeftTopValue()},()=>{this.adjustLeftTopValue()},()=>{e(this.root)}])}computedBaseValue(){Le(this.renderer.renderTree,null,(e,t,i,r,s,a)=>{let o=this.createNode(e,t,i,r,s,a);if(i?this.setNodeCenter(o):(this.layout===T.LAYOUT.TIMELINE2?t._node.dir?o.dir=t._node.dir:o.dir=s%2===0?T.LAYOUT_GROW_DIR.BOTTOM:T.LAYOUT_GROW_DIR.TOP:o.dir="",t._node.isRoot&&(o.top=t._node.top+(e._node.height>t._node.height?-(e._node.height-t._node.height)/2:(t._node.height-e._node.height)/2))),!e.data.expand)return!0},null,!0,0)}computedLeftTopValue(){Le(this.root,null,(e,t,i,r,s)=>{if(e.getData("expand")&&e.children&&e.children.length){let a=this.getMarginX(r+1),o=this.getMarginY(r+1);if(i){let h=e.left+e.width+a;e.children.forEach(c=>{c.left=h,h+=c.width+a})}else{let l=e.top+e.height+o+(this.getNodeActChildrenLength(e)>0?e.expandBtnSize:0);e.children.forEach(h=>{h.left=e.left+e.width*.5,h.top=l,l+=h.height+o+(this.getNodeActChildrenLength(h)>0?h.expandBtnSize:0)})}}},null,!0)}adjustLeftTopValue(){Le(this.root,null,(e,t,i,r)=>{if(!e.getData("expand"))return;e.isRoot&&this.updateBrothersLeft(e);let s=e.children.length;if(t&&!t.isRoot&&s>0){let a=this.getMarginY(r+1),o=e.children.reduce((l,h)=>l+h.height+(this.getNodeActChildrenLength(h)>0?h.expandBtnSize:0),0)+s*a;this.updateBrothersTop(e,o)}},(e,t,i,r)=>{t&&t.isRoot&&e.dir===T.LAYOUT_GROW_DIR.TOP&&e.children.forEach(s=>{let a=this.getNodeAreaHeight(s),o=s.top;s.top=e.top-(s.top-e.top)-a+e.height,this.updateChildren(s.children,"top",s.top-o)})},!0)}getNodeAreaHeight(e){let t=0,i=r=>{t+=r.height+(this.getNodeActChildrenLength(r)>0?r.expandBtnSize:0)+this.getMarginY(r.layerIndex),r.children.length&&r.children.forEach(s=>{i(s)})};return i(e),t}updateBrothersLeft(e){let t=e.children,i=0;t.forEach(r=>{r.left+=i,r.children&&r.children.length&&this.updateChildren(r.children,"left",i);let{left:s,right:a}=this.getNodeBoundaries(r,"h"),l=a-s-r.width;l>0&&(i+=l)})}updateBrothersTop(e,t){if(e.parent&&!e.parent.isRoot){let i=e.parent.children,r=Je(e,i);i.forEach((s,a)=>{if(s.hasCustomPosition())return;let o=0;a>r&&(o=t),s.top+=o,s.children&&s.children.length&&this.updateChildren(s.children,"top",o)}),this.updateBrothersTop(e.parent,t)}}renderLine(e,t,i){if(e.children.length<=0)return[];let{left:r,top:s,width:a,height:o,expandBtnSize:l}=e;const{alwaysShowExpandBtn:h,notShowExpandBtn:c}=this.mindMap.opt;(!h||c)&&(l=0);let d=e.children.length;if(e.isRoot){let f=e;e.children.forEach((m,u)=>{let g=f.left+f.width,p=m.left,x=e.top+e.height/2,w=`M ${g},${x} L ${p},${x}`;this.setLineStyle(i,t[u],w,m),f=m})}else{let f=-1/0,m=1/0,u=e.left+e.width*.3;if(e.children.forEach((g,p)=>{let x=g.top+g.height/2;x>f&&(f=x),x<m&&(m=x);let w=`M ${u},${x} L ${g.left},${x}`;this.setLineStyle(i,t[p],w,g)}),d>0){let g=this.lineDraw.path();l=d>0?l:0,e.parent&&e.parent.isRoot&&e.dir===T.LAYOUT_GROW_DIR.TOP?g.plot(this.transformPath(`M ${u},${s} L ${u},${m}`)):g.plot(this.transformPath(`M ${u},${s+o+l} L ${u},${f}`)),e.style.line(g),e._lines.push(g),i&&i(g,e)}}}renderExpandBtn(e,t){let{width:i,height:r,expandBtnSize:s,isRoot:a}=e;if(!a){let{translateX:o,translateY:l}=t.transform();e.parent&&e.parent.isRoot&&e.dir===T.LAYOUT_GROW_DIR.TOP?t.translate(i*.3-s/2-o,-s/2-l):t.translate(i*.3-s/2-o,r+s/2-l)}}renderGeneralization(e){e.forEach(t=>{let{top:i,bottom:r,right:s,generalizationLineMargin:a,generalizationNodeMargin:o}=this.getNodeGeneralizationRenderBoundaries(t,"h"),l=s+a,h=i,c=s+a,d=r,f=l+20,m=h+(d-h)/2,u=`M ${l},${h} Q ${f},${m} ${c},${d}`;t.generalizationLine.plot(this.transformPath(u)),t.generalizationNode.left=s+o,t.generalizationNode.top=i+(r-i-t.generalizationNode.height)/2})}renderExpandBtnRect(e,t,i,r,s){if(this.layout===T.LAYOUT.TIMELINE)e.size(i,t).x(0).y(r);else{let a="";s.dir===T.LAYOUT_GROW_DIR.TOP?a=s.layerIndex===1?T.LAYOUT_GROW_DIR.TOP:T.LAYOUT_GROW_DIR.BOTTOM:a=T.LAYOUT_GROW_DIR.BOTTOM,a===T.LAYOUT_GROW_DIR.TOP?e.size(i,t).x(0).y(-t):e.size(i,t).x(0).y(r)}}}class G3 extends en{constructor(e={},t){super(e),this.layout=t}doLayout(e){En([()=>{this.computedBaseValue()},()=>{this.computedTopValue()},()=>{this.adjustLeftTopValue()},()=>{e(this.root)}])}computedBaseValue(){Le(this.renderer.renderTree,null,(e,t,i,r,s,a)=>{let o=this.createNode(e,t,i,r,s,a);if(i?this.setNodeCenter(o):(t._node.dir?o.dir=t._node.dir:o.dir=s%2===0?T.LAYOUT_GROW_DIR.RIGHT:T.LAYOUT_GROW_DIR.LEFT,t._node.isRoot?o.left=t._node.left+(e._node.width>t._node.width?-(e._node.width-t._node.width)/2:(t._node.width-e._node.width)/2):o.left=o.dir===T.LAYOUT_GROW_DIR.RIGHT?t._node.left+t._node.width+this.getMarginX(r):t._node.left-this.getMarginX(r)-o.width),!e.data.expand)return!0},(e,t,i,r)=>{if(i)return;let s=e.data.expand===!1?0:e._node.children.length;e._node.childrenAreaHeight=s?e._node.children.reduce((a,o)=>a+o.height,0)+(s+1)*this.getMarginY(r+1):0},!0,0)}computedTopValue(){Le(this.root,null,(e,t,i,r,s)=>{if(e.getData("expand")&&e.children&&e.children.length){let a=this.getMarginY(r+1);if(i){let l=e.top+e.height+a;e.children.forEach(h=>{h.top=l,l+=h.height+a})}else{let o=this.getMarginY(r+1),h=e.top+e.height/2+o-e.childrenAreaHeight/2;e.children.forEach(c=>{c.top=h,h+=c.height+o})}}},null,!0)}adjustLeftTopValue(){Le(this.root,null,(e,t,i,r)=>{if(!e.getData("expand")||i)return;let s=this.getMarginY(r+1)*2+e.height,a=e.childrenAreaHeight-s;a>0&&this.updateBrothers(e,a/2)},null,!0)}updateBrothers(e,t){if(e.parent){let i=e.parent.children,r=Je(e,i);i.forEach((s,a)=>{if(s.hasCustomPosition()||!e.parent.isRoot&&s.uid===e.uid)return;let o=0;e.parent.isRoot?a<r?o=0:a>r?o=t*2:o=t:a<r?o=-t:a>r&&(o=t),s.top+=o,s.children&&s.children.length&&this.updateChildren(s.children,"top",o)}),this.updateBrothers(e.parent,t)}}updateBrothersTop(e,t){if(e.parent&&!e.parent.isRoot){let i=e.parent.children,r=Je(e,i);i.forEach((s,a)=>{if(s.hasCustomPosition())return;let o=0;a>r&&(o=t),s.top+=o,s.children&&s.children.length&&this.updateChildren(s.children,"top",o)}),this.updateBrothersTop(e.parent,t)}}renderLine(e,t,i,r){r==="curve"?this.renderLineCurve(e,t,i):r==="direct"?this.renderLineDirect(e,t,i):this.renderLineStraight(e,t,i)}renderLineStraight(e,t,i){if(e.children.length<=0)return[];let{expandBtnSize:r}=e;const{alwaysShowExpandBtn:s,notShowExpandBtn:a}=this.mindMap.opt;if((!s||a)&&(r=0),e.isRoot){let o=e;e.children.forEach((l,h)=>{let c=o.top+o.height,d=l.top,f=e.left+e.width/2,m=`M ${f},${c} L ${f},${d}`;this.setLineStyle(i,t[h],m,l),o=l})}else if(e.dir===T.LAYOUT_GROW_DIR.RIGHT){let o=e.left+e.width,l=e.top+e.height/2,c=(this.getMarginX(e.layerIndex+1)-r)*.6;e.children.forEach((d,f)=>{let m=d.left,u=d.top+d.height/2,g=this.createFoldLine([[o,l],[o+c,l],[o+c,u],[m,u]]);this.setLineStyle(i,t[f],g,d)})}else{let o=e.left,l=e.top+e.height/2,c=(this.getMarginX(e.layerIndex+1)-r)*.6;e.children.forEach((d,f)=>{let m=d.left+d.width,u=d.top+d.height/2,g=this.createFoldLine([[o,l],[o-c,l],[o-c,u],[m,u]]);this.setLineStyle(i,t[f],g,d)})}}renderLineDirect(e,t,i){if(e.children.length<=0)return[];let{left:r,top:s,width:a,height:o,expandBtnSize:l}=e;const{alwaysShowExpandBtn:h,notShowExpandBtn:c}=this.mindMap.opt;(!h||c)&&(l=0),e.children.forEach((d,f)=>{if(e.isRoot){let m=e;e.children.forEach((u,g)=>{let p=m.top+m.height,x=u.top,w=e.left+e.width/2,y=`M ${w},${p} L ${w},${x}`;this.setLineStyle(i,t[g],y,u),m=u})}else{let m=d.dir===T.LAYOUT_GROW_DIR.LEFT?r-l:r+a+l,u=s+o/2,g=d.dir===T.LAYOUT_GROW_DIR.LEFT?d.left+d.width:d.left,p=d.top+d.height/2,x=`M ${m},${u} L ${g},${p}`;this.setLineStyle(i,t[f],x,d)}})}renderLineCurve(e,t,i){if(e.children.length<=0)return[];let{left:r,top:s,width:a,height:o,expandBtnSize:l}=e;const{alwaysShowExpandBtn:h,notShowExpandBtn:c}=this.mindMap.opt;(!h||c)&&(l=0),e.children.forEach((d,f)=>{if(e.isRoot){let m=e;e.children.forEach((u,g)=>{let p=m.top+m.height,x=u.top,w=e.left+e.width/2,y=`M ${w},${p} L ${w},${x}`;this.setLineStyle(i,t[g],y,u),m=u})}else{let m=d.dir===T.LAYOUT_GROW_DIR.LEFT?r-l:r+a+l,u=s+o/2,g=d.dir===T.LAYOUT_GROW_DIR.LEFT?d.left+d.width:d.left,p=d.top+d.height/2,x=this.cubicBezierPath(m,u,g,p);this.setLineStyle(i,t[f],x,d)}})}renderExpandBtn(e,t){let{width:i,height:r,expandBtnSize:s,isRoot:a}=e;if(!a){let{translateX:o,translateY:l}=t.transform();e.dir===T.LAYOUT_GROW_DIR.RIGHT?t.translate(i-o,r/2-l):t.translate(-s-o,r/2-l)}}renderGeneralization(e){e.forEach(t=>{let i=t.node.dir===T.LAYOUT_GROW_DIR.LEFT,{top:r,bottom:s,left:a,right:o,generalizationLineMargin:l,generalizationNodeMargin:h}=this.getNodeGeneralizationRenderBoundaries(t,"h"),c=i?a-l:o+l,d=c,f=r,m=c,u=s,g=d+(i?-20:20),p=f+(u-f)/2,x=`M ${d},${f} Q ${g},${p} ${m},${u}`;t.generalizationLine.plot(this.transformPath(x)),t.generalizationNode.left=c+(i?-h:h)-(i?t.generalizationNode.width:0),t.generalizationNode.top=r+(s-r-t.generalizationNode.height)/2})}renderExpandBtnRect(e,t,i,r,s){s.dir===T.LAYOUT_GROW_DIR.LEFT?e.size(t,r).x(-t).y(0):e.size(t,r).x(i).y(0)}}const Pt={top:{renderExpandBtn({node:n,btn:e,expandBtnSize:t,translateX:i,translateY:r,width:s,height:a}){n.parent&&n.parent.isRoot?e.translate(s*.3-t/2-i,-t/2-r):e.translate(s*.3-t/2-i,a+t/2-r)},renderLine({node:n,line:e,top:t,x:i,lineLength:r,height:s,expandBtnSize:a,maxy:o,ctx:l}){n.parent&&n.parent.isRoot?e.plot(l.transformPath(`M ${i},${t} L ${i+r},${t-Math.tan(In(l.mindMap.opt.fishboneDeg))*r}`)):e.plot(l.transformPath(`M ${i},${t+s+a} L ${i},${o}`))},computedLeftTopValue({layerIndex:n,node:e,ctx:t}){if(n>=1&&e.children){let i=t.getMarginY(n+1),r=e.left+e.width*t.childIndent,s=e.top+e.height+(t.getNodeActChildrenLength(e)>0?e.expandBtnSize:0)+i;e.children.forEach(a=>{a.left=r,a.top+=s,s+=a.height+(t.getNodeActChildrenLength(a)>0?a.expandBtnSize:0)+i})}},adjustLeftTopValueBefore({node:n,parent:e,ctx:t,layerIndex:i}){let r=n.children.length,s=t.getMarginY(i+1);if(e&&!e.isRoot&&r>0){let a=n.children.reduce((o,l)=>o+l.height+(t.getNodeActChildrenLength(l)>0?l.expandBtnSize:0)+s,0);t.updateBrothersTop(n,a)}},adjustLeftTopValueAfter({parent:n,node:e,ctx:t}){if(n&&n.isRoot){let i=t.getMarginY(e.layerIndex+1),r=e.expandBtnSize+i;e.children.forEach(s=>{let a=t.getNodeAreaHeight(s),o=s.top,l=s.left;s.top=e.top-(s.top-e.top)-a+e.height,s.left=e.left+e.width*t.indent+(a+r)/Math.tan(In(t.mindMap.opt.fishboneDeg)),r+=a,t.updateChildrenPro(s.children,{top:s.top-o,left:s.left-l})})}}},bottom:{renderExpandBtn({node:n,btn:e,expandBtnSize:t,translateX:i,translateY:r,width:s,height:a}){n.parent&&n.parent.isRoot?e.translate(s*.3-t/2-i,a+t/2-r):e.translate(s*.3-t/2-i,-t/2-r)},renderLine({node:n,line:e,top:t,x:i,lineLength:r,height:s,miny:a,ctx:o}){n.parent&&n.parent.isRoot?e.plot(o.transformPath(`M ${i},${t+s} L ${i+r},${t+s+Math.tan(In(o.mindMap.opt.fishboneDeg))*r}`)):e.plot(o.transformPath(`M ${i},${t} L ${i},${a}`))},computedLeftTopValue({layerIndex:n,node:e,ctx:t}){let i=t.getMarginY(n+1);if(n===1&&e.children){let r=e.left+e.width*t.childIndent,s=e.top+e.height+(t.getNodeActChildrenLength(e)>0?e.expandBtnSize:0)+i;e.children.forEach(a=>{a.left=r,a.top=s+(t.getNodeActChildrenLength(a)>0?a.expandBtnSize:0),s+=a.height+(t.getNodeActChildrenLength(a)>0?a.expandBtnSize:0)+i})}if(n>1&&e.children){let r=e.left+e.width*t.childIndent,s=e.top-(t.getNodeActChildrenLength(e)>0?e.expandBtnSize:0)-i;e.children.forEach(a=>{a.left=r,a.top=s-a.height,s-=a.height+(t.getNodeActChildrenLength(a)>0?a.expandBtnSize:0)+i})}},adjustLeftTopValueBefore({node:n,ctx:e,layerIndex:t}){let i=e.getMarginY(t+1),r=n.children.length;if(t>2&&r>0){let s=n.children.reduce((a,o)=>a+o.height+(e.getNodeActChildrenLength(o)>0?o.expandBtnSize:0)+i,0);e.updateBrothersTop(n,-s)}},adjustLeftTopValueAfter({parent:n,node:e,ctx:t}){if(n&&n.isRoot){let i=t.getMarginY(e.layerIndex+1),r=0,s=e.expandBtnSize;e.children.forEach(a=>{let o=t.getNodeActChildrenLength(a)>0,l=t.getNodeAreaHeight(a),h=o?l-a.height-(o?a.expandBtnSize:0):0;h-=o?i:0;let c=r+h,d=a.left;a.top+=c,a.left=e.left+e.width*t.indent+(l+s)/Math.tan(In(t.mindMap.opt.fishboneDeg)),r+=h,s+=l,t.updateChildrenPro(a.children,{top:c,left:a.left-d})})}}}};class X3 extends en{constructor(e={}){super(e),this.indent=.3,this.childIndent=.5}doLayout(e){En([()=>{this.computedBaseValue()},()=>{this.computedLeftTopValue()},()=>{this.adjustLeftTopValue()},()=>{e(this.root)}])}computedBaseValue(){Le(this.renderer.renderTree,null,(e,t,i,r,s,a)=>{let o=this.createNode(e,t,i,r,s,a);if(i)this.setNodeCenter(o);else if(t._node.dir?o.dir=t._node.dir:o.dir=s%2===0?T.LAYOUT_GROW_DIR.TOP:T.LAYOUT_GROW_DIR.BOTTOM,t._node.isRoot){let l=this.getMarginY(r);this.checkIsTop(o)?o.top=t._node.top-o.height-l:o.top=t._node.top+t._node.height+l}if(!e.data.expand)return!0},null,!0,0)}computedLeftTopValue(){Le(this.root,null,(e,t,i,r)=>{if(e.isRoot){let a=this.getMarginX(r+1),o=e.left+e.width+e.height+a,l=e.left+e.width+e.height+a;e.children.forEach(h=>{this.checkIsTop(h)?(h.left=o,o+=h.width+a):(h.left=l+20,l+=h.width+a)})}let s={layerIndex:r,node:e,ctx:this};this.checkIsTop(e)?Pt.top.computedLeftTopValue(s):Pt.bottom.computedLeftTopValue(s)},null,!0)}adjustLeftTopValue(){Le(this.root,null,(e,t,i,r)=>{if(!e.getData("expand"))return;let s={node:e,parent:t,layerIndex:r,ctx:this};this.checkIsTop(e)?Pt.top.adjustLeftTopValueBefore(s):Pt.bottom.adjustLeftTopValueBefore(s)},(e,t)=>{let i={parent:t,node:e,ctx:this};if(this.checkIsTop(e)?Pt.top.adjustLeftTopValueAfter(i):Pt.bottom.adjustLeftTopValueAfter(i),e.isRoot){let r=0,s=0;e.children.forEach(a=>{if(this.checkIsTop(a)){a.left+=r,this.updateChildren(a.children,"left",r);let{left:o,right:l}=this.getNodeBoundaries(a,"h");r+=l-o}else{a.left+=s,this.updateChildren(a.children,"left",s);let{left:o,right:l}=this.getNodeBoundaries(a,"h");s+=l-o}})}},!0)}getNodeAreaHeight(e){let t=0,i=r=>{let s=this.getMarginY(r.layerIndex);t+=r.height+(this.getNodeActChildrenLength(r)>0?r.expandBtnSize:0)+s,r.children.length&&r.children.forEach(a=>{i(a)})};return i(e),t}updateBrothersLeft(e){let t=e.children,i=0;t.forEach(r=>{r.left+=i,r.children&&r.children.length&&this.updateChildren(r.children,"left",i);let{left:s,right:a}=this.getNodeBoundaries(r,"h"),l=a-s-r.width;l>0&&(i+=l)})}updateBrothersTop(e,t){if(e.parent&&!e.parent.isRoot){let i=e.parent.children,r=Je(e,i);i.forEach((s,a)=>{if(s.hasCustomPosition())return;let o=0;a>r&&(o=t),s.top+=o,s.children&&s.children.length&&this.updateChildren(s.children,"top",o)}),this.checkIsTop(e)?this.updateBrothersTop(e.parent,t):this.updateBrothersTop(e.parent,e.layerIndex===3?0:t)}}checkIsTop(e){return e.dir===T.LAYOUT_GROW_DIR.TOP}renderLine(e,t,i){if(e.layerIndex!==1&&e.children.length<=0)return[];let{top:r,height:s,expandBtnSize:a}=e;const{alwaysShowExpandBtn:o,notShowExpandBtn:l}=this.mindMap.opt;(!o||l)&&(a=0);let h=e.children.length;if(e.isRoot){let c=-1/0;e.children.forEach(u=>{u.left>c&&(c=u.left);let g=this.getMarginY(u.layerIndex),p=u.left,x=e.height/2+g,w=x/Math.tan(In(this.mindMap.opt.fishboneDeg)),y=this.lineDraw.path();this.checkIsTop(u)?y.plot(this.transformPath(`M ${p-w},${u.top+u.height+x} L ${u.left},${u.top+u.height}`)):y.plot(this.transformPath(`M ${p-w},${u.top-x} L ${p},${u.top}`)),e.style.line(y),e._lines.push(y),i&&i(y,e)});let d=e.top+e.height/2,f=e.height/2+this.getMarginY(e.layerIndex+1),m=this.lineDraw.path();m.plot(this.transformPath(`M ${e.left+e.width},${d} L ${c-f/Math.tan(In(this.mindMap.opt.fishboneDeg))},${d}`)),e.style.line(m),e._lines.push(m),i&&i(m,e)}else{let c=-1/0,d=1/0,f=-1/0,m=e.left+e.width*this.indent;if(e.children.forEach((u,g)=>{u.left>f&&(f=u.left);let p=u.top+u.height/2;if(p>c&&(c=p),p<d&&(d=p),e.layerIndex>1){let x=`M ${m},${p} L ${u.left},${p}`;this.setLineStyle(i,t[g],x,u)}}),h>=0){let u=this.lineDraw.path();a=h>0?a:0;let g=f-e.left-e.width*this.indent;g=Math.max(g,0);let p={node:e,line:u,top:r,x:m,lineLength:g,height:s,expandBtnSize:a,maxy:c,miny:d,ctx:this};this.checkIsTop(e)?Pt.top.renderLine(p):Pt.bottom.renderLine(p),e.style.line(u),e._lines.push(u),i&&i(u,e)}}}renderExpandBtn(e,t){let{width:i,height:r,expandBtnSize:s,isRoot:a}=e;if(!a){let{translateX:o,translateY:l}=t.transform(),h={node:e,btn:t,expandBtnSize:s,translateX:o,translateY:l,width:i,height:r};this.checkIsTop(e)?Pt.top.renderExpandBtn(h):Pt.bottom.renderExpandBtn(h)}}renderGeneralization(e){e.forEach(t=>{let{top:i,bottom:r,right:s,generalizationLineMargin:a,generalizationNodeMargin:o}=this.getNodeGeneralizationRenderBoundaries(t,"h"),l=s+a,h=i,c=s+a,d=r,f=l+20,m=h+(d-h)/2,u=`M ${l},${h} Q ${f},${m} ${c},${d}`;t.generalizationLine.plot(this.transformPath(u)),t.generalizationNode.left=s+o,t.generalizationNode.top=i+(r-i-t.generalizationNode.height)/2})}renderExpandBtnRect(e,t,i,r,s){let a="";s.dir===T.LAYOUT_GROW_DIR.TOP?a=s.layerIndex===1?T.LAYOUT_GROW_DIR.TOP:T.LAYOUT_GROW_DIR.BOTTOM:a=s.layerIndex===1?T.LAYOUT_GROW_DIR.BOTTOM:T.LAYOUT_GROW_DIR.TOP,a===T.LAYOUT_GROW_DIR.TOP?e.size(i,t).x(0).y(-t):e.size(i,t).x(0).y(r)}}class K3{constructor(e){this.renderer=e,this.mindMap=e.mindMap,this.currentNode=null,this.textEditNode=null,this.showTextEdit=!1,this.cacheEditingText="",this.hasBodyMousedown=!1,this.textNodePaddingX=5,this.textNodePaddingY=3,this.isNeedUpdateTextEditNode=!1,this.bindEvent()}bindEvent(){this.show=this.show.bind(this),this.onScale=this.onScale.bind(this),this.onKeydown=this.onKeydown.bind(this),this.mindMap.on("node_dblclick",(e,t,i)=>{this.show({node:e,e:t,isInserting:i})}),this.mindMap.on("draw_click",()=>{this.hideEditTextBox()}),this.mindMap.on("body_mousedown",()=>{this.hasBodyMousedown=!0}),this.mindMap.on("body_click",()=>{this.hasBodyMousedown&&(this.hasBodyMousedown=!1,this.mindMap.opt.isEndNodeTextEditOnClickOuter&&this.hideEditTextBox())}),this.mindMap.on("svg_mousedown",()=>{this.hideEditTextBox()}),this.mindMap.on("expand_btn_click",()=>{this.hideEditTextBox()}),this.mindMap.on("before_node_active",()=>{this.hideEditTextBox()}),this.mindMap.on("mousewheel",()=>{this.mindMap.opt.mousewheelAction===T.MOUSE_WHEEL_ACTION.MOVE&&this.hideEditTextBox()}),this.mindMap.keyCommand.addShortcut("F2",()=>{this.renderer.activeNodeList.length<=0||this.show({node:this.renderer.activeNodeList[0]})}),this.mindMap.on("scale",this.onScale),this.mindMap.opt.enableAutoEnterTextEditWhenKeydown&&window.addEventListener("keydown",this.onKeydown),this.mindMap.on("beforeDestroy",()=>{this.unBindEvent()}),this.mindMap.on("after_update_config",(e,t)=>{e.openRealtimeRenderOnNodeTextEdit!==t.openRealtimeRenderOnNodeTextEdit&&(this.mindMap.richText?this.mindMap.richText.onOpenRealtimeRenderOnNodeTextEditConfigUpdate(e.openRealtimeRenderOnNodeTextEdit):this.onOpenRealtimeRenderOnNodeTextEditConfigUpdate(e.openRealtimeRenderOnNodeTextEdit)),e.enableAutoEnterTextEditWhenKeydown!==t.enableAutoEnterTextEditWhenKeydown&&window[e.enableAutoEnterTextEditWhenKeydown?"addEventListener":"removeEventListener"]("keydown",this.onKeydown)}),this.mindMap.on("afterExecCommand",()=>{this.isShowTextEdit()&&(this.isNeedUpdateTextEditNode=!0)}),this.mindMap.on("node_tree_render_end",()=>{this.isShowTextEdit()&&this.isNeedUpdateTextEditNode&&(this.isNeedUpdateTextEditNode=!1,this.updateTextEditNode())})}unBindEvent(){window.removeEventListener("keydown",this.onKeydown)}onKeydown(e){if(e.target!==document.body)return;const t=this.mindMap.renderer.activeNodeList;if(t.length<=0||t.length>1)return;const i=t[0];i&&this.checkIsAutoEnterTextEditKey(e)&&(e.preventDefault(),this.show({node:i,e,isInserting:!1,isFromKeyDown:!0}))}checkIsAutoEnterTextEditKey(e){const t=e.keyCode;return(t===229||t>=65&&t<=90||t>=48&&t<=57)&&!this.mindMap.keyCommand.hasCombinationKey(e)}registerTmpShortcut(){this.mindMap.keyCommand.addShortcut("Enter",()=>{this.hideEditTextBox()}),this.mindMap.keyCommand.addShortcut("Tab",()=>{this.hideEditTextBox()})}isShowTextEdit(){return this.mindMap.richText?this.mindMap.richText.showTextEdit:this.showTextEdit}async show({node:e,isInserting:t=!1,isFromKeyDown:i=!1,isFromScale:r=!1}){if(e.isUseCustomNodeContent())return;this.getCurrentEditNode()&&this.hideEditTextBox();const{beforeTextEdit:a,openRealtimeRenderOnNodeTextEdit:o}=this.mindMap.opt;if(typeof a=="function"){let m=!1;try{m=await a(e,t)}catch(u){m=!1,this.mindMap.opt.errorHandler(Ln.BEFORE_TEXT_EDIT_ERROR,u)}if(!m)return}const{offsetLeft:l,offsetTop:h}=l0(this.mindMap,e);this.mindMap.view.translateXY(l,h);const c=e._textData.node;o&&c.show();const d=c.node.getBoundingClientRect();o&&c.hide();const f={node:e,rect:d,isInserting:t,isFromKeyDown:i,isFromScale:r};if(this.mindMap.richText){this.mindMap.richText.showEditText(f);return}this.currentNode=e,this.showEditTextBox(f)}onOpenRealtimeRenderOnNodeTextEditConfigUpdate(e){this.textEditNode&&(this.textEditNode.style.background=e?"transparent":this.currentNode?this.getBackground(this.currentNode):"",this.textEditNode.style.boxShadow=e?"none":"0 0 20px rgba(0,0,0,.5)")}onScale(){const e=this.getCurrentEditNode();e&&(this.mindMap.richText?(this.mindMap.richText.cacheEditingText=this.mindMap.richText.getEditText(),this.mindMap.richText.showTextEdit=!1):(this.cacheEditingText=this.getEditText(),this.showTextEdit=!1),this.show({node:e,isFromScale:!0}))}showEditTextBox({node:e,rect:t,isInserting:i,isFromKeyDown:r,isFromScale:s}){if(this.showTextEdit)return;const{nodeTextEditZIndex:a,textAutoWrapWidth:o,selectTextOnEnterEditText:l,openRealtimeRenderOnNodeTextEdit:h,autoEmptyTextWhenKeydownEnterEdit:c}=this.mindMap.opt;s||this.mindMap.emit("before_show_text_edit"),this.registerTmpShortcut(),this.textEditNode||(this.textEditNode=document.createElement("div"),this.textEditNode.classList.add(T.EDIT_NODE_CLASS.SMM_NODE_EDIT_WRAP),this.textEditNode.style.cssText=`
        position: fixed;
        box-sizing: border-box;
        ${h?"":"box-shadow: 0 0 20px rgba(0,0,0,.5);"}
        padding: ${this.textNodePaddingY}px ${this.textNodePaddingX}px;
        margin-left: -${this.textNodePaddingX}px;
        margin-top: -${this.textNodePaddingY}px;
        outline: none; 
        word-break: break-all;
        line-break: anywhere;
      `,this.textEditNode.setAttribute("contenteditable",!0),this.textEditNode.addEventListener("keyup",p=>{p.stopPropagation()}),this.textEditNode.addEventListener("click",p=>{p.stopPropagation()}),this.textEditNode.addEventListener("mousedown",p=>{p.stopPropagation()}),this.textEditNode.addEventListener("keydown",p=>{this.checkIsAutoEnterTextEditKey(p)&&p.stopPropagation()}),this.textEditNode.addEventListener("paste",p=>{const x=p.clipboardData.getData("text"),{isSmm:w,data:y}=bs(x);w&&y[0]&&y[0].data?Na(p,zl(y[0].data.text)):Na(p),this.emitTextChangeEvent()}),this.textEditNode.addEventListener("input",()=>{this.emitTextChangeEvent()}),(this.mindMap.opt.customInnerElsAppendTo||document.body).appendChild(this.textEditNode));const d=this.mindMap.view.scale,f=e.style.merge("fontSize"),m=(this.cacheEditingText||e.getData("text")).split(/\n/gim).map(g=>vr(g)),u=e._textData.node.attr("data-ismultiLine")==="true";e.style.domText(this.textEditNode,d),h||(this.textEditNode.style.background=this.getBackground(e)),this.textEditNode.style.zIndex=a,r&&c?this.textEditNode.innerHTML="":this.textEditNode.innerHTML=m.join("<br>"),this.textEditNode.style.minWidth=t.width+this.textNodePaddingX*2+"px",this.textEditNode.style.minHeight=t.height+"px",this.textEditNode.style.left=Math.floor(t.left)+"px",this.textEditNode.style.top=Math.floor(t.top)+"px",this.textEditNode.style.display="block",this.textEditNode.style.maxWidth=o*d+"px",u?(this.textEditNode.style.lineHeight=er,this.textEditNode.style.transform=`translateY(${(er-1)*f/2*d}px)`):this.textEditNode.style.lineHeight="normal",this.showTextEdit=!0,i||l&&!r?w0(this.textEditNode):y0(this.textEditNode),this.cacheEditingText=""}emitTextChangeEvent(){this.mindMap.emit("node_text_edit_change",{node:this.currentNode,text:this.getEditText(),richText:!1})}updateTextEditNode(){if(this.mindMap.richText){this.mindMap.richText.updateTextEditNode();return}if(!this.showTextEdit||!this.currentNode)return;const e=this.currentNode._textData.node.node.getBoundingClientRect();this.textEditNode.style.minWidth=e.width+this.textNodePaddingX*2+"px",this.textEditNode.style.minHeight=e.height+this.textNodePaddingY*2+"px",this.textEditNode.style.left=Math.floor(e.left)+"px",this.textEditNode.style.top=Math.floor(e.top)+"px"}getBackground(e){if(e.style.merge("gradientStyle")){const i=e.style.merge("startColor"),r=e.style.merge("endColor");return`linear-gradient(to right, ${i}, ${r})`}else{const i=e.style.merge("fillColor"),r=e.style.merge("color");return i==="transparent"?Fl(r)?f0(this.mindMap.themeConfig):"#fff":i}}removeTextEditEl(){if(this.mindMap.richText){this.mindMap.richText.removeTextEditEl();return}if(!this.textEditNode)return;(this.mindMap.opt.customInnerElsAppendTo||document.body).removeChild(this.textEditNode)}getEditText(){return r0(this.textEditNode.innerHTML)}hideEditTextBox(){if(this.mindMap.richText)return this.mindMap.richText.hideEditText();if(!this.showTextEdit)return;const e=this.currentNode,t=this.getEditText();this.currentNode=null,this.textEditNode.style.display="none",this.textEditNode.innerHTML="",this.textEditNode.style.fontFamily="inherit",this.textEditNode.style.fontSize="inherit",this.textEditNode.style.fontWeight="normal",this.textEditNode.style.transform="translateY(0)",this.showTextEdit=!1,this.mindMap.execCommand("SET_NODE_TEXT",e,t),this.mindMap.render(),this.mindMap.emit("hide_text_edit",this.textEditNode,this.renderer.activeNodeList,e)}getCurrentEditNode(){return this.mindMap.richText?this.mindMap.richText.node:this.currentNode}}const ns={[T.LAYOUT.LOGICAL_STRUCTURE]:$a,[T.LAYOUT.LOGICAL_STRUCTURE_LEFT]:$a,[T.LAYOUT.MIND_MAP]:V3,[T.LAYOUT.CATALOG_ORGANIZATION]:j3,[T.LAYOUT.ORGANIZATION_STRUCTURE]:U3,[T.LAYOUT.TIMELINE]:Ha,[T.LAYOUT.TIMELINE2]:Ha,[T.LAYOUT.VERTICAL_TIMELINE]:G3,[T.LAYOUT.FISHBONE]:X3};class q3{constructor(e={}){this.opt=e,this.mindMap=e.mindMap,this.themeConfig=this.mindMap.themeConfig,this.renderTree=this.mindMap.opt.data?nr({},this.mindMap.opt.data):null,this.reRender=!1,this.isRendering=!1,this.hasWaitRendering=!1,this.waitRenderingParams=[],this.nodeCache={},this.lastNodeCache={},this.renderSource="",this.activeNodeList=[],this.root=null,this.textEdit=new K3(this),this.beingCopyData=null,this.highlightBoxNode=null,this.highlightBoxNodeStyle=null,this.lastActiveNodeList=[],this.setLayout(),this.bindEvent(),this.registerCommands(),this.registerShortcutKeys()}setLayout(){const{layout:e}=this.mindMap.opt;this.layout=new(ns[e]?ns[e]:ns[T.LAYOUT.LOGICAL_STRUCTURE])(this,e)}setData(e){this.renderTree=e||null}bindEvent(){const{openPerformance:e,performanceConfig:t,openRealtimeRenderOnNodeTextEdit:i}=this.mindMap.opt;this.mindMap.on("draw_click",s=>{this.clearActiveNodeListOnDrawClick(s,"click")}),this.mindMap.on("contextmenu",s=>{this.clearActiveNodeListOnDrawClick(s,"contextmenu")}),this.mindMap.svg.on("dblclick",()=>{this.mindMap.opt.enableDblclickBackToRootNode&&this.setRootNodeCenter()});const r=na(()=>{this.root&&(this.mindMap.emit("node_tree_render_start"),this.root.render(()=>{this.mindMap.emit("node_tree_render_end")},!1,!0))},t.time);e&&this.mindMap.on("view_data_change",r),this.onNodeTextEditChange=s0(this.onNodeTextEditChange,100,this),i&&this.mindMap.on("node_text_edit_change",this.onNodeTextEditChange),this.mindMap.on("after_update_config",(s,a)=>{s.openPerformance!==a.openPerformance&&(this.mindMap[s.openPerformance?"on":"off"]("view_data_change",r),this.forceLoadNode()),s.openRealtimeRenderOnNodeTextEdit!==a.openRealtimeRenderOnNodeTextEdit&&this.mindMap[s.openRealtimeRenderOnNodeTextEdit?"on":"off"]("node_text_edit_change",this.onNodeTextEditChange)})}onNodeTextEditChange({node:e,text:t}){e._textData=e.createTextNode(t);const{width:i,height:r}=e.getNodeRect();e.width=i,e.height=r,e.layout(),this.mindMap.render(()=>{this.textEdit.updateTextEditNode()})}forceLoadNode(e){e=e||this.root,e&&(this.mindMap.emit("node_tree_render_start"),e.render(()=>{this.mindMap.emit("node_tree_render_end")},!0))}registerCommands(){this.selectAll=this.selectAll.bind(this),this.mindMap.command.add("SELECT_ALL",this.selectAll),this.back=this.back.bind(this),this.mindMap.command.add("BACK",this.back),this.forward=this.forward.bind(this),this.mindMap.command.add("FORWARD",this.forward),this.insertNode=this.insertNode.bind(this),this.mindMap.command.add("INSERT_NODE",this.insertNode),this.insertMultiNode=this.insertMultiNode.bind(this),this.mindMap.command.add("INSERT_MULTI_NODE",this.insertMultiNode),this.insertChildNode=this.insertChildNode.bind(this),this.mindMap.command.add("INSERT_CHILD_NODE",this.insertChildNode),this.insertMultiChildNode=this.insertMultiChildNode.bind(this),this.mindMap.command.add("INSERT_MULTI_CHILD_NODE",this.insertMultiChildNode),this.insertParentNode=this.insertParentNode.bind(this),this.mindMap.command.add("INSERT_PARENT_NODE",this.insertParentNode),this.upNode=this.upNode.bind(this),this.mindMap.command.add("UP_NODE",this.upNode),this.downNode=this.downNode.bind(this),this.mindMap.command.add("DOWN_NODE",this.downNode),this.moveUpOneLevel=this.moveUpOneLevel.bind(this),this.mindMap.command.add("MOVE_UP_ONE_LEVEL",this.moveUpOneLevel),this.insertAfter=this.insertAfter.bind(this),this.mindMap.command.add("INSERT_AFTER",this.insertAfter),this.insertBefore=this.insertBefore.bind(this),this.mindMap.command.add("INSERT_BEFORE",this.insertBefore),this.moveNodeTo=this.moveNodeTo.bind(this),this.mindMap.command.add("MOVE_NODE_TO",this.moveNodeTo),this.removeNode=this.removeNode.bind(this),this.mindMap.command.add("REMOVE_NODE",this.removeNode),this.removeCurrentNode=this.removeCurrentNode.bind(this),this.mindMap.command.add("REMOVE_CURRENT_NODE",this.removeCurrentNode),this.pasteNode=this.pasteNode.bind(this),this.mindMap.command.add("PASTE_NODE",this.pasteNode),this.cutNode=this.cutNode.bind(this),this.mindMap.command.add("CUT_NODE",this.cutNode),this.setNodeStyle=this.setNodeStyle.bind(this),this.mindMap.command.add("SET_NODE_STYLE",this.setNodeStyle),this.setNodeStyles=this.setNodeStyles.bind(this),this.mindMap.command.add("SET_NODE_STYLES",this.setNodeStyles),this.setNodeActive=this.setNodeActive.bind(this),this.mindMap.command.add("SET_NODE_ACTIVE",this.setNodeActive),this.clearActiveNode=this.clearActiveNode.bind(this),this.mindMap.command.add("CLEAR_ACTIVE_NODE",this.clearActiveNode),this.setNodeExpand=this.setNodeExpand.bind(this),this.mindMap.command.add("SET_NODE_EXPAND",this.setNodeExpand),this.expandAllNode=this.expandAllNode.bind(this),this.mindMap.command.add("EXPAND_ALL",this.expandAllNode),this.unexpandAllNode=this.unexpandAllNode.bind(this),this.mindMap.command.add("UNEXPAND_ALL",this.unexpandAllNode),this.expandToLevel=this.expandToLevel.bind(this),this.mindMap.command.add("UNEXPAND_TO_LEVEL",this.expandToLevel),this.setNodeData=this.setNodeData.bind(this),this.mindMap.command.add("SET_NODE_DATA",this.setNodeData),this.setNodeText=this.setNodeText.bind(this),this.mindMap.command.add("SET_NODE_TEXT",this.setNodeText),this.setNodeImage=this.setNodeImage.bind(this),this.mindMap.command.add("SET_NODE_IMAGE",this.setNodeImage),this.setNodeIcon=this.setNodeIcon.bind(this),this.mindMap.command.add("SET_NODE_ICON",this.setNodeIcon),this.setNodeHyperlink=this.setNodeHyperlink.bind(this),this.mindMap.command.add("SET_NODE_HYPERLINK",this.setNodeHyperlink),this.setNodeNote=this.setNodeNote.bind(this),this.mindMap.command.add("SET_NODE_NOTE",this.setNodeNote),this.setNodeAttachment=this.setNodeAttachment.bind(this),this.mindMap.command.add("SET_NODE_ATTACHMENT",this.setNodeAttachment),this.setNodeTag=this.setNodeTag.bind(this),this.mindMap.command.add("SET_NODE_TAG",this.setNodeTag),this.insertFormula=this.insertFormula.bind(this),this.mindMap.command.add("INSERT_FORMULA",this.insertFormula),this.addGeneralization=this.addGeneralization.bind(this),this.mindMap.command.add("ADD_GENERALIZATION",this.addGeneralization),this.removeGeneralization=this.removeGeneralization.bind(this),this.mindMap.command.add("REMOVE_GENERALIZATION",this.removeGeneralization),this.setNodeCustomPosition=this.setNodeCustomPosition.bind(this),this.mindMap.command.add("SET_NODE_CUSTOM_POSITION",this.setNodeCustomPosition),this.resetLayout=this.resetLayout.bind(this),this.mindMap.command.add("RESET_LAYOUT",this.resetLayout),this.setNodeShape=this.setNodeShape.bind(this),this.mindMap.command.add("SET_NODE_SHAPE",this.setNodeShape),this.goTargetNode=this.goTargetNode.bind(this),this.mindMap.command.add("GO_TARGET_NODE",this.goTargetNode),this.removeCustomStyles=this.removeCustomStyles.bind(this),this.mindMap.command.add("REMOVE_CUSTOM_STYLES",this.removeCustomStyles),this.removeAllNodeCustomStyles=this.removeAllNodeCustomStyles.bind(this),this.mindMap.command.add("REMOVE_ALL_NODE_CUSTOM_STYLES",this.removeAllNodeCustomStyles)}registerShortcutKeys(){this.mindMap.keyCommand.addShortcut("Tab",()=>{this.mindMap.execCommand("INSERT_CHILD_NODE")}),this.mindMap.keyCommand.addShortcut("Insert",()=>{this.mindMap.execCommand("INSERT_CHILD_NODE")}),this.mindMap.keyCommand.addShortcut("Enter",()=>{this.mindMap.execCommand("INSERT_NODE")}),this.mindMap.keyCommand.addShortcut("Shift+Tab",()=>{this.mindMap.execCommand("INSERT_PARENT_NODE")}),this.mindMap.keyCommand.addShortcut("Control+g",()=>{this.mindMap.execCommand("ADD_GENERALIZATION")}),this.toggleActiveExpand=this.toggleActiveExpand.bind(this),this.mindMap.keyCommand.addShortcut("/",this.toggleActiveExpand),this.mindMap.keyCommand.addShortcut("Del|Backspace",()=>{this.mindMap.execCommand("REMOVE_NODE")}),this.mindMap.keyCommand.addShortcut("Shift+Backspace",()=>{this.mindMap.execCommand("REMOVE_CURRENT_NODE")}),this.mindMap.on("before_show_text_edit",()=>{this.startTextEdit()}),this.mindMap.on("hide_text_edit",()=>{this.endTextEdit()}),this.mindMap.keyCommand.addShortcut("Control+a",()=>{this.mindMap.execCommand("SELECT_ALL")}),this.mindMap.keyCommand.addShortcut("Control+l",()=>{this.mindMap.execCommand("RESET_LAYOUT")}),this.mindMap.keyCommand.addShortcut("Control+Up",()=>{this.mindMap.execCommand("UP_NODE")}),this.mindMap.keyCommand.addShortcut("Control+Down",()=>{this.mindMap.execCommand("DOWN_NODE")}),this.mindMap.keyCommand.addShortcut("Control+c",()=>{this.copy()}),this.mindMap.keyCommand.addShortcut("Control+x",()=>{this.cut()}),this.mindMap.keyCommand.addShortcut("Control+v",()=>{this.paste()}),this.mindMap.keyCommand.addShortcut("Control+Enter",()=>{this.setRootNodeCenter()})}emitNodeActiveEvent(e=null,t=[...this.activeNodeList]){E0(this.lastActiveNodeList,t)||(this.lastActiveNodeList=[...t],this.mindMap.batchExecution.push("emitNodeActiveEvent",()=>{this.mindMap.emit("node_active",e,t)}))}clearActiveNodeListOnDrawClick(e,t){if(this.activeNodeList.length<=0)return;let i=!0;const{useLeftKeySelectionRightKeyDrag:r}=this.mindMap.opt;if(t==="contextmenu"?!r:r){const s=this.mindMap.event.mousedownPos;i=Math.abs(e.clientX-s.x)<=5&&Math.abs(e.clientY-s.y)<=5}i&&this.mindMap.execCommand("CLEAR_ACTIVE_NODE")}startTextEdit(){this.mindMap.keyCommand.save()}endTextEdit(){this.mindMap.keyCommand.restore()}clearCache(){this.layout.lru.clear(),this.nodeCache={},this.lastNodeCache={}}render(e=()=>{},t){if(t===T.CHANGE_THEME&&this.resetUnExpandNodeStyle(),this.isRendering){this.hasWaitRendering=!0,this.waitRenderingParams=[e,t];return}if(this.isRendering=!0,this.renderSource=t,this.lastNodeCache=this.nodeCache,this.nodeCache={},this.reRender&&this.clearActiveNodeList(),!this.renderTree){this.isRendering=!1,this.mindMap.emit("node_tree_render_end");return}this.mindMap.emit("node_tree_render_start"),this.root=null,this.layout.doLayout(i=>{Object.keys(this.lastNodeCache).forEach(r=>{this.nodeCache[r]||(this.removeNodeFromActiveList(this.lastNodeCache[r]),this.emitNodeActiveEvent(),this.lastNodeCache[r].destroy())}),this.root=i,this.root.render(()=>{if(this.isRendering=!1,e&&e(),this.hasWaitRendering){const r=this.waitRenderingParams;this.hasWaitRendering=!1,this.waitRenderingParams=[],this.render(...r)}else this.renderSource="",this.reRender&&(this.reRender=!1);this.mindMap.emit("node_tree_render_end")})}),this.emitNodeActiveEvent()}resetUnExpandNodeStyle(){this.renderTree&&Le(this.renderTree,null,e=>{if(!e.data.expand)return Le(e,null,t=>{t.data.needUpdate=!0}),!0})}clearActiveNode(){this.activeNodeList.length<=0||(this.clearActiveNodeList(),this.emitNodeActiveEvent(null,[]))}clearActiveNodeList(){this.activeNodeList.forEach(e=>{this.mindMap.execCommand("SET_NODE_ACTIVE",e,!1)}),this.activeNodeList=[]}addNodeToActiveList(e,t=!1){if(this.mindMap.opt.onlyOneEnableActiveNodeOnCooperate&&e.userList.length>0)return;this.findActiveNodeIndex(e)===-1&&(t||this.mindMap.emit("before_node_active",e,this.activeNodeList),this.mindMap.execCommand("SET_NODE_ACTIVE",e,!0),this.activeNodeList.push(e))}removeNodeFromActiveList(e){let t=this.findActiveNodeIndex(e);t!==-1&&(this.mindMap.execCommand("SET_NODE_ACTIVE",e,!1),this.activeNodeList.splice(t,1))}activeMultiNode(e=[]){e.forEach(t=>{this.mindMap.emit("before_node_active",t,this.activeNodeList),this.addNodeToActiveList(t,!0),this.emitNodeActiveEvent(t)})}cancelActiveMultiNode(e=[]){e.forEach(t=>{this.removeNodeFromActiveList(t),this.emitNodeActiveEvent(null)})}findActiveNodeIndex(e){return Je(e,this.activeNodeList)}selectAll(){this.mindMap.opt.readonly||(Le(this.root,null,e=>{e.getData("isActive")||this.addNodeToActiveList(e),e._generalizationList&&e._generalizationList.length>0&&e._generalizationList.forEach(t=>{const i=t.generalizationNode;i.getData("isActive")||this.addNodeToActiveList(i)})},null,!0,0,0),this.emitNodeActiveEvent())}back(e){this.backForward("back",e)}forward(e){this.backForward("forward",e)}backForward(e,t){this.mindMap.execCommand("CLEAR_ACTIVE_NODE");const i=this.mindMap.command[e](t);i&&(this.renderTree=i,this.mindMap.render()),this.mindMap.emit("data_change",i)}getNewNodeBehavior(e=!1,t=!1){const{createNewNodeBehavior:i}=this.mindMap.opt;let r=!1,s=!1;switch(i){case T.CREATE_NEW_NODE_BEHAVIOR.DEFAULT:r=t||!e,s=t?!1:e;break;case T.CREATE_NEW_NODE_BEHAVIOR.NOT_ACTIVE:r=!1,s=!1;break;case T.CREATE_NEW_NODE_BEHAVIOR.ACTIVE_ONLY:r=!0,s=!1;break}return{focusNewNode:r,inserting:s}}insertNode(e=!0,t=[],i=null,r=[]){if(t=Mt(t),this.activeNodeList.length<=0&&t.length<=0)return;this.textEdit.hideEditTextBox();const{defaultInsertSecondLevelNodeText:s,defaultInsertBelowSecondLevelNodeText:a}=this.mindMap.opt,o=t.length>0?t:this.activeNodeList,l=o.length>1,h=this.hasRichTextPlugin(),{focusNewNode:c,inserting:d}=this.getNewNodeBehavior(e,l),f={expand:!0,richText:h,isActive:c};h&&(f.resetRichText=!0),r=Gi(r,f);const m=i&&i.richText;let u=!1;o.forEach(g=>{if(g.isGeneralization||g.isRoot)return;r=mt(r);const p=g.parent,w=g.layerIndex===1?s:a,y=ei(g);m&&f.resetRichText&&delete f.resetRichText;const C={inserting:d,data:{text:w,...f,uid:$t(),...i||{}},children:[...Xi(r,u)]};u=!0,p.nodeData.children.splice(y+1,0,C)}),c&&this.clearActiveNodeList(),this.mindMap.render()}insertMultiNode(e,t){if(!t||t.length<=0||(e=Mt(e),this.activeNodeList.length<=0&&e.length<=0))return;this.textEdit.hideEditTextBox();const i=e.length>0?e:this.activeNodeList,r=this.hasRichTextPlugin(),{focusNewNode:s}=this.getNewNodeBehavior(!1,!0),a={expand:!0,richText:r,isActive:s};r&&(a.resetRichText=!0),t=Gi(t,a);let o=!1;i.forEach(l=>{if(l.isGeneralization||l.isRoot)return;t=mt(t);const h=l.parent,c=ei(l),d=Xi(t,o);o=!0,h.nodeData.children.splice(c+1,0,...d)}),s&&this.clearActiveNodeList(),this.mindMap.render()}insertChildNode(e=!0,t=[],i=null,r=[]){if(t=Mt(t),this.activeNodeList.length<=0&&t.length<=0)return;this.textEdit.hideEditTextBox();const{defaultInsertSecondLevelNodeText:s,defaultInsertBelowSecondLevelNodeText:a}=this.mindMap.opt,o=t.length>0?t:this.activeNodeList,l=o.length>1,h=this.hasRichTextPlugin(),{focusNewNode:c,inserting:d}=this.getNewNodeBehavior(e,l),f={expand:!0,richText:h,isActive:c};h&&(f.resetRichText=!0),r=Gi(r,f);const m=i&&i.richText;let u=!1;o.forEach(g=>{if(g.isGeneralization)return;r=mt(r),g.nodeData.children||(g.nodeData.children=[]);const p=g.isRoot?s:a;m&&f.resetRichText&&delete f.resetRichText;const x={inserting:d,data:{text:p,uid:$t(),...f,...i||{}},children:[...Xi(r,u)]};u=!0,g.nodeData.children.push(x),g.setData({expand:!0})}),c&&this.clearActiveNodeList(),this.mindMap.render()}insertMultiChildNode(e,t){if(!t||t.length<=0||(e=Mt(e),this.activeNodeList.length<=0&&e.length<=0))return;this.textEdit.hideEditTextBox();const i=e.length>0?e:this.activeNodeList,r=this.hasRichTextPlugin(),{focusNewNode:s}=this.getNewNodeBehavior(!1,!0),a={expand:!0,richText:r,isActive:s};r&&(a.resetRichText=!0),t=Gi(t,a);let o=!1;i.forEach(l=>{l.isGeneralization||(t=mt(t),l.nodeData.children||(l.nodeData.children=[]),t=Xi(t,o),o=!0,l.nodeData.children.push(...t),l.setData({expand:!0}))}),s&&this.clearActiveNodeList(),this.mindMap.render()}insertParentNode(e=!0,t,i){if(t=Mt(t),this.activeNodeList.length<=0&&t.length<=0)return;this.textEdit.hideEditTextBox();const{defaultInsertSecondLevelNodeText:r,defaultInsertBelowSecondLevelNodeText:s}=this.mindMap.opt,a=t.length>0?t:this.activeNodeList,o=a.length>1,l=this.hasRichTextPlugin(),{focusNewNode:h,inserting:c}=this.getNewNodeBehavior(e,o),d={expand:!0,richText:l,isActive:h};l&&(d.resetRichText=!0);const f=i&&i.richText;a.forEach(m=>{if(m.isGeneralization||m.isRoot)return;const u=m.layerIndex===1?r:s;f&&d.resetRichText&&delete d.resetRichText;const g={inserting:c,data:{text:u,uid:$t(),...d,...i||{}},children:[m.nodeData]},p=m.parent,x=ei(m);p.nodeData.children.splice(x,1,g)}),h&&this.clearActiveNodeList(),this.mindMap.render()}upNode(e){if(this.activeNodeList.length<=0&&!e)return;const i=(e?[e]:this.activeNodeList)[0];if(i.isRoot)return;let r=i.parent,s=r.children,a=Je(i,s);if(a===-1||a===0)return;let o=a-1;s.splice(a,1),s.splice(o,0,i),r.nodeData.children.splice(a,1),r.nodeData.children.splice(o,0,i.nodeData),this.mindMap.render()}downNode(e){if(this.activeNodeList.length<=0&&!e)return;const i=(e?[e]:this.activeNodeList)[0];if(i.isRoot)return;let r=i.parent,s=r.children,a=Je(i,s);if(a===-1||a===s.length-1)return;let o=a+1;s.splice(a,1),s.splice(o,0,i),r.nodeData.children.splice(a,1),r.nodeData.children.splice(o,0,i.nodeData),this.mindMap.render()}moveUpOneLevel(e){if(e=e||this.activeNodeList[0],!e||e.isRoot||e.layerIndex<=1)return;const t=e.parent,i=t.parent,r=Je(e,t.children),s=Je(t,i.children);t.nodeData.children.splice(r,1),i.nodeData.children.splice(s+1,0,e.nodeData),this.mindMap.render()}_handleRemoveCustomStyles(e){let t=!1;return Object.keys(e).forEach(i=>{Cs(i)&&(t=!0,delete e[i])}),this.hasRichTextPlugin()&&(t=!0,e.resetRichText=!0),t}removeCustomStyles(e){if(e=e||this.activeNodeList[0],!e)return;this._handleRemoveCustomStyles(e.getData())&&this.reRenderNodeCheckChange(e)}removeAllNodeCustomStyles(e){e=Mt(e);let t=!1;if(e.length>0)e.forEach(i=>{this._handleRemoveCustomStyles(i.getData())&&(t=!0)});else{if(!this.renderTree)return;Le(this.renderTree,null,i=>{this._handleRemoveCustomStyles(i.data)&&(t=!0);const s=_s(i.data);s.length>0&&s.forEach(a=>{this._handleRemoveCustomStyles(a)&&(t=!0)})})}t&&this.mindMap.reRender()}copy(){this.beingCopyData=this.copyNode(),this.beingCopyData&&(this.mindMap.opt.disabledClipboard||_a(Sa(this.beingCopyData)))}cut(){this.mindMap.execCommand("CUT_NODE",e=>{this.beingCopyData=e,this.mindMap.opt.disabledClipboard||_a(Sa(e))})}handlePaste(e){const{disabledClipboard:t}=this.mindMap.opt;if(t)return;const i=e.clipboardData||e.originalEvent.clipboardData,r=i.items;Array.from(r).forEach(s=>{s.type.indexOf("image")>-1&&s.getAsFile(),s.type.indexOf("text")>-1&&i.getData("text")}),this.paste()}async paste(){const{errorHandler:e,handleIsSplitByWrapOnPasteCreateNewNode:t,handleNodePasteImg:i,disabledClipboard:r,onlyPasteTextWhenHasImgAndText:s}=this.mindMap.opt;if(!r&&Hl())try{const a=await C0();let o=a.text||"",l=a.img||null;if(o){let h=null,c=!0;if(this.mindMap.opt.customHandleClipboardText)try{const d=await this.mindMap.opt.customHandleClipboardText(o);if(!Mn(d)){c=!1;const f=bs(d);f.isSmm?h=f.data:o=f.data}}catch(d){e(Ln.CUSTOM_HANDLE_CLIPBOARD_TEXT_ERROR,d)}if(c){const d=bs(o);d.isSmm?h=d.data:o=d.data}if(h)this.mindMap.execCommand("INSERT_MULTI_CHILD_NODE",[],Array.isArray(h)?h:[h]);else{this.hasRichTextPlugin()&&(o=vr(o));const d=o.split(new RegExp(`\r?
|(?<!
)\r`,"g")).filter(f=>!!f);d.length>1&&t?t().then(()=>{this.mindMap.execCommand("INSERT_MULTI_CHILD_NODE",[],d.map(f=>({data:{text:f},children:[]})))}).catch(()=>{this.mindMap.execCommand("INSERT_CHILD_NODE",!1,[],{text:o})}):this.mindMap.execCommand("INSERT_CHILD_NODE",!1,[],{text:o})}}if(l&&(!o||!s))try{let h=null;i&&typeof i=="function"?h=await i(l):h=await c0(l),this.activeNodeList.length>0&&this.activeNodeList.forEach(c=>{this.mindMap.execCommand("SET_NODE_IMAGE",c,{url:h.url,title:"",width:h.size.width,height:h.size.height})})}catch(h){e(Ln.LOAD_CLIPBOARD_IMAGE_ERROR,h)}}catch(a){e(Ln.READ_CLIPBOARD_ERROR,a)}else this.beingCopyData&&this.mindMap.execCommand("PASTE_NODE",this.beingCopyData)}insertBefore(e,t){this.insertTo(e,t,"before")}insertAfter(e,t){this.insertTo(e,t,"after")}insertTo(e,t,i="before"){let r=Mt(e);r=r.filter(s=>!s.isRoot),i==="after"&&r.reverse(),r.forEach(s=>{let a=s.parent,o=a.children,l=Je(s,o);if(l===-1)return;o.splice(l,1),a.nodeData.children.splice(l,1);let h=t.parent,c=h.children,d=Je(t,c);d!==-1&&(i==="after"&&d++,c.splice(d,0,s),h.nodeData.children.splice(d,0,s.nodeData))}),this.mindMap.render()}removeNode(e=[]){if(e=Mt(e),this.activeNodeList.length<=0&&e.length<=0)return;let t=null,i=e.length>0,r=i?e:this.activeNodeList,s=r.find(a=>a.isRoot);if(s)this.clearActiveNodeList(),s.children=[],s.nodeData.children=[];else{t=this.getNextActiveNode(r);for(let a=0;a<r.length;a++){const o=r[a],l=this.textEdit.getCurrentEditNode();l&&l.getData("uid")===o.getData("uid")&&this.textEdit.hideEditTextBox(),i&&r.splice(a,1),o.isGeneralization?(this.deleteNodeGeneralization(o),this.removeNodeFromActiveList(o),a--):(this.removeNodeFromActiveList(o),ts(o),a--)}}this.activeNodeList=[],t&&this.addNodeToActiveList(t),this.emitNodeActiveEvent(),this.mindMap.render()}deleteNodeGeneralization(e){const t=e.generalizationBelongNode,i=t.getGeneralizationNodeIndex(e);let r=t.getData("generalization");Array.isArray(r)?r.splice(i,1):r=null,this.mindMap.execCommand("SET_NODE_DATA",t,{generalization:r}),this.closeHighlightNode()}removeCurrentNode(e=[]){if(e=Mt(e),this.activeNodeList.length<=0&&e.length<=0)return;let i=e.length>0?e:this.activeNodeList;i=i.filter(s=>!s.isRoot);let r=this.getNextActiveNode(i);for(let s=0;s<i.length;s++){let a=i[s];if(a.isGeneralization)this.deleteNodeGeneralization(a);else{const o=a.parent,l=ei(a);o.nodeData.children.splice(l,1,...a.nodeData.children||[])}}this.activeNodeList=[],r&&this.addNodeToActiveList(r),this.emitNodeActiveEvent(),this.mindMap.render()}getNextActiveNode(e){if(e.length!==1||this.findActiveNodeIndex(e[0])===-1)return null;let t=null;if(this.activeNodeList.length===1&&!this.activeNodeList[0].isGeneralization&&this.mindMap.opt.deleteNodeActive){const i=this.activeNodeList[0],r=i.parent.children,s=Je(i,r);s<r.length-1?t=r[s+1]:s>0?t=r[s-1]:t=i.parent}return t}copyNode(){if(this.activeNodeList.length<=0)return null;let e=Es(this.activeNodeList);return e=Ss(e),e.map(t=>di({},t,!0))}cutNode(e){if(this.activeNodeList.length<=0)return;let t=Es(this.activeNodeList).filter(r=>!r.isRoot);t=Ss(t);const i=t.map(r=>di({},r,!0));t.forEach(r=>{ts(r)}),this.clearActiveNodeList(),this.mindMap.render(),e&&typeof e=="function"&&e(i)}moveNodeTo(e,t){let i=Mt(e);i=i.filter(r=>!r.isRoot),i.forEach(r=>{this.removeNodeFromActiveList(r),ts(r),t.setData({expand:!0}),t.nodeData.children.push(r.nodeData)}),this.emitNodeActiveEvent(),this.mindMap.render()}pasteNode(e){e=Mt(e),this.mindMap.execCommand("INSERT_MULTI_CHILD_NODE",[],e)}setNodeStyle(e,t,i){const r={[t]:i};this.setNodeDataRender(e,r),ws.includes(t)&&(e.parent||e).renderLine(!0)}setNodeStyles(e,t){const i={...t};this.setNodeDataRender(e,i);let r=Object.keys(t),s=!1;r.forEach(a=>{ws.includes(a)&&(s=!0)}),s&&(e.parent||e).renderLine(!0)}setNodeActive(e,t){this.mindMap.execCommand("SET_NODE_DATA",e,{isActive:t}),e.updateNodeByActive(t)}setNodeExpand(e,t){this.mindMap.execCommand("SET_NODE_DATA",e,{expand:t}),this.mindMap.render()}expandAllNode(e=""){if(!this.renderTree)return;const t=(i,r)=>{!r&&i.data.uid===e&&(r=!0),r&&!i.data.expand&&(i.data.expand=!0),i.children&&i.children.length>0&&i.children.forEach(s=>{t(s,r)})};t(this.renderTree,!e),this.mindMap.render()}unexpandAllNode(e=!0,t=""){if(!this.renderTree)return;const i=(r,s,a)=>{!a&&r.data.uid===t&&(a=!0),a&&!s&&r.children&&r.children.length>0&&(r.data.expand=!1),r.children&&r.children.length>0&&r.children.forEach(o=>{i(o,!1,a)})};i(this.renderTree,!0,!t),this.mindMap.render(()=>{e&&this.setRootNodeCenter()})}expandToLevel(e){this.renderTree&&(Le(this.renderTree,null,(t,i,r,s)=>{s<e?t.data.expand=!0:!r&&t.children&&t.children.length>0&&(t.data.expand=!1)},null,!0,0,0),this.mindMap.render())}toggleActiveExpand(){this.activeNodeList.forEach(e=>{e.nodeData.children.length<=0||e.isRoot||this.toggleNodeExpand(e)})}toggleNodeExpand(e){this.mindMap.execCommand("SET_NODE_EXPAND",e,!e.getData("expand"))}setNodeText(e,t,i,r){i=i===void 0?e.getData("richText"):i,this.setNodeDataRender(e,{text:t,richText:i,resetRichText:r})}setNodeImage(e,t){const{url:i,title:r,width:s,height:a,custom:o=!1}=t||{url:"",title:"",width:0,height:0,custom:!1};this.setNodeDataRender(e,{image:i,imageTitle:r||"",imageSize:{width:s,height:a,custom:o}})}setNodeIcon(e,t){this.setNodeDataRender(e,{icon:t})}setNodeHyperlink(e,t,i=""){this.setNodeDataRender(e,{hyperlink:t,hyperlinkTitle:i})}setNodeNote(e,t){this.setNodeDataRender(e,{note:t})}setNodeAttachment(e,t,i=""){this.setNodeDataRender(e,{attachmentUrl:t,attachmentName:i})}setNodeTag(e,t){this.setNodeDataRender(e,{tag:t})}insertFormula(e,t=[]){if(!this.hasRichTextPlugin()||!this.mindMap.formula)return;t=Mt(t),(t.length>0?t:this.activeNodeList).forEach(r=>{this.mindMap.formula.insertFormulaToNode(r,e)})}addGeneralization(e,t=!0){if(this.activeNodeList.length<=0)return;const i=this.activeNodeList.filter(c=>!c.isRoot&&!c.isGeneralization&&!c.checkHasSelfGeneralization()),r=x0(i);if(r.length<=0)return;const s=this.hasRichTextPlugin(),{focusNewNode:a,inserting:o}=this.getNewNodeBehavior(t,r.length>1);let l=!1;const h=e&&e.richText;r.forEach(c=>{const d={inserting:o,...e||{text:this.mindMap.opt.defaultGeneralizationText},range:c.range||null,uid:$t(),richText:s,isActive:a};s&&!h&&(d.resetRichText=s);let f=c.node.getData("generalization");if(f=f?Array.isArray(f)?f:[f]:[],c.range){if(!!f.find(u=>u.range&&u.range[0]===c.range[0]&&u.range[1]===c.range[1]))return;f.push(d)}else f.push(d);l=!0,this.mindMap.execCommand("SET_NODE_DATA",c.node,{generalization:f}),c.node.setData({expand:!0})}),l&&(a&&this.clearActiveNodeList(),this.mindMap.render(()=>{this.mindMap.render()}))}removeGeneralization(){this.activeNodeList.length<=0||(this.activeNodeList.forEach(e=>{e.checkHasGeneralization()&&this.mindMap.execCommand("SET_NODE_DATA",e,{generalization:null})}),this.mindMap.render(),this.closeHighlightNode())}setNodeCustomPosition(e,t=void 0,i=void 0){[e].forEach(s=>{this.mindMap.execCommand("SET_NODE_DATA",s,{customLeft:t,customTop:i})})}resetLayout(){Le(this.root,null,e=>{e.customLeft=void 0,e.customTop=void 0,this.mindMap.execCommand("SET_NODE_DATA",e,{customLeft:void 0,customTop:void 0}),this.mindMap.render()},null,!0,0,0)}setNodeShape(e,t){if(!t||!T0.includes(t))return;[e].forEach(r=>{this.setNodeStyle(r,"shape",t)})}goTargetNode(e,t=()=>{}){let i=typeof e=="string"?e:e.getData("uid");i&&this.expandToNodeUid(i,()=>{let r=this.findNodeByUid(i);r&&(r.active(),this.moveNodeToCenter(r),t(r))})}setNodeData(e,t){Object.keys(t).forEach(i=>{e.nodeData.data[i]=t[i]})}setNodeDataRender(e,t,i=!1){if(this.mindMap.execCommand("SET_NODE_DATA",e,t),g0(t)){this.mindMap.emit("node_tree_render_end");return}this.reRenderNodeCheckChange(e,i)}reRenderNodeCheckChange(e,t){e.reRender()?t||this.mindMap.render():this.mindMap.emit("node_tree_render_end")}moveNodeToCenter(e,t){let{resetScaleOnMoveNodeToCenter:i}=this.mindMap.opt;t!==void 0&&(i=t);let{transform:r,state:s}=this.mindMap.view.getTransformData(),{left:a,top:o,width:l,height:h}=e;i||(a*=r.scaleX,o*=r.scaleY,l*=r.scaleX,h*=r.scaleY);let c=this.mindMap.width/2,d=this.mindMap.height/2,f=a+l/2,m=o+h/2,u=c-s.x,g=d-s.y,p=u-f,x=g-m;this.mindMap.view.translateX(p),this.mindMap.view.translateY(x),i&&this.mindMap.view.setScale(1)}setRootNodeCenter(){this.moveNodeToCenter(this.root)}expandToNodeUid(e,t=()=>{}){if(!this.renderTree){t();return}let i=[],r=!1;const s={};kl(this.renderTree,(o,l)=>{if(o.data.uid===e)return i=l?[...s[l.data.uid],l]:[],"stop";if(_s(o.data).forEach(c=>{c.uid===e&&(i=l?[...s[l.data.uid],l,o]:[],r=!0)}),r)return"stop";s[o.data.uid]=l?[...s[l.data.uid],l]:[]});let a=!1;if(i.forEach(o=>{o.data.expand||(a=!0,o.data.expand=!0)}),r){const o=i[i.length-1];o&&Le(o,null,l=>{l.data.expand||(a=!0,l.data.expand=!0)})}a?this.mindMap.render(t):t()}findNodeByUid(e){if(!this.root)return;let t=null;return Le(this.root,null,i=>{if(i.getData("uid")===e)return t=i,!0;let r=!1;if((i._generalizationList||[]).forEach(s=>{s.generalizationNode.getData("uid")===e&&(t=s.generalizationNode,r=!0)}),r)return!0}),t}highlightNode(e,t,i){if(this.isRendering)return;i={stroke:"rgb(94, 200, 248)",fill:"transparent",...i||{}},this.highlightBoxNode?this.highlightBoxNodeStyle&&(this.highlightBoxNodeStyle.stroke!==i.stroke||this.highlightBoxNodeStyle.fill!==i.fill)&&this.highlightBoxNode.stroke({color:i.stroke||"transparent"}).fill({color:i.fill||"transparent"}):this.highlightBoxNode=new Cn().stroke({color:i.stroke||"transparent"}).fill({color:i.fill||"transparent"}),this.highlightBoxNodeStyle={...i};let r=1/0,s=1/0,a=-1/0,o=-1/0;t?e.children.slice(t[0],t[1]+1).forEach(h=>{h.left<r&&(r=h.left),h.top<s&&(s=h.top);const c=h.left+h.width,d=h.top+h.height;c>a&&(a=c),d>o&&(o=d)}):(r=e.left,s=e.top,a=e.left+e.width,o=e.top+e.height),this.highlightBoxNode.plot([[r,s],[a,s],[a,o],[r,o]]),this.mindMap.otherDraw.add(this.highlightBoxNode)}closeHighlightNode(){this.highlightBoxNode&&this.highlightBoxNode.remove()}hasRichTextPlugin(){return!!this.mindMap.richText}}const un={default:Al},ia={Backspace:8,Tab:9,Enter:13,Shift:16,Control:17,Alt:18,CapsLock:20,Esc:27,Spacebar:32,PageUp:33,PageDown:34,End:35,Home:36,Insert:45,Left:37,Up:38,Right:39,Down:40,Del:46,NumLock:144,Cmd:91,CmdFF:224,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"`":192,"=":187,"-":189,"/":191,".":190};for(let n=0;n<=9;n++)ia[n]=n+48;"abcdefghijklmnopqrstuvwxyz".split("").forEach((n,e)=>{ia[n]=e+65});const on=ia;class Z3{constructor(e){this.opt=e,this.mindMap=e.mindMap,this.shortcutMap={},this.shortcutMapCache={},this.isPause=!1,this.isInSvg=!1,this.bindEvent()}extendKeyMap(e,t){on[e]=t}removeKeyMap(e){typeof on[e]<"u"&&delete on[e]}pause(){this.isPause=!0}recovery(){this.isPause=!1}save(){Object.keys(this.shortcutMapCache).length>0||(this.shortcutMapCache=this.shortcutMap,this.shortcutMap={})}restore(){Object.keys(this.shortcutMapCache).length<=0||(this.shortcutMap=this.shortcutMapCache,this.shortcutMapCache={})}bindEvent(){this.onKeydown=this.onKeydown.bind(this),this.mindMap.on("svg_mouseenter",()=>{this.isInSvg=!0}),this.mindMap.on("svg_mouseleave",()=>{this.mindMap.renderer.textEdit.isShowTextEdit()||this.mindMap.associativeLine&&this.mindMap.associativeLine.showTextEdit||(this.isInSvg=!1)}),window.addEventListener("keydown",this.onKeydown),this.mindMap.on("beforeDestroy",()=>{this.unBindEvent()})}unBindEvent(){window.removeEventListener("keydown",this.onKeydown)}defaultEnableCheck(e){const t=e.target;return t===document.body||t.classList.contains(T.EDIT_NODE_CLASS.SMM_NODE_EDIT_WRAP)||t.classList.contains(T.EDIT_NODE_CLASS.RICH_TEXT_EDIT_WRAP)||t.classList.contains(T.EDIT_NODE_CLASS.ASSOCIATIVE_LINE_TEXT_EDIT_WRAP)}onKeydown(e){const{enableShortcutOnlyWhenMouseInSvg:t,beforeShortcutRun:i,customCheckEnableShortcut:r}=this.mindMap.opt;(typeof r=="function"?r:this.defaultEnableCheck)(e)&&(this.isPause||t&&!this.isInSvg||Object.keys(this.shortcutMap).forEach(a=>{if(this.checkKey(e,a)){if(this.checkKey(e,"Control+v")||(e.stopPropagation(),e.preventDefault()),typeof i=="function"&&i(a,[...this.mindMap.renderer.activeNodeList]))return;this.shortcutMap[a].forEach(o=>{o()})}}))}checkKey(e,t){let i=this.getOriginEventCodeArr(e),r=this.getKeyCodeArr(t);if(i.length!==r.length)return!1;for(let s=0;s<i.length;s++){let a=r.findIndex(o=>o===i[s]);if(a===-1)return!1;r.splice(a,1)}return!0}getOriginEventCodeArr(e){let t=[];return(e.ctrlKey||e.metaKey)&&t.push(on.Control),e.altKey&&t.push(on.Alt),e.shiftKey&&t.push(on.Shift),t.includes(e.keyCode)||t.push(e.keyCode),t}hasCombinationKey(e){return e.ctrlKey||e.metaKey||e.altKey||e.shiftKey}getKeyCodeArr(e){let t=e.split(/\s*\+\s*/),i=[];return t.forEach(r=>{i.push(on[r])}),i}addShortcut(e,t){e.split(/\s*\|\s*/).forEach(i=>{this.shortcutMap[i]?this.shortcutMap[i].push(t):this.shortcutMap[i]=[t]})}removeShortcut(e,t){e.split(/\s*\|\s*/).forEach(i=>{if(this.shortcutMap[i])if(t){let r=this.shortcutMap[i].findIndex(s=>s===t);r!==-1&&this.shortcutMap[i].splice(r,1)}else this.shortcutMap[i]=[],delete this.shortcutMap[i]})}getShortcutFn(e){let t=[];return e.split(/\s*\|\s*/).forEach(i=>{t=this.shortcutMap[i]||[]}),t}}const Q3="0.13.0",J3={version:Q3};class e2{constructor(e={}){this.opt=e,this.mindMap=e.mindMap,this.commands={},this.history=[],this.activeHistoryIndex=0,this.registerShortcutKeys(),this.originAddHistory=this.addHistory.bind(this),this.addHistory=na(this.addHistory,this.mindMap.opt.addHistoryTime,this),this.isPause=!1}pause(){this.isPause=!0}recovery(){this.isPause=!1}clearHistory(){this.history=[],this.activeHistoryIndex=0,this.mindMap.emit("back_forward",0,0)}registerShortcutKeys(){this.mindMap.keyCommand.addShortcut("Control+z",()=>{this.mindMap.execCommand("BACK")}),this.mindMap.keyCommand.addShortcut("Control+y",()=>{this.mindMap.execCommand("FORWARD")})}exec(e,...t){if(this.commands[e]){if(this.commands[e].forEach(i=>{i(...t)}),this.mindMap.emit("afterExecCommand",e,...t),["BACK","FORWARD","SET_NODE_ACTIVE","CLEAR_ACTIVE_NODE"].includes(e))return;this.addHistory()}}add(e,t){this.commands[e]?this.commands[e].push(t):this.commands[e]=[t]}remove(e,t){if(this.commands[e])if(!t)this.commands[e]=[],delete this.commands[e];else{let i=this.commands[e].find(r=>r===t);i!==-1&&this.commands[e].splice(i,1)}}addHistory(){if(this.mindMap.opt.readonly||this.isPause)return;const e=this.history.length>0?this.history[this.activeHistoryIndex]:null,t=this.getCopyData();e!==t&&(e&&JSON.stringify(e)===JSON.stringify(t)||(this.emitDataUpdatesEvent(e,t),this.history=this.history.slice(0,this.activeHistoryIndex+1),this.history.push(mt(t)),this.history.length>this.mindMap.opt.maxHistoryCount&&this.history.shift(),this.activeHistoryIndex=this.history.length-1,this.mindMap.emit("data_change",t),this.mindMap.emit("back_forward",this.activeHistoryIndex,this.history.length)))}back(e=1){if(!this.mindMap.opt.readonly&&this.activeHistoryIndex-e>=0){const t=this.history[this.activeHistoryIndex];this.activeHistoryIndex-=e,this.mindMap.emit("back_forward",this.activeHistoryIndex,this.history.length);const i=mt(this.history[this.activeHistoryIndex]);return this.emitDataUpdatesEvent(t,i),i}}forward(e=1){if(this.mindMap.opt.readonly)return;let t=this.history.length;if(this.activeHistoryIndex+e<=t-1){const i=this.history[this.activeHistoryIndex];this.activeHistoryIndex+=e,this.mindMap.emit("back_forward",this.activeHistoryIndex,this.history.length);const r=mt(this.history[this.activeHistoryIndex]);return this.emitDataUpdatesEvent(i,r),r}}getCopyData(){if(!this.mindMap.renderer.renderTree)return null;const e=Pl({},this.mindMap.renderer.renderTree,!0);return e.smmVersion=J3.version,e}removeDataUid(e){e=mt(e);let t=i=>{delete i.data.uid,i.children&&i.children.length>0&&i.children.forEach(r=>{t(r)})};return t(e),e}emitDataUpdatesEvent(e,t){try{const i="data_change_detail";if(this.mindMap.event.listenerCount(i)>0&&e&&t){const s=mt(Ta(e)),a=mt(Ta(t)),o=[],l=(h,c)=>(h.children&&h.children.length>0&&h.children.forEach((d,f)=>{h.children[f]=typeof d=="string"?c[d]:c[d.data.uid],l(h.children[f],c)}),h);Object.keys(a).forEach(h=>{s[h]?Ms(s[h],a[h])||o.push({action:"update",oldData:l(s[h],s),data:l(a[h],a)}):o.push({action:"create",data:l(a[h],a)})}),Object.keys(s).forEach(h=>{a[h]||o.push({action:"delete",data:l(s[h],s)})}),this.mindMap.emit(i,o)}}catch(i){this.mindMap.opt.errorHandler(Ln.DATA_CHANGE_DETAIL_EVENT_ERROR,i)}}}class t2{constructor(){this.has={},this.queue=[],this.nextTick=o0(this.flush,this)}push(e,t){if(this.has[e]){this.replaceTask(e,t);return}this.has[e]=!0,this.queue.push({name:e,fn:t}),this.nextTick()}replaceTask(e,t){const i=this.queue.findIndex(r=>r.name===e);i!==-1&&(this.queue[i]={name:e,fn:t})}flush(){let e=this.queue.slice(0);this.queue=[],e.forEach(({name:t,fn:i})=>{this.has[t]=!1,i()})}}const Ba={el:null,data:null,viewData:null,readonly:!1,layout:T.LAYOUT.LOGICAL_STRUCTURE,fishboneDeg:45,theme:"default",themeConfig:{},scaleRatio:.2,translateRatio:1,minZoomRatio:20,maxZoomRatio:400,customCheckIsTouchPad:null,mouseScaleCenterUseMousePosition:!0,maxTag:5,tagPosition:T.TAG_POSITION.RIGHT,expandBtnSize:20,imgTextMargin:5,textContentMargin:2,customNoteContentShow:null,textAutoWrapWidth:500,customHandleMousewheel:null,mousewheelAction:T.MOUSE_WHEEL_ACTION.MOVE,mousewheelMoveStep:100,mousewheelZoomActionReverse:!0,defaultInsertSecondLevelNodeText:"二级节点",defaultInsertBelowSecondLevelNodeText:"分支主题",expandBtnStyle:{color:"#808080",fill:"#fff",fontSize:13,strokeColor:"#333333"},expandBtnIcon:{open:"",close:""},expandBtnNumHandler:null,isShowExpandNum:!0,enableShortcutOnlyWhenMouseInSvg:!0,customCheckEnableShortcut:null,initRootNodePosition:null,nodeTextEditZIndex:3e3,nodeNoteTooltipZIndex:3e3,isEndNodeTextEditOnClickOuter:!0,maxHistoryCount:500,alwaysShowExpandBtn:!1,notShowExpandBtn:!1,iconList:[],maxNodeCacheCount:1e3,fitPadding:50,enableCtrlKeyNodeSelection:!0,useLeftKeySelectionRightKeyDrag:!1,beforeTextEdit:null,isUseCustomNodeContent:!1,customCreateNodeContent:null,customInnerElsAppendTo:null,enableAutoEnterTextEditWhenKeydown:!1,autoEmptyTextWhenKeydownEnterEdit:!1,customHandleClipboardText:null,disableMouseWheelZoom:!1,errorHandler:(n,e)=>{console.error(n,e)},enableDblclickBackToRootNode:!1,hoverRectColor:"rgb(94, 200, 248)",hoverRectPadding:2,selectTextOnEnterEditText:!1,deleteNodeActive:!0,fit:!1,tagsColorMap:{},cooperateStyle:{avatarSize:22,fontSize:12},onlyOneEnableActiveNodeOnCooperate:!1,defaultGeneralizationText:"概要",handleIsSplitByWrapOnPasteCreateNewNode:null,addHistoryTime:100,isDisableDrag:!1,createNewNodeBehavior:T.CREATE_NEW_NODE_BEHAVIOR.DEFAULT,defaultNodeImage:"",isLimitMindMapInCanvas:!1,handleNodePasteImg:null,customCreateNodePath:null,customCreateNodePolygon:null,customTransformNodeLinePath:null,beforeShortcutRun:null,resetScaleOnMoveNodeToCenter:!1,createNodePrefixContent:null,createNodePostfixContent:null,disabledClipboard:!1,customHyperlinkJump:null,openPerformance:!1,performanceConfig:{time:250,padding:100,removeNodeWhenOutCanvas:!0},emptyTextMeasureHeightText:"abc123我和你",openRealtimeRenderOnNodeTextEdit:!1,mousedownEventPreventDefault:!1,onlyPasteTextWhenHasImgAndText:!0,enableDragModifyNodeWidth:!0,minNodeTextModifyWidth:20,maxNodeTextModifyWidth:-1,customHandleLine:null,addHistoryOnInit:!0,noteIcon:{icon:"",style:{}},hyperlinkIcon:{icon:"",style:{}},attachmentIcon:{icon:"",style:{}},selectTranslateStep:3,selectTranslateLimit:20,enableFreeDrag:!1,autoMoveWhenMouseInEdgeOnDrag:!0,dragMultiNodeRectConfig:{width:40,height:20,fill:"rgb(94, 200, 248)"},dragPlaceholderRectFill:"rgb(94, 200, 248)",dragPlaceholderLineConfig:{color:"rgb(94, 200, 248)",width:2},dragOpacityConfig:{cloneNodeOpacity:.5,beingDragNodeOpacity:.3},handleDragCloneNode:null,beforeDragEnd:null,beforeDragStart:null,watermarkConfig:{onlyExport:!1,text:"",lineSpacing:100,textSpacing:100,angle:30,textStyle:{color:"#999",opacity:.5,fontSize:14},belowNode:!1},exportPaddingX:10,exportPaddingY:10,resetCss:`
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
  `,minExportImgCanvasScale:2,addContentToHeader:null,addContentToFooter:null,handleBeingExportSvg:null,maxCanvasSize:16384,defaultAssociativeLineText:"关联",associativeLineIsAlwaysAboveNode:!0,associativeLineInitPointsPosition:{from:"",to:""},enableAdjustAssociativeLinePoints:!0,beforeAssociativeLineConnection:null,disableTouchZoom:!1,minTouchZoomScale:20,maxTouchZoomScale:-1,isLimitMindMapInCanvasWhenHasScrollbar:!0,isOnlySearchCurrentRenderNodes:!1,beforeCooperateUpdate:null,rainbowLinesConfig:{open:!1,colorsList:[]},demonstrateConfig:null,enableEditFormulaInRichTextEdit:!0,katexFontPath:"https://unpkg.com/katex@0.16.11/dist/",getKatexOutputType:null,transformRichTextOnEnterEdit:null,beforeHideRichTextEdit:null,outerFramePaddingX:10,outerFramePaddingY:10,onlyPainterNodeCustomStyles:!1,beforeDeleteNodeImg:null,imgResizeBtnSize:25,minImgResizeWidth:50,minImgResizeHeight:50,maxImgResizeWidthInheritTheme:!1,maxImgResizeWidth:1/0,maxImgResizeHeight:1/0};class je{constructor(e={}){if(je.instanceCount++,this.opt=this.handleOpt(nr(Ba,e)),this.opt.data=this.handleData(this.opt.data),this.el=this.opt.el,!this.el)throw new Error("缺少容器元素el");this.getElRectInfo(),this.initWidth=this.width,this.initHeight=this.height,this.cssEl=null,this.cssTextMap={},this.nodeInnerPrefixList=[],this.initContainer(),this.initTheme(),this.initCache(),this.event=new Ou({mindMap:this}),this.keyCommand=new Z3({mindMap:this}),this.command=new e2({mindMap:this}),this.renderer=new q3({mindMap:this}),this.view=new Ru({mindMap:this}),this.batchExecution=new t2,je.pluginList.forEach(t=>{this.initPlugin(t)}),this.addCss(),this.render(this.opt.fit?()=>this.view.fit():()=>{}),this.opt.addHistoryOnInit&&this.opt.data&&this.command.addHistory()}handleOpt(e){return ga.includes(e.layout)||(e.layout=T.LAYOUT.LOGICAL_STRUCTURE),e.theme=e.theme&&un[e.theme]?e.theme:"default",e}handleData(e){return Mn(e)||Object.keys(e).length<=0?null:(e=mt(e||{}),e.data&&!e.data.expand&&(e.data.expand=!0),e)}initContainer(){const{associativeLineIsAlwaysAboveNode:e}=this.opt;this.el.classList.add("smm-mind-map-container");const t=()=>{this.associativeLineDraw=this.draw.group(),this.associativeLineDraw.addClass("smm-associative-line-container")};this.svg=lt().addTo(this.el).size(this.width,this.height),this.draw=this.svg.group(),this.draw.addClass("smm-container"),this.lineDraw=this.draw.group(),this.lineDraw.addClass("smm-line-container"),e||t(),this.nodeDraw=this.draw.group(),this.nodeDraw.addClass("smm-node-container"),e&&t(),this.otherDraw=this.draw.group(),this.otherDraw.addClass("smm-other-container")}clearDraw(){this.lineDraw.clear(),this.associativeLineDraw.clear(),this.nodeDraw.clear(),this.otherDraw.clear()}appendCss(e,t){this.cssTextMap[e]=t,this.removeCss(),this.addCss()}removeAppendCss(e){this.cssTextMap[e]&&(delete this.cssTextMap[e],this.removeCss(),this.addCss())}joinCss(){return Tu+Object.keys(this.cssTextMap).map(e=>this.cssTextMap[e]).join(`
`)}addCss(){this.cssEl=document.createElement("style"),this.cssEl.type="text/css",this.cssEl.innerHTML=this.joinCss(),document.head.appendChild(this.cssEl)}removeCss(){this.cssEl&&document.head.removeChild(this.cssEl)}render(e,t=""){this.batchExecution.push("render",()=>{this.initTheme(),this.renderer.render(e,t)})}reRender(e,t=""){this.renderer.reRender=!0,this.renderer.clearCache(),this.clearDraw(),this.render(e,t)}getElRectInfo(){if(this.elRect=this.el.getBoundingClientRect(),this.width=this.elRect.width,this.height=this.elRect.height,this.width<=0||this.height<=0)throw new Error("容器元素el的宽高不能为0")}resize(){const e=this.width,t=this.height;this.getElRectInfo(),this.svg.size(this.width,this.height),(e!==this.width||t!==this.height)&&(this.demonstrate?this.demonstrate.isInDemonstrate||this.render():this.render()),this.emit("resize")}on(e,t){this.event.on(e,t)}emit(e,...t){this.event.emit(e,...t)}off(e,t){this.event.off(e,t)}initCache(){this.commonCaches={measureCustomNodeContentSizeEl:null,measureRichtextNodeTextSizeEl:null}}initTheme(){this.themeConfig=Bl(un[this.opt.theme]||un.default,this.opt.themeConfig),Dt.setBackgroundStyle(this.el,this.themeConfig)}setTheme(e,t=!1){this.execCommand("CLEAR_ACTIVE_NODE"),this.opt.theme=e,t||this.render(null,T.CHANGE_THEME),this.emit("view_theme_change",e)}getTheme(){return this.opt.theme}setThemeConfig(e,t=!1){const i=m0(this.themeConfig,e);if(this.opt.themeConfig=e,!t){const r=n0(i);this.render(null,r?"":T.CHANGE_THEME)}}getCustomThemeConfig(){return this.opt.themeConfig}getThemeConfig(e){return e===void 0?this.themeConfig:this.themeConfig[e]}getConfig(e){return e===void 0?this.opt:this.opt[e]}updateConfig(e={}){this.emit("before_update_config",this.opt);const t={...this.opt};this.opt=this.handleOpt(nr.all([Ba,this.opt,e])),this.emit("after_update_config",this.opt,t)}getLayout(){return this.opt.layout}setLayout(e,t=!1){ga.includes(e)||(e=T.LAYOUT.LOGICAL_STRUCTURE),this.opt.layout=e,this.view.reset(),this.renderer.setLayout(),t||this.render(null,T.CHANGE_LAYOUT),this.emit("layout_change",e)}execCommand(...e){this.command.exec(...e)}updateData(e){this.emit("before_update_data",e),this.renderer.setData(e),this.render(),this.command.addHistory(),this.emit("update_data",e)}setData(e){e=this.handleData(e),this.emit("before_set_data",e),this.opt.data=e,this.execCommand("CLEAR_ACTIVE_NODE"),this.command.clearHistory(),this.command.addHistory(),this.renderer.setData(e),this.reRender(()=>{},T.SET_DATA),this.emit("set_data",e)}setFullData(e){e.root&&this.setData(e.root),e.layout&&this.setLayout(e.layout),e.theme&&(e.theme.template&&this.setTheme(e.theme.template),e.theme.config&&this.setThemeConfig(e.theme.config)),e.view&&this.view.setTransformData(e.view)}getData(e){let t=this.command.getCopyData(),i={};return e?i={layout:this.getLayout(),root:t,theme:{template:this.getTheme(),config:this.getCustomThemeConfig()},view:this.view.getTransformData()}:i=t,mt(i)}async export(...e){try{if(!this.doExport)throw new Error("请注册Export插件！");return await this.doExport.export(...e)}catch(t){this.opt.errorHandler(Ln.EXPORT_ERROR,t)}}toPos(e,t){return{x:e-this.elRect.left,y:t-this.elRect.top}}setMode(e){if(![T.MODE.READONLY,T.MODE.EDIT].includes(e))return;const t=e===T.MODE.READONLY;t!==this.opt.readonly&&(t&&(this.renderer.textEdit.isShowTextEdit()&&(this.renderer.textEdit.hideEditTextBox(),this.command.originAddHistory()),this.execCommand("CLEAR_ACTIVE_NODE")),this.opt.readonly=t,!t&&this.command.history.length<=0&&this.command.originAddHistory(),this.emit("mode_change",e))}getSvgData({paddingX:e=0,paddingY:t=0,ignoreWatermark:i=!1,addContentToHeader:r,addContentToFooter:s,node:a}={}){const{watermarkConfig:o,openPerformance:l}=this.opt;l&&this.renderer.forceLoadNode(a);const{cssTextList:h,header:c,headerHeight:d,footer:f,footerHeight:m}=M0({addContentToHeader:r,addContentToFooter:s}),u=this.svg,g=this.draw,p=u.width(),x=u.height(),w=g.transform(),y=this.elRect;g.scale(1/w.scaleX,1/w.scaleY);const C=g.rbox();let E=null;a&&(E=b0(a,C.x,C.y,e,t));const M=0;C.width+=e*2,C.height+=t*2+M+d+m,g.translate(e,t),u.size(C.width,C.height),g.translate(-C.x+y.left,-C.y+y.top);let b=u.clone();const N=this.watermark&&this.watermark.hasWatermark();if(!i&&N){this.watermark.isInExport=!0;const{onlyExport:R}=o;C.width>p||C.height>x?(this.width=C.width,this.height=C.height,this.watermark.onResize(),b=u.clone(),this.width=p,this.height=x,this.watermark.onResize()):R&&(this.watermark.onResize(),b=u.clone()),R&&this.watermark.clear(),this.watermark.isInExport=!1}[this.joinCss(),...h].forEach(R=>{b.add(lt(`<style>${R}</style>`))}),c&&d>0&&(b.findOne(".smm-container").translate(0,d),c.width(C.width),c.y(t),b.add(c,0)),f&&m>0&&(f.width(C.width),f.y(C.height-t-m),b.add(f));const S=u.find("defs"),_=b.find("defs");return S.forEach((R,O)=>{const I=_[O];if(!I)return;const A=R.children(),D=I.children();for(let L=0;L<A.length;L++){const P=A[L],z=D[L];P&&z&&z.attr("id",P.attr("id"))}}),u.size(p,x),g.transform(w),{svg:b,svgHTML:b.svg(),clipData:E,rect:{...C,ratio:C.width/C.height},origWidth:p,origHeight:x,scaleX:w.scaleX,scaleY:w.scaleY}}addPlugin(e,t){je.hasPlugin(e)===-1&&je.usePlugin(e,t),this.initPlugin(e)}removePlugin(e){let t=je.hasPlugin(e);t!==-1&&(je.pluginList.splice(t,1),this[e.instanceName]&&(this[e.instanceName].beforePluginRemove&&this[e.instanceName].beforePluginRemove(),delete this[e.instanceName]))}initPlugin(e){this[e.instanceName]||(this[e.instanceName]=new e({mindMap:this,pluginOpt:e.pluginOpt}))}destroy(){this.emit("beforeDestroy"),this.renderer.textEdit.hideEditTextBox(),this.renderer.textEdit.removeTextEditEl(),[...je.pluginList].forEach(e=>{this[e.instanceName]&&this[e.instanceName].beforePluginDestroy&&this[e.instanceName].beforePluginDestroy(),this[e.instanceName]=null}),this.event.unbind(),this.svg.remove(),Dt.removeBackgroundStyle(this.el),this.el.classList.remove("smm-mind-map-container"),this.el.innerHTML="",this.el=null,this.removeCss(),je.instanceCount--}}je.pluginList=[];je.usePlugin=(n,e={})=>(je.hasPlugin(n)!==-1||(n.pluginOpt=e,je.pluginList.push(n)),je);je.hasPlugin=n=>je.pluginList.findIndex(e=>e===n);je.instanceCount=0;je.defineTheme=(n,e={})=>{if(un[n])return new Error("该主题名称已存在");un[n]=Bl(Al,e)};je.removeTheme=n=>{un[n]&&(un[n]=null)};const Wl=new Map([[0,"NONE"],[1,"AND"],[2,"TRUE"],[3,"ALL"],[4,"ANY"],[8,"P_NONE"],[9,"P_AND"],[10,"P_TRUE"],[11,"P_ALL"],[12,"P_ANY"]]),n2=[{label:"Relation",value:1},{label:"Flow",value:5},{label:"Result",value:6},{label:"None",value:7},{label:"节点ID",value:13}],i2=[...Wl].map(n=>({label:n[1],value:n[0]})),r2=({visible:n,closeModal:e,modalType:t,app:i,iceId:r,selectedNode:s,refresh:a})=>{const[o]=$e.useForm(),[l,h]=v.useState(!1),{data:c,run:d}=ao(u=>Kt.getClass({app:i,type:u}),{manual:!0,refreshDeps:[i]}),f=u=>{[5,6,7].includes(u)&&d(u)},m=async()=>{try{h(!0);const u=await o.validateFields(),g={app:i,iceId:r,editType:t==="exchange"?5:t==="front"?4:1,parentId:s==null?void 0:s.parentId,selectId:s==null?void 0:s.showConf.nodeId,nextId:s==null?void 0:s.nextId,index:s==null?void 0:s.index,nodeType:u.relationType===1?u.nodeType:u.relationType,name:u.name,clazz:u.clazz,field:u.field,relationType:u.relationType,confName:u.confName,confField:u.confField,multiplexIds:u.multiplexIds};await Kt.editConf(g),await new Promise(p=>setTimeout(p,100)),a(),_t.success("success"),e()}catch(u){if(u.errorFields)return;_t.error(u.msg||"server error")}finally{h(!1)}};return B.jsx(Qi,{onCancel:e,title:t==="exchange"?"转换节点":`添加${t==="front"?"前置节点":"子节点"}`,open:n,onOk:m,confirmLoading:l,width:600,afterClose:()=>{o.resetFields()},children:B.jsxs($e,{form:o,labelCol:{span:6},wrapperCol:{span:14},children:[B.jsx($e.Item,{name:"name",label:"名称",children:B.jsx(ti,{})}),B.jsx($e.Item,{name:"relationType",label:"节点类型",rules:[{required:!0,message:"请选择节点类型"}],initialValue:1,children:B.jsx(Tn,{options:n2,onChange:f})}),B.jsx($e.Item,{noStyle:!0,shouldUpdate:(u,g)=>u.relationType!==g.relationType,children:u=>{const g=u.getFieldValue("relationType");return B.jsxs(B.Fragment,{children:[g===1&&B.jsx($e.Item,{name:"nodeType",label:"关系类型",rules:[{required:!0,message:"请选择节点类型"}],initialValue:1,children:B.jsx(Tn,{options:i2})}),[5,6,7].includes(g)&&B.jsxs(B.Fragment,{children:[B.jsx($e.Item,{name:"confName",label:"叶子节点",rules:[{required:!0,message:"请选择/输入节点类"}],children:B.jsx(Tn,{showSearch:!0,optionFilterProp:"label",placeholder:"请选择节点类",loading:!c,allowClear:!0,children:c==null?void 0:c.map(p=>B.jsxs(Tn.Option,{value:p.fullName,title:p.fullName,children:[p.fullName.substring(p.fullName.lastIndexOf(".")+1),p.name?`(${p.name})`:""]},p.fullName))})}),B.jsx($e.Item,{name:"confField",label:"配置Json",children:B.jsx(ti.TextArea,{rows:6})})]}),g===13&&B.jsx($e.Item,{name:"multiplexIds",label:"节点ID(逗号分隔)",rules:[{required:!0,message:"节点ID必须填写"}],children:B.jsx(ti,{})})]})}})]})})};class s2{constructor(e){this.mindMap=e,this.autoMoveTimer=null}onMove(e,t,i=()=>{},r=()=>{}){i();let s=this.mindMap.opt.selectTranslateStep,a=this.mindMap.opt.selectTranslateLimit,o=0;e<=this.mindMap.elRect.left+a&&(r("left",s),this.mindMap.view.translateX(s),o++),e>=this.mindMap.elRect.right-a&&(r("right",s),this.mindMap.view.translateX(-s),o++),t<=this.mindMap.elRect.top+a&&(r("top",s),this.mindMap.view.translateY(s),o++),t>=this.mindMap.elRect.bottom-a&&(r("bottom",s),this.mindMap.view.translateY(-s),o++),o>0&&this.startAutoMove(e,t,i,r)}startAutoMove(e,t,i,r){this.autoMoveTimer=setTimeout(()=>{this.onMove(e,t,i,r)},20)}clearAutoMoveTimer(){clearTimeout(this.autoMoveTimer)}}class Vl extends en{constructor({mindMap:e}){super(e.renderer),this.mindMap=e,this.autoMove=new s2(e),this.reset(),this.bindEvent()}reset(){this.isDragging=!1,this.mousedownNode=null,this.beingDragNodeList=[],this.nodeList=[],this.overlapNode=null,this.prevNode=null,this.nextNode=null,this.drawTransform=null,this.clone=null,this.placeholder=null,this.placeholderWidth=50,this.placeholderHeight=10,this.placeHolderLine=null,this.placeHolderExtraLines=[],this.offsetX=0,this.offsetY=0,this.isMousedown=!1,this.mouseDownX=0,this.mouseDownY=0,this.mouseMoveX=0,this.mouseMoveY=0,this.checkDragOffset=10,this.minOffset=10}bindEvent(){this.onNodeMousedown=this.onNodeMousedown.bind(this),this.onMousemove=this.onMousemove.bind(this),this.onMouseup=this.onMouseup.bind(this),this.checkOverlapNode=na(this.checkOverlapNode,300,this),this.mindMap.on("node_mousedown",this.onNodeMousedown),this.mindMap.on("mousemove",this.onMousemove),this.mindMap.on("node_mouseup",this.onMouseup),this.mindMap.on("mouseup",this.onMouseup)}unBindEvent(){this.mindMap.off("node_mousedown",this.onNodeMousedown),this.mindMap.off("mousemove",this.onMousemove),this.mindMap.off("node_mouseup",this.onMouseup),this.mindMap.off("mouseup",this.onMouseup)}onNodeMousedown(e,t){if(this.mindMap.opt.readonly||t.which!==1||e.isGeneralization||e.isRoot)return;this.isMousedown=!0,this.mousedownNode=e;const{x:i,y:r}=this.mindMap.toPos(t.clientX,t.clientY);this.mouseDownX=i,this.mouseDownY=r}onMousemove(e){if(this.mindMap.opt.readonly||!this.isMousedown)return;e.preventDefault();const{x:t,y:i}=this.mindMap.toPos(e.clientX,e.clientY);this.mouseMoveX=t,this.mouseMoveY=i,!(!this.isDragging&&Math.abs(t-this.mouseDownX)<=this.checkDragOffset&&Math.abs(i-this.mouseDownY)<=this.checkDragOffset)&&(this.mindMap.emit("node_dragging",this.mousedownNode),this.handleStartMove(),this.onMove(t,i,e))}async onMouseup(e){if(!this.isMousedown)return;const{autoMoveWhenMouseInEdgeOnDrag:t,enableFreeDrag:i,beforeDragEnd:r}=this.mindMap.opt;t&&this.mindMap.select&&this.autoMove.clearAutoMoveTimer(),this.isMousedown=!1,this.beingDragNodeList.forEach(l=>{l.setOpacity(1),l.showChildren(),l.endDrag()}),this.removeCloneNode();let s=this.overlapNode?this.overlapNode.getData("uid"):"",a=this.prevNode?this.prevNode.getData("uid"):"",o=this.nextNode?this.nextNode.getData("uid"):"";if(this.isDragging&&typeof r=="function"&&await r({overlapNodeUid:s,prevNodeUid:a,nextNodeUid:o,beingDragNodeList:[...this.beingDragNodeList]})){this.reset();return}if(this.overlapNode)this.removeNodeActive(this.overlapNode),this.mindMap.execCommand("MOVE_NODE_TO",this.beingDragNodeList,this.overlapNode);else if(this.prevNode)this.removeNodeActive(this.prevNode),this.mindMap.execCommand("INSERT_AFTER",this.beingDragNodeList,this.prevNode);else if(this.nextNode)this.removeNodeActive(this.nextNode),this.mindMap.execCommand("INSERT_BEFORE",this.beingDragNodeList,this.nextNode);else if(this.clone&&i&&this.beingDragNodeList.length===1){let{x:l,y:h}=this.mindMap.toPos(e.clientX-this.offsetX,e.clientY-this.offsetY),{scaleX:c,scaleY:d,translateX:f,translateY:m}=this.drawTransform;l=(l-f)/c,h=(h-m)/d,this.mousedownNode.left=l,this.mousedownNode.top=h,this.mousedownNode.customLeft=l,this.mousedownNode.customTop=h,this.mindMap.execCommand("SET_NODE_CUSTOM_POSITION",this.mousedownNode,l,h),this.mindMap.render()}this.isDragging&&this.mindMap.emit("node_dragend",{overlapNodeUid:s,prevNodeUid:a,nextNodeUid:o}),this.reset()}removeNodeActive(e){e.getData("isActive")&&this.mindMap.execCommand("SET_NODE_ACTIVE",e,!1)}onMove(e,t,i){if(!this.isMousedown||!this.isDragging)return;let{scaleX:r,scaleY:s,translateX:a,translateY:o}=this.drawTransform,l=e-this.offsetX,h=t-this.offsetY;e=(l-a)/r,t=(h-o)/s;let c=this.clone.transform();this.clone.translate(e-c.translateX,t-c.translateY),this.checkOverlapNode(),this.drawTransform=this.mindMap.draw.transform(),this.autoMove.clearAutoMoveTimer(),this.autoMove.onMove(i.clientX,i.clientY)}async handleStartMove(){if(!this.isDragging){let e=this.mousedownNode;this.drawTransform=this.mindMap.draw.transform();let{scaleX:t,scaleY:i,translateX:r,translateY:s}=this.drawTransform;this.offsetX=this.mouseDownX-(e.left*t+r),this.offsetY=this.mouseDownY-(e.top*i+s),e.getData("isActive")?this.beingDragNodeList=Ss(Es(this.mindMap.renderer.activeNodeList.filter(o=>!o.isRoot&&!o.isGeneralization))):this.beingDragNodeList=[e];const{beforeDragStart:a}=this.mindMap.opt;if(typeof a=="function"&&await a([...this.beingDragNodeList]))return;this.nodeTreeToList(),this.createCloneNode(),this.mindMap.execCommand("CLEAR_ACTIVE_NODE"),this.isDragging=!0}}nodeTreeToList(){const e=[];kl(this.mindMap.renderer.root,t=>{this.checkIsInBeingDragNodeList(t)||(e[t.layerIndex]||(e[t.layerIndex]=[]),e[t.layerIndex].push(t))}),this.nodeList=e.reduceRight((t,i)=>[...t,...i],[])}createCloneNode(){if(!this.clone){const{dragMultiNodeRectConfig:e,dragPlaceholderRectFill:t,dragPlaceholderLineConfig:i,dragOpacityConfig:r,handleDragCloneNode:s}=this.mindMap.opt,{width:a,height:o,fill:l}=e,h=this.beingDragNodeList[0],c=h.style.merge("lineColor",!0);if(this.beingDragNodeList.length>1)this.clone=this.mindMap.otherDraw.rect().size(a,o).radius(o/2).fill({color:l||c}),this.offsetX=a/2,this.offsetY=o/2;else{this.clone=h.group.clone();const d=this.clone.findOne(".smm-expand-btn");d&&d.remove(),this.mindMap.otherDraw.add(this.clone),typeof s=="function"&&s(this.clone)}this.clone.opacity(r.cloneNodeOpacity),this.clone.css("z-index",99999),this.placeholder=this.mindMap.otherDraw.rect().fill({color:t||c}).radius(5),this.placeHolderLine=this.mindMap.otherDraw.path().stroke({color:i.color||c,width:i.width}).fill({color:"none"}),this.beingDragNodeList.forEach(d=>{d.setOpacity(r.beingDragNodeOpacity),d.hideChildren(),d.startDrag()})}}removeCloneNode(){this.clone&&(this.clone.remove(),this.placeholder.remove(),this.placeHolderLine.remove(),this.removeExtraLines())}removeExtraLines(){this.placeHolderExtraLines.forEach(e=>{e.remove()}),this.placeHolderExtraLines=[]}checkOverlapNode(){if(!this.drawTransform||!this.placeholder)return;const{LOGICAL_STRUCTURE:e,LOGICAL_STRUCTURE_LEFT:t,MIND_MAP:i,ORGANIZATION_STRUCTURE:r,CATALOG_ORGANIZATION:s,TIMELINE:a,TIMELINE2:o,VERTICAL_TIMELINE:l,FISHBONE:h}=T.LAYOUT;this.overlapNode=null,this.prevNode=null,this.nextNode=null,this.placeholder.size(0,0),this.placeHolderLine.hide(),this.removeExtraLines(),this.nodeList.forEach(c=>{if(c.getData("isActive")&&this.mindMap.execCommand("SET_NODE_ACTIVE",c,!1),!(this.overlapNode||this.prevNode&&this.nextNode))switch(this.mindMap.opt.layout){case e:case t:this.handleLogicalStructure(c);break;case i:this.handleMindMap(c);break;case r:this.handleOrganizationStructure(c);break;case s:this.handleCatalogOrganization(c);break;case a:this.handleTimeLine(c);break;case o:this.handleTimeLine2(c);break;case l:this.handleLogicalStructure(c);break;case h:this.handleFishbone(c);break;default:this.handleLogicalStructure(c)}}),this.overlapNode&&this.handleOverlapNode()}handleOverlapNode(){const{LOGICAL_STRUCTURE:e,LOGICAL_STRUCTURE_LEFT:t,MIND_MAP:i,ORGANIZATION_STRUCTURE:r,CATALOG_ORGANIZATION:s,TIMELINE:a,TIMELINE2:o,VERTICAL_TIMELINE:l,FISHBONE:h}=T.LAYOUT,{LEFT:c,TOP:d,RIGHT:f,BOTTOM:m}=T.LAYOUT_GROW_DIR,u=this.overlapNode.layerIndex,g=this.overlapNode.children,p=this.mindMap.renderer.layout.getMarginX(u+1),x=this.mindMap.renderer.layout.getMarginY(u+1),w=this.placeholderWidth/2,y=this.placeholderHeight/2;let C="",E="",M="",b=!1,N=!1;if(g.length>0){const S=g[g.length-1],_=this.getNodeRect(S);switch(C=this.getNewChildNodeDir(S),this.mindMap.opt.layout){case e:case i:E=C===c?_.originRight-this.placeholderWidth:_.originLeft,M=_.originBottom+this.minOffset-y;break;case t:E=_.originRight-this.placeholderWidth,M=_.originBottom+this.minOffset-y;break;case r:b=!0,E=_.originRight+this.minOffset-y,M=_.originTop;break;case s:u===0?(b=!0,E=_.originRight+this.minOffset-y,M=_.originTop):(E=_.originLeft,M=_.originBottom+this.minOffset-y);break;case a:u===0?(b=!0,E=_.originRight+this.minOffset-y,M=_.originTop+_.originHeight/2-w):(E=_.originLeft,M=_.originBottom+this.minOffset-y);break;case o:u===0?(b=!0,E=_.originRight+this.minOffset-y,M=_.originTop+_.originHeight/2-w):(E=_.originLeft,u===1?M=C===d?_.originTop-this.placeholderHeight-this.minOffset+y:_.originBottom+this.minOffset-y:M=_.originBottom+this.minOffset-y);break;case l:u===0?(E=_.originLeft+_.originWidth/2-w,M=_.originBottom+this.minOffset-y):(E=C===f?_.originLeft:_.originRight-this.placeholderWidth,M=_.originBottom+this.minOffset-y);break;case h:u<=1?(N=!0,this.mindMap.execCommand("SET_NODE_ACTIVE",this.overlapNode,!0)):(E=_.originLeft,M=C===d?_.originBottom+this.minOffset-y:_.originTop-this.placeholderHeight-this.minOffset+y);break}}else{const S=this.getNodeRect(this.overlapNode);switch(C=this.getNewChildNodeDir(this.overlapNode),this.mindMap.opt.layout){case e:case i:E=C===f?S.originRight+p:S.originLeft-this.placeholderWidth-p,M=S.originTop+(S.originHeight-this.placeholderHeight)/2;break;case t:E=S.originLeft-this.placeholderWidth-p,M=S.originTop+(S.originHeight-this.placeholderHeight)/2;break;case r:b=!0,E=S.originLeft+(S.originWidth-this.placeholderHeight)/2,M=S.originBottom+p;break;case s:u===0&&(b=!0),E=S.originLeft+S.originWidth*.5,M=S.originBottom+p;break;case a:u===0&&(b=!0),E=S.originLeft+S.originWidth*.5,M=S.originBottom+x;break;case o:u===0&&(b=!0),E=S.originLeft+S.originWidth*.5,u===1?M=C===d?S.originTop-this.placeholderHeight-p:S.originBottom+p:M=S.originBottom+p;break;case l:u===0&&(b=!0),E=C===f?S.originRight+p:S.originLeft-this.placeholderWidth-p,M=S.originTop+S.originHeight/2-y;break;case h:u<=1?(N=!0,this.mindMap.execCommand("SET_NODE_ACTIVE",this.overlapNode,!0)):(E=S.originLeft+S.originWidth*.5,M=C===m?S.originTop-this.placeholderHeight-this.minOffset+y:S.originBottom+this.minOffset-y);break}}N||this.setPlaceholderRect({x:E,y:M,dir:C,rotate:b})}getNewChildNodeDir(e){const{LOGICAL_STRUCTURE:t,LOGICAL_STRUCTURE_LEFT:i,MIND_MAP:r,TIMELINE2:s,VERTICAL_TIMELINE:a,FISHBONE:o}=T.LAYOUT;switch(this.mindMap.opt.layout){case t:return T.LAYOUT_GROW_DIR.RIGHT;case i:return T.LAYOUT_GROW_DIR.LEFT;case r:case s:case a:case o:return e.dir;default:return""}}handleVerticalCheck(e,t,i=!1){const{layout:r}=this.mindMap.opt,{LAYOUT:s,LAYOUT_GROW_DIR:a}=T,{VERTICAL_TIMELINE:o,FISHBONE:l}=s,{BOTTOM:h,LEFT:c}=a,d=this.mouseMoveX,f=this.mouseMoveY,m=this.getNodeRect(e),u=this.getNewChildNodeDir(e),g=e.layerIndex;(i||r===l&&u===h&&g>=3)&&(t=t.reverse());let p=m.originHeight/4,{prevBrotherOffset:x,nextBrotherOffset:w}=this.getNodeDistanceToSiblingNode(t,e,m,"v");if(m.left<=d&&m.right>=d){if(!this.overlapNode&&!this.prevNode&&!this.nextNode&&!e.isRoot){let y=w>0?f>m.bottom&&f<=m.bottom+w:f>=m.bottom-p&&f<=m.bottom,C=x>0?f<m.top&&f>=m.top-x:f>=m.top&&f<=m.top+p;const{scaleY:E}=this.drawTransform;let M=u===c?m.originRight-this.placeholderWidth:m.originLeft,b=!1;switch(r){case o:g===1&&(M=m.originLeft+m.originWidth/2-this.placeholderWidth/2);break}if(y){i?this.nextNode=e:this.prevNode=e;let N=m.originBottom+w/E-this.placeholderHeight/2;switch(r){case l:g===2&&(b=!0,N=m.originBottom+this.minOffset-this.placeholderHeight/2);break}this.setPlaceholderRect({x:M,y:N,dir:u,notRenderLine:b})}else if(C){i?this.prevNode=e:this.nextNode=e;let N=m.originTop-this.placeholderHeight-x/E+this.placeholderHeight/2;switch(r){case l:g===2&&(b=!0,N=m.originTop-this.placeholderHeight-this.minOffset+this.placeholderHeight/2);break}this.setPlaceholderRect({x:M,y:N,dir:u,notRenderLine:b})}}this.checkIsOverlap({node:e,dir:"v",prevBrotherOffset:x,nextBrotherOffset:w,size:p,pos:f,nodeRect:m})}}handleHorizontalCheck(e,t){const{layout:i}=this.mindMap.opt,{LAYOUT:r}=T,{FISHBONE:s,TIMELINE:a,TIMELINE2:o}=r;let l=this.mouseMoveX,h=this.mouseMoveY,c=this.getNodeRect(e),d=c.originWidth/4,{prevBrotherOffset:f,nextBrotherOffset:m}=this.getNodeDistanceToSiblingNode(t,e,c,"h");if(c.top<=h&&c.bottom>=h){if(!this.overlapNode&&!this.prevNode&&!this.nextNode&&!e.isRoot){let u=m>0?l<c.right+m&&l>=c.right:l<=c.right&&l>=c.right-d,g=f>0?l>c.left-f&&l<=c.left:l<=c.left+d&&l>=c.left;const{scaleX:p}=this.drawTransform,x=e.layerIndex;let w=c.originTop,y=!1;switch(i){case a:case o:w=c.originTop+c.originHeight/2-this.placeholderWidth/2;break;case s:x===1&&(y=!0,w=c.originTop+c.originHeight/2-this.placeholderWidth/2);break}u?(this.prevNode=e,this.setPlaceholderRect({x:c.originRight+m/p-this.placeholderHeight/2,y:w,rotate:!0,notRenderLine:y})):g&&(this.nextNode=e,this.setPlaceholderRect({x:c.originLeft-this.placeholderHeight-f/p+this.placeholderHeight/2,y:w,rotate:!0,notRenderLine:y}))}this.checkIsOverlap({node:e,dir:"h",prevBrotherOffset:f,nextBrotherOffset:m,size:d,pos:l,nodeRect:c})}}getNodeDistanceToSiblingNode(e,t,i,r){const{TOP:s,LEFT:a,BOTTOM:o,RIGHT:l}=T.LAYOUT_GROW_DIR;let{scaleX:h,scaleY:c}=this.drawTransform,d=r==="v"?s:a,f=r==="v"?o:l,m=r==="v"?c:h,u=this.minOffset*m,g=Je(t,e),p=null,x=null;g!==-1&&(g-1>=0&&(p=e[g-1]),g+1<=e.length-1&&(x=e[g+1]));let w=0;if(p){let C=this.getNodeRect(p);w=i[d]-C[f],w=w>=u?w/2:0}else w=u;let y=0;return x?(y=this.getNodeRect(x)[d]-i[f],y=y>=u?y/2:0):y=u,{prevBrother:p,prevBrotherOffset:w,nextBrother:x,nextBrotherOffset:y}}setPlaceholderRect({x:e,y:t,dir:i,rotate:r,notRenderLine:s}){let a=this.placeholderWidth,o=this.placeholderHeight;if(r){const f=a;a=o,o=f}if(this.placeholder.size(a,o).move(e,t),s)return;const{dragPlaceholderLineConfig:l}=this.mindMap.opt;let h=null,c=null;this.overlapNode?(h=this.overlapNode,c=this.overlapNode):(h=this.prevNode||this.nextNode,c=h.parent),c=c.fakeClone(),h=h.fakeClone();const d=this.beingDragNodeList[0].fakeClone();d.dir=i,d.left=e,d.top=t,d.width=a,d.height=o,c.children=[d],c._lines=[],this.placeHolderLine.show(),this.mindMap.renderer.layout.renderLine(c,[this.placeHolderLine],(...f)=>{},h.style.getStyle("lineStyle",!0)),this.placeHolderExtraLines=[...c._lines],this.placeHolderExtraLines.forEach(f=>{this.mindMap.otherDraw.add(f),f.stroke({color:l.color,width:l.width}).fill({color:"none"})})}checkIsOverlap({node:e,dir:t,prevBrotherOffset:i,nextBrotherOffset:r,size:s,pos:a,nodeRect:o}){const{TOP:l,LEFT:h,BOTTOM:c,RIGHT:d}=T.LAYOUT_GROW_DIR;let f=t==="v"?l:h,m=t==="v"?c:d;!this.overlapNode&&!this.prevNode&&!this.nextNode&&o[f]+(i>0?0:s)<=a&&o[m]-(r>0?0:s)>=a&&(this.overlapNode=e)}handleLogicalStructure(e){const t=this.commonGetNodeCheckList(e);this.handleVerticalCheck(e,t)}handleMindMap(e){const t=e.parent?e.parent.children.filter(i=>{let r=!0;return e.layerIndex===1&&(r=i.dir===e.dir),r&&!this.checkIsInBeingDragNodeList(i)}):[];this.handleVerticalCheck(e,t)}handleOrganizationStructure(e){const t=this.commonGetNodeCheckList(e);this.handleHorizontalCheck(e,t)}handleCatalogOrganization(e){const t=this.commonGetNodeCheckList(e);e.layerIndex===1?this.handleHorizontalCheck(e,t):this.handleVerticalCheck(e,t)}handleTimeLine(e){let t=this.commonGetNodeCheckList(e);e.layerIndex===1?this.handleHorizontalCheck(e,t):this.handleVerticalCheck(e,t)}handleTimeLine2(e){let t=this.commonGetNodeCheckList(e);e.layerIndex===1?this.handleHorizontalCheck(e,t):e.dir===T.LAYOUT_GROW_DIR.TOP&&e.layerIndex===2?this.handleVerticalCheck(e,t,!0):this.handleVerticalCheck(e,t)}handleFishbone(e){let t=e.parent?e.parent.children.filter(i=>i.layerIndex>1&&!this.checkIsInBeingDragNodeList(i)):[];e.layerIndex===1?this.handleHorizontalCheck(e,t):e.dir===T.LAYOUT_GROW_DIR.TOP&&e.layerIndex===2?this.handleVerticalCheck(e,t,!0):this.handleVerticalCheck(e,t)}commonGetNodeCheckList(e){return e.parent?[...e.parent.children].filter(t=>!this.checkIsInBeingDragNodeList(t)):[]}getNodeRect(e){let{scaleX:t,scaleY:i,translateX:r,translateY:s}=this.drawTransform,{left:a,top:o,width:l,height:h}=e,c=l,d=h,f=a,m=o,u=o+h,g=a+l,p=(a+l)*t+r,x=(o+h)*i+s;return a=a*t+r,o=o*i+s,{left:a,top:o,right:p,bottom:x,originWidth:c,originHeight:d,originLeft:f,originTop:m,originBottom:u,originRight:g}}checkIsInBeingDragNodeList(e){return!!this.beingDragNodeList.find(t=>t.uid===e.uid||t.isAncestor(e))}beforePluginRemove(){this.unBindEvent()}beforePluginDestroy(){this.unBindEvent()}}Vl.instanceName="drag";const a2=n=>{if(!(n!=null&&n.length))return{data:{id:"root",text:"Empty",expanded:!0,isroot:!0,direction:2},children:[]};const e=(i,r=0)=>{if(!i)return null;const s={data:{id:i.showConf.uniqueKey,text:`${i.showConf.labelName}`,expanded:!0,direction:2,isroot:i.isRoot,showConf:i.showConf,parentId:i.parentId,nextId:i.nextId,index:i.index,timeType:i.timeType,start:i.start,end:i.end,sonIds:i.sonIds,forwardId:i.forwardId,isForward:i.isForward,forward:i.forward,color:i.isForward?"#f50":void 0,borderColor:i.isForward?"#f50":void 0},children:[]};if(Array.isArray(i.children)){const a=i.children.map(o=>e(o,r+1)).filter(o=>o!==null);a.length>0&&s.children.push(...a)}return s};return e(n[0])},Ya=n=>{if(!(n!=null&&n.nodeData))return;const{data:e}=n.nodeData;if(!e)return;const{showConf:t,isForward:i,isRoot:r,parentId:s,index:a,timeType:o,start:l,end:h,nextId:c,forwardId:d}=e;return{showConf:t,isForward:i,isRoot:r,parentId:s,index:a,timeType:o,start:l,end:h,nextId:c,forwardId:d,key:t==null?void 0:t.uniqueKey,text:t==null?void 0:t.labelName,children:[]}},o2=({treeList:n,refresh:e,setSelectedNode:t,selectedNode:i,app:r,iceId:s,address:a})=>{const o=v.useRef(null),l=v.useRef(null),[h,c]=v.useState({visible:!1,modalType:"child"});v.useEffect(()=>{(n==null?void 0:n.length)>0&&!i&&t(n[0])},[n]);const d=f=>{Qi.confirm({title:`确认删除<${f.showConf.labelName}>节点吗？`,onOk:async()=>{try{console.log(f),await Kt.editConf({app:r,iceId:s,editType:3,selectId:f.showConf.nodeId,parentId:f.parentId,nextId:f.nextId,index:f.index}),e(),_t.success("success")}catch(m){_t.error(m.msg||"server error")}}})};return v.useEffect(()=>{if(!l.current||!(n!=null&&n.length))return;const f=()=>{if(l.current){const{width:g,height:p}=l.current.getBoundingClientRect();g>0&&p>0&&o.current&&o.current.resize(g,p)}},m=a2(n),u={backgroundColor:"#fafafa",lineWidth:1,lineColor:"#959da5",generalizationLineWidth:1,generalizationLineColor:"#959da5",root:{shape:"rectangle",marginX:20,marginY:0,fillColor:"#86b4da",fontFamily:"微软雅黑, Microsoft YaHei",color:"#000000",fontSize:14,fontWeight:400,borderWidth:2,borderColor:"#c7ccd1",borderStyle:"solid",borderRadius:4,padding:[15,15,15,15]},second:{shape:"rectangle",marginX:20,marginY:15,fillColor:"#fff",fontFamily:"微软雅黑, Microsoft YaHei",color:"#333",fontSize:14,fontWeight:400,borderWidth:1,borderColor:"#c7ccd1",borderStyle:"solid",borderRadius:4,padding:[10,10,10,10]},node:{shape:"rectangle",marginX:20,marginY:15,fillColor:"#fff",fontFamily:"微软雅黑, Microsoft YaHei",color:"#333",fontSize:14,fontWeight:400,borderWidth:1,borderColor:"#c7ccd1",borderStyle:"solid",borderRadius:4,padding:[10,10,10,10]}};return je.usePlugin(Vl),o.current=new je({el:l.current,data:m,layout:"logicalStructure",direction:2,view:{zoom:.8},draggable:a==="server",mousewheelZoom:!0,mouseSelectionShow:!0,readonly:a!=="server",beforeTextEdit:()=>!1,beforeDragEnd:({overlapNodeUid:g})=>{if(a!=="server")return!0;const p=o.current.renderer.findNodeByUid(g);return p?!![5,6,7].includes(p.getData("showConf").nodeType):!1},themeConfig:u}),o.current.on("node_tree_render_end",async()=>{o.current&&(await new Promise(p=>requestAnimationFrame(p)),o.current.view.translateXTo(-400),o.current.view.translateYTo(-50),["Tab","Enter","Shift+Tab","Control+↑","Control+↓","Control+G","/","Delete","Backspace","Shift+Backspace","Control+C","Control+X","Control+V","F2","Shift+Enter","Control+Z","Control+Y","Control+A","Control+L"].forEach(p=>{o.current.keyCommand.removeShortcut(p)}))}),o.current.on("node_click",g=>{const p=Ya(g);p&&t(p)}),o.current.on("node_mouseenter",(g,p)=>{if(a!=="server")return;const x=p.target,w=document.querySelectorAll(".node-buttons"),y=document.querySelectorAll(".hover-area");if(w.forEach(I=>{x.contains(I)||I.remove()}),y.forEach(I=>{x.contains(I)||I.remove()}),x.querySelector(".node-buttons"))return;const E=g.nodeData.data,M=E==null?void 0:E.showConf,b=[];if(Wl.get(M==null?void 0:M.nodeType)&&b.push({type:"add-child",title:"添加子节点",path:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z",fill:"#1677ff"}),E.forward||b.push({type:"add-forward",title:"添加前置节点",path:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z",fill:"#ff4d4f"}),b.push({type:"exchange",title:"转换节点",path:"M847.9 592H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h605.2L612.9 851c-4.1 5.2-.4 13 6.3 13h72.5c4.9 0 9.5-2.2 12.6-6.1l168.8-214.1c16.5-21 1.6-51.8-25.2-51.8zM872 356H266.8l144.3-183c4.1-5.2.4-13-6.3-13h-72.5c-4.9 0-9.5 2.2-12.6-6.1L150.9 380.2c-16.5 21-1.6 51.8 25.2 51.8h696c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z",fill:"#1677ff"}),E.isroot||b.push({type:"delete",title:"删除节点",path:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z",fill:"#ff4d4f"}),b.length===0)return;const N=document.createElementNS("http://www.w3.org/2000/svg","rect");N.setAttribute("class","hover-area"),N.setAttribute("x","0"),N.setAttribute("y",`${-g.height/2+10}`),N.setAttribute("width",`${g.width}`),N.setAttribute("height",`${g.height+40}`),N.setAttribute("fill","transparent"),N.setAttribute("pointer-events","all");const S=document.createElementNS("http://www.w3.org/2000/svg","g");S.setAttribute("class","node-buttons");const _=b.length*24,R=(g.width-_)/2;S.setAttribute("transform",`translate(${R}, ${-g.height/2})`);const O=document.createElementNS("http://www.w3.org/2000/svg","rect");O.setAttribute("width",`${_}`),O.setAttribute("height","20"),O.setAttribute("fill","transparent"),O.setAttribute("rx","2"),O.setAttribute("ry","2"),S.appendChild(O),b.forEach((I,A)=>{const D=document.createElementNS("http://www.w3.org/2000/svg","g");D.setAttribute("class",`tree-btn ${I.type}`),D.setAttribute("transform",`translate(${A*24}, 0)`),D.style.cursor="pointer";const L=document.createElementNS("http://www.w3.org/2000/svg","rect");L.setAttribute("width","20"),L.setAttribute("height","20"),L.setAttribute("rx","2"),L.setAttribute("ry","2"),L.setAttribute("fill","transparent"),D.appendChild(L);const P=document.createElementNS("http://www.w3.org/2000/svg","path");P.setAttribute("d",I.path),P.setAttribute("transform","scale(0.016)"),P.setAttribute("fill",I.fill),D.appendChild(P);const z=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");z.setAttribute("width","200"),z.setAttribute("height","25"),z.setAttribute("x","-90"),z.setAttribute("y","-22");const H=document.createElement("div");H.setAttribute("style",`
          visibility: hidden;
          background-color: rgba(0, 0, 0, 0.75);
          color: white;
          padding: 1px 6px;
          border-radius: 3px;
          font-size: 12px;
          position: absolute;
          white-space: nowrap;
          transition: visibility 0s linear 500ms;
        `),H.textContent=I.title,z.appendChild(H),D.addEventListener("mouseenter",()=>{const k=(20-H.offsetWidth)/2+100;z.setAttribute("x",`${k}`),setTimeout(()=>{D.matches(":hover")&&(H.style.visibility="visible")},500)}),D.addEventListener("mouseleave",()=>{H.style.visibility="hidden"}),D.appendChild(z),D.addEventListener("mousedown",Y=>{Y.stopPropagation();const $=Ya(g);$&&(t($),I.type==="add-child"?c({visible:!0,modalType:"child"}):I.type==="add-forward"?c({visible:!0,modalType:"front"}):I.type==="exchange"?c({visible:!0,modalType:"exchange"}):I.type==="delete"&&($.isRoot||d($)))}),S.appendChild(D)}),x.appendChild(N),x.appendChild(S),N.addEventListener("mouseenter",()=>{S&&(S.style.display="block")}),N.addEventListener("mouseleave",I=>{const A=N.getBoundingClientRect(),D=I.clientX,L=I.clientY;(D<A.left||D>A.right||L<A.top||L>A.bottom)&&S&&(S.style.display="none")})}),o.current.on("afterExecCommand",(g,...p)=>{var x,w;if(console.log("afterExecCommand",g,p),g==="MOVE_NODE_TO"||g==="INSERT_AFTER"||g==="INSERT_BEFORE"){const[y,C]=p;if(!y||!y.length||!C)return;const M=y[0].getData(),b=C.getData();if(!M||!b)return;const N=g==="MOVE_NODE_TO",S=g==="INSERT_BEFORE",_=g==="INSERT_AFTER";if(!![5,6,7].includes(b.showConf.nodeType)&&N)return;const O={app:r,iceId:s,editType:6,parentId:M.parentId,selectId:(x=M.showConf)==null?void 0:x.nodeId,index:M.index,moveTo:N?void 0:b.isForward?0:S?b.index:_?b.index+1:void 0,moveToParentId:N?(w=b.showConf)==null?void 0:w.nodeId:b.isForward?b.nextId:b.parentId,nextId:M.nextId};Kt.editConf(O).then(()=>{e(),_t.success("success")}).catch(I=>{_t.error(I.msg||"server error"),e()})}}),window.addEventListener("resize",f),f(),()=>{window.removeEventListener("resize",f),o.current&&o.current.destroy()}},[n]),B.jsxs(B.Fragment,{children:[B.jsx("div",{ref:l,className:"mind-map-container"}),B.jsx(r2,{selectedNode:i,refresh:e,app:r,iceId:s,address:a,closeModal:()=>{c(f=>({...f,visible:!1}))},...h})]})},Wa=({onChange:n,value:e,...t})=>{const i=(r,s)=>{n&&n(r==null?void 0:r.set("millisecond",0).valueOf(),s)};return B.jsx(Yn,{format:"YYYY-MM-DD HH:mm:ss",...t,onChange:i,value:e&&dt(e)})},{Panel:l2}=co,h2=[{label:"无时间限制",value:1},{label:"大于开始时间",value:5},{label:"小于结束时间",value:6},{label:"开始与结束时间之内",value:7}],Va=({item:n})=>B.jsxs("div",{className:"filed-item",children:[B.jsxs("div",{className:"desc-item",hidden:!n.name,children:["名称：",B.jsx(Rt,{title:n.name,children:B.jsx("span",{className:"ellipsis-text",children:n.name})})]}),B.jsxs("div",{className:"desc-item",hidden:!n.desc,children:["描述：",B.jsx(Rt,{title:n.desc,children:B.jsx("span",{className:"ellipsis-text",children:n.desc})})]}),B.jsxs("div",{className:"desc-item",children:["字段：",B.jsx(Rt,{title:n.field,children:B.jsx("span",{className:"ellipsis-text",children:n.field})})]}),B.jsxs("div",{className:"desc-item",children:["类型：",B.jsx(Rt,{title:n.type,children:B.jsx("span",{className:"ellipsis-text",children:n.type.substring(n.type.lastIndexOf(".")+1)})})]}),B.jsxs("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[B.jsx($e.Item,{label:"值",name:["fields",n.field,"value"],style:{flex:1,margin:0,marginRight:16},children:B.jsx(so,{autoSize:{minRows:1,maxRows:5}})}),B.jsx($e.Item,{name:["fields",n.field,"isNull"],valuePropName:"checked",initialValue:n.valueNull,style:{margin:0,minWidth:"fit-content"},children:B.jsx(ss,{children:"null"})})]})]}),c2=({selectedNode:n,address:e,app:t,iceId:i,refresh:r})=>{var f,m,u,g,p,x,w,y,C,E,M,b,N,S,_,R,O,I,A,D,L,P,z,H,Y,$,k,W,j,re,J,G,ee,oe;const[s,a]=v.useState(!1),[o]=$e.useForm(),[l,h]=v.useState(!1),c=()=>{var K,ie,Q,X,te,ae,q,le,Ce,_e;if(!n)return;let se={};(Q=(ie=(K=n==null?void 0:n.showConf)==null?void 0:K.nodeInfo)==null?void 0:ie.iceFields)==null||Q.forEach(ge=>{se[ge.field]={value:ge.value===null?"":ge.type==="java.lang.String"?ge.value:JSON.stringify(ge.value),isNull:ge.valueNull}}),(ae=(te=(X=n==null?void 0:n.showConf)==null?void 0:X.nodeInfo)==null?void 0:te.hideFields)==null||ae.forEach(ge=>{se[ge.field]={value:ge.value===null?"":ge.type==="java.lang.String"?ge.value:JSON.stringify(ge.value),isNull:ge.valueNull}}),o.setFieldsValue({name:(q=n==null?void 0:n.showConf)==null?void 0:q.nodeName,timeType:(n==null?void 0:n.timeType)||1,start:n==null?void 0:n.start,end:n==null?void 0:n.end,debug:((le=n==null?void 0:n.showConf)==null?void 0:le.debug)??!0,inverse:((Ce=n==null?void 0:n.showConf)==null?void 0:Ce.inverse)??!1,confField:(_e=n==null?void 0:n.showConf)==null?void 0:_e.confField,fields:se})};v.useEffect(()=>{c()},[n]);const d=async()=>{var se,K;if(n)try{h(!0);const ie=await o.validateFields(),{confField:Q,fields:X,...te}=ie,ae={};Object.entries(X||{}).forEach(le=>{(le[1].value||le[1].isNull)&&(ae[le[0]]=le[1].isNull?null:le[1].value)});const q={app:t,iceId:i,editType:2,selectId:(se=n==null?void 0:n.showConf)==null?void 0:se.nodeId,parentId:n==null?void 0:n.parentId,nextId:n==null?void 0:n.nextId,...n==null?void 0:n.showConf,...te,confName:void 0,confField:(K=n==null?void 0:n.showConf)!=null&&K.haveMeta?JSON.stringify(ae):Q};await Kt.editConf(q),r(),_t.success("success"),a(!1)}catch(ie){if(ie.errorFields)return;_t.error(ie.msg||"server error")}finally{h(!1)}};return n?B.jsxs($e,{className:"form-wrap",form:o,disabled:!!e&&e!=="server"||!s,children:[B.jsx($e.Item,{label:"名称",name:"name",children:B.jsx(ti,{maxLength:50})}),B.jsx($e.Item,{label:"节点名称",hidden:(((m=(f=n==null?void 0:n.showConf)==null?void 0:f.nodeInfo)==null?void 0:m.name)||"")=="",children:B.jsx(Rt,{title:(g=(u=n==null?void 0:n.showConf)==null?void 0:u.nodeInfo)==null?void 0:g.name,children:B.jsx("span",{className:"ellipsis-text",children:(x=(p=n==null?void 0:n.showConf)==null?void 0:p.nodeInfo)==null?void 0:x.name})})}),B.jsx($e.Item,{label:"节点描述",hidden:(((y=(w=n==null?void 0:n.showConf)==null?void 0:w.nodeInfo)==null?void 0:y.desc)||"")=="",children:B.jsx(Rt,{title:(E=(C=n==null?void 0:n.showConf)==null?void 0:C.nodeInfo)==null?void 0:E.desc,children:B.jsx("span",{className:"ellipsis-text",children:(b=(M=n==null?void 0:n.showConf)==null?void 0:M.nodeInfo)==null?void 0:b.desc})})}),B.jsx($e.Item,{label:"节点类",hidden:![5,6,7].includes(((N=n==null?void 0:n.showConf)==null?void 0:N.nodeType)||0),children:B.jsx(Rt,{title:(S=n==null?void 0:n.showConf)==null?void 0:S.confName,children:B.jsx("span",{className:"ellipsis-text",children:(_=n==null?void 0:n.showConf)==null?void 0:_.confName})})}),B.jsx($e.Item,{label:"节点ID",children:B.jsx(Rt,{title:(R=n==null?void 0:n.showConf)==null?void 0:R.nodeId,children:B.jsx("span",{className:"ellipsis-text",children:(O=n==null?void 0:n.showConf)==null?void 0:O.nodeId})})}),B.jsx($e.Item,{label:"生效时间",name:"timeType",required:!0,children:B.jsx(Tn,{options:h2})}),B.jsx($e.Item,{noStyle:!0,shouldUpdate:(se,K)=>se.timeType!==K.timeType,children:()=>B.jsxs(B.Fragment,{children:[B.jsx($e.Item,{label:"开始时间",name:"start",dependencies:["timeType"],hidden:[1,6].includes(o.getFieldValue("timeType")),rules:[{required:[5,7].includes(o.getFieldValue("timeType")),validator:(se,K)=>K||!se.required?Promise.resolve():Promise.reject(new Error("请选择开始时间"))}],children:B.jsx(Wa,{showTime:!0})}),B.jsx($e.Item,{label:"结束时间",name:"end",dependencies:["timeType"],hidden:[1,5].includes(o.getFieldValue("timeType")),rules:[{required:[6,7].includes(o.getFieldValue("timeType")),validator:(se,K)=>K||!se.required?Promise.resolve():Promise.reject(new Error("请选择结束时间"))}],children:B.jsx(Wa,{showTime:!0})})]})}),B.jsxs("div",{style:{display:"flex",gap:"50px"},children:[B.jsx($e.Item,{label:"记录",name:"debug",valuePropName:"checked",initialValue:(I=n==null?void 0:n.showConf)==null?void 0:I.debug,children:B.jsx(ss,{})}),![0,7].includes(((A=n==null?void 0:n.showConf)==null?void 0:A.nodeType)||0)&&B.jsx($e.Item,{label:"反转",name:"inverse",valuePropName:"checked",initialValue:(D=n==null?void 0:n.showConf)==null?void 0:D.inverse,children:B.jsx(ss,{})})]}),[5,6,7].includes(((L=n==null?void 0:n.showConf)==null?void 0:L.nodeType)||0)?(P=n==null?void 0:n.showConf)!=null&&P.haveMeta?(((H=(z=n==null?void 0:n.showConf)==null?void 0:z.nodeInfo)==null?void 0:H.iceFields)||[]).length>0||((($=(Y=n==null?void 0:n.showConf)==null?void 0:Y.nodeInfo)==null?void 0:$.hideFields)||[]).length>0?B.jsxs(B.Fragment,{children:[B.jsx(fi.Title,{level:5,children:"属性配置"}),(((W=(k=n==null?void 0:n.showConf)==null?void 0:k.nodeInfo)==null?void 0:W.iceFields)||[]).map((se,K)=>B.jsx(Va,{item:se},K)),(((re=(j=n==null?void 0:n.showConf)==null?void 0:j.nodeInfo)==null?void 0:re.hideFields)||[]).length>0?B.jsx(co,{defaultActiveKey:(((G=(J=n==null?void 0:n.showConf)==null?void 0:J.nodeInfo)==null?void 0:G.iceFields)||[]).length>0?["0"]:["1"],children:B.jsx(l2,{header:"其他属性",forceRender:!0,children:(((oe=(ee=n==null?void 0:n.showConf)==null?void 0:ee.nodeInfo)==null?void 0:oe.hideFields)||[]).map((se,K)=>B.jsx(Va,{item:se},K))},"1")}):null]}):null:B.jsx($e.Item,{label:"配置Json",name:"confField",children:B.jsx(ti.TextArea,{rows:8})}):null,B.jsx("div",{className:"btn-wrap",style:{marginTop:"16px"},children:s?B.jsxs(oo,{children:[B.jsx(Xt,{onClick:()=>a(!1),children:"取消"}),B.jsx(Xt,{type:"primary",loading:l,onClick:d,children:"保存"})]}):B.jsx(Xt,{type:"primary",onClick:()=>a(!0),disabled:!!e&&e!=="server",children:"编辑"})})]}):null},C2=()=>{const n=gh(),e=new URLSearchParams(n.search),t=e.get("iceId")||"",i=e.get("app")||"",[r,s]=v.useState(),[a,o]=v.useState("server"),[l,h]=v.useState(!1),[c,d]=v.useState(!1),[f,m]=v.useState(!1),{data:u,run:g}=ao(()=>Kt.details({app:i,iceId:t,address:a}),{refreshDeps:[i,t,a]}),p=v.useCallback(b=>b.map(N=>{const{children:S=[],showConf:_,...R}=N;return{...R,showConf:_,key:`${_==null?void 0:_.uniqueKey}`,children:p([...N.forward?[{...N.forward,isForward:!0}]:[],...S]),title:(_==null?void 0:_.labelName)||""}}),[]),x=v.useMemo(()=>{const b=u==null?void 0:u.root;return b?p([{...b,isRoot:!0}]):[]},[u==null?void 0:u.root]),w=v.useMemo(()=>[{label:"Server",value:"server"},...((u==null?void 0:u.registerClients)||[]).map(b=>({label:b,value:b}))],[u==null?void 0:u.registerClients]),y=()=>{d(!0)},C=()=>{h(!0)},E=()=>{Qi.confirm({title:"确认发布所有变更吗？",onOk:async()=>{try{await Kt.release({app:i,iceId:t}),g(),_t.success("success")}catch(b){_t.error(b.msg||"server error")}}})},M=()=>{Qi.confirm({title:"确认清除所有变更吗？",onOk:async()=>{try{await Kt.updateClean({app:i,iceId:t}),g(),_t.success("success")}catch(b){_t.error(b.msg||"server error")}}})};return B.jsxs("div",{className:"detail-wrap",children:[B.jsx("div",{className:"operation-wrap",children:B.jsxs(oo,{children:[B.jsx(Tn,{value:a,onChange:o,style:{width:200},options:w}),B.jsx(Xt,{onClick:C,children:"导入"}),B.jsx(Xt,{onClick:y,children:"导出"}),B.jsx(Xt,{onClick:E,children:"发布"}),B.jsx(Xt,{onClick:M,children:"清除"})]})}),B.jsx(o2,{treeList:x,refresh:g,setSelectedNode:s,selectedNode:r,app:i,iceId:t,address:a}),B.jsxs("div",{className:`edit-wrap ${f?"collapsed":""}`,children:[B.jsx("div",{className:"edit-collapse-btn",onClick:()=>m(!f),children:f?"<":">"}),!f&&B.jsx(c2,{app:i,iceId:t,address:a,refresh:g,selectedNode:r})]}),B.jsx(Rh,{open:l,onCancel:()=>h(!1),onOk:()=>{h(!1),g()},app:i}),B.jsx(Ih,{open:c,onCancel:()=>d(!1),onOk:()=>{d(!1)},app:i,iceId:t})]})};export{C2 as default};
